!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,(function(){var e,t,r,o,a,i,n,s=s||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},a=o.lib={},i=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},n=a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,a=e.sigBytes;if(this.clamp(),o%4)for(var i=0;a>i;i++){var n=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=n<<24-(o+i)%4*8}else for(i=0;a>i;i+=4)t[o+i>>>2]=r[i>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,o=[],a=function(t){t=t;var r=987654321,o=4294967295;return function(){var a=((r=36969*(65535&r)+(r>>16)&o)<<16)+(t=18e3*(65535&t)+(t>>16)&o)&o;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},i=0;t>i;i+=4){var s=a(4294967296*(r||e.random()));r=987654071*s(),o.push(4294967296*s()|0)}return new n.init(o,t)}}),s=o.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],a=0;r>a;a++){var i=t[a>>>2]>>>24-a%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;t>o;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new n.init(r,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],a=0;r>a;a++){var i=t[a>>>2]>>>24-a%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;t>o;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new n.init(r,t)}},p=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},_=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new n.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,o=r.words,a=r.sigBytes,i=this.blockSize,s=a/(4*i),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,c=e.min(4*l,a);if(l){for(var p=0;l>p;p+=i)this._doProcessBlock(o,p);var _=o.splice(0,l);r.sigBytes-=c}return new n.init(_,c)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(a.Hasher=_.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new u.HMAC.init(e,r).finalize(t)}}}),o.algo={});return o}(Math);return function(){function e(e,t,o){for(var a=[],i=0,n=0;t>n;n++)if(n%4){var s=o[e.charCodeAt(n-1)]<<n%4*2,l=o[e.charCodeAt(n)]>>>6-n%4*2;a[i>>>2]|=(s|l)<<24-i%4*8,i++}return r.create(a,i)}var t=s,r=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,o=this._map;e.clamp();for(var a=[],i=0;r>i;i+=3)for(var n=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&r>i+.75*s;s++)a.push(o.charAt(n>>>6*(3-s)&63));var l=o.charAt(64);if(l)for(;a.length%4;)a.push(l);return a.join("")},parse:function(t){var r=t.length,o=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var i=0;i<o.length;i++)a[o.charCodeAt(i)]=i}var n=o.charAt(64);if(n){var s=t.indexOf(n);-1!==s&&(r=s)}return e(t,r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,r,o,a,i,n){var s=e+(t&r|~t&o)+a+n;return(s<<i|s>>>32-i)+t}function r(e,t,r,o,a,i,n){var s=e+(t&o|r&~o)+a+n;return(s<<i|s>>>32-i)+t}function o(e,t,r,o,a,i,n){var s=e+(t^r^o)+a+n;return(s<<i|s>>>32-i)+t}function a(e,t,r,o,a,i,n){var s=e+(r^(t|~o))+a+n;return(s<<i|s>>>32-i)+t}var i=s,n=i.lib,l=n.WordArray,c=n.Hasher,p=i.algo,_=[];!function(){for(var t=0;64>t;t++)_[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=p.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var n=0;16>n;n++){var s=i+n,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var c=this._hash.words,p=e[i+0],u=e[i+1],h=e[i+2],m=e[i+3],d=e[i+4],b=e[i+5],g=e[i+6],y=e[i+7],f=e[i+8],C=e[i+9],T=e[i+10],v=e[i+11],B=e[i+12],S=e[i+13],O=e[i+14],M=e[i+15],w=c[0],R=c[1],x=c[2],N=c[3];w=t(w,R,x,N,p,7,_[0]),N=t(N,w,R,x,u,12,_[1]),x=t(x,N,w,R,h,17,_[2]),R=t(R,x,N,w,m,22,_[3]),w=t(w,R,x,N,d,7,_[4]),N=t(N,w,R,x,b,12,_[5]),x=t(x,N,w,R,g,17,_[6]),R=t(R,x,N,w,y,22,_[7]),w=t(w,R,x,N,f,7,_[8]),N=t(N,w,R,x,C,12,_[9]),x=t(x,N,w,R,T,17,_[10]),R=t(R,x,N,w,v,22,_[11]),w=t(w,R,x,N,B,7,_[12]),N=t(N,w,R,x,S,12,_[13]),x=t(x,N,w,R,O,17,_[14]),w=r(w,R=t(R,x,N,w,M,22,_[15]),x,N,u,5,_[16]),N=r(N,w,R,x,g,9,_[17]),x=r(x,N,w,R,v,14,_[18]),R=r(R,x,N,w,p,20,_[19]),w=r(w,R,x,N,b,5,_[20]),N=r(N,w,R,x,T,9,_[21]),x=r(x,N,w,R,M,14,_[22]),R=r(R,x,N,w,d,20,_[23]),w=r(w,R,x,N,C,5,_[24]),N=r(N,w,R,x,O,9,_[25]),x=r(x,N,w,R,m,14,_[26]),R=r(R,x,N,w,f,20,_[27]),w=r(w,R,x,N,S,5,_[28]),N=r(N,w,R,x,h,9,_[29]),x=r(x,N,w,R,y,14,_[30]),w=o(w,R=r(R,x,N,w,B,20,_[31]),x,N,b,4,_[32]),N=o(N,w,R,x,f,11,_[33]),x=o(x,N,w,R,v,16,_[34]),R=o(R,x,N,w,O,23,_[35]),w=o(w,R,x,N,u,4,_[36]),N=o(N,w,R,x,d,11,_[37]),x=o(x,N,w,R,y,16,_[38]),R=o(R,x,N,w,T,23,_[39]),w=o(w,R,x,N,S,4,_[40]),N=o(N,w,R,x,p,11,_[41]),x=o(x,N,w,R,m,16,_[42]),R=o(R,x,N,w,g,23,_[43]),w=o(w,R,x,N,C,4,_[44]),N=o(N,w,R,x,B,11,_[45]),x=o(x,N,w,R,M,16,_[46]),w=a(w,R=o(R,x,N,w,h,23,_[47]),x,N,p,6,_[48]),N=a(N,w,R,x,y,10,_[49]),x=a(x,N,w,R,O,15,_[50]),R=a(R,x,N,w,b,21,_[51]),w=a(w,R,x,N,B,6,_[52]),N=a(N,w,R,x,m,10,_[53]),x=a(x,N,w,R,T,15,_[54]),R=a(R,x,N,w,u,21,_[55]),w=a(w,R,x,N,f,6,_[56]),N=a(N,w,R,x,M,10,_[57]),x=a(x,N,w,R,g,15,_[58]),R=a(R,x,N,w,S,21,_[59]),w=a(w,R,x,N,d,6,_[60]),N=a(N,w,R,x,v,10,_[61]),x=a(x,N,w,R,h,15,_[62]),R=a(R,x,N,w,C,21,_[63]),c[0]=c[0]+w|0,c[1]=c[1]+R|0,c[2]=c[2]+x|0,c[3]=c[3]+N|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,a=8*t.sigBytes;r[a>>>5]|=128<<24-a%32;var i=e.floor(o/4294967296),n=o;r[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,l=s.words,c=0;4>c;c++){var p=l[c];l[c]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}return s},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});i.MD5=c._createHelper(u),i.HmacMD5=c._createHmacHelper(u)}(Math),t=(e=s).lib,r=t.WordArray,o=t.Hasher,a=e.algo,i=[],n=a.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],a=r[1],n=r[2],s=r[3],l=r[4],c=0;80>c;c++){if(16>c)i[c]=0|e[t+c];else{var p=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=p<<1|p>>>31}var _=(o<<5|o>>>27)+l+i[c];_+=20>c?1518500249+(a&n|~a&s):40>c?1859775393+(a^n^s):60>c?(a&n|a&s|n&s)-1894007588:(a^n^s)-899497514,l=s,s=n,n=a<<30|a>>>2,a=o,o=_}r[0]=r[0]+o|0,r[1]=r[1]+a|0,r[2]=r[2]+n|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(o+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=o._createHelper(n),e.HmacSHA1=o._createHmacHelper(n),function(e){var t=s,r=t.lib,o=r.WordArray,a=r.Hasher,i=t.algo,n=[],l=[];!function(){function t(t){for(var r=e.sqrt(t),o=2;r>=o;o++)if(!(t%o))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var o=2,a=0;64>a;)t(o)&&(8>a&&(n[a]=r(e.pow(o,.5))),l[a]=r(e.pow(o,1/3)),a++),o++}();var c=[],p=i.SHA256=a.extend({_doReset:function(){this._hash=new o.init(n.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],a=r[1],i=r[2],n=r[3],s=r[4],p=r[5],_=r[6],u=r[7],h=0;64>h;h++){if(16>h)c[h]=0|e[t+h];else{var m=c[h-15],d=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,b=c[h-2],g=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;c[h]=d+c[h-7]+g+c[h-16]}var y=o&a^o&i^a&i,f=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),C=u+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&p^~s&_)+l[h]+c[h];u=_,_=p,p=s,s=n+C|0,n=i,i=a,a=o,o=C+(f+y)|0}r[0]=r[0]+o|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+n|0,r[4]=r[4]+s|0,r[5]=r[5]+p|0,r[6]=r[6]+_|0,r[7]=r[7]+u|0},_doFinalize:function(){var t=this._data,r=t.words,o=8*this._nDataBytes,a=8*t.sigBytes;return r[a>>>5]|=128<<24-a%32,r[14+(a+64>>>9<<4)]=e.floor(o/4294967296),r[15+(a+64>>>9<<4)]=o,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(p),t.HmacSHA256=a._createHmacHelper(p)}(Math),function(){function e(e){return e<<8&4278255360|e>>>8&16711935}var t=s,r=t.lib.WordArray,o=t.enc;o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],a=0;r>a;a+=2){var i=t[a>>>2]>>>16-a%4*8&65535;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,o=[],a=0;t>a;a++)o[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return r.create(o,2*t)}},o.Utf16LE={stringify:function(t){for(var r=t.words,o=t.sigBytes,a=[],i=0;o>i;i+=2){var n=e(r[i>>>2]>>>16-i%4*8&65535);a.push(String.fromCharCode(n))}return a.join("")},parse:function(t){for(var o=t.length,a=[],i=0;o>i;i++)a[i>>>1]|=e(t.charCodeAt(i)<<16-i%2*16);return r.create(a,2*o)}}}(),function(){if("function"==typeof ArrayBuffer){var e=s.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,o=[],a=0;r>a;a++)o[a>>>2]|=e[a]<<24-a%4*8;t.call(this,o,r)}else t.apply(this,arguments)}).prototype=e}}(),function(){function e(e,t,r){return e^t^r}function t(e,t,r){return e&t|~e&r}function r(e,t,r){return(e|~t)^r}function o(e,t,r){return e&r|t&~r}function a(e,t,r){return e^(t|~r)}function i(e,t){return e<<t|e>>>32-t}var n=s,l=n.lib,c=l.WordArray,p=l.Hasher,_=n.algo,u=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),m=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),b=c.create([0,1518500249,1859775393,2400959708,2840853838]),g=c.create([1352829926,1548603684,1836072691,2053994217,0]),y=_.RIPEMD160=p.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(n,s){for(var l=0;16>l;l++){var c=s+l,p=n[c];n[c]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}var _,y,f,C,T,v,B,S,O,M,w=this._hash.words,R=b.words,x=g.words,N=u.words,A=h.words,E=m.words,L=d.words;v=_=w[0],B=y=w[1],S=f=w[2],O=C=w[3],M=T=w[4];var P;for(l=0;80>l;l+=1)P=_+n[s+N[l]]|0,P+=16>l?e(y,f,C)+R[0]:32>l?t(y,f,C)+R[1]:48>l?r(y,f,C)+R[2]:64>l?o(y,f,C)+R[3]:a(y,f,C)+R[4],P=(P=i(P|=0,E[l]))+T|0,_=T,T=C,C=i(f,10),f=y,y=P,P=v+n[s+A[l]]|0,P+=16>l?a(B,S,O)+x[0]:32>l?o(B,S,O)+x[1]:48>l?r(B,S,O)+x[2]:64>l?t(B,S,O)+x[3]:e(B,S,O)+x[4],P=(P=i(P|=0,L[l]))+M|0,v=M,M=O,O=i(S,10),S=B,B=P;P=w[1]+f+O|0,w[1]=w[2]+C+M|0,w[2]=w[3]+T+v|0,w[3]=w[4]+_+B|0,w[4]=w[0]+y+S|0,w[0]=P},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,i=a.words,n=0;5>n;n++){var s=i[n];i[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return a},clone:function(){var e=p.clone.call(this);return e._hash=this._hash.clone(),e}});n.RIPEMD160=p._createHelper(y),n.HmacRIPEMD160=p._createHmacHelper(y)}(Math),function(){var e=s,t=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var o=e.blockSize,a=4*o;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),n=this._iKey=t.clone(),s=i.words,l=n.words,c=0;o>c;c++)s[c]^=1549556828,l[c]^=909522486;i.sigBytes=n.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}(),function(){var e=s,t=e.lib,r=t.Base,o=t.WordArray,a=e.algo,i=a.SHA1,n=a.HMAC,l=a.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,a=n.create(r.hasher,e),i=o.create(),s=o.create([1]),l=i.words,c=s.words,p=r.keySize,_=r.iterations;l.length<p;){var u=a.update(t).finalize(s);a.reset();for(var h=u.words,m=h.length,d=u,b=1;_>b;b++){d=a.finalize(d),a.reset();for(var g=d.words,y=0;m>y;y++)h[y]^=g[y]}i.concat(u),c[0]++}return i.sigBytes=4*p,i}});e.PBKDF2=function(e,t,r){return l.create(r).compute(e,t)}}(),function(){var e=s,t=e.lib,r=t.Base,o=t.WordArray,a=e.algo,i=a.MD5,n=a.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,a=r.hasher.create(),i=o.create(),n=i.words,s=r.keySize,l=r.iterations;n.length<s;){c&&a.update(c);var c=a.update(e).finalize(t);a.reset();for(var p=1;l>p;p++)c=a.finalize(c),a.reset();i.concat(c)}return i.sigBytes=4*s,i}});e.EvpKDF=function(e,t,r){return n.create(r).compute(e,t)}}(),function(){var e=s,t=e.lib.WordArray,r=e.algo,o=r.SHA256,a=r.SHA224=o.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),function(e){var t=s,r=t.lib,o=r.Base,a=r.WordArray,i=t.x64={};i.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],o=0;t>o;o++){var i=e[o];r.push(i.high),r.push(i.low)}return a.create(r,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),r=t.length,a=0;r>a;a++)t[a]=t[a].clone();return e}})}(),function(e){var t=s,r=t.lib,o=r.WordArray,a=r.Hasher,i=t.x64.Word,n=t.algo,l=[],c=[],p=[];!function(){for(var e=1,t=0,r=0;24>r;r++){l[e+5*t]=(r+1)*(r+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;5>e;e++)for(t=0;5>t;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,n=0;24>n;n++){for(var s=0,_=0,u=0;7>u;u++){if(1&a){var h=(1<<u)-1;32>h?_^=1<<h:s^=1<<h-32}128&a?a=a<<1^113:a<<=1}p[n]=i.create(s,_)}}();var _=[];!function(){for(var e=0;25>e;e++)_[e]=i.create()}();var u=n.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;25>t;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,o=this.blockSize/2,a=0;o>a;a++){var i=e[t+2*a],n=e[t+2*a+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),(R=r[a]).high^=n,R.low^=i}for(var s=0;24>s;s++){for(var u=0;5>u;u++){for(var h=0,m=0,d=0;5>d;d++){h^=(R=r[u+5*d]).high,m^=R.low}var b=_[u];b.high=h,b.low=m}for(u=0;5>u;u++){var g=_[(u+4)%5],y=_[(u+1)%5],f=y.high,C=y.low;for(h=g.high^(f<<1|C>>>31),m=g.low^(C<<1|f>>>31),d=0;5>d;d++){(R=r[u+5*d]).high^=h,R.low^=m}}for(var T=1;25>T;T++){var v=(R=r[T]).high,B=R.low,S=l[T];if(32>S)h=v<<S|B>>>32-S,m=B<<S|v>>>32-S;else h=B<<S-32|v>>>64-S,m=v<<S-32|B>>>64-S;var O=_[c[T]];O.high=h,O.low=m}var M=_[0],w=r[0];M.high=w.high,M.low=w.low;for(u=0;5>u;u++)for(d=0;5>d;d++){var R=r[T=u+5*d],x=_[T],N=_[(u+1)%5+5*d],A=_[(u+2)%5+5*d];R.high=x.high^~N.high&A.high,R.low=x.low^~N.low&A.low}R=r[0];var E=p[s];R.high^=E.high,R.low^=E.low}},_doFinalize:function(){var t=this._data,r=t.words,a=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;r[a>>>5]|=1<<24-a%32,r[(e.ceil((a+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var n=this._state,s=this.cfg.outputLength/8,l=s/8,c=[],p=0;l>p;p++){var _=n[p],u=_.high,h=_.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(u)}return new o.init(c,s)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),r=0;25>r;r++)t[r]=t[r].clone();return e}});t.SHA3=a._createHelper(u),t.HmacSHA3=a._createHmacHelper(u)}(Math),function(){function e(){return a.create.apply(a,arguments)}var t=s,r=t.lib.Hasher,o=t.x64,a=o.Word,i=o.WordArray,n=t.algo,l=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[];!function(){for(var t=0;80>t;t++)c[t]=e()}();var p=n.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],a=r[1],i=r[2],n=r[3],s=r[4],p=r[5],_=r[6],u=r[7],h=o.high,m=o.low,d=a.high,b=a.low,g=i.high,y=i.low,f=n.high,C=n.low,T=s.high,v=s.low,B=p.high,S=p.low,O=_.high,M=_.low,w=u.high,R=u.low,x=h,N=m,A=d,E=b,L=g,P=y,k=f,I=C,G=T,D=v,U=B,H=S,F=O,z=M,W=w,V=R,j=0;80>j;j++){var J=c[j];if(16>j)var Y=J.high=0|e[t+2*j],Z=J.low=0|e[t+2*j+1];else{var K=c[j-15],X=K.high,Q=K.low,q=(X>>>1|Q<<31)^(X>>>8|Q<<24)^X>>>7,$=(Q>>>1|X<<31)^(Q>>>8|X<<24)^(Q>>>7|X<<25),ee=c[j-2],te=ee.high,re=ee.low,oe=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ae=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ie=c[j-7],ne=ie.high,se=ie.low,le=c[j-16],ce=le.high,pe=le.low;Y=(Y=(Y=q+ne+($>>>0>(Z=$+se)>>>0?1:0))+oe+(ae>>>0>(Z=Z+ae)>>>0?1:0))+ce+(pe>>>0>(Z=Z+pe)>>>0?1:0);J.high=Y,J.low=Z}var _e,ue=G&U^~G&F,he=D&H^~D&z,me=x&A^x&L^A&L,de=N&E^N&P^E&P,be=(x>>>28|N<<4)^(x<<30|N>>>2)^(x<<25|N>>>7),ge=(N>>>28|x<<4)^(N<<30|x>>>2)^(N<<25|x>>>7),ye=(G>>>14|D<<18)^(G>>>18|D<<14)^(G<<23|D>>>9),fe=(D>>>14|G<<18)^(D>>>18|G<<14)^(D<<23|G>>>9),Ce=l[j],Te=Ce.high,ve=Ce.low,Be=W+ye+(V>>>0>(_e=V+fe)>>>0?1:0),Se=ge+de;W=F,V=z,F=U,z=H,U=G,H=D,G=k+(Be=(Be=(Be=Be+ue+(he>>>0>(_e=_e+he)>>>0?1:0))+Te+(ve>>>0>(_e=_e+ve)>>>0?1:0))+Y+(Z>>>0>(_e=_e+Z)>>>0?1:0))+(I>>>0>(D=I+_e|0)>>>0?1:0)|0,k=L,I=P,L=A,P=E,A=x,E=N,x=Be+(be+me+(ge>>>0>Se>>>0?1:0))+(_e>>>0>(N=_e+Se|0)>>>0?1:0)|0}m=o.low=m+N,o.high=h+x+(N>>>0>m>>>0?1:0),b=a.low=b+E,a.high=d+A+(E>>>0>b>>>0?1:0),y=i.low=y+P,i.high=g+L+(P>>>0>y>>>0?1:0),C=n.low=C+I,n.high=f+k+(I>>>0>C>>>0?1:0),v=s.low=v+D,s.high=T+G+(D>>>0>v>>>0?1:0),S=p.low=S+H,p.high=B+U+(H>>>0>S>>>0?1:0),M=_.low=M+z,_.high=O+F+(z>>>0>M>>>0?1:0),R=u.low=R+V,u.high=w+W+(V>>>0>R>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(o+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=r._createHelper(p),t.HmacSHA512=r._createHmacHelper(p)}(),function(){var e=s,t=e.x64,r=t.Word,o=t.WordArray,a=e.algo,i=a.SHA512,n=a.SHA384=i.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=i._createHelper(n),e.HmacSHA384=i._createHmacHelper(n)}(),s.lib.Cipher||function(e){var t=s,r=t.lib,o=r.Base,a=r.WordArray,i=r.BufferedBlockAlgorithm,n=t.enc,l=(n.Utf8,n.Base64),c=t.algo.EvpKDF,p=r.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?f:g}return function(t){return{encrypt:function(r,o,a){return e(o).encrypt(t,r,o,a)},decrypt:function(r,o,a){return e(o).decrypt(t,r,o,a)}}}}()}),_=(r.StreamCipher=p.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),u=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=_.CBC=function(){function e(e,t,r){var o=this._iv;if(o){var a=o;this._iv=undefined}else a=this._prevBlock;for(var i=0;r>i;i++)e[t+i]^=a[i]}var t=u.extend();return t.Encryptor=t.extend({processBlock:function(t,r){var o=this._cipher,a=o.blockSize;e.call(this,t,r,a),o.encryptBlock(t,r),this._prevBlock=t.slice(r,r+a)}}),t.Decryptor=t.extend({processBlock:function(t,r){var o=this._cipher,a=o.blockSize,i=t.slice(r,r+a);o.decryptBlock(t,r),e.call(this,t,r,a),this._prevBlock=i}}),t}(),m=(t.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,o=r-e.sigBytes%r,i=o<<24|o<<16|o<<8|o,n=[],s=0;o>s;s+=4)n.push(i);var l=a.create(n,o);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},d=(r.BlockCipher=p.extend({cfg:p.cfg.extend({mode:h,padding:m}),reset:function(){p.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var o=r.createEncryptor;else{o=r.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==o?this._mode.init(this,t&&t.words):(this._mode=o.call(r,this,t&&t.words),this._mode.__creator=o)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),b=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var o=a.create([1398893684,1701076831]).concat(r).concat(t);else o=t;return o.toString(l)},parse:function(e){var t=l.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var o=a.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return d.create({ciphertext:t,salt:o})}},g=r.SerializableCipher=o.extend({cfg:o.extend({format:b}),encrypt:function(e,t,r,o){o=this.cfg.extend(o);var a=e.createEncryptor(r,o),i=a.finalize(t),n=a.cfg;return d.create({ciphertext:i,key:r,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(r,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,r,o){o||(o=a.random(8));var i=c.create({keySize:t+r}).compute(e,o),n=a.create(i.words.slice(t),4*r);return i.sigBytes=4*t,d.create({key:i,iv:n,salt:o})}},f=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,r,o){var a=(o=this.cfg.extend(o)).kdf.execute(r,e.keySize,e.ivSize);o.iv=a.iv;var i=g.encrypt.call(this,e,t,a.key,o);return i.mixIn(a),i},decrypt:function(e,t,r,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var a=o.kdf.execute(r,e.keySize,e.ivSize,t.salt);return o.iv=a.iv,g.decrypt.call(this,e,t,a.key,o)}})}(),s.mode.CFB=function(){function e(e,t,r,o){var a=this._iv;if(a){var i=a.slice(0);this._iv=void 0}else i=this._prevBlock;o.encryptBlock(i,0);for(var n=0;r>n;n++)e[t+n]^=i[n]}var t=s.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,r){var o=this._cipher,a=o.blockSize;e.call(this,t,r,a,o),this._prevBlock=t.slice(r,r+a)}}),t.Decryptor=t.extend({processBlock:function(t,r){var o=this._cipher,a=o.blockSize,i=t.slice(r,r+a);e.call(this,t,r,a,o),this._prevBlock=i}}),t}(),s.mode.ECB=function(){var e=s.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),s.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,o=4*t,a=o-r%o,i=r+a-1;e.clamp(),e.words[i>>>2]|=a<<24-i%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Iso10126={pad:function(e,t){var r=4*t,o=r-e.sigBytes%r;e.concat(s.lib.WordArray.random(o-1)).concat(s.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Iso97971={pad:function(e,t){e.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(e,t)},unpad:function(e){s.pad.ZeroPadding.unpad(e),e.sigBytes--}},s.mode.OFB=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,a=this._iv,i=this._keystream;a&&(i=this._keystream=a.slice(0),this._iv=void 0),r.encryptBlock(i,0);for(var n=0;o>n;n++)e[t+n]^=i[n]}});return e.Decryptor=t,e}(),s.pad.NoPadding={pad:function(){},unpad:function(){}},function(){var e=s,t=e.lib.CipherParams,r=e.enc.Hex;e.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var o=r.parse(e);return t.create({ciphertext:o})}}}(),function(){var e=s,t=e.lib.BlockCipher,r=e.algo,o=[],a=[],i=[],n=[],l=[],c=[],p=[],_=[],u=[],h=[];!function(){for(var e=[],t=0;256>t;t++)e[t]=128>t?t<<1:t<<1^283;var r=0,s=0;for(t=0;256>t;t++){var m=s^s<<1^s<<2^s<<3^s<<4;m=m>>>8^255&m^99,o[r]=m,a[m]=r;var d=e[r],b=e[d],g=e[b],y=257*e[m]^16843008*m;i[r]=y<<24|y>>>8,n[r]=y<<16|y>>>16,l[r]=y<<8|y>>>24,c[r]=y;y=16843009*g^65537*b^257*d^16843008*r;p[m]=y<<24|y>>>8,_[m]=y<<16|y>>>16,u[m]=y<<8|y>>>24,h[m]=y,r?(r=d^e[e[e[g^d]]],s^=e[e[s]]):r=s=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],d=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,a=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],n=0;a>n;n++)if(r>n)i[n]=t[n];else{var s=i[n-1];n%r?r>6&&n%r==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=m[n/r|0]<<24),i[n]=i[n-r]^s}for(var l=this._invKeySchedule=[],c=0;a>c;c++){n=a-c;if(c%4)s=i[n];else s=i[n-4];l[c]=4>c||4>=n?s:p[o[s>>>24]]^_[o[s>>>16&255]]^u[o[s>>>8&255]]^h[o[255&s]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,n,l,c,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,p,_,u,h,a);r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,o,a,i,n,s){for(var l=this._nRounds,c=e[t]^r[0],p=e[t+1]^r[1],_=e[t+2]^r[2],u=e[t+3]^r[3],h=4,m=1;l>m;m++){var d=o[c>>>24]^a[p>>>16&255]^i[_>>>8&255]^n[255&u]^r[h++],b=o[p>>>24]^a[_>>>16&255]^i[u>>>8&255]^n[255&c]^r[h++],g=o[_>>>24]^a[u>>>16&255]^i[c>>>8&255]^n[255&p]^r[h++],y=o[u>>>24]^a[c>>>16&255]^i[p>>>8&255]^n[255&_]^r[h++];c=d,p=b,_=g,u=y}d=(s[c>>>24]<<24|s[p>>>16&255]<<16|s[_>>>8&255]<<8|s[255&u])^r[h++],b=(s[p>>>24]<<24|s[_>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^r[h++],g=(s[_>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&p])^r[h++],y=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[p>>>8&255]<<8|s[255&_])^r[h++];e[t]=d,e[t+1]=b,e[t+2]=g,e[t+3]=y},keySize:8});e.AES=t._createHelper(d)}(),function(){function e(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function t(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var r=s,o=r.lib,a=o.WordArray,i=o.BlockCipher,n=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],_=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=n.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;56>r;r++){var o=l[r]-1;t[r]=e[o>>>5]>>>31-o%32&1}for(var a=this._subKeys=[],i=0;16>i;i++){var n=a[i]=[],s=p[i];for(r=0;24>r;r++)n[r/6|0]|=t[(c[r]-1+s)%28]<<31-r%6,n[4+(r/6|0)]|=t[28+(c[r+24]-1+s)%28]<<31-r%6;n[0]=n[0]<<1|n[0]>>>31;for(r=1;7>r;r++)n[r]=n[r]>>>4*(r-1)+3;n[7]=n[7]<<5|n[7]>>>27}var _=this._invSubKeys=[];for(r=0;16>r;r++)_[r]=a[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(r,o,a){this._lBlock=r[o],this._rBlock=r[o+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var i=0;16>i;i++){for(var n=a[i],s=this._lBlock,l=this._rBlock,c=0,p=0;8>p;p++)c|=_[p][((l^n[p])&u[p])>>>0];this._lBlock=l,this._rBlock=s^c}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),r[o]=this._lBlock,r[o+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=i._createHelper(h);var m=n.TripleDES=i.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(a.create(e.slice(0,2))),this._des2=h.createEncryptor(a.create(e.slice(2,4))),this._des3=h.createEncryptor(a.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});r.TripleDES=i._createHelper(m)}(),function(){function e(){for(var e=this._S,t=this._i,r=this._j,o=0,a=0;4>a;a++){r=(r+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[r],e[r]=i,o|=e[(e[t]+e[r])%256]<<24-8*a}return this._i=t,this._j=r,o}var t=s,r=t.lib.StreamCipher,o=t.algo,a=o.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,o=this._S=[],a=0;256>a;a++)o[a]=a;a=0;for(var i=0;256>a;a++){var n=a%r,s=t[n>>>2]>>>24-n%4*8&255;i=(i+o[a]+s)%256;var l=o[a];o[a]=o[i],o[i]=l}this._i=this._j=0},_doProcessBlock:function(t,r){t[r]^=e.call(this)},keySize:8,ivSize:0});t.RC4=r._createHelper(a);var i=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});t.RC4Drop=r._createHelper(i)}(),s.mode.CTRGladman=function(){function e(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,o=255&e;255===t?(t=0,255===r?(r=0,255===o?o=0:++o):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=o}else e+=1<<24;return e}function t(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var r=s.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(e,r){var o=this._cipher,a=o.blockSize,i=this._iv,n=this._counter;i&&(n=this._counter=i.slice(0),this._iv=void 0),t(n);var s=n.slice(0);o.encryptBlock(s,0);for(var l=0;a>l;l++)e[r+l]^=s[l]}});return r.Decryptor=o,r}(),function(){function e(){for(var e=this._X,t=this._C,r=0;8>r;r++)i[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0;for(r=0;8>r;r++){var o=e[r]+t[r],a=65535&o,s=o>>>16,l=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);n[r]=l^c}e[0]=n[0]+(n[7]<<16|n[7]>>>16)+(n[6]<<16|n[6]>>>16)|0,e[1]=n[1]+(n[0]<<8|n[0]>>>24)+n[7]|0,e[2]=n[2]+(n[1]<<16|n[1]>>>16)+(n[0]<<16|n[0]>>>16)|0,e[3]=n[3]+(n[2]<<8|n[2]>>>24)+n[1]|0,e[4]=n[4]+(n[3]<<16|n[3]>>>16)+(n[2]<<16|n[2]>>>16)|0,e[5]=n[5]+(n[4]<<8|n[4]>>>24)+n[3]|0,e[6]=n[6]+(n[5]<<16|n[5]>>>16)+(n[4]<<16|n[4]>>>16)|0,e[7]=n[7]+(n[6]<<8|n[6]>>>24)+n[5]|0}var t=s,r=t.lib.StreamCipher,o=t.algo,a=[],i=[],n=[],l=o.Rabbit=r.extend({_doReset:function(){for(var t=this._key.words,r=this.cfg.iv,o=0;4>o;o++)t[o]=16711935&(t[o]<<8|t[o]>>>24)|4278255360&(t[o]<<24|t[o]>>>8);var a=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(o=0;4>o;o++)e.call(this);for(o=0;8>o;o++)i[o]^=a[o+4&7];if(r){var n=r.words,s=n[0],l=n[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),p=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),_=c>>>16|4294901760&p,u=p<<16|65535&c;i[0]^=c,i[1]^=_,i[2]^=p,i[3]^=u,i[4]^=c,i[5]^=_,i[6]^=p,i[7]^=u;for(o=0;4>o;o++)e.call(this)}},_doProcessBlock:function(t,r){var o=this._X;e.call(this),a[0]=o[0]^o[5]>>>16^o[3]<<16,a[1]=o[2]^o[7]>>>16^o[5]<<16,a[2]=o[4]^o[1]>>>16^o[7]<<16,a[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;4>i;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),t[r+i]^=a[i]},blockSize:4,ivSize:2});t.Rabbit=r._createHelper(l)}(),s.mode.CTR=function(){var e=s.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0);var n=i.slice(0);r.encryptBlock(n,0),i[o-1]=i[o-1]+1|0;for(var s=0;o>s;s++)e[t+s]^=n[s]}});return e.Decryptor=t,e}(),function(){function e(){for(var e=this._X,t=this._C,r=0;8>r;r++)i[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0;for(r=0;8>r;r++){var o=e[r]+t[r],a=65535&o,s=o>>>16,l=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);n[r]=l^c}e[0]=n[0]+(n[7]<<16|n[7]>>>16)+(n[6]<<16|n[6]>>>16)|0,e[1]=n[1]+(n[0]<<8|n[0]>>>24)+n[7]|0,e[2]=n[2]+(n[1]<<16|n[1]>>>16)+(n[0]<<16|n[0]>>>16)|0,e[3]=n[3]+(n[2]<<8|n[2]>>>24)+n[1]|0,e[4]=n[4]+(n[3]<<16|n[3]>>>16)+(n[2]<<16|n[2]>>>16)|0,e[5]=n[5]+(n[4]<<8|n[4]>>>24)+n[3]|0,e[6]=n[6]+(n[5]<<16|n[5]>>>16)+(n[4]<<16|n[4]>>>16)|0,e[7]=n[7]+(n[6]<<8|n[6]>>>24)+n[5]|0}var t=s,r=t.lib.StreamCipher,o=t.algo,a=[],i=[],n=[],l=o.RabbitLegacy=r.extend({_doReset:function(){var t=this._key.words,r=this.cfg.iv,o=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],a=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;4>i;i++)e.call(this);for(i=0;8>i;i++)a[i]^=o[i+4&7];if(r){var n=r.words,s=n[0],l=n[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),p=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),_=c>>>16|4294901760&p,u=p<<16|65535&c;a[0]^=c,a[1]^=_,a[2]^=p,a[3]^=u,a[4]^=c,a[5]^=_,a[6]^=p,a[7]^=u;for(i=0;4>i;i++)e.call(this)}},_doProcessBlock:function(t,r){var o=this._X;e.call(this),a[0]=o[0]^o[5]>>>16^o[3]<<16,a[1]=o[2]^o[7]>>>16^o[5]<<16,a[2]=o[4]^o[1]>>>16^o[7]<<16,a[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;4>i;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),t[r+i]^=a[i]},blockSize:4,ivSize:2});t.RabbitLegacy=r._createHelper(l)}(),s.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}},s})),function(e){var t=e.AV={},r={}.hasOwnProperty,o=function(e,t){function o(){this.constructor=e}for(var a in t)r.call(t,a)&&(e[a]=t[a]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},a=[].slice,i=function(e,t){return function(){return e.apply(t,arguments)}},n=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},s=t.Base=function(){function e(){}var t;return t=/\b_super\b/,e.extend=function(e){var r,a,i,s,l,c;if(r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(this),"function"==typeof e)for(i in s=Object.keys(r.prototype),e.call(r,r),e={},l=r.prototype)a=l[i],n.call(s,i)<0&&(e[i]=a);for(i in c=r.__super__,e)"function"==typeof(a=e[i])&&t.test(a)?function(e,t){r.prototype[e]=function(){var r,o;return o=this._super,this._super=c[e],r=t.apply(this,arguments),this._super=o,r}}(i,a):r.prototype[i]=a;return r},e}(),l=t.Bitstream=function(){function e(e){this.stream=e,this.bitPosition=0}return e.prototype.copy=function(){var t;return(t=new e(this.stream.copy())).bitPosition=this.bitPosition,t},e.prototype.offset=function(){return 8*this.stream.offset+this.bitPosition},e.prototype.available=function(e){return this.stream.available((e+8-this.bitPosition)/8)},e.prototype.advance=function(e){var t;return t=this.bitPosition+e,this.stream.advance(t>>3),this.bitPosition=7&t},e.prototype.rewind=function(e){var t;return t=this.bitPosition-e,this.stream.rewind(Math.abs(t>>3)),this.bitPosition=7&t},e.prototype.seek=function(e){var t;return e>(t=this.offset())?this.advance(e-t):t>e?this.rewind(t-e):void 0},e.prototype.align=function(){return 0!==this.bitPosition?(this.bitPosition=0,this.stream.advance(1)):void 0},e.prototype.read=function(e,t){var r,o;if(0===e)return 0;if(8>=(o=e+this.bitPosition))r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-e;else if(16>=o)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-e;else if(24>=o)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-e;else if(32>=o)r=this.stream.peekUInt32()<<this.bitPosition>>>32-e;else{if(!(40>=o))throw new Error("Too many bits!");r=4294967296*this.stream.peekUInt8(0)+(this.stream.peekUInt8(1)<<24>>>0)+(this.stream.peekUInt8(2)<<16)+(this.stream.peekUInt8(3)<<8)+this.stream.peekUInt8(4),r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-e))}return t&&(32>o?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),this.advance(e),r},e.prototype.peek=function(e,t){var r,o;if(0===e)return 0;if(8>=(o=e+this.bitPosition))r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-e;else if(16>=o)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-e;else if(24>=o)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-e;else if(32>=o)r=this.stream.peekUInt32()<<this.bitPosition>>>32-e;else{if(!(40>=o))throw new Error("Too many bits!");r=4294967296*this.stream.peekUInt8(0)+(this.stream.peekUInt8(1)<<24>>>0)+(this.stream.peekUInt8(2)<<16)+(this.stream.peekUInt8(3)<<8)+this.stream.peekUInt8(4),r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-e))}return t&&(32>o?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),r},e.prototype.readLSB=function(e,t){var r,o;if(0===e)return 0;if(e>40)throw new Error("Too many bits!");return o=e+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,o>8&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),o>16&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),o>24&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),o>32&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),o>=32?r%=Math.pow(2,e):r&=(1<<e)-1,t&&(32>o?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),this.advance(e),r},e.prototype.peekLSB=function(e,t){var r,o;if(0===e)return 0;if(e>40)throw new Error("Too many bits!");return o=e+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,o>8&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),o>16&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),o>24&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),o>32&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),o>=32?r%=Math.pow(2,e):r&=(1<<e)-1,t&&(32>o?r>>>e-1&&(r=-1*((1<<e>>>0)-r)):r/Math.pow(2,e-1)|0&&(r=-1*(Math.pow(2,e)-r))),r},e}(),c=t.Buffer=function(){function t(r){var o;if(r instanceof Uint8Array)this.data=r;else if(r instanceof ArrayBuffer||Array.isArray(r)||"number"==typeof r||(null!=(o=e.Buffer)?o.isBuffer(r):void 0))this.data=new Uint8Array(r);else if(r.buffer instanceof ArrayBuffer)this.data=new Uint8Array(r.buffer,r.byteOffset,r.length*r.BYTES_PER_ELEMENT);else{if(!(r instanceof t))throw new Error("Constructing buffer with unknown type.");this.data=r.data}this.length=this.data.length,this.next=null,this.prev=null}var r,o;return t.allocate=function(e){return new t(e)},t.prototype.copy=function(){return new t(new Uint8Array(this.data))},t.prototype.slice=function(e,r){return null==r&&(r=this.length),new t(0===e&&r>=this.length?this.data:this.data.subarray(e,e+r))},r=e.BlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder,o=e.URL||e.webkitURL||e.mozURL,t.makeBlob=function(e,t){var o;null==t&&(t="application/octet-stream");try{return new Blob([e],{type:t})}catch(e){}return null!=r?((o=new r).append(e),o.getBlob(t)):null},t.makeBlobURL=function(e,t){return null!=o?o.createObjectURL(this.makeBlob(e,t)):void 0},t.revokeBlobURL=function(e){return null!=o?o.revokeObjectURL(e):void 0},t.prototype.toBlob=function(){return t.makeBlob(this.data.buffer)},t.prototype.toBlobURL=function(){return t.makeBlobURL(this.data.buffer)},t}(),p=t.UnderflowError=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.name="UnderflowError",this.stack=(new Error).stack}return o(t,e),t}(Error),_=t.BufferList=function(){function e(){this.first=null,this.last=null,this.numBuffers=0,this.availableBytes=0,this.availableBuffers=0}return e.prototype.copy=function(){var t;return(t=new e).first=this.first,t.last=this.last,t.numBuffers=this.numBuffers,t.availableBytes=this.availableBytes,t.availableBuffers=this.availableBuffers,t},e.prototype.append=function(e){var t;return e.prev=this.last,null!=(t=this.last)&&(t.next=e),this.last=e,null==this.first&&(this.first=e),this.availableBytes+=e.length,this.availableBuffers++,this.numBuffers++},e.prototype.advance=function(){return!!this.first&&(this.availableBytes-=this.first.length,this.availableBuffers--,this.first=this.first.next,null!=this.first)},e.prototype.rewind=function(){var e;return!(this.first&&!this.first.prev)&&(this.first=(null!=(e=this.first)?e.prev:void 0)||this.last,this.first&&(this.availableBytes+=this.first.length,this.availableBuffers++),null!=this.first)},e.prototype.reset=function(){var e;for(e=[];this.rewind(););return e},e}(),u=t.BufferList=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.on=function(e,t){var r;return null==this.events&&(this.events={}),null==(r=this.events)[e]&&(r[e]=[]),this.events[e].push(t)},t.prototype.off=function(e,t){var r,o;if(null!=this.events)if(null!=(o=this.events)?o[e]:void 0){if(null==t)return this.events[e];if(~(r=this.events[e].indexOf(t)))return this.events[e].splice(r,1)}else if(null==e)return{}},t.prototype.once=function(e,t){var r;return this.on(e,r=function(){return this.off(e,r),t.apply(this,arguments)})},t.prototype.emit=function(){var e,t,r,o,i,n;if(t=arguments[0],e=2<=arguments.length?a.call(arguments,1):[],null!=(i=this.events)?i[t]:void 0)for(r=0,o=(n=this.events[t].slice()).length;o>r;r++)n[r].apply(this,e)},t}(s),h=t.Stream=function(){function e(e){this.list=e,this.localOffset=0,this.offset=0}var t,r,o,a,i,n,s,l,u,h,m,d,b;return t=new ArrayBuffer(16),b=new Uint8Array(t),u=new Int8Array(t),m=new Uint16Array(t),s=new Int16Array(t),d=new Uint32Array(t),l=new Int32Array(t),o=new Float32Array(t),"undefined"!=typeof Float64Array&&null!==Float64Array&&(a=new Float64Array(t)),h=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0],e.fromBuffer=function(t){var r;return(r=new _).append(t),new e(r)},e.prototype.copy=function(){var t;return(t=new e(this.list.copy())).localOffset=this.localOffset,t.offset=this.offset,t},e.prototype.available=function(e){return e<=this.list.availableBytes-this.localOffset},e.prototype.remainingBytes=function(){return this.list.availableBytes-this.localOffset},e.prototype.advance=function(e){if(!this.available(e))throw new p;for(this.localOffset+=e,this.offset+=e;this.list.first&&this.localOffset>=this.list.first.length;)this.localOffset-=this.list.first.length,this.list.advance();return this},e.prototype.rewind=function(e){if(e>this.offset)throw new p;for(this.list.first||(this.list.rewind(),this.localOffset=this.list.first.length),this.localOffset-=e,this.offset-=e;this.list.first.prev&&this.localOffset<0;)this.list.rewind(),this.localOffset+=this.list.first.length;return this},e.prototype.seek=function(e){return e>this.offset?this.advance(e-this.offset):e<this.offset?this.rewind(this.offset-e):void 0},e.prototype.readUInt8=function(){var e;if(!this.available(1))throw new p;return e=this.list.first.data[this.localOffset],this.localOffset+=1,this.offset+=1,this.localOffset===this.list.first.length&&(this.localOffset=0,this.list.advance()),e},e.prototype.peekUInt8=function(e){var t;if(null==e&&(e=0),!this.available(e+1))throw new p;for(e=this.localOffset+e,t=this.list.first;t;){if(t.length>e)return t.data[e];e-=t.length,t=t.next}return 0},e.prototype.read=function(e,t){var r,o,a;if(null==t&&(t=!1),t===h)for(r=o=0;e>o;r=o+=1)b[r]=this.readUInt8();else for(r=a=e-1;a>=0;r=a+=-1)b[r]=this.readUInt8()},e.prototype.peek=function(e,t,r){var o,a,i;if(null==r&&(r=!1),r===h)for(o=a=0;e>a;o=a+=1)b[o]=this.peekUInt8(t+o);else for(o=i=0;e>i;o=i+=1)b[e-o-1]=this.peekUInt8(t+o)},e.prototype.readInt8=function(){return this.read(1),u[0]},e.prototype.peekInt8=function(e){return null==e&&(e=0),this.peek(1,e),u[0]},e.prototype.readUInt16=function(e){return this.read(2,e),m[0]},e.prototype.peekUInt16=function(e,t){return null==e&&(e=0),this.peek(2,e,t),m[0]},e.prototype.readInt16=function(e){return this.read(2,e),s[0]},e.prototype.peekInt16=function(e,t){return null==e&&(e=0),this.peek(2,e,t),s[0]},e.prototype.readUInt24=function(e){return e?this.readUInt16(!0)+(this.readUInt8()<<16):(this.readUInt16()<<8)+this.readUInt8()},e.prototype.peekUInt24=function(e,t){return null==e&&(e=0),t?this.peekUInt16(e,!0)+(this.peekUInt8(e+2)<<16):(this.peekUInt16(e)<<8)+this.peekUInt8(e+2)},e.prototype.readInt24=function(e){return e?this.readUInt16(!0)+(this.readInt8()<<16):(this.readInt16()<<8)+this.readUInt8()},e.prototype.peekInt24=function(e,t){return null==e&&(e=0),t?this.peekUInt16(e,!0)+(this.peekInt8(e+2)<<16):(this.peekInt16(e)<<8)+this.peekUInt8(e+2)},e.prototype.readUInt32=function(e){return this.read(4,e),d[0]},e.prototype.peekUInt32=function(e,t){return null==e&&(e=0),this.peek(4,e,t),d[0]},e.prototype.readInt32=function(e){return this.read(4,e),l[0]},e.prototype.peekInt32=function(e,t){return null==e&&(e=0),this.peek(4,e,t),l[0]},e.prototype.readFloat32=function(e){return this.read(4,e),o[0]},e.prototype.peekFloat32=function(e,t){return null==e&&(e=0),this.peek(4,e,t),o[0]},e.prototype.readFloat64=function(e){return this.read(8,e),a?a[0]:i()},i=function(){var e,t,r,o,a,i;return o=d[0],(r=d[1])&&2147483648!==r?(i=1-2*(r>>>31),t=1048575&r,2047===(e=r>>>20&2047)?t?NaN:i*(1/0):(e-=1023,a=(1048576|t)*Math.pow(2,e-20),i*(a+=o*Math.pow(2,e-52)))):0},e.prototype.peekFloat64=function(e,t){return null==e&&(e=0),this.peek(8,e,t),a?a[0]:i()},e.prototype.readFloat80=function(e){return this.read(10,e),n()},n=function(){var e,t,r,o,a,i;return r=d[0],o=d[1],i=1-2*((e=b[9])>>>7),0===(t=(127&e)<<8|b[8])&&0===o&&0===r?0:32767===t?0===o&&0===r?i*(1/0):NaN:(t-=16383,a=o*Math.pow(2,t-31),i*(a+=r*Math.pow(2,t-63)))},e.prototype.peekFloat80=function(e,t){return null==e&&(e=0),this.peek(10,e,t),n()},e.prototype.readBuffer=function(e){var t,r,o,a;for(o=(r=c.allocate(e)).data,t=a=0;e>a;t=a+=1)o[t]=this.readUInt8();return r},e.prototype.peekBuffer=function(e,t){var r,o,a,i;for(null==e&&(e=0),a=(o=c.allocate(t)).data,r=i=0;t>i;r=i+=1)a[r]=this.peekUInt8(e+r);return o},e.prototype.readSingleBuffer=function(e){var t;return t=this.list.first.slice(this.localOffset,e),this.advance(t.length),t},e.prototype.peekSingleBuffer=function(e,t){return this.list.first.slice(this.localOffset+e,t)},e.prototype.readString=function(e,t){return null==t&&(t="ascii"),r.call(this,0,e,t,!0)},e.prototype.peekString=function(e,t,o){return null==e&&(e=0),null==o&&(o="ascii"),r.call(this,e,t,o,!1)},r=function(e,t,r,o){var a,i,n,s,l,c,p,_,u,h,m,d;switch(_=null===t?0:-1,null==t&&(t=1/0),c=e+t,h="",r=r.toLowerCase()){case"ascii":case"latin1":for(;c>e&&(l=this.peekUInt8(e++))!==_;)h+=String.fromCharCode(l);break;case"utf8":case"utf-8":for(;c>e&&(a=this.peekUInt8(e++))!==_;)0==(128&a)?h+=String.fromCharCode(a):192==(224&a)?(i=63&this.peekUInt8(e++),h+=String.fromCharCode((31&a)<<6|i)):224==(240&a)?(i=63&this.peekUInt8(e++),n=63&this.peekUInt8(e++),h+=String.fromCharCode((15&a)<<12|i<<6|n)):240==(248&a)&&(u=((15&a)<<18|(i=63&this.peekUInt8(e++))<<12|(n=63&this.peekUInt8(e++))<<6|63&this.peekUInt8(e++))-65536,h+=String.fromCharCode(55296+(u>>10),56320+(1023&u)));break;case"utf16-be":case"utf16be":case"utf16le":case"utf16-le":case"utf16bom":case"utf16-bom":switch(r){case"utf16be":case"utf16-be":p=!1;break;case"utf16le":case"utf16-le":p=!0;break;case"utf16bom":case"utf16-bom":if(2>t||(s=this.peekUInt16(e))===_)return o&&this.advance(e+=2),h;p=65534===s,e+=2}for(;c>e&&(m=this.peekUInt16(e,p))!==_;)if(e+=2,55296>m||m>57343)h+=String.fromCharCode(m);else{if(m>56319)throw new Error("Invalid utf16 sequence.");if(56320>(d=this.peekUInt16(e,p))||d>57343)throw new Error("Invalid utf16 sequence.");h+=String.fromCharCode(m,d),e+=2}m===_&&(e+=2);break;default:throw new Error("Unknown encoding: "+r)}return o&&this.advance(e),h},e}(),m=t.Decoder=function(e){function t(e,t){var r;this.demuxer=e,this.format=t,r=new _,this.stream=new h(r),this.bitstream=new l(this.stream),this.receivedFinalBuffer=!1,this.waiting=!1,this.demuxer.on("cookie",function(e){return function(t){var r;try{return e.setCookie(t)}catch(t){return r=t,e.emit("error",r)}}}(this)),this.demuxer.on("data",function(e){return function(t){return r.append(t),e.waiting?e.decode():void 0}}(this)),this.demuxer.on("end",function(e){return function(){return e.receivedFinalBuffer=!0,e.waiting?e.decode():void 0}}(this)),this.init()}var r;return o(t,e),t.prototype.init=function(){},t.prototype.setCookie=function(){},t.prototype.readChunk=function(){},t.prototype.decode=function(){var e,t,r;this.waiting=!this.receivedFinalBuffer,t=this.bitstream.offset();try{r=this.readChunk()}catch(t){if(!((e=t)instanceof p))return this.emit("error",e),!1}return r?(this.emit("data",r),this.receivedFinalBuffer&&this.emit("end"),!0):(this.receivedFinalBuffer?this.emit("end"):(this.bitstream.seek(t),this.waiting=!0),!1)},t.prototype.seek=function(e){var t;return t=this.demuxer.seek(e),this.stream.seek(t.offset),t.timestamp},r={},t.register=function(e,t){return r[e]=t},t.find=function(e){return r[e]||null},t}(u),d=t.Demuxer=function(e){function t(e,t){var r,o;(r=new _).append(t),this.stream=new h(r),o=!1,e.on("data",function(e){return function(t){var a;o=!0,r.append(t);try{return e.readChunk(t)}catch(t){return a=t,e.emit("error",a)}}}(this)),e.on("error",function(e){return function(t){return e.emit("error",t)}}(this)),e.on("end",function(e){return function(){return o||e.readChunk(t),e.emit("end")}}(this)),this.seekPoints=[],this.init()}var r;return o(t,e),t.probe=function(){return!1},t.prototype.init=function(){},t.prototype.readChunk=function(){},t.prototype.addSeekPoint=function(e,t){var r;return r=this.searchTimestamp(t),this.seekPoints.splice(r,0,{offset:e,timestamp:t})},t.prototype.searchTimestamp=function(e){var t,r,o,a;if(r=0,(t=this.seekPoints.length)>0&&this.seekPoints[t-1].timestamp<e)return t;for(;t>r;)o=r+t>>1,e>(a=this.seekPoints[o].timestamp)?r=o+1:a>=e&&(t=o);return t>this.seekPoints.length&&(t=this.seekPoints.length),t},t.prototype.seek=function(e){var t;return this.format&&this.format.framesPerPacket>0&&this.format.bytesPerPacket>0?{timestamp:e,offset:this.format.bytesPerPacket*e/this.format.framesPerPacket}:(t=this.searchTimestamp(e),this.seekPoints[t])},r=[],t.register=function(e){return r.push(e)},t.find=function(e){var t,o,a,i,n;for(a=h.fromBuffer(e),i=0,n=r.length;n>i;i++){t=r[i],o=a.offset;try{if(t.probe(a))return t}catch(e){e}a.seek(o)}return null},t}(u),b=t.AudioDevice=function(e){function t(e,t){this.sampleRate=e,this.channels=t,this.updateTime=i(this.updateTime,this),this.playing=!1,this.currentTime=0,this._lastTime=0}var r;return o(t,e),t.prototype.start=function(){if(!this.playing){if(this.playing=!0,null==this.device&&(this.device=t.create(this.sampleRate,this.channels)),!this.device)throw new Error("No supported audio device found.");return this._lastTime=this.device.getDeviceTime(),this._timer=setInterval(this.updateTime,200),this.device.on("refill",this.refill=function(e){return function(t){return e.emit("refill",t)}}(this))}},t.prototype.stop=function(){return this.playing?(this.playing=!1,this.device&&this.device.off("refill",this.refill),clearInterval(this._timer)):void 0},t.prototype.destroy=function(){var e;return this.stop(),null!=(e=this.device)?e.destroy():void 0},t.prototype.seek=function(e){return this.currentTime=e,this.playing&&(this._lastTime=this.device.getDeviceTime()),this.emit("timeUpdate",this.currentTime)},t.prototype.updateTime=function(){var e;return e=this.device.getDeviceTime(),this.currentTime+=(e-this._lastTime)/this.device.sampleRate*1e3|0,this._lastTime=e,this.emit("timeUpdate",this.currentTime)},r=[],t.register=function(e){return r.push(e)},t.create=function(e,t){var o,a,i;for(a=0,i=r.length;i>a;a++)if((o=r[a]).supported)return new o(e,t);return null},t}(u),g=(t.MozillaAudioDevice=function(e){function t(e,t){this.sampleRate=e,this.channels=t,this.refill=i(this.refill,this),this.audio=new Audio,this.audio.mozSetup(this.channels,this.sampleRate),this.writePosition=0,this.prebufferSize=this.sampleRate/2,this.tail=null,this.timer=r(this.refill,100)}var r,a;return o(t,e),b.register(t),t.supported=!egret.isNative&&("undefined"!=typeof Audio&&null!==Audio&&"mozWriteAudio"in new Audio),t.prototype.refill=function(){var e,t,r;this.tail&&(r=this.audio.mozWriteAudio(this.tail),this.writePosition+=r,this.tail=this.writePosition<this.tail.length?this.tail.subarray(r):null),(e=this.audio.mozCurrentSampleOffset()+this.prebufferSize-this.writePosition)>0&&(t=new Float32Array(e),this.emit("refill",t),(r=this.audio.mozWriteAudio(t))<t.length&&(this.tail=t.subarray(r)),this.writePosition+=r)},t.prototype.destroy=function(){return a(this.timer)},t.prototype.getDeviceTime=function(){return this.audio.mozCurrentSampleOffset()/this.channels},r=function(e,t){var r,o;return null==(r=c.makeBlobURL("setInterval(function() { postMessage('ping'); }, "+t+");"))?setInterval(e,t):((o=new Worker(r)).onmessage=e,o.url=r,o)},a=function(e){return e.terminate?(e.terminate(),URL.revokeObjectURL(e.url)):clearInterval(e)},t}(u),t.Asset=function(e){function t(e){this.source=e,this._decode=i(this._decode,this),this.findDecoder=i(this.findDecoder,this),this.probe=i(this.probe,this),this.buffered=0,this.duration=null,this.format=null,this.metadata=null,this.active=!1,this.demuxer=null,this.decoder=null,this.source.once("data",this.probe),this.source.on("error",function(e){return function(t){return e.emit("error",t),e.stop()}}(this)),this.source.on("progress",function(e){return function(t){return e.buffered=t,e.emit("buffer",e.buffered)}}(this))}return o(t,e),t.fromBuffer=function(e){return new t(new B(e))},t.prototype.start=function(e){return this.active?void 0:(null!=e&&(this.shouldDecode=e),null==this.shouldDecode&&(this.shouldDecode=!0),this.active=!0,this.source.start(),this.decoder&&this.shouldDecode?this._decode():void 0)},t.prototype.stop=function(){return this.active?(this.active=!1,this.source.pause()):void 0},t.prototype.get=function(e,t){return"format"===e||"duration"===e||"metadata"===e?null!=this[e]?t(this[e]):(this.once(e,function(e){return function(r){return e.stop(),t(r)}}(this)),this.start()):void 0},t.prototype.decodePacket=function(){return this.decoder.decode()},t.prototype.decodeToBuffer=function(e){var t,r,o;return o=0,t=[],this.on("data",r=function(e){return o+=e.length,t.push(e)}),this.once("end",(function(){var a,i,n,s,l;for(a=new Float32Array(o),n=0,s=0,l=t.length;l>s;s++)i=t[s],a.set(i,n),n+=i.length;return this.off("data",r),e(a)})),this.start()},t.prototype.probe=function(e){var t;return this.active?(t=d.find(e))?(this.demuxer=new t(this.source,e),this.demuxer.on("format",this.findDecoder),this.demuxer.on("duration",function(e){return function(t){return e.duration=t,e.emit("duration",e.duration)}}(this)),this.demuxer.on("metadata",function(e){return function(t){return e.metadata=t,e.emit("metadata",e.metadata)}}(this)),this.demuxer.on("error",function(e){return function(t){return e.emit("error",t),e.stop()}}(this))):this.emit("error","A demuxer for this container was not found."):void 0},t.prototype.findDecoder=function(e){var t,r;return this.format=e,this.active?(this.emit("format",this.format),(t=m.find(this.format.formatID))?(this.decoder=new t(this.demuxer,this.format),this.format.floatingPoint?this.decoder.on("data",function(e){return function(t){return e.emit("data",t)}}(this)):(r=Math.pow(2,this.format.bitsPerChannel-1),this.decoder.on("data",function(e){return function(t){var o,a,i,n,s;for(o=new Float32Array(t.length),a=n=0,s=t.length;s>n;a=++n)i=t[a],o[a]=i/r;return e.emit("data",o)}}(this))),this.decoder.on("error",function(e){return function(t){return e.emit("error",t),e.stop()}}(this)),this.decoder.on("end",function(e){return function(){return e.emit("end")}}(this)),this.emit("decodeStart"),this.shouldDecode?this._decode():void 0):this.emit("error","A decoder for "+this.format.formatID+" was not found.")):void 0},t.prototype._decode=function(){for(;this.decoder.decode()&&this.active;);return this.active?this.decoder.once("data",this._decode):void 0},t.prototype.destroy=function(){var e,t,r;return this.stop(),null!=(e=this.demuxer)&&e.off(),null!=(t=this.decoder)&&t.off(),null!=(r=this.source)&&r.off(),this.off()},t}(u)),y=t.Resampler=function(){function e(e,t,r,o){this.fromSampleRate=+e,this.toSampleRate=+t,this.channels=0|r,this.inputBufferLength=o,this.initialize()}return e.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");if(this.fromSampleRate==this.toSampleRate)this.resampler=this.bypassResampler,this.ratioWeight=1;else{this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0);var e=Math.ceil(this.inputBufferLength*this.toSampleRate/this.fromSampleRate/this.channels*1.01)*this.channels+this.channels;this.outputBuffer=new Float32Array(e),this.lastOutput=new Float32Array(this.channels)}},e.prototype.compileLinearInterpolationFunction=function(){for(var e="var outputOffset = 0;    var bufferLength = buffer.length;    if (bufferLength > 0) {      var weight = this.lastWeight;      var firstWeight = 0;      var secondWeight = 0;      var sourceOffset = 0;      var outputOffset = 0;      var outputBuffer = this.outputBuffer;      for (; weight < 1; weight += "+this.ratioWeight+") {        secondWeight = weight % 1;        firstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);";e+="}      weight -= 1;      for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {        secondWeight = weight % 1;        firstWeight = 1 - secondWeight;";for(t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(t>0?" + "+t:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+t)+"] * secondWeight);";e+="weight += "+this.ratioWeight+";        sourceOffset = Math.floor(weight) * "+this.channels+";      }";for(t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = buffer[sourceOffset++];";e+="this.lastWeight = weight % 1;    }    return this.outputBuffer;",this.resampler=Function("buffer",e)},e.prototype.compileMultiTapFunction=function(){for(var e="var outputOffset = 0;    var bufferLength = buffer.length;    if (bufferLength > 0) {      var weight = 0;",t=0;t<this.channels;++t)e+="var output"+t+" = 0;";for(e+="var actualPosition = 0;      var amountToNext = 0;      var alreadyProcessedTail = !this.tailExists;      this.tailExists = false;      var outputBuffer = this.outputBuffer;      var currentPosition = 0;      do {        if (alreadyProcessedTail) {          weight = "+this.ratioWeight+";",t=0;t<this.channels;++t)e+="output"+t+" = 0;";for(e+="}        else {          weight = this.lastWeight;",t=0;t<this.channels;++t)e+="output"+t+" = this.lastOutput["+t+"];";for(e+="alreadyProcessedTail = true;        }        while (weight > 0 && actualPosition < bufferLength) {          amountToNext = 1 + actualPosition - currentPosition;          if (weight >= amountToNext) {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition++] * amountToNext;";for(e+="currentPosition = actualPosition;            weight -= amountToNext;          }          else {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition"+(t>0?" + "+t:"")+"] * weight;";for(e+="currentPosition += weight;            weight = 0;            break;          }        }        if (weight <= 0) {",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = output"+t+" / "+this.ratioWeight+";";for(e+="}        else {          this.lastWeight = weight;",t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = output"+t+";";e+="this.tailExists = true;          break;        }      } while (actualPosition < bufferLength);    }    return this.outputBuffer;",this.resampler=Function("buffer",e)},e.prototype.bypassResampler=function(e){return e},e}(),f=(t.WebAudioDevice=function(t){function r(e,t){this.sampleRate=e,this.channels=t,this.refill=i(this.refill,this),this.context=null!=n?n:n=new s,this.deviceSampleRate=this.context.sampleRate,this.bufferSize=Math.ceil(4096/(this.deviceSampleRate/this.sampleRate)*this.channels),this.bufferSize+=this.bufferSize%this.channels,this.deviceSampleRate!==this.sampleRate&&(this.resampler=new y(this.sampleRate,this.deviceSampleRate,this.channels,this.bufferSize)),this.node=this.context[a](4096,this.channels,this.channels),this.node.onaudioprocess=this.refill,this.node.connect(this.context.destination)}var a,n=null,s=e.AudioContext||e.webkitAudioContext;return o(r,t),b.register(r),r.supported=s&&("function"==typeof s.prototype[a="createScriptProcessor"]||"function"==typeof s.prototype[a="createJavaScriptNode"]),r.init=function(){if(r.supported)if(n){if("suspended"===n.state)n.close(),(n=new s)[a](4096,1,1).connect(n.destination)}else{(n=new s)[a](4096,1,1).connect(n.destination)}},r.prototype.refill=function(e){var t,r,o,a,i,n,s,l,c,p;for(t=(n=e.outputBuffer).numberOfChannels,r=new Array(t),a=s=0;t>s;a=s+=1)r[a]=n.getChannelData(a);for(o=new Float32Array(this.bufferSize),this.emit("refill",o),this.resampler&&(o=this.resampler.resampler(o)),a=l=0,p=n.length;p>l;a=l+=1)for(i=c=0;t>c;i=c+=1)r[i][a]=o[a*t+i]},r.prototype.destroy=function(){return this.node.disconnect(0)},r.prototype.getDeviceTime=function(){return this.context.currentTime*this.sampleRate},r}(u),t.Filter=function(){function e(e,t){e&&t&&Object.defineProperty(this,"value",{get:function(){return e[t]}})}return e.prototype.process=function(){},e}()),C=t.BalanceFilter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.process=function(e){var t,r,o,a;if(0!==this.value)for(r=Math.max(-50,Math.min(50,this.value)),t=o=0,a=e.length;a>o;t=o+=2)e[t]*=Math.min(1,(50-r)/50),e[t+1]*=Math.min(1,(50+r)/50)},t}(f),T=t.VolumeFilter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.process=function(e){var t,r,o,a;if(!(this.value>=100))for(r=Math.max(0,Math.min(100,this.value))/100,t=o=0,a=e.length;a>o;t=o+=1)e[t]*=r},t}(f);t.Player=function(e){function t(e){this.asset=e,this.startPlaying=i(this.startPlaying,this),this.playing=!1,this.buffered=0,this.currentTime=0,this.duration=0,this.volume=100,this.pan=0,this.metadata={},this.filters=[new T(this,"volume"),new C(this,"pan")],this.asset.on("buffer",function(e){return function(t){return e.buffered=t,e.emit("buffer",e.buffered)}}(this)),this.asset.on("decodeStart",function(e){return function(){return e.queue=new v(e.asset),e.queue.once("ready",e.startPlaying)}}(this)),this.asset.on("format",function(e){return function(t){return e.format=t,e.emit("format",e.format)}}(this)),this.asset.on("metadata",function(e){return function(t){return e.metadata=t,e.emit("metadata",e.metadata)}}(this)),this.asset.on("duration",function(e){return function(t){return e.duration=t,e.emit("duration",e.duration)}}(this)),this.asset.on("error",function(e){return function(t){return e.emit("error",t)}}(this))}return o(t,e),t.fromBuffer=function(e){return new t(g.fromBuffer(e))},t.prototype.preload=function(){return this.asset?(this.startedPreloading=!0,this.asset.start(!1)):void 0},t.prototype.play=function(){var e;return this.playing?void 0:(this.startedPreloading||this.preload(),this.playing=!0,null!=(e=this.device)?e.start():void 0)},t.prototype.pause=function(){var e;return this.playing?(this.playing=!1,null!=(e=this.device)?e.stop():void 0):void 0},t.prototype.togglePlayback=function(){return this.playing?this.pause():this.play()},t.prototype.stop=function(){var e;return this.pause(),this.asset.stop(),null!=(e=this.device)?e.destroy():void 0},t.prototype.seek=function(e){var t;return null!=(t=this.device)&&t.stop(),this.queue.once("ready",function(e){return function(){var t,r;return null!=(t=e.device)&&t.seek(e.currentTime),e.playing&&null!=(r=e.device)?r.start():void 0}}(this)),e=e/1e3*this.format.sampleRate,e=this.asset.decoder.seek(e),this.currentTime=e/this.format.sampleRate*1e3|0,this.queue.reset(),this.currentTime},t.prototype.startPlaying=function(){var e,t;return e=this.queue.read(),t=0,this.device=new b(this.format.sampleRate,this.format.channelsPerFrame),this.device.on("timeUpdate",function(e){return function(t){return e.currentTime=t,e.emit("progress",e.currentTime)}}(this)),this.refill=function(r){return function(o){var a,i,n,s,l,c;if(r.playing){for(e||(e=r.queue.read(),t=0),a=0;e&&a<o.length;){for(i=Math.min(e.length-t,o.length-a),n=0;i>n;n+=1)o[a++]=e[t++];t===e.length&&(e=r.queue.read(),t=0)}for(s=0,l=(c=r.filters).length;l>s;s++)c[s].process(o)}}}(this),this.device.on("refill",this.refill),this.playing&&this.device.start(),this.emit("ready")},t.prototype.destroy=function(){var e,t;return this.stop(),null!=(e=this.device)&&e.off(),null!=(t=this.asset)&&t.destroy(),this.off()},t}(u);var v=t.Queue=function(e){function t(e){this.asset=e,this.write=i(this.write,this),this.readyMark=2,this.finished=!1,this.buffering=!0,this.ended=!1,this.buffers=[],this.asset.on("data",this.write),this.asset.on("end",function(e){return function(){return e.ended=!0}}(this)),this.asset.decodePacket()}return o(t,e),t.prototype.write=function(e){return e&&this.buffers.push(e),this.buffering?this.buffers.length>=this.readyMark||this.ended?(this.buffering=!1,this.emit("ready")):this.asset.decodePacket():void 0},t.prototype.read=function(){return 0===this.buffers.length?null:(this.asset.decodePacket(),this.buffers.shift())},t.prototype.reset=function(){return this.buffers.length=0,this.buffering=!0,this.asset.decodePacket()},t}(u),B=t.BufferSource=function(t){function r(e){this.loop=i(this.loop,this),e instanceof _?this.list=e:(this.list=new _,null!=e&&this.list.append(new c(e))),this.paused=!0}var a,n;return o(r,t),n=e.setImmediate||function(t){return e.setTimeout(t,0)},a=e.clearImmediate||function(t){return e.clearTimeout(t)},r.prototype.start=function(){return this.paused=!1,null},r.prototype.add=function(e){this.bytesLoaded+=e.length,this.list.append(new c(e)),this.emit("data",this.list.first),this.list.advance()},r.prototype.loop=function(){return this.emit("progress",(this.list.numBuffers-this.list.availableBuffers+1)/this.list.numBuffers*100|0),this.emit("data",this.list.first),this.list.advance()?n(this.loop):this.emit("end")},r.prototype.pause=function(){return a(this._timer),this.paused=!0},r.prototype.reset=function(){return this.pause(),this.list.rewind()},r}(u)}(window),function(e){var t=window.AV,r=t.Demuxer.extend((function(){t.Demuxer.register(this),this.probe=function(e){for(var t=e.offset;e.available(2);)if(65520==(65526&e.readUInt16()))return e.seek(t),!0;return e.seek(t),!1},this.prototype.init=function(){this.bitstream=new t.Bitstream(this.stream)},this.readHeader=function(e){if(4095!==e.read(12))throw new Error("Invalid ADTS header.");var t={};e.advance(3);var r=!!e.read(1);return t.profile=e.read(2)+1,t.samplingIndex=e.read(4),e.advance(1),t.chanConfig=e.read(3),e.advance(4),t.frameLength=e.read(13),e.advance(11),t.numFrames=e.read(2)+1,r||e.advance(16),t},this.prototype.readChunk=function(){if(!this.sentHeader){var e=this.stream.offset,o=r.readHeader(this.bitstream);this.emit("format",{formatID:"aac ",sampleRate:L[o.samplingIndex],channelsPerFrame:o.chanConfig,bitsPerChannel:16});var a=new Uint8Array(2);a[0]=o.profile<<3|o.samplingIndex>>1&7,a[1]=(1&o.samplingIndex)<<7|o.chanConfig<<3,this.emit("cookie",new t.Buffer(a)),this.stream.seek(e),this.sentHeader=!0}for(;this.stream.available(1);){var i=this.stream.readSingleBuffer(this.stream.remainingBytes());this.emit("data",i)}}})),o=function(){function e(e){this.ics=new l(e),this.channelPair=new Array(8),this.idSelect=new Int32Array(8),this.chSelect=new Int32Array(8),this.gain=new Array(16)}e.BEFORE_TNS=0,e.AFTER_TNS=1,e.AFTER_IMDCT=2;const t=new Float32Array([1.0905077326652577,1.189207115002721,1.4142135623730951,2]);return e.prototype={decode:function(r,o){var a=this.channelPair,i=this.idSelect,n=this.chSelect;this.couplingPoint=2*r.read(1),this.coupledCount=r.read(3);for(var c=0,p=0;p<=this.coupledCount;p++)c++,a[p]=r.read(1),i[p]=r.read(4),a[p]?(n[p]=r.read(2),3===n[p]&&c++):n[p]=2;this.couplingPoint+=r.read(1),this.couplingPoint|=this.couplingPoint>>>1;var _=r.read(1),u=t[r.read(2)];this.ics.decode(r,o,!1);var h=this.ics.info.groupCount,m=this.ics.info.maxSFB,d=this.ics.bandTypes;for(p=0;c>p;p++){var b=0,g=1,y=0,f=1;p>0&&(y=(g=this.couplingPoint===e.AFTER_IMDCT?1:r.read(1))?s.decodeScaleFactor(r)-60:0,f=Math.pow(u,-y));var C=this.gain[p]=new Float32Array(120);if(this.couplingPoint===e.AFTER_IMDCT)C[0]=f;else for(var T=0;h>T;T++)for(var v=0;m>v;v++)if(d[b]!==l.ZERO_BT){if(0===g){var B=s.decodeScaleFactor(r)-60;if(0!==B){var S=1;B=y+=B,_||(S-=2*(1&B),B>>>=1),f=Math.pow(u,-B)*S}}C[b++]=f}}},applyIndependentCoupling:function(e,t){for(var r=this.gain[e][0],o=this.ics.data,a=0;a<t.length;a++)t[a]+=r*o[a]},applyDependentCoupling:function(e,t){for(var r=this.ics.info,o=r.swbOffsets,a=r.groupCount,i=r.maxSFB,n=this.ics.bandTypes,s=this.ics.data,c=0,p=0,_=this.gain[e],u=0;a>u;u++){for(var h=r.groupLength[u],m=0;i>m;m++,c++)if(n[c]!==l.ZERO_BT)for(var d=_[c],b=0;h>b;b++)for(var g=o[m];g<o[swb+1];g++)t[p+128*b+g]+=d*s[p+128*b+g];p+=128*h}}},e}(),a=function(){function e(e){this.ms_used=[],this.left=new l(e),this.right=new l(e)}return e.prototype.decode=function(e,t){var r=this.left,o=this.right,a=this.ms_used;if(this.commonWindow=!!e.read(1)){r.info.decode(e,t,!0),o.info=r.info;var i=e.read(2);switch(this.maskPresent=!!i,i){case 1:for(var n=r.info.groupCount*r.info.maxSFB,s=0;n>s;s++)a[s]=!!e.read(1);break;case 0:case 2:var l=!!i;for(s=0;128>s;s++)a[s]=l;break;default:throw new Error("Reserved ms mask type: "+i)}}else for(s=0;128>s;s++)a[s]=!1;r.decode(e,t,this.commonWindow),o.decode(e,t,this.commonWindow)},e}(),i=(t.Decoder.extend((function(){t.Decoder.register("mp4a",this),t.Decoder.register("aac ",this);this.prototype.init=function(){this.format.floatingPoint=!0},this.prototype.setCookie=function(e){var r=t.Stream.fromBuffer(e),o=new t.Bitstream(r);if(this.config={},this.config.profile=o.read(5),31===this.config.profile&&(this.config.profile=32+o.read(6)),this.config.sampleIndex=o.read(4),15===this.config.sampleIndex){this.config.sampleRate=o.read(24);for(var a=0;a<L.length;a++)if(L[a]===this.config.sampleRate){this.config.sampleIndex=a;break}}else this.config.sampleRate=L[this.config.sampleIndex];switch(this.config.chanConfig=o.read(4),this.format.channelsPerFrame=this.config.chanConfig,this.config.profile){case 1:case 2:case 4:if(o.read(1))throw new Error("frameLengthFlag not supported");if(this.config.frameLength=1024,o.read(1)&&o.advance(14),o.read(1)&&(this.config.profile>16&&(this.config.sectionDataResilience=o.read(1),this.config.scalefactorResilience=o.read(1),this.config.spectralDataResilience=o.read(1)),o.advance(1)),0===this.config.chanConfig)throw o.advance(4),new Error("PCE unimplemented");break;default:throw new Error("AAC profile "+this.config.profile+" not supported.")}this.filter_bank=new n(!1,this.config.chanConfig)};this.prototype.readChunk=function(){var e=this.bitstream;4095===e.peek(12)&&r.readHeader(e),this.cces=[];for(var t=[],i=this.config,n=i.frameLength,s=null;7!==(s=e.read(3));){var c=e.read(4);switch(s){case 0:case 3:var p=new l(this.config);p.id=c,t.push(p),p.decode(e,i,!1);break;case 1:var _=new a(this.config);_.id=c,t.push(_),_.decode(e,i);break;case 2:var u=new o(this.config);this.cces.push(u),u.decode(e,i);break;case 4:var h=e.read(1),m=e.read(8);255===m&&(m+=e.read(8)),h&&e.align(),e.advance(8*m);break;case 5:throw new Error("TODO: PCE_ELEMENT");case 6:15===c&&(c+=e.read(8)-1),e.advance(8*c);break;default:throw new Error("Unknown element")}}e.align(),this.process(t);for(var d=this.data,b=d.length,g=new Float32Array(n*b),y=0,f=0;n>f;f++)for(var C=0;b>C;C++)g[y++]=d[C][f]/32768;return g},this.prototype.process=function(e){for(var t=this.config.chanConfig,r=1*this.config.frameLength,i=this.data=[],n=0;t>n;n++)i[n]=new Float32Array(r);var s=0;for(n=0;n<e.length&&t>s;n++){var c=e[n];if(c instanceof l)s+=this.processSingle(c,s);else if(c instanceof a)this.processPair(c,s),s+=2;else{if(!(c instanceof o))throw new Error("Unknown element found.");s++}}},this.prototype.processSingle=function(e,t){var r=this.config.profile,a=e.info,i=e.data;if(1===r)throw new Error("Main prediction unimplemented");if(4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,o.BEFORE_TNS,i,null),e.tnsPresent&&e.tns.process(e,i,!1),this.applyChannelCoupling(e,o.AFTER_TNS,i,null),this.filter_bank.process(a,i,this.data[t],t),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,o.AFTER_IMDCT,this.data[t],null),e.gainPresent)throw new Error("Gain control not implemented");if(this.sbrPresent)throw new Error("SBR not implemented");return 1},this.prototype.processPair=function(e,t){var r=this.config.profile,a=e.left,i=e.right,n=a.info,s=i.info,l=a.data,c=i.data;if(e.commonWindow&&e.maskPresent&&this.processMS(e,l,c),1===r)throw new Error("Main prediction unimplemented");if(this.processIS(e,l,c),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,o.BEFORE_TNS,l,c),a.tnsPresent&&a.tns.process(a,l,!1),i.tnsPresent&&i.tns.process(i,c,!1),this.applyChannelCoupling(e,o.AFTER_TNS,l,c),this.filter_bank.process(n,l,this.data[t],t),this.filter_bank.process(s,c,this.data[t+1],t+1),4===r)throw new Error("LTP prediction unimplemented");if(this.applyChannelCoupling(e,o.AFTER_IMDCT,this.data[t],this.data[t+1]),a.gainPresent)throw new Error("Gain control not implemented");if(i.gainPresent)throw new Error("Gain control not implemented");if(this.sbrPresent)throw new Error("SBR not implemented")},this.prototype.processIS=function(e,t,r){for(var o=e.right,a=o.info,i=a.swbOffsets,n=a.groupCount,s=a.maxSFB,c=o.bandTypes,p=o.sectEnd,_=o.scaleFactors,u=0,h=0,m=0;n>m;m++){for(var d=0;s>d;){var b=p[u];if(c[u]===l.INTENSITY_BT||c[u]===l.INTENSITY_BT2)for(;b>d;d++,u++){var g=c[u]===l.INTENSITY_BT?1:-1;e.maskPresent&&(g*=e.ms_used[u]?-1:1);for(var y=g*_[u],f=0;f<a.groupLength[m];f++)for(var C=h+128*f+i[d],T=i[d+1]-i[d],v=0;T>v;v++)r[C+v]=t[C+v]*y}else u+=b-d,d=b}h+=128*a.groupLength[m]}},this.prototype.processMS=function(e,t,r){for(var o=e.left,a=o.info,i=a.swbOffsets,n=a.groupCount,s=a.maxSFB,c=o.bandTypes,p=e.right.bandTypes,_=0,u=0,h=0;n>h;h++){for(var m=0;s>m;m++,u++)if(e.ms_used[u]&&c[u]<l.NOISE_BT&&p[u]<l.NOISE_BT)for(var d=0;d<a.groupLength[h];d++)for(var b=_+128*d+i[m],g=0;g<i[m+1]-i[m];g++){var y=t[b+g]-r[b+g];t[b+g]+=r[b+g],r[b+g]=y}_+=128*a.groupLength[h]}},this.prototype.applyChannelCoupling=function(e,t,r,i){for(var n=this.cces,s=e instanceof a,l=t===o.AFTER_IMDCT?"applyIndependentCoupling":"applyDependentCoupling",c=0;c<n.length;c++){var p=n[c],_=0;if(p.couplingPoint===t)for(var u=0;u<p.coupledCount;u++){var h=p.chSelect[u];p.channelPair[u]===s&&p.idSelect[u]===e.id?(1!==h&&(p[l](_,r),h&&_++),2!==h&&p[l](_++,i)):_+=1+(3===h?1:0)}}}})),function(){function e(e){switch(this.length=e,e){case 64:this.roots=t(64);break;case 512:this.roots=r(512);break;case 60:this.roots=t(60);break;case 480:this.roots=r(480);break;default:throw new Error("unexpected FFT length: "+e)}this.rev=new Array(e);for(var o=0;e>o;o++)this.rev[o]=new Float32Array(2);this.a=new Float32Array(2),this.b=new Float32Array(2),this.c=new Float32Array(2),this.d=new Float32Array(2),this.e1=new Float32Array(2),this.e2=new Float32Array(2)}function t(e){for(var t=2*Math.PI/e,r=Math.cos(t),o=Math.sin(t),a=new Array(e),i=0;e>i;i++)a[i]=new Float32Array(2);a[0][0]=1,a[0][1]=0;var n=0;for(i=1;e>i;i++)a[i][0]=a[i-1][0]*r+n*o,n=n*r-a[i-1][0]*o,a[i][1]=-n;return a}function r(e){for(var t=2*Math.PI/e,r=Math.cos(t),o=Math.sin(t),a=new Array(e),i=0;e>i;i++)a[i]=new Float32Array(3);a[0][0]=1,a[0][1]=0,a[0][2]=0;for(i=1;e>i;i++)a[i][0]=a[i-1][0]*r+a[i-1][2]*o,a[i][2]=a[i-1][2]*r-a[i-1][0]*o,a[i][1]=-a[i][2];return a}return e.prototype.process=function(e,t){for(var r=this.length,o=t?2:1,a=t?r:1,i=this.rev,n=this.roots,s=0,l=0;r>l;l++){i[l][0]=e[s][0],i[l][1]=e[s][1];for(var c=r>>>1;s>=c&&c>0;)s-=c,c>>=1;s+=c}var p,_=this.a,u=this.b,h=this.c,m=this.d,d=this.e1,b=this.e2;for(l=0;r>l;l++)e[l][0]=i[l][0],e[l][1]=i[l][1];for(l=0;r>l;l+=4)p=e[l],_[0]=p[0]+e[l+1][0],_[1]=p[1]+e[l+1][1],u[0]=e[l+2][0]+e[l+3][0],u[1]=e[l+2][1]+e[l+3][1],h[0]=p[0]-e[l+1][0],h[1]=p[1]-e[l+1][1],m[0]=e[l+2][0]-e[l+3][0],m[1]=e[l+2][1]-e[l+3][1],p[0]=_[0]+u[0],p[1]=_[1]+u[1],e[l+2][0]=_[0]-u[0],e[l+2][1]=_[1]-u[1],d[0]=h[0]-m[1],d[1]=h[1]+m[0],b[0]=h[0]+m[1],b[1]=h[1]-m[0],t?(e[l+1][0]=b[0],e[l+1][1]=b[1],e[l+3][0]=d[0],e[l+3][1]=d[1]):(e[l+1][0]=d[0],e[l+1][1]=d[1],e[l+3][0]=b[0],e[l+3][1]=b[1]);for(l=4;r>l;l<<=1)for(var g=l<<1,y=r/g,f=0;r>f;f+=g)for(c=0;l>c;c++){var C=c*y,T=e[l+f+c],v=e[f+c],B=n[C][0],S=n[C][o],O=T[0]*B-T[1]*S,M=T[0]*S+T[1]*B;T[0]=(v[0]-O)*a,T[1]=(v[1]-M)*a,v[0]=(v[0]+O)*a,v[1]=(v[1]+M)*a}},e}()),n=function(){function e(e,t){if(e)throw new Error("WHA?? No small frames allowed.");this.length=1024,this.shortLength=128,this.mid=(this.length-this.shortLength)/2,this.trans=this.shortLength/2,this.mdctShort=new c(2*this.shortLength),this.mdctLong=new c(2*this.length),this.overlaps=new Array(t);for(var r=0;t>r;r++)this.overlaps[r]=new Float32Array(this.length);this.buf=new Float32Array(2*this.length)}function t(e){for(var t=new Float32Array(e),r=0;e>r;r++)t[r]=Math.sin((r+.5)*(Math.PI/(2*e)));return t}function r(e,t){for(var r=Math.PI/t,o=new Float32Array(t),a=0,i=new Float32Array(t),n=e*r*e*r,s=0;t>s;s++){for(var l=s*(t-s)*n,c=1,p=50;p>0;p--)c=c*l/(p*p)+1;a+=c,i[s]=a}a++;for(s=0;t>s;s++)o[s]=Math.sqrt(i[s]/a);return o}const o=t(1024),a=t(128),i=r(4,1024),n=r(6,128),s=[o,i],p=[a,n];return e.prototype.process=function(e,t,r,o){var a=this.overlaps[o],i=e.windowShape[1],n=e.windowShape[0],c=s[i],_=p[i],u=s[n],h=p[n],m=this.length,d=this.shortLength,b=this.mid,g=this.trans,y=this.buf,f=this.mdctLong,C=this.mdctShort;switch(e.windowSequence){case l.ONLY_LONG_SEQUENCE:f.process(t,0,y,0);for(var T=0;m>T;T++)r[T]=a[T]+y[T]*u[T];for(T=0;m>T;T++)a[T]=y[m+T]*c[m-1-T];break;case l.LONG_START_SEQUENCE:f.process(t,0,y,0);for(T=0;m>T;T++)r[T]=a[T]+y[T]*u[T];for(T=0;b>T;T++)a[T]=y[m+T];for(T=0;d>T;T++)a[b+T]=y[m+b+T]*_[d-T-1];for(T=0;b>T;T++)a[b+d+T]=0;break;case l.EIGHT_SHORT_SEQUENCE:for(T=0;8>T;T++)C.process(t,T*d,y,2*T*d);for(T=0;b>T;T++)r[T]=a[T];for(T=0;d>T;T++)r[b+T]=a[b+T]+y[T]*h[T],r[b+1*d+T]=a[b+1*d+T]+y[1*d+T]*_[d-1-T]+y[2*d+T]*_[T],r[b+2*d+T]=a[b+2*d+T]+y[3*d+T]*_[d-1-T]+y[4*d+T]*_[T],r[b+3*d+T]=a[b+3*d+T]+y[5*d+T]*_[d-1-T]+y[6*d+T]*_[T],g>T&&(r[b+4*d+T]=a[b+4*d+T]+y[7*d+T]*_[d-1-T]+y[8*d+T]*_[T]);for(T=0;d>T;T++)T>=g&&(a[b+4*d+T-m]=y[7*d+T]*_[d-1-T]+y[8*d+T]*_[T]),a[b+5*d+T-m]=y[9*d+T]*_[d-1-T]+y[10*d+T]*_[T],a[b+6*d+T-m]=y[11*d+T]*_[d-1-T]+y[12*d+T]*_[T],a[b+7*d+T-m]=y[13*d+T]*_[d-1-T]+y[14*d+T]*_[T],a[b+8*d+T-m]=y[15*d+T]*_[d-1-T];for(T=0;b>T;T++)a[b+d+T]=0;break;case l.LONG_STOP_SEQUENCE:f.process(t,0,y,0);for(T=0;b>T;T++)r[T]=a[T];for(T=0;d>T;T++)r[b+T]=a[b+T]+y[b+T]*h[T];for(T=0;b>T;T++)r[b+d+T]=a[b+d+T]+y[b+d+T];for(T=0;m>T;T++)a[T]=y[m+T]*c[m-1-T]}},e}(),s=function(){const e=[[1,0,60],[3,4,59],[4,10,61],[4,11,58],[4,12,62],[5,26,57],[5,27,63],[6,56,56],[6,57,64],[6,58,55],[6,59,65],[7,120,66],[7,121,54],[7,122,67],[8,246,53],[8,247,68],[8,248,52],[8,249,69],[8,250,51],[9,502,70],[9,503,50],[9,504,49],[9,505,71],[10,1012,72],[10,1013,48],[10,1014,73],[10,1015,47],[10,1016,74],[10,1017,46],[11,2036,76],[11,2037,75],[11,2038,77],[11,2039,78],[11,2040,45],[11,2041,43],[12,4084,44],[12,4085,79],[12,4086,42],[12,4087,41],[12,4088,80],[12,4089,40],[13,8180,81],[13,8181,39],[13,8182,82],[13,8183,38],[13,8184,83],[14,16370,37],[14,16371,35],[14,16372,85],[14,16373,33],[14,16374,36],[14,16375,34],[14,16376,84],[14,16377,32],[15,32756,87],[15,32757,89],[15,32758,30],[15,32759,31],[16,65520,86],[16,65521,29],[16,65522,26],[16,65523,27],[16,65524,28],[16,65525,24],[16,65526,88],[17,131054,25],[17,131055,22],[17,131056,23],[18,262114,90],[18,262115,21],[18,262116,19],[18,262117,3],[18,262118,1],[18,262119,2],[18,262120,0],[19,524242,98],[19,524243,99],[19,524244,100],[19,524245,101],[19,524246,102],[19,524247,117],[19,524248,97],[19,524249,91],[19,524250,92],[19,524251,93],[19,524252,94],[19,524253,95],[19,524254,96],[19,524255,104],[19,524256,111],[19,524257,112],[19,524258,113],[19,524259,114],[19,524260,115],[19,524261,116],[19,524262,110],[19,524263,105],[19,524264,106],[19,524265,107],[19,524266,108],[19,524267,109],[19,524268,118],[19,524269,6],[19,524270,8],[19,524271,9],[19,524272,10],[19,524273,5],[19,524274,103],[19,524275,120],[19,524276,119],[19,524277,4],[19,524278,7],[19,524279,15],[19,524280,16],[19,524281,18],[19,524282,20],[19,524283,17],[19,524284,11],[19,524285,12],[19,524286,14],[19,524287,13]],t=[[[1,0,0,0,0,0],[5,16,1,0,0,0],[5,17,-1,0,0,0],[5,18,0,0,0,-1],[5,19,0,1,0,0],[5,20,0,0,0,1],[5,21,0,0,-1,0],[5,22,0,0,1,0],[5,23,0,-1,0,0],[7,96,1,-1,0,0],[7,97,-1,1,0,0],[7,98,0,0,-1,1],[7,99,0,1,-1,0],[7,100,0,-1,1,0],[7,101,0,0,1,-1],[7,102,1,1,0,0],[7,103,0,0,-1,-1],[7,104,-1,-1,0,0],[7,105,0,-1,-1,0],[7,106,1,0,-1,0],[7,107,0,1,0,-1],[7,108,-1,0,1,0],[7,109,0,0,1,1],[7,110,1,0,1,0],[7,111,0,-1,0,1],[7,112,0,1,1,0],[7,113,0,1,0,1],[7,114,-1,0,-1,0],[7,115,1,0,0,1],[7,116,-1,0,0,-1],[7,117,1,0,0,-1],[7,118,-1,0,0,1],[7,119,0,-1,0,-1],[9,480,1,1,-1,0],[9,481,-1,1,-1,0],[9,482,1,-1,1,0],[9,483,0,1,1,-1],[9,484,0,1,-1,1],[9,485,0,-1,1,1],[9,486,0,-1,1,-1],[9,487,1,-1,-1,0],[9,488,1,0,-1,1],[9,489,0,1,-1,-1],[9,490,-1,1,1,0],[9,491,-1,0,1,-1],[9,492,-1,-1,1,0],[9,493,0,-1,-1,1],[9,494,1,-1,0,1],[9,495,1,-1,0,-1],[9,496,-1,1,0,-1],[9,497,-1,-1,-1,0],[9,498,0,-1,-1,-1],[9,499,0,1,1,1],[9,500,1,0,1,-1],[9,501,1,1,0,1],[9,502,-1,1,0,1],[9,503,1,1,1,0],[10,1008,-1,-1,0,1],[10,1009,-1,0,-1,-1],[10,1010,1,1,0,-1],[10,1011,1,0,-1,-1],[10,1012,-1,0,-1,1],[10,1013,-1,-1,0,-1],[10,1014,-1,0,1,1],[10,1015,1,0,1,1],[11,2032,1,-1,1,-1],[11,2033,-1,1,-1,1],[11,2034,-1,1,1,-1],[11,2035,1,-1,-1,1],[11,2036,1,1,1,1],[11,2037,-1,-1,1,1],[11,2038,1,1,-1,-1],[11,2039,-1,-1,1,-1],[11,2040,-1,-1,-1,-1],[11,2041,1,1,-1,1],[11,2042,1,-1,1,1],[11,2043,-1,1,1,1],[11,2044,-1,1,-1,-1],[11,2045,-1,-1,-1,1],[11,2046,1,-1,-1,-1],[11,2047,1,1,1,-1]],[[3,0,0,0,0,0],[4,2,1,0,0,0],[5,6,-1,0,0,0],[5,7,0,0,0,1],[5,8,0,0,-1,0],[5,9,0,0,0,-1],[5,10,0,-1,0,0],[5,11,0,0,1,0],[5,12,0,1,0,0],[6,26,0,-1,1,0],[6,27,-1,1,0,0],[6,28,0,1,-1,0],[6,29,0,0,1,-1],[6,30,0,1,0,-1],[6,31,0,0,-1,1],[6,32,-1,0,0,-1],[6,33,1,-1,0,0],[6,34,1,0,-1,0],[6,35,-1,-1,0,0],[6,36,0,0,-1,-1],[6,37,1,0,1,0],[6,38,1,0,0,1],[6,39,0,-1,0,1],[6,40,-1,0,1,0],[6,41,0,1,0,1],[6,42,0,-1,-1,0],[6,43,-1,0,0,1],[6,44,0,-1,0,-1],[6,45,-1,0,-1,0],[6,46,1,1,0,0],[6,47,0,1,1,0],[6,48,0,0,1,1],[6,49,1,0,0,-1],[7,100,0,1,-1,1],[7,101,1,0,-1,1],[7,102,-1,1,-1,0],[7,103,0,-1,1,-1],[7,104,1,-1,1,0],[7,105,1,1,0,-1],[7,106,1,0,1,1],[7,107,-1,1,1,0],[7,108,0,-1,-1,1],[7,109,1,1,1,0],[7,110,-1,0,1,-1],[7,111,-1,-1,-1,0],[7,112,-1,0,-1,1],[7,113,1,-1,-1,0],[7,114,1,1,-1,0],[8,230,1,-1,0,1],[8,231,-1,1,0,-1],[8,232,-1,-1,1,0],[8,233,-1,0,1,1],[8,234,-1,-1,0,1],[8,235,-1,-1,0,-1],[8,236,0,-1,-1,-1],[8,237,1,0,1,-1],[8,238,1,0,-1,-1],[8,239,0,1,-1,-1],[8,240,0,1,1,1],[8,241,-1,1,0,1],[8,242,-1,0,-1,-1],[8,243,0,1,1,-1],[8,244,1,-1,0,-1],[8,245,0,-1,1,1],[8,246,1,1,0,1],[8,247,1,-1,1,-1],[8,248,-1,1,-1,1],[9,498,1,-1,-1,1],[9,499,-1,-1,-1,-1],[9,500,-1,1,1,-1],[9,501,-1,1,1,1],[9,502,1,1,1,1],[9,503,-1,-1,1,-1],[9,504,1,-1,1,1],[9,505,-1,1,-1,-1],[9,506,-1,-1,1,1],[9,507,1,1,-1,-1],[9,508,1,-1,-1,-1],[9,509,-1,-1,-1,1],[9,510,1,1,-1,1],[9,511,1,1,1,-1]],[[1,0,0,0,0,0],[4,8,1,0,0,0],[4,9,0,0,0,1],[4,10,0,1,0,0],[4,11,0,0,1,0],[5,24,1,1,0,0],[5,25,0,0,1,1],[6,52,0,1,1,0],[6,53,0,1,0,1],[6,54,1,0,1,0],[6,55,0,1,1,1],[6,56,1,0,0,1],[6,57,1,1,1,0],[7,116,1,1,1,1],[7,117,1,0,1,1],[7,118,1,1,0,1],[8,238,2,0,0,0],[8,239,0,0,0,2],[8,240,0,0,1,2],[8,241,2,1,0,0],[8,242,1,2,1,0],[9,486,0,0,2,1],[9,487,0,1,2,1],[9,488,1,2,0,0],[9,489,0,1,1,2],[9,490,2,1,1,0],[9,491,0,0,2,0],[9,492,0,2,1,0],[9,493,0,1,2,0],[9,494,0,2,0,0],[9,495,0,1,0,2],[9,496,2,0,1,0],[9,497,1,2,1,1],[9,498,0,2,1,1],[9,499,1,1,2,0],[9,500,1,1,2,1],[10,1002,1,2,0,1],[10,1003,1,0,2,0],[10,1004,1,0,2,1],[10,1005,0,2,0,1],[10,1006,2,1,1,1],[10,1007,1,1,1,2],[10,1008,2,1,0,1],[10,1009,1,0,1,2],[10,1010,0,0,2,2],[10,1011,0,1,2,2],[10,1012,2,2,1,0],[10,1013,1,2,2,0],[10,1014,1,0,0,2],[10,1015,2,0,0,1],[10,1016,0,2,2,1],[11,2034,2,2,0,0],[11,2035,1,2,2,1],[11,2036,1,1,0,2],[11,2037,2,0,1,1],[11,2038,1,1,2,2],[11,2039,2,2,1,1],[11,2040,0,2,2,0],[11,2041,0,2,1,2],[12,4084,1,0,2,2],[12,4085,2,2,0,1],[12,4086,2,1,2,0],[12,4087,2,2,2,0],[12,4088,0,2,2,2],[12,4089,2,2,2,1],[12,4090,2,1,2,1],[12,4091,1,2,1,2],[12,4092,1,2,2,2],[13,8186,0,2,0,2],[13,8187,2,0,2,0],[13,8188,1,2,0,2],[14,16378,2,0,2,1],[14,16379,2,1,1,2],[14,16380,2,1,0,2],[15,32762,2,2,2,2],[15,32763,2,2,1,2],[15,32764,2,1,2,2],[15,32765,2,0,1,2],[15,32766,2,0,0,2],[16,65534,2,2,0,2],[16,65535,2,0,2,2]],[[4,0,1,1,1,1],[4,1,0,1,1,1],[4,2,1,1,0,1],[4,3,1,1,1,0],[4,4,1,0,1,1],[4,5,1,0,0,0],[4,6,1,1,0,0],[4,7,0,0,0,0],[4,8,0,0,1,1],[4,9,1,0,1,0],[5,20,1,0,0,1],[5,21,0,1,1,0],[5,22,0,0,0,1],[5,23,0,1,0,1],[5,24,0,0,1,0],[5,25,0,1,0,0],[7,104,2,1,1,1],[7,105,1,1,2,1],[7,106,1,2,1,1],[7,107,1,1,1,2],[7,108,2,1,1,0],[7,109,2,1,0,1],[7,110,1,2,1,0],[7,111,2,0,1,1],[7,112,0,1,2,1],[8,226,0,1,1,2],[8,227,1,1,2,0],[8,228,0,2,1,1],[8,229,1,0,1,2],[8,230,1,2,0,1],[8,231,1,1,0,2],[8,232,1,0,2,1],[8,233,2,1,0,0],[8,234,2,0,1,0],[8,235,1,2,0,0],[8,236,2,0,0,1],[8,237,0,1,0,2],[8,238,0,2,1,0],[8,239,0,0,1,2],[8,240,0,1,2,0],[8,241,0,2,0,1],[8,242,1,0,0,2],[8,243,0,0,2,1],[8,244,1,0,2,0],[8,245,2,0,0,0],[8,246,0,0,0,2],[9,494,0,2,0,0],[9,495,0,0,2,0],[9,496,1,2,2,1],[9,497,2,2,1,1],[9,498,2,1,2,1],[9,499,1,1,2,2],[9,500,1,2,1,2],[9,501,2,1,1,2],[10,1004,1,2,2,0],[10,1005,2,2,1,0],[10,1006,2,1,2,0],[10,1007,0,2,2,1],[10,1008,0,1,2,2],[10,1009,2,2,0,1],[10,1010,0,2,1,2],[10,1011,2,0,2,1],[10,1012,1,0,2,2],[10,1013,2,2,2,1],[10,1014,1,2,0,2],[10,1015,2,0,1,2],[10,1016,2,1,0,2],[10,1017,1,2,2,2],[11,2036,2,1,2,2],[11,2037,2,2,1,2],[11,2038,0,2,2,0],[11,2039,2,2,0,0],[11,2040,0,0,2,2],[11,2041,2,0,2,0],[11,2042,0,2,0,2],[11,2043,2,0,0,2],[11,2044,2,2,2,2],[11,2045,0,2,2,2],[11,2046,2,2,2,0],[12,4094,2,2,0,2],[12,4095,2,0,2,2]],[[1,0,0,0],[4,8,-1,0],[4,9,1,0],[4,10,0,1],[4,11,0,-1],[5,24,1,-1],[5,25,-1,1],[5,26,-1,-1],[5,27,1,1],[7,112,-2,0],[7,113,0,2],[7,114,2,0],[7,115,0,-2],[8,232,-2,-1],[8,233,2,1],[8,234,-1,-2],[8,235,1,2],[8,236,-2,1],[8,237,2,-1],[8,238,-1,2],[8,239,1,-2],[8,240,-3,0],[8,241,3,0],[8,242,0,-3],[8,243,0,3],[9,488,-3,-1],[9,489,1,3],[9,490,3,1],[9,491,-1,-3],[9,492,-3,1],[9,493,3,-1],[9,494,1,-3],[9,495,-1,3],[9,496,-2,2],[9,497,2,2],[9,498,-2,-2],[9,499,2,-2],[10,1e3,-3,-2],[10,1001,3,-2],[10,1002,-2,3],[10,1003,2,-3],[10,1004,3,2],[10,1005,2,3],[10,1006,-3,2],[10,1007,-2,-3],[10,1008,0,-4],[10,1009,-4,0],[10,1010,4,1],[10,1011,4,0],[11,2024,-4,-1],[11,2025,0,4],[11,2026,4,-1],[11,2027,-1,-4],[11,2028,1,4],[11,2029,-1,4],[11,2030,-4,1],[11,2031,1,-4],[11,2032,3,-3],[11,2033,-3,-3],[11,2034,-3,3],[11,2035,-2,4],[11,2036,-4,-2],[11,2037,4,2],[11,2038,2,-4],[11,2039,2,4],[11,2040,3,3],[11,2041,-4,2],[12,4084,-2,-4],[12,4085,4,-2],[12,4086,3,-4],[12,4087,-4,-3],[12,4088,-4,3],[12,4089,3,4],[12,4090,-3,4],[12,4091,4,3],[12,4092,4,-3],[12,4093,-3,-4],[13,8188,4,-4],[13,8189,-4,4],[13,8190,4,4],[13,8191,-4,-4]],[[4,0,0,0],[4,1,1,0],[4,2,0,-1],[4,3,0,1],[4,4,-1,0],[4,5,1,1],[4,6,-1,1],[4,7,1,-1],[4,8,-1,-1],[6,36,2,-1],[6,37,2,1],[6,38,-2,1],[6,39,-2,-1],[6,40,-2,0],[6,41,-1,2],[6,42,2,0],[6,43,1,-2],[6,44,1,2],[6,45,0,-2],[6,46,-1,-2],[6,47,0,2],[6,48,2,-2],[6,49,-2,2],[6,50,-2,-2],[6,51,2,2],[7,104,-3,1],[7,105,3,1],[7,106,3,-1],[7,107,-1,3],[7,108,-3,-1],[7,109,1,3],[7,110,1,-3],[7,111,-1,-3],[7,112,3,0],[7,113,-3,0],[7,114,0,-3],[7,115,0,3],[7,116,3,2],[8,234,-3,-2],[8,235,-2,3],[8,236,2,3],[8,237,3,-2],[8,238,2,-3],[8,239,-2,-3],[8,240,-3,2],[8,241,3,3],[9,484,3,-3],[9,485,-3,-3],[9,486,-3,3],[9,487,1,-4],[9,488,-1,-4],[9,489,4,1],[9,490,-4,1],[9,491,-4,-1],[9,492,1,4],[9,493,4,-1],[9,494,-1,4],[9,495,0,-4],[9,496,-4,2],[9,497,-4,-2],[9,498,2,4],[9,499,-2,-4],[9,500,-4,0],[9,501,4,2],[9,502,4,-2],[9,503,-2,4],[9,504,4,0],[9,505,2,-4],[9,506,0,4],[10,1014,-3,-4],[10,1015,-3,4],[10,1016,3,-4],[10,1017,4,-3],[10,1018,3,4],[10,1019,4,3],[10,1020,-4,3],[10,1021,-4,-3],[11,2044,4,4],[11,2045,-4,4],[11,2046,-4,-4],[11,2047,4,-4]],[[1,0,0,0],[3,4,1,0],[3,5,0,1],[4,12,1,1],[6,52,2,1],[6,53,1,2],[6,54,2,0],[6,55,0,2],[7,112,3,1],[7,113,1,3],[7,114,2,2],[7,115,3,0],[7,116,0,3],[8,234,2,3],[8,235,3,2],[8,236,1,4],[8,237,4,1],[8,238,1,5],[8,239,5,1],[8,240,3,3],[8,241,2,4],[8,242,0,4],[8,243,4,0],[9,488,4,2],[9,489,2,5],[9,490,5,2],[9,491,0,5],[9,492,6,1],[9,493,5,0],[9,494,1,6],[9,495,4,3],[9,496,3,5],[9,497,3,4],[9,498,5,3],[9,499,2,6],[9,500,6,2],[9,501,1,7],[10,1004,3,6],[10,1005,0,6],[10,1006,6,0],[10,1007,4,4],[10,1008,7,1],[10,1009,4,5],[10,1010,7,2],[10,1011,5,4],[10,1012,6,3],[10,1013,2,7],[10,1014,7,3],[10,1015,6,4],[10,1016,5,5],[10,1017,4,6],[10,1018,3,7],[11,2038,7,0],[11,2039,0,7],[11,2040,6,5],[11,2041,5,6],[11,2042,7,4],[11,2043,4,7],[11,2044,5,7],[11,2045,7,5],[12,4092,7,6],[12,4093,6,6],[12,4094,6,7],[12,4095,7,7]],[[3,0,1,1],[4,2,2,1],[4,3,1,0],[4,4,1,2],[4,5,0,1],[4,6,2,2],[5,14,0,0],[5,15,2,0],[5,16,0,2],[5,17,3,1],[5,18,1,3],[5,19,3,2],[5,20,2,3],[6,42,3,3],[6,43,4,1],[6,44,1,4],[6,45,4,2],[6,46,2,4],[6,47,3,0],[6,48,0,3],[6,49,4,3],[6,50,3,4],[6,51,5,2],[7,104,5,1],[7,105,2,5],[7,106,1,5],[7,107,5,3],[7,108,3,5],[7,109,4,4],[7,110,5,4],[7,111,0,4],[7,112,4,5],[7,113,4,0],[7,114,2,6],[7,115,6,2],[7,116,6,1],[7,117,1,6],[8,236,3,6],[8,237,6,3],[8,238,5,5],[8,239,5,0],[8,240,6,4],[8,241,0,5],[8,242,4,6],[8,243,7,1],[8,244,7,2],[8,245,2,7],[8,246,6,5],[8,247,7,3],[8,248,1,7],[8,249,5,6],[8,250,3,7],[9,502,6,6],[9,503,7,4],[9,504,6,0],[9,505,4,7],[9,506,0,6],[9,507,7,5],[9,508,7,6],[9,509,6,7],[10,1020,5,7],[10,1021,7,0],[10,1022,0,7],[10,1023,7,7]],[[1,0,0,0],[3,4,1,0],[3,5,0,1],[4,12,1,1],[6,52,2,1],[6,53,1,2],[6,54,2,0],[6,55,0,2],[7,112,3,1],[7,113,2,2],[7,114,1,3],[8,230,3,0],[8,231,0,3],[8,232,2,3],[8,233,3,2],[8,234,1,4],[8,235,4,1],[8,236,2,4],[8,237,1,5],[9,476,4,2],[9,477,3,3],[9,478,0,4],[9,479,4,0],[9,480,5,1],[9,481,2,5],[9,482,1,6],[9,483,3,4],[9,484,5,2],[9,485,6,1],[9,486,4,3],[10,974,0,5],[10,975,2,6],[10,976,5,0],[10,977,1,7],[10,978,3,5],[10,979,1,8],[10,980,8,1],[10,981,4,4],[10,982,5,3],[10,983,6,2],[10,984,7,1],[10,985,0,6],[10,986,8,2],[10,987,2,8],[10,988,3,6],[10,989,2,7],[10,990,4,5],[10,991,9,1],[10,992,1,9],[10,993,7,2],[11,1988,6,0],[11,1989,5,4],[11,1990,6,3],[11,1991,8,3],[11,1992,0,7],[11,1993,9,2],[11,1994,3,8],[11,1995,4,6],[11,1996,3,7],[11,1997,0,8],[11,1998,10,1],[11,1999,6,4],[11,2e3,2,9],[11,2001,5,5],[11,2002,8,0],[11,2003,7,0],[11,2004,7,3],[11,2005,10,2],[11,2006,9,3],[11,2007,8,4],[11,2008,1,10],[11,2009,7,4],[11,2010,6,5],[11,2011,5,6],[11,2012,4,8],[11,2013,4,7],[11,2014,3,9],[11,2015,11,1],[11,2016,5,8],[11,2017,9,0],[11,2018,8,5],[12,4038,10,3],[12,4039,2,10],[12,4040,0,9],[12,4041,11,2],[12,4042,9,4],[12,4043,6,6],[12,4044,12,1],[12,4045,4,9],[12,4046,8,6],[12,4047,1,11],[12,4048,9,5],[12,4049,10,4],[12,4050,5,7],[12,4051,7,5],[12,4052,2,11],[12,4053,1,12],[12,4054,12,2],[12,4055,11,3],[12,4056,3,10],[12,4057,5,9],[12,4058,6,7],[12,4059,8,7],[12,4060,11,4],[12,4061,0,10],[12,4062,7,6],[12,4063,12,3],[12,4064,10,0],[12,4065,10,5],[12,4066,4,10],[12,4067,6,8],[12,4068,2,12],[12,4069,9,6],[12,4070,9,7],[12,4071,4,11],[12,4072,11,0],[12,4073,6,9],[12,4074,3,11],[12,4075,5,10],[13,8152,8,8],[13,8153,7,8],[13,8154,12,5],[13,8155,3,12],[13,8156,11,5],[13,8157,7,7],[13,8158,12,4],[13,8159,11,6],[13,8160,10,6],[13,8161,4,12],[13,8162,7,9],[13,8163,5,11],[13,8164,0,11],[13,8165,12,6],[13,8166,6,10],[13,8167,12,0],[13,8168,10,7],[13,8169,5,12],[13,8170,7,10],[13,8171,9,8],[13,8172,0,12],[13,8173,11,7],[13,8174,8,9],[13,8175,9,9],[13,8176,10,8],[13,8177,7,11],[13,8178,12,7],[13,8179,6,11],[13,8180,8,11],[13,8181,11,8],[13,8182,7,12],[13,8183,6,12],[14,16368,8,10],[14,16369,10,9],[14,16370,8,12],[14,16371,9,10],[14,16372,9,11],[14,16373,9,12],[14,16374,10,11],[14,16375,12,9],[14,16376,10,10],[14,16377,11,9],[14,16378,12,8],[14,16379,11,10],[14,16380,12,10],[14,16381,12,11],[15,32764,10,12],[15,32765,11,11],[15,32766,11,12],[15,32767,12,12]],[[4,0,1,1],[4,1,1,2],[4,2,2,1],[5,6,2,2],[5,7,1,0],[5,8,0,1],[5,9,1,3],[5,10,3,2],[5,11,3,1],[5,12,2,3],[5,13,3,3],[6,28,2,0],[6,29,0,2],[6,30,2,4],[6,31,4,2],[6,32,1,4],[6,33,4,1],[6,34,0,0],[6,35,4,3],[6,36,3,4],[6,37,3,0],[6,38,0,3],[6,39,4,4],[6,40,2,5],[6,41,5,2],[7,84,1,5],[7,85,5,1],[7,86,5,3],[7,87,3,5],[7,88,5,4],[7,89,4,5],[7,90,6,2],[7,91,2,6],[7,92,6,3],[7,93,4,0],[7,94,6,1],[7,95,0,4],[7,96,1,6],[7,97,3,6],[7,98,5,5],[7,99,6,4],[7,100,4,6],[8,202,6,5],[8,203,7,2],[8,204,3,7],[8,205,2,7],[8,206,5,6],[8,207,8,2],[8,208,7,3],[8,209,5,0],[8,210,7,1],[8,211,0,5],[8,212,8,1],[8,213,1,7],[8,214,8,3],[8,215,7,4],[8,216,4,7],[8,217,2,8],[8,218,6,6],[8,219,7,5],[8,220,1,8],[8,221,3,8],[8,222,8,4],[8,223,4,8],[8,224,5,7],[8,225,8,5],[8,226,5,8],[9,454,7,6],[9,455,6,7],[9,456,9,2],[9,457,6,0],[9,458,6,8],[9,459,9,3],[9,460,3,9],[9,461,9,1],[9,462,2,9],[9,463,0,6],[9,464,8,6],[9,465,9,4],[9,466,4,9],[9,467,10,2],[9,468,1,9],[9,469,7,7],[9,470,8,7],[9,471,9,5],[9,472,7,8],[9,473,10,3],[9,474,5,9],[9,475,10,4],[9,476,2,10],[9,477,10,1],[9,478,3,10],[9,479,9,6],[9,480,6,9],[9,481,8,0],[9,482,4,10],[9,483,7,0],[9,484,11,2],[10,970,7,9],[10,971,11,3],[10,972,10,6],[10,973,1,10],[10,974,11,1],[10,975,9,7],[10,976,0,7],[10,977,8,8],[10,978,10,5],[10,979,3,11],[10,980,5,10],[10,981,8,9],[10,982,11,5],[10,983,0,8],[10,984,11,4],[10,985,2,11],[10,986,7,10],[10,987,6,10],[10,988,10,7],[10,989,4,11],[10,990,1,11],[10,991,12,2],[10,992,9,8],[10,993,12,3],[10,994,11,6],[10,995,5,11],[10,996,12,4],[10,997,11,7],[10,998,12,5],[10,999,3,12],[10,1e3,6,11],[10,1001,9,0],[10,1002,10,8],[10,1003,10,0],[10,1004,12,1],[10,1005,0,9],[10,1006,4,12],[10,1007,9,9],[10,1008,12,6],[10,1009,2,12],[10,1010,8,10],[11,2022,9,10],[11,2023,1,12],[11,2024,11,8],[11,2025,12,7],[11,2026,7,11],[11,2027,5,12],[11,2028,6,12],[11,2029,10,9],[11,2030,8,11],[11,2031,12,8],[11,2032,0,10],[11,2033,7,12],[11,2034,11,0],[11,2035,10,10],[11,2036,11,9],[11,2037,11,10],[11,2038,0,11],[11,2039,11,11],[11,2040,9,11],[11,2041,10,11],[11,2042,12,0],[11,2043,8,12],[12,4088,12,9],[12,4089,10,12],[12,4090,9,12],[12,4091,11,12],[12,4092,12,11],[12,4093,0,12],[12,4094,12,10],[12,4095,12,12]],[[4,0,0,0],[4,1,1,1],[5,4,16,16],[5,5,1,0],[5,6,0,1],[5,7,2,1],[5,8,1,2],[5,9,2,2],[6,20,1,3],[6,21,3,1],[6,22,3,2],[6,23,2,0],[6,24,2,3],[6,25,0,2],[6,26,3,3],[7,54,4,1],[7,55,1,4],[7,56,4,2],[7,57,2,4],[7,58,4,3],[7,59,3,4],[7,60,3,0],[7,61,0,3],[7,62,5,1],[7,63,5,2],[7,64,2,5],[7,65,4,4],[7,66,1,5],[7,67,5,3],[7,68,3,5],[7,69,5,4],[8,140,4,5],[8,141,6,2],[8,142,2,6],[8,143,6,1],[8,144,6,3],[8,145,3,6],[8,146,1,6],[8,147,4,16],[8,148,3,16],[8,149,16,5],[8,150,16,3],[8,151,16,4],[8,152,6,4],[8,153,16,6],[8,154,4,0],[8,155,4,6],[8,156,0,4],[8,157,2,16],[8,158,5,5],[8,159,5,16],[8,160,16,7],[8,161,16,2],[8,162,16,8],[8,163,2,7],[8,164,7,2],[8,165,3,7],[8,166,6,5],[8,167,5,6],[8,168,6,16],[8,169,16,10],[8,170,7,3],[8,171,7,1],[8,172,16,9],[8,173,7,16],[8,174,1,16],[8,175,1,7],[8,176,4,7],[8,177,16,11],[8,178,7,4],[8,179,16,12],[8,180,8,16],[8,181,16,1],[8,182,6,6],[8,183,9,16],[8,184,2,8],[8,185,5,7],[8,186,10,16],[8,187,16,13],[8,188,8,3],[8,189,8,2],[8,190,3,8],[8,191,5,0],[8,192,16,14],[8,193,11,16],[8,194,7,5],[8,195,4,8],[8,196,6,7],[8,197,7,6],[8,198,0,5],[9,398,8,4],[9,399,16,15],[9,400,12,16],[9,401,1,8],[9,402,8,1],[9,403,14,16],[9,404,5,8],[9,405,13,16],[9,406,3,9],[9,407,8,5],[9,408,7,7],[9,409,2,9],[9,410,8,6],[9,411,9,2],[9,412,9,3],[9,413,15,16],[9,414,4,9],[9,415,6,8],[9,416,6,0],[9,417,9,4],[9,418,5,9],[9,419,8,7],[9,420,7,8],[9,421,1,9],[9,422,10,3],[9,423,0,6],[9,424,10,2],[9,425,9,1],[9,426,9,5],[9,427,4,10],[9,428,2,10],[9,429,9,6],[9,430,3,10],[9,431,6,9],[9,432,10,4],[9,433,8,8],[9,434,10,5],[9,435,9,7],[9,436,11,3],[9,437,1,10],[9,438,7,0],[9,439,10,6],[9,440,7,9],[9,441,3,11],[9,442,5,10],[9,443,10,1],[9,444,4,11],[9,445,11,2],[9,446,13,2],[9,447,6,10],[9,448,13,3],[9,449,2,11],[9,450,16,0],[9,451,5,11],[9,452,11,5],[10,906,11,4],[10,907,9,8],[10,908,7,10],[10,909,8,9],[10,910,0,16],[10,911,4,13],[10,912,0,7],[10,913,3,13],[10,914,11,6],[10,915,13,1],[10,916,13,4],[10,917,12,3],[10,918,2,13],[10,919,13,5],[10,920,8,10],[10,921,6,11],[10,922,10,8],[10,923,10,7],[10,924,14,2],[10,925,12,4],[10,926,1,11],[10,927,4,12],[10,928,11,1],[10,929,3,12],[10,930,1,13],[10,931,12,2],[10,932,7,11],[10,933,3,14],[10,934,5,12],[10,935,5,13],[10,936,14,4],[10,937,4,14],[10,938,11,7],[10,939,14,3],[10,940,12,5],[10,941,13,6],[10,942,12,6],[10,943,8,0],[10,944,11,8],[10,945,2,12],[10,946,9,9],[10,947,14,5],[10,948,6,13],[10,949,10,10],[10,950,15,2],[10,951,8,11],[10,952,9,10],[10,953,14,6],[10,954,10,9],[10,955,5,14],[10,956,11,9],[10,957,14,1],[10,958,2,14],[10,959,6,12],[10,960,1,12],[10,961,13,8],[10,962,0,8],[10,963,13,7],[10,964,7,12],[10,965,12,7],[10,966,7,13],[10,967,15,3],[10,968,12,1],[10,969,6,14],[10,970,2,15],[10,971,15,5],[10,972,15,4],[10,973,1,14],[10,974,9,11],[10,975,4,15],[10,976,14,7],[10,977,8,13],[10,978,13,9],[10,979,8,12],[10,980,5,15],[10,981,3,15],[10,982,10,11],[10,983,11,10],[10,984,12,8],[10,985,15,6],[10,986,15,7],[10,987,8,14],[10,988,15,1],[10,989,7,14],[10,990,9,0],[10,991,0,9],[10,992,9,13],[10,993,9,12],[10,994,12,9],[10,995,14,8],[10,996,10,13],[10,997,14,9],[10,998,12,10],[10,999,6,15],[10,1e3,7,15],[11,2002,9,14],[11,2003,15,8],[11,2004,11,11],[11,2005,11,14],[11,2006,1,15],[11,2007,10,12],[11,2008,10,14],[11,2009,13,11],[11,2010,13,10],[11,2011,11,13],[11,2012,11,12],[11,2013,8,15],[11,2014,14,11],[11,2015,13,12],[11,2016,12,13],[11,2017,15,9],[11,2018,14,10],[11,2019,10,0],[11,2020,12,11],[11,2021,9,15],[11,2022,0,10],[11,2023,12,12],[11,2024,11,0],[11,2025,12,14],[11,2026,10,15],[11,2027,13,13],[11,2028,0,13],[11,2029,14,12],[11,2030,15,10],[11,2031,15,11],[11,2032,11,15],[11,2033,14,13],[11,2034,13,0],[11,2035,0,11],[11,2036,13,14],[11,2037,15,12],[11,2038,15,13],[11,2039,12,15],[11,2040,14,0],[11,2041,14,14],[11,2042,13,15],[11,2043,12,0],[11,2044,14,15],[12,4090,0,14],[12,4091,0,12],[12,4092,15,14],[12,4093,15,0],[12,4094,0,15],[12,4095,15,15]]],r=[!1,!1,!0,!0,!1,!1,!0,!0,!0,!0,!0];return{findOffset:function(e,t){for(var r=0,o=t[r][0],a=e.read(o);a!==t[r][1];){var i=t[++r][0]-o;o=t[r][0],a<<=i,a|=e.read(i)}return r},signValues:function(e,t,r,o){for(var a=r;r+o>a;a++)t[a]&&e.read(1)&&(t[a]=-t[a])},getEscape:function(e,t){for(var r=4;e.read(1);)r++;var o=e.read(r)|1<<r;return 0>t?-o:o},decodeScaleFactor:function(t){var r=this.findOffset(t,e);return e[r][2]},decodeSpectralData:function(e,o,a,i){var n=t[o-1],s=this.findOffset(e,n);if(a[i]=n[s][2],a[i+1]=n[s][3],5>o&&(a[i+2]=n[s][4],a[i+3]=n[s][5]),11>o)r[o-1]&&this.signValues(e,a,i,5>o?4:2);else{if(!(11===o||o>15))throw new Error("Huffman: unknown spectral codebook: "+o);this.signValues(e,a,i,5>o?4:2),16===Math.abs(a[i])&&(a[i]=this.getEscape(e,a[i])),16===Math.abs(a[i+1])&&(a[i+1]=this.getEscape(e,a[i+1]))}}}}(),l=function(){function e(e){this.info=new t,this.bandTypes=new Int32Array(r),this.sectEnd=new Int32Array(r),this.data=new Float32Array(e.frameLength),this.scaleFactors=new Float32Array(r),this.randomState=523124044,this.tns=new P(e),this.specBuf=new Int32Array(4)}function t(){this.windowShape=new Int32Array(2),this.windowSequence=e.ONLY_LONG_SEQUENCE,this.groupLength=new Int32Array(o),this.ltpData1Present=!1,this.ltpData2Present=!1}e.ZERO_BT=0,e.FIRST_PAIR_BT=5,e.ESC_BT=11,e.NOISE_BT=13,e.INTENSITY_BT2=14,e.INTENSITY_BT=15,e.ONLY_LONG_SEQUENCE=0,e.LONG_START_SEQUENCE=1,e.EIGHT_SHORT_SEQUENCE=2,e.LONG_STOP_SEQUENCE=3;const r=120,o=8;return e.prototype={decode:function(t,r,o){if(this.globalGain=t.read(8),o||this.info.decode(t,r,o),this.decodeBandTypes(t,r),this.decodeScaleFactors(t),this.pulsePresent=t.read(1)){if(this.info.windowSequence===e.EIGHT_SHORT_SEQUENCE)throw new Error("Pulse tool not allowed in eight short sequence.");this.decodePulseData(t)}if((this.tnsPresent=t.read(1))&&this.tns.decode(t,this.info),this.gainPresent=t.read(1))throw new Error("TODO: decode gain control/SSR");this.decodeSpectralData(t)},decodeBandTypes:function(t){for(var r=this.info.windowSequence===e.EIGHT_SHORT_SEQUENCE?3:5,o=this.info.groupCount,a=this.info.maxSFB,i=this.bandTypes,n=this.sectEnd,s=0,l=(1<<r)-1,c=0;o>c;c++)for(var p=0;a>p;){var _,u=p,h=t.read(4);if(12===h)throw new Error("Invalid band type: 12");for(;(_=t.read(r))===l;)u+=_;if((u+=_)>a)throw new Error("Too many bands ("+u+" > "+a+")");for(;u>p;p++)i[s]=h,n[s++]=u}},decodeScaleFactors:function(t){for(var r=this.info.groupCount,o=this.info.maxSFB,a=[this.globalGain,this.globalGain-90,0],i=0,n=!0,l=this.scaleFactors,c=this.sectEnd,p=this.bandTypes,_=0;r>_;_++)for(var u=0;o>u;){var h=c[i];switch(p[i]){case e.ZERO_BT:for(;h>u;u++,i++)l[i]=0;break;case e.INTENSITY_BT:case e.INTENSITY_BT2:for(;h>u;u++,i++){a[2]+=s.decodeScaleFactor(t)-60;var m=Math.min(Math.max(a[2],-155),100);l[i]=A[200-m]}break;case e.NOISE_BT:for(;h>u;u++,i++){n?(a[1]+=t.read(9)-256,n=!1):a[1]+=s.decodeScaleFactor(t)-60;m=Math.min(Math.max(a[1],-100),155);l[i]=-A[m+200]}break;default:for(;h>u;u++,i++){if(a[0]+=s.decodeScaleFactor(t)-60,a[0]>255)throw new Error("Scalefactor out of range: "+a[0]);l[i]=A[a[0]-100+200]}}}},decodePulseData:function(e){var t=e.read(2)+1,r=e.read(6);if(r>=this.info.swbCount)throw new Error("Pulse SWB out of range: "+r);if(this.pulseOffset&&this.pulseOffset.length===t||(this.pulseOffset=new Int32Array(t),this.pulseAmp=new Int32Array(t)),this.pulseOffset[0]=this.info.swbOffsets[r]+e.read(5),this.pulseAmp[0]=e.read(4),this.pulseOffset[0]>1023)throw new Error("Pulse offset out of range: "+this.pulseOffset[0]);for(var o=1;t>o;o++){if(this.pulseOffset[o]=e.read(5)+this.pulseOffset[o-1],this.pulseOffset[o]>1023)throw new Error("Pulse offset out of range: "+this.pulseOffset[o]);this.pulseAmp[o]=e.read(4)}},decodeSpectralData:function(t){for(var r=this.data,o=this.info,a=o.maxSFB,i=o.groupCount,n=o.swbOffsets,l=this.bandTypes,c=this.scaleFactors,p=this.specBuf,_=0,u=0,h=0;i>h;h++){for(var m=o.groupLength[h],d=0;a>d;d++,u++){var b=l[u],g=_+n[d],y=n[d+1]-n[d];if(b===e.ZERO_BT||b===e.INTENSITY_BT||b===e.INTENSITY_BT2)for(var f=0;m>f;f++,g+=128)for(var C=g;g+y>C;C++)r[C]=0;else if(b===e.NOISE_BT)for(f=0;m>f;f++,g+=128){for(var T=0,v=0;y>v;v++)this.randomState=1015568748*this.randomState|0,r[g+v]=this.randomState,T+=r[g+v]*r[g+v];var B=c[u]/Math.sqrt(T);for(v=0;y>v;v++)r[g+v]*=B}else for(f=0;m>f;f++,g+=128){var S=b>=e.FIRST_PAIR_BT?2:4;for(v=0;y>v;v+=S){s.decodeSpectralData(t,b,p,0);for(var O=0;S>O;O++)r[g+v+O]=p[O]>0?E[p[O]]:-E[-p[O]],r[g+v+O]*=c[u]}}}_+=m<<7}if(this.pulsePresent)throw new Error("TODO: add pulse data")}},t.prototype={decode:function(t,r,o){if(t.advance(1),this.windowSequence=t.read(2),this.windowShape[0]=this.windowShape[1],this.windowShape[1]=t.read(1),this.groupCount=1,this.groupLength[0]=1,this.windowSequence===e.EIGHT_SHORT_SEQUENCE){this.maxSFB=t.read(4);for(var a=0;7>a;a++)t.read(1)?this.groupLength[this.groupCount-1]++:(this.groupCount++,this.groupLength[this.groupCount-1]=1);this.windowCount=8,this.swbOffsets=R[r.sampleIndex],this.swbCount=x[r.sampleIndex],this.predictorPresent=!1}else this.maxSFB=t.read(6),this.windowCount=1,this.swbOffsets=w[r.sampleIndex],this.swbCount=N[r.sampleIndex],this.predictorPresent=!!t.read(1),this.predictorPresent&&this.decodePrediction(t,r,o)},decodePrediction:function(){throw new Error("Prediction not implemented.")}},e}(),c=function(){function e(e){switch(this.N=e,this.N2=e>>>1,this.N4=e>>>2,this.N8=e>>>3,e){case 2048:this.sincos=p;break;case 256:this.sincos=_;break;case 1920:this.sincos=u;break;case 240:this.sincos=h;break;default:throw new Error("unsupported MDCT length: "+e)}this.fft=new i(this.N4),this.buf=new Array(this.N4);for(var t=0;t<this.N4;t++)this.buf[t]=new Float32Array(2);this.tmp=new Float32Array(2)}return e.prototype.process=function(e,t,r,o){for(var a=this.N2,i=this.N4,n=this.N8,s=this.buf,l=this.tmp,c=this.sincos,p=this.fft,_=0;i>_;_++)s[_][1]=e[t+2*_]*c[_][0]+e[t+a-1-2*_]*c[_][1],s[_][0]=e[t+a-1-2*_]*c[_][0]-e[t+2*_]*c[_][1];p.process(s,!1);for(_=0;i>_;_++)l[0]=s[_][0],l[1]=s[_][1],s[_][1]=l[1]*c[_][0]+l[0]*c[_][1],s[_][0]=l[0]*c[_][0]-l[1]*c[_][1];for(_=0;n>_;_+=2)r[o+2*_]=s[n+_][1],r[o+2+2*_]=s[n+1+_][1],r[o+1+2*_]=-s[n-1-_][0],r[o+3+2*_]=-s[n-2-_][0],r[o+i+2*_]=s[_][0],r[o+i+2+2*_]=s[1+_][0],r[o+i+1+2*_]=-s[i-1-_][1],r[o+i+3+2*_]=-s[i-2-_][1],r[o+a+2*_]=s[n+_][0],r[o+a+2+2*_]=s[n+1+_][0],r[o+a+1+2*_]=-s[n-1-_][1],r[o+a+3+2*_]=-s[n-2-_][1],r[o+a+i+2*_]=-s[_][1],r[o+a+i+2+2*_]=-s[1+_][1],r[o+a+i+1+2*_]=s[i-1-_][0],r[o+a+i+3+2*_]=s[i-2-_][0]},e}(),p=[[.031249997702054,11984224612e-15],[.031249813866531,.000107857810004],[.031249335895858,.000203730380198],[.031248563794535,.000299601032804],[.031247497569829,.000395468865451],[.031246137231775,.000491332975794],[.031244482793177,.000587192461525],[.031242534269608,.000683046420376],[.031240291679407,.000778893950134],[.031237755043684,.000874734148645],[.031234924386313,.000970566113826],[.031231799733938,.001066388943669],[.03122838111597,.001162201736253],[.031224668564585,.001258003589751],[.031220662114728,.001353793602441],[.031216361804108,.00144957087271],[.031211767673203,.001545334499065],[.031206879765253,.001641083580144],[.031201698126266,.001736817214719],[.031196222805014,.001832534501709],[.031190453853031,.001928234540186],[.031184391324617,.002023916429386],[.031178035276836,.002119579268713],[.031171385769513,.002215222157753],[.031164442865236,.002310844196278],[.031157206629353,.002406444484258],[.031149677129975,.002502022121865],[.031141854437973,.002597576209488],[.031133738626977,.002693105847734],[.031125329773375,.002788610137442],[.031116627956316,.002884088179689],[.031107633257703,.002979539075801],[.0310983457622,.003074961927355],[.031088765557222,.003170355836197],[.031078892732942,.003265719904442],[.031068727382288,.003361053234488],[.031058269600939,.003456354929021],[.031047519487329,.003551624091024],[.03103647714264,.00364685982379],[.031025142670809,.003742061230921],[.031013516178519,.003837227416347],[.031001597775203,.003932357484328],[.030989387573042,.004027450539462],[.030976885686963,.004122505686697],[.030964092234638,.00421752203134],[.030951007336485,.004312498679058],[.030937631115663,.004407434735897],[.030923963698074,.004502329308281],[.030910005212362,.004597181503027],[.030895755789908,.00469199042735],[.030881215564835,.004786755188872],[.030866384674,.004881474895632],[.030851263256996,.00497614865609],[.030835851456154,.005070775579142],[.030820149416533,.005165354774124],[.030804157285929,.005259885350819],[.030787875214864,.005354366419469],[.030771303356593,.005448797090784],[.030754441867095,.005543176475946],[.030737290905077,.005637503686619],[.030719850631972,.005731777834961],[.030702121211932,.005825998033626],[.030684102811835,.00592016339578],[.030665795601276,.006014273035101],[.03064719975257,.006108326065793],[.030628315440748,.006202321602594],[.030609142843557,.006296258760782],[.030589682141455,.006390136656185],[.030569933517616,.006483954405188],[.030549897157919,.006577711124743],[.030529573250956,.006671405932375],[.030508961988022,.006765037946194],[.030488063563118,.0068586062849],[.030466878172949,.006952110067791],[.030445406016919,.007045548414774],[.030423647297133,.007138920446372],[.030401602218392,.007232225283733],[.030379270988192,.007325462048634],[.030356653816724,.007418629863497],[.030333750916869,.00751172785139],[.030310562504198,.00760475513604],[.030287088796968,.007697710841838],[.030263330016124,.007790594093851],[.030239286385293,.007883404017824],[.030214958130781,.007976139740197],[.030190345481576,.008068800388104],[.030165448669342,.00816138508939],[.030140267928416,.00825389297261],[.030114803495809,.008346323167047],[.030089055611203,.008438674802711],[.030063024516947,.008530947010354],[.030036710458054,.008623138921475],[.030010113682202,.008715249668328],[.029983234439732,.008807278383932],[.02995607298364,.008899224202078],[.02992862956958,.008991086257336],[.02990090445586,.009082863685067],[.029872897903441,.009174555621425],[.029844610175929,.009266161203371],[.029816041539579,.009357679568679],[.029787192263292,.009449109855944],[.029758062618606,.009540451204587],[.029728652879702,.009631702754871],[.029698963323395,.0097228636479],[.029668994229134,.009813933025633],[.029638745879,.009904910030891],[.029608218557702,.009995793807363],[.029577412552575,.010086583499618],[.029546328153577,.010177278253107],[.029514965653285,.010267877214177],[.029483325346896,.010358379530076],[.02945140753222,.010448784348962],[.029419212509679,.010539090819911],[.029386740582307,.010629298092923],[.02935399205574,.010719405318933],[.02932096723822,.010809411649818],[.02928766644059,.010899316238403],[.02925408997629,.010989118238474],[.029220238161353,.011078816804778],[.029186111314406,.011168411093039],[.029151709756664,.011257900259961],[.029117033811927,.011347283463239],[.029082083806579,.011436559861563],[.029046860069582,.01152572861463],[.029011362932476,.01161478888315],[.028975592729373,.011703739828853],[.028939549796957,.0117925806145],[.028903234474475,.011881310403886],[.028866647103744,.011969928361855],[.028829788029135,.012058433654299],[.028792657597583,.012146825448172],[.028755256158571,.012235102911499],[.028717584064137,.012323265213377],[.028679641668864,.01241131152399],[.028641429329882,.012499241014612],[.028602947406859,.012587052857618],[.028564196262001,.012674746226488],[.02852517626005,.012762320295819],[.028485887768276,.012849774241331],[.028446331156478,.012937107239875],[.028406506796976,.013024318469437],[.028366415064615,.013111407109155],[.028326056336751,.013198372339315],[.028285430993258,.013285213341368],[.028244539416515,.013371929297933],[.028203381991411,.013458519392807],[.028161959105334,.013544982810971],[.028120271148172,.013631318738598],[.028078318512309,.013717526363062],[.028036101592619,.013803604872943],[.027993620786463,.013889553458039],[.027950876493687,.013975371309367],[.027907869116616,.014061057619178],[.027864599060052,.014146611580959],[.02782106673127,.014232032389445],[.027777272540012,.014317319240622],[.027733216898487,.014402471331737],[.027688900221361,.014487487861307],[.027644322925762,.014572368029123],[.027599485431266,.014657111036262],[.027554388159903,.01474171608509],[.027509031536144,.014826182379271],[.027463415986904,.014910509123778],[.027417541941533,.014994695524894],[.027371409831816,.015078740790225],[.027325020091965,.015162644128704],[.027278373158618,.015246404750603],[.027231469470833,.015330021867534],[.027184309470088,.01541349469246],[.027136893600268,.015496822439704],[.027089222307671,.015580004324954],[.027041296040997,.015663039565269],[.026993115251345,.015745927379091],[.026944680392213,.015828666986247],[.026895991919487,.015911257607961],[.026847050291442,.015993698466859],[.026797855968734,.016075988786976],[.026748409414401,.016158127793763],[.026698711093851,.016240114714099],[.026648761474864,.016321948776289],[.026598561027585,.016403629210082],[.026548110224519,.016485155246669],[.02649740954053,.016566526118696],[.02644645945283,.016647741060271],[.026395260440982,.016728799306966],[.02634381298689,.016809700095831],[.026292117574797,.016890442665397],[.02624017469128,.016971026255683],[.026187984825246,.017051450108208],[.026135548467924,.01713171346599],[.026082866112867,.01721181557356],[.026029938255941,.017291755676967],[.025976765395322,.017371533023784],[.025923348031494,.017451146863116],[.025869686667242,.017530596445607],[.025815781807646,.017609881023449],[.02576163396008,.017688999850383],[.025707243634204,.017767952181715],[.02565261134196,.017846737274313],[.025597737597568,.017925354386623],[.025542622917522,.018003802778671],[.025487267820581,.018082081712071],[.025431672827768,.018160190450031],[.025375838462365,.018238128257362],[.025319765249906,.018315894400484],[.025263453718173,.018393488147432],[.025206904397193,.018470908767865],[.025150117819228,.01854815553307],[.025093094518776,.018625227715971],[.025035835032562,.018702124591135],[.024978339899534,.01877884543478],[.024920609660858,.01885538952478],[.024862644859912,.018931756140672],[.024804446042284,.019007944563666],[.024746013755764,.019083954076646],[.024687348550337,.019159783964183],[.024628450978184,.019235433512536],[.02456932159367,.019310902009663],[.024509960953345,.019386188745225],[.024450369615932,.019461293010596],[.024390548142329,.019536214098866],[.024330497095598,.019610951304848],[.024270217040961,.019685503925087],[.024209708545799,.019759871257867],[.024148972179639,.019834052603212],[.024088008514157,.019908047262901],[.024026818123164,.019981854540467],[.023965401582609,.020055473741208],[.023903759470567,.020128904172192],[.023841892367236,.020202145142264],[.023779800854935,.020275195962052],[.023717485518092,.020348055943974],[.023654946943242,.020420724402244],[.023592185719023,.020493200652878],[.023529202436167,.020565484013703],[.023465997687496,.020637573804361],[.023402572067918,.020709469346314],[.023338926174419,.020781169962854],[.023275060606058,.020852674979108],[.023210975963963,.020923983722044],[.023146672851322,.020995095520475],[.02308215187338,.021066009705072],[.023017413637435,.021136725608363],[.022952458752826,.021207242564742],[.022887287830934,.021277559910478],[.022821901485173,.021347676983716],[.022756300330983,.021417593124488],[.022690484985827,.021487307674717],[.022624456069185,.021556819978223],[.022558214202547,.021626129380729],[.022491760009405,.021695235229869],[.022425094115252,.021764136875192],[.022358217147572,.021832833668171],[.022291129735838,.021901324962204],[.022223832511501,.021969610112625],[.022156326107988,.022037688476709],[.022088611160696,.022105559413676],[.022020688306983,.022173222284699],[.021952558186166,.022240676452909],[.02188422143951,.022307921283403],[.021815678710228,.022374956143245],[.021746930643469,.022441780401478],[.021677977886316,.022508393429127],[.02160882108778,.022574794599206],[.02153946089879,.022640983286719],[.02146989797219,.022706958868676],[.021400132962735,.022772720724087],[.021330166527077,.022838268233979],[.021259999323769,.022903600781391],[.02118963201325,.022968717751391],[.021119065257845,.023033618531071],[.021048299721754,.023098302509561],[.02097733607105,.023162769078031],[.02090617497367,.023227017629698],[.020834817099409,.023291047559828],[.020763263119915,.023354858265748],[.02069151370868,.023418449146848],[.020619569541038,.023481819604585],[.020547431294155,.023544969042494],[.020475099647023,.023607896866186],[.020402575280455,.023670602483363],[.020329858877078,.023733085303813],[.020256951121327,.023795344739427],[.020183852699437,.023857380204193],[.020110564299439,.023919191114211],[.02003708661115,.023980776887692],[.019963420326171,.024042136944968],[.019889566137877,.024103270708495],[.019815524741412,.024164177602859],[.019741296833681,.024224857054779],[.019666883113346,.02428530849312],[.019592284280817,.024345531348888],[.019517501038246,.024405525055242],[.019442534089523,.0244652890475],[.019367384140264,.024524822763141],[.019292051897809,.024584125641809],[.019216538071215,.024643197125323],[.019140843371246,.024702036657681],[.019064968510369,.024760643685063],[.018988914202748,.024819017655836],[.018912681164234,.024877158020562],[.018836270112363,.024935064232003],[.018759681766343,.024992735745123],[.018682916847054,.025050172017095],[.018605976077037,.025107372507308],[.018528860180486,.025164336677369],[.018451569883247,.02522106399111],[.018374105912805,.025277553914591],[.01829646899828,.025333805916107],[.018218659870421,.025389819466194],[.018140679261596,.02544559403763],[.01806252790579,.025501129105445],[.017984206538592,.02555642414692],[.017905715897192,.025611478641598],[.017827056720375,.025666292071285],[.017748229748511,.025720863920056],[.01766923572355,.02577519367426],[.017590075389012,.025829280822525],[.017510749489986,.025883124855762],[.017431258773116,.02593672526717],[.0173516039866,.025990081552242],[.01727178588018,.026043193208768],[.017191805205132,.026096059736841],[.017111662714267,.026148680638861],[.017031359161915,.026201055419541],[.016950895303924,.026253183585908],[.016870271897651,.026305064647313],[.016789489701954,.026356698115431],[.016708549477186,.026408083504269],[.016627451985187,.026459220330167],[.016546197989277,.026510108111806],[.01646478825425,.026560746370212],[.016383223546365,.026611134628757],[.016301504633341,.026661272413168],[.016219632284346,.02671115925153],[.016137607269996,.026760794674288],[.01605543036234,.026810178214254],[.015973102334858,.026859309406613],[.015890623962454,.026908187788922],[.015807996021446,.026956812901119],[.015725219289558,.027005184285527],[.015642294545918,.027053301486856],[.015559222571044,.027101164052208],[.015476004146842,.027148771531083],[.015392640056594,.02719612347538],[.015309131084956,.027243219439406],[.015225478017946,.027290058979875],[.015141681642938,.027336641655915],[.015057742748656,.027382967029073],[.014973662125164,.027429034663317],[.014889440563862,.02747484412504],[.014805078857474,.027520394983066],[.014720577800046,.027565686808654],[.014635938186934,.027610719175499],[.014551160814797,.02765549165974],[.014466246481592,.02770000383996],[.014381195986567,.027744255297195],[.014296010130247,.027788245614933],[.014210689714436,.02783197437912],[.014125235542201,.027875441178165],[.01403964841787,.027918645602941],[.01395392914702,.027961587246792],[.013868078536476,.028004265705534],[.013782097394294,.028046680577462],[.013695986529763,.028088831463351],[.01360974675339,.028130717966461],[.013523378876898,.02817233969254],[.013436883713214,.028213696249828],[.013350262076462,.028254787249062],[.01326351478196,.028295612303478],[.013176642646205,.028336171028814],[.013089646486871,.028376463043317],[.013002527122799,.028416487967743],[.01291528537399,.028456245425361],[.012827922061597,.02849573504196],[.012740438007915,.028534956445849],[.012652834036379,.028573909267859],[.01256511097155,.028612593141354],[.012477269639111,.028651007702224],[.012389310865858,.028689152588899],[.012301235479693,.028727027442343],[.012213044309615,.028764631906065],[.012124738185712,.028801965626115],[.012036317939156,.028839028251097],[.011947784402191,.028875819432161],[.01185913840813,.028912338823015],[.011770380791341,.028948586079925],[.011681512387245,.028984560861718],[.011592534032306,.029020262829785],[.011503446564022,.029055691648087],[.011414250820918,.029090846983152],[.011324947642537,.029125728504087],[.011235537869437,.029160335882573],[.011146022343175,.029194668792871],[.011056401906305,.029228726911828],[.010966677402371,.029262509918876],[.010876849675891,.029296017496036],[.010786919572361,.029329249327922],[.010696887938235,.029362205101743],[.010606755620926,.029394884507308],[.010516523468793,.029427287237024],[.010426192331137,.029459412985906],[.010335763058187,.029491261451573],[.010245236501099,.029522832334255],[.010154613511943,.029554125336796],[.010063894943698,.029585140164654],[.00997308165024,.029615876525905],[.00988217448634,.029646334131247],[.00979117430765,.029676512694001],[.009700081970699,.029706411930116],[.009608898332881,.029736031558168],[.009517624252453,.029765371299366],[.009426260588521,.029794430877553],[.009334808201034,.02982321001921],[.009243267950778,.029851708453456],[.009151640699363,.029879925912053],[.00905992730922,.029907862129408],[.008968128643591,.029935516842573],[.00887624556652,.029962889791254],[.008784278942845,.029989980717805],[.008692229638191,.030016789367235],[.008600098518961,.030043315487212],[.008507886452329,.030069558828062],[.00841559430623,.030095519142772],[.008323222949351,.030121196186994],[.008230773251129,.030146589719046],[.008138246081733,.030171699499915],[.008045642312067,.030196525293257],[.00795296281375,.030221066865402],[.007860208459119,.030245323985357],[.007767380121212,.030269296424803],[.007674478673766,.030292983958103],[.007581504991203,.030316386362302],[.007488459948628,.030339503417126],[.007395344421816,.030362334904989],[.007302159287206,.030384880610993],[.007208905421891,.030407140322928],[.007115583703613,.030429113831278],[.007022195010752,.03045080092922],[.006928740222316,.030472201412626],[.006835220217939,.030493315080068],[.006741635877866,.030514141732814],[.006647988082948,.030534681174838],[.006554277714635,.030554933212813],[.006460505654964,.030574897656119],[.006366672786553,.030594574316845],[.006272779992593,.030613963009786],[.006178828156839,.030633063552447],[.006084818163601,.030651875765048],[.005990750897737,.03067039947052],[.005896627244644,.030688634494512],[.00580244809025,.030706580665388],[.005708214321004,.030724237814232],[.005613926823871,.030741605774849],[.005519586486321,.030758684383764],[.005425194196321,.030775473480228],[.005330750842327,.030791972906214],[.005236257313276,.030808182506425],[.005141714498576,.030824102128288],[.005047123288102,.030839731621963],[.004952484572181,.030855070840339],[.004857799241589,.030870119639036],[.004763068187541,.030884877876411],[.004668292301681,.030899345413553],[.004573472476075,.030913522114288],[.004478609603205,.03092740784518],[.004383704575956,.03094100247553],[.00428875828761,.030954305877381],[.004193771631837,.030967317925516],[.004098745502689,.030980038497461],[.004003680794587,.030992467473486],[.003908578402316,.031004604736602],[.003813439221017,.031016450172571],[.003718264146176,.031028003669899],[.003623054073616,.031039265119839],[.003527809899492,.031050234416394],[.003432532520278,.031060911456318],[.00333722283276,.031071296139114],[.003241881734029,.031081388367037],[.003146510121474,.031091188045095],[.003051108892766,.031100695081051],[.00295567894586,.031109909385419],[.002860221178978,.031118830871473],[.002764736490604,.031127459455239],[.002669225779478,.031135795055501],[.002573689944583,.031143837593803],[.002478129885137,.031151586994444],[.002382546500589,.031159043184484],[.002286940690606,.031166206093743],[.002191313355067,.0311730756548],[.002095665394051,.031179651802998],[.001999997707835,.031185934476438],[.001904311196878,.031191923615985],[.00180860676182,.031197619165268],[.001712885303465,.031203021070678],[.001617147722782,.03120812928137],[.001521394920889,.031212943749264],[.001425627799047,.031217464429043],[.001329847258653,.031221691278159],[.001234054201231,.031225624256825],[.00113824952842,.031229263328024],[.001042434141971,.031232608457502],[.000946608943736,.031235659613775],[.000850774835656,.031238416768124],[.000754932719759,.031240879894597],[.000659083498149,.03124304897001],[.000563228072993,.031244923973948],[.00046736734652,.031246504888762],[.000371502221008,.031247791699571],[.000275633598775,.031248784394264],[.000179762382174,.031249482963498],[83889473581e-15,.031249887400697]],_=[[.088387931675923,.000271171628935],[.088354655998507,.002440238387037],[.08826815878011,.00460783523678],[.088128492123423,.006772656498875],[.087935740158418,.008933398165942],[.08769001899167,.011088758687994],[.087391476636423,.013237439756448],[.087040292923427,.015378147086172],[.086636679392621,.017509591195118],[.086180879165703,.019630488181053],[.085673166799686,.02173956049494],[.085113848121515,.023835537710479],[.084503260043847,.025917157289369],[.08384177036211,.027983165341813],[.083129777532952,.030032317381813],[.08236771043423,.032063379076803],[.081556028106671,.034075126991164],[.080695219477356,.036066349323177],[.079785803065216,.038035846634965],[.078828326668693,.039982432574992],[.077823367035766,.041904934592675],[.07677152951654,.043802194644686],[.075673447698606,.045673069892513],[.07452978302539,.047516433390863],[.073341224397728,.049331174766491],[.072108487758894,.051116200887052],[.070832315663343,.052870436519557],[.069513476829429,.054592824978055],[.068152765676348,.056282328760143],[.06675100184562,.057937930171918],[.065309029707361,.059558631940996],[.063827717851668,.061143457817234],[.062307958565413,.062691453160784],[.060750667294763,.064201685517134],[.059156782093749,.065673245178784],[.057527263059216,.06710524573322],[.055863091752499,.068496824596852],[.054165270608165,.069847143534609],[.052434822330188,.071155389164853],[.050672789275903,.072420773449336],[.048880232828135,.073642534167879],[.047058232755862,.074819935377512],[.045207886563797,.075952267855771],[.043330308831298,.077038849527912],[.041426630540984,.078079025877766],[.039497998397473,.079072170341994],[.037545574136653,.080017684687506],[.035570533825892,.080914999371817],[.033574067155622,.081763573886112],[.031557376722714,.082562897080836],[.029521677306074,.083312487473584],[.027468195134911,.084011893539132],[.025398167150101,.084660693981419],[.023312840259098,.08525849798732],[.021213470584847,.085804945462053],[.019101322709138,.086299707246093],[.016977668910873,.086742485313442],[.014843788399692,.087133012951149],[.012700966545425,.087471054919968],[.01055049410383,.087756407596056],[.008393666439096,.087988899093631],[.006231782743558,.08816838936851],[.004066145255116,.088294770302461],[.001898058472816,.088367965768336]],u=[[.032274858518097,13202404176e-15],[.032274642494505,.000118821372483],[.032274080835421,.000224439068308],[.03227317354686,.000330054360572],[.032271920638538,.000435666118218],[.032270322123873,.000541273210231],[.032268378019984,.000646874505642],[.032266088347691,.000752468873546],[.032263453131514,.000858055183114],[.032260472399674,.0009636323036],[.032257146184092,.001069199104358],[.03225347452039,.001174754454853],[.032249457447888,.001280297224671],[.032245095009606,.001385826283535],[.032240387252262,.001491340501313],[.032235334226272,.001596838748031],[.03222993598575,.00170231989389],[.032224192588507,.001807782809271],[.03221810409605,.001913226364749],[.032211670573582,.002018649431111],[.03220489209,.002124050879359],[.032197768717898,.002229429580728],[.03219030053356,.002334784406698],[.032182487616965,.002440114229003],[.032174330051782,.002545417919644],[.032165827925374,.002650694350905],[.03215698132879,.002755942395358],[.032147790356771,.002861160925883],[.032138255107744,.002966348815672],[.032128375683825,.00307150493825],[.032118152190814,.003176628167476],[.032107584738196,.003281717377568],[.032096673439141,.003386771443102],[.0320854184105,.003491789239036],[.032073819772804,.003596769640711],[.032061877650267,.003701711523874],[.032049592170778,.00380661376468],[.032036963465906,.003911475239711],[.032023991670893,.004016294825985],[.032010676924657,.004121071400967],[.031997019369789,.004225803842586],[.031983019152549,.004330491029241],[.031968676422869,.004435131839816],[.031953991334348,.004539725153692],[.031938964044252,.004644269850758],[.03192359471351,.004748764811426],[.031907883506716,.004853208916638],[.031891830592124,.004957601047881],[.031875436141648,.0050619400872],[.031858700330859,.005166224917208],[.031841623338985,.005270454421097],[.031824205348907,.005374627482653],[.031806446547156,.005478742986267],[.031788347123916,.005582799816945],[.031769907273017,.005686796860323],[.031751127191935,.005790733002674],[.031732007081789,.005894607130928],[.03171254714734,.005998418132675],[.031692747596989,.006102164896182],[.031672608642773,.006205846310406],[.031652130500364,.006309461265002],[.031631313389067,.006413008650337],[.031610157531816,.006516487357501],[.031588663155172,.006619896278321],[.031566830489325,.00672323430537],[.031544659768083,.006826500331981],[.031522151228878,.006929693252258],[.031499305112758,.007032811961088],[.031476121664387,.007135855354151],[.03145260113204,.007238822327937],[.031428743767604,.007341711779751],[.031404549826572,.00744452260773],[.031380019568042,.007547253710853],[.031355153254712,.007649903988952],[.031329951152882,.007752472342725],[.031304413532445,.007854957673748],[.031278540666888,.007957358884484],[.03125233283329,.0080596748783],[.031225790312316,.008161904559473],[.031198913388214,.008264046833205],[.031171702348814,.008366100605636],[.031144157485525,.008468064783849],[.031116279093331,.008569938275893],[.031088067470786,.008671719990782],[.031059522920014,.008773408838517],[.031030645746705,.008875003730092],[.03100143626011,.008976503577507],[.030971894773039,.00907790729378],[.030942021601857,.009179213792959],[.030911817066483,.009280421990133],[.030881281490382,.009381530801444],[.030850415200566,.009482539144097],[.030819218527589,.009583445936373],[.030787691805541,.009684250097643],[.030755835372048,.009784950548375],[.030723649568268,.009885546210147],[.030691134738883,.009986036005661],[.030658291232103,.010086418858753],[.030625119399655,.010186693694402],[.030591619596781,.010286859438745],[.030557792182239,.010386915019088],[.030523637518292,.010486859363916],[.03048915597071,.010586691402906],[.030454347908763,.010686410066936],[.030419213705216,.010786014288099],[.030383753736329,.010885502999714],[.030347968381849,.010984875136338],[.03031185802501,.011084129633775],[.030275423052523,.011183265429088],[.030238663854579,.011282281460612],[.030201580824838,.011381176667967],[.03016417436043,.011479949992062],[.030126444861948,.011578600375117],[.030088392733446,.011677126760663],[.03005001838243,.011775528093563],[.030011322219859,.011873803320018],[.029972304660138,.011971951387578],[.029932966121114,.012069971245157],[.02989330702407,.012167861843041],[.029853327793724,.012265622132901],[.029813028858222,.012363251067801],[.029772410649132,.012460747602215],[.029731473601443,.012558110692033],[.029690218153558,.012655339294575],[.029648644747289,.0127524323686],[.029606753827855,.01284938887432],[.029564545843872,.012946207773407],[.029522021247356,.013042888029011],[.02947918049371,.013139428605762],[.029436024041725,.013235828469789],[.02939255235357,.013332086588727],[.029348765894794,.013428201931728],[.029304665134313,.013524173469475],[.029260250544412,.013620000174189],[.029215522600735,.013715681019643],[.029170481782283,.013811214981173],[.029125128571406,.013906601035686],[.029079463453801,.014001838161674],[.029033486918505,.014096925339225],[.028987199457889,.014191861550031],[.028940601567655,.014286645777401],[.028893693746829,.014381277006273],[.028846476497755,.014475754223221],[.028798950326094,.014570076416472],[.028751115740811,.01466424257591],[.028702973254178,.014758251693091],[.02865452338176,.014852102761253],[.028605766642418,.014945794775326],[.028556703558297,.015039326731945],[.028507334654823,.015132697629457],[.028457660460698,.015225906467935],[.028407681507891,.015318952249187],[.028357398331639,.015411833976768],[.028306811470432,.015504550655988],[.028255921466016,.015597101293927],[.028204728863381,.015689484899442],[.02815323421076,.015781700483179],[.028101438059619,.015873747057582],[.028049340964652,.015965623636907],[.027996943483779,.016057329237229],[.027944246178133,.016148862876456],[.027891249612061,.016240223574335],[.027837954353113,.016331410352467],[.027784360972039,.016422422234315],[.02773047004278,.016513258245214],[.027676282142466,.016603917412384],[.027621797851405,.016694398764938],[.02756701775308,.016784701333894],[.027511942434143,.016874824152183],[.027456572484404,.016964766254662],[.027400908496833,.017054526678124],[.027344951067546,.017144104461307],[.027288700795801,.017233498644904],[.027232158283994,.017322708271577],[.027175324137651,.01741173238596],[.027118198965418,.017500570034678],[.02706078337906,.017589220266351],[.027003077993454,.017677682131607],[.026945083426576,.017765954683088],[.026886800299502,.017854036975468],[.026828229236397,.017941928065456],[.026769370864511,.018029627011808],[.02671022581417,.01811713287534],[.026650794718768,.018204444718934],[.026591078214767,.018291561607551],[.02653107694168,.018378482608238],[.026470791542075,.018465206790142],[.026410222661558,.018551733224515],[.026349370948775,.01863806098473],[.026288237055398,.018724189146286],[.026226821636121,.018810116786819],[.026165125348656,.018895842986112],[.026103148853718,.018981366826109],[.026040892815028,.019066687390916],[.025978357899296,.019151803766819],[.025915544776223,.01923671504229],[.025852454118485,.019321420307998],[.025789086601733,.019405918656817],[.025725442904582,.019490209183837],[.025661523708606,.019574290986376],[.025597329698327,.019658163163984],[.025532861561211,.019741824818458],[.025468119987662,.019825275053848],[.025403105671008,.01990851297647],[.025337819307501,.019991537694913],[.025272261596305,.020074348320047],[.025206433239491,.020156943965039],[.025140334942028,.020239323745355],[.025073967411776,.020321486778774],[.025007331359476,.020403432185395],[.024940427498748,.02048515908765],[.024873256546079,.020566666610309],[.024805819220816,.020647953880491],[.024738116245157,.020729020027676],[.024670148344147,.020809864183709],[.024601916245669,.020890485482816],[.024533420680433,.020970883061607],[.024464662381971,.021051056059087],[.02439564208663,.02113100361667],[.024326360533561,.021210724878181],[.024256818464715,.021290218989868],[.02418701662483,.021369485100415],[.02411695576143,.021448522360944],[.024046636624808,.02152732992503],[.023976059968027,.021605906948708],[.023905226546906,.02168425259048],[.023834137120014,.021762366011328],[.023762792448662,.02184024637472],[.023691193296893,.02191789284662],[.023619340431478,.021995304595495],[.023547234621902,.02207248079233],[.023474876640361,.022149420610628],[.023402267261751,.022226123226426],[.023329407263659,.0223025878183],[.023256297426359,.022378813567377],[.023182938532797,.022454799657339],[.023109331368588,.022530545274437],[.023035476722006,.022606049607496],[.022961375383975,.022681311847926],[.022887028148061,.022756331189727],[.022812435810462,.022831106829504],[.022737599170003,.022905637966469],[.022662519028125,.022979923802453],[.022587196188874,.023053963541915],[.022511631458899,.02312775639195],[.022435825647437,.023201301562294],[.022359779566306,.023274598265338],[.0222834940299,.023347645716133],[.022206969855176,.0234204431324],[.022130207861645,.023492989734537],[.022053208871367,.023565284745628],[.02197597370894,.023637327391451],[.021898503201489,.023709116900488],[.021820798178663,.023780652503931],[.021742859472618,.023851933435691],[.021664687918017,.023922958932406],[.021586284352013,.023993728233451],[.021507649614247,.024064240580942],[.021428784546832,.02413449521975],[.02134968999435,.024204491397504],[.02127036680384,.0242742283646],[.021190815824791,.024343705374213],[.021111037909128,.024412921682298],[.02103103391121,.024481876547605],[.020950804687815,.024550569231683],[.020870351098134,.024618998998889],[.020789674003759,.024687165116394],[.020708774268678,.024755066854194],[.020627652759262,.024822703485116],[.020546310344257,.024890074284826],[.020464747894775,.024957178531837],[.020382966284284,.025024015507516],[.0203009663886,.025090584496093],[.020218749085876,.025156884784668],[.020136315256592,.025222915663218],[.020053665783549,.025288676424605],[.019970801551857,.025354166364584],[.019887723448925,.025419384781811],[.019804432364452,.025484330977848],[.019720929190419,.025549004257175],[.019637214821078,.025613403927192],[.019553290152943,.02567752929823],[.019469156084779,.025741379683559],[.019384813517595,.025804954399392],[.019300263354632,.025868252764895],[.019215506501354,.025931274102193],[.019130543865439,.025994017736379],[.019045376356769,.026056482995518],[.018960004887419,.026118669210657],[.018874430371648,.026180575715833],[.018788653725892,.026242201848076],[.01870267586875,.026303546947421],[.018616497720974,.026364610356909],[.018530120205464,.026425391422602],[.018443544247254,.026485889493583],[.018356770773502,.026546103921965],[.018269800713483,.026606034062902],[.018182634998576,.026665679274589],[.018095274562256,.026725038918274],[.018007720340083,.026784112358263],[.017919973269692,.026842898961926],[.017832034290785,.026901398099707],[.017743904345116,.026959609145127],[.017655584376488,.027017531474792],[.017567075330734,.027075164468401],[.017478378155718,.02713250750875],[.017389493801313,.027189559981742],[.017300423219401,.027246321276391],[.017211167363854,.027302790784828],[.017121727190533,.02735896790231],[.017032103657269,.027414852027226],[.016942297723858,.027470442561102],[.01685231035205,.027525738908608],[.016762142505537,.027580740477564],[.016671795149944,.027635446678948],[.016581269252819,.0276898569269],[.016490565783622,.02774397063873],[.016399685713714,.027797787234924],[.016308630016347,.027851306139149],[.016217399666655,.02790452677826],[.016125995641641,.027957448582309],[.01603441892017,.028010070984544],[.015942670482954,.028062393421421],[.015850751312545,.02811441533261],[.015758662393324,.028166136160998],[.015666404711489,.028217555352697],[.015573979255046,.028268672357047],[.015481387013797,.028319486626627],[.015388628979331,.028369997617257],[.015295706145012,.028420204788004],[.015202619505968,.028470107601191],[.015109370059084,.028519705522399],[.015015958802984,.028568998020472],[.01492238673803,.028617984567529],[.014828654866302,.028666664638963],[.014734764191593,.028715037713449],[.014640715719398,.028763103272951],[.0145465104569,.028810860802724],[.014452149412962,.028858309791325],[.014357633598114,.028905449730613],[.014262964024545,.028952280115756],[.01416814170609,.02899880044524],[.01407316765822,.029045010220868],[.01397804289803,.029090908947771],[.013882768444231,.029136496134411],[.013787345317136,.029181771292585],[.013691774538648,.029226733937433],[.013596057132255,.029271383587441],[.013500194123014,.029315719764447],[.013404186537539,.029359741993647],[.013308035403995,.029403449803598],[.013211741752084,.029446842726223],[.013115306613032,.02948992029682],[.013018731019584,.029532682054063],[.012922016005985,.029575127540008],[.012825162607977,.029617256300097],[.012728171862781,.029659067883165],[.012631044809089,.029700561841444],[.012533782487056,.029741737730567],[.012436385938281,.029782595109573],[.012338856205805,.029823133540913],[.012241194334091,.029863352590452],[.012143401369021,.029903251827477],[.012045478357878,.029942830824699],[.011947426349339,.029982089158259],[.011849246393462,.030021026407731],[.011750939541676,.030059642156129],[.011652506846768,.030097935989909],[.011553949362874,.030135907498976],[.011455268145464,.030173556276684],[.011356464251335,.030210881919845],[.011257538738598,.030247884028732],[.011158492666665,.030284562207083],[.01105932709624,.030320916062102],[.010960043089307,.03035694520447],[.010860641709118,.030392649248343],[.010761124020182,.030428027811361],[.010661491088253,.030463080514646],[.010561743980319,.030497806982812],[.010461883764593,.030532206843968],[.010361911510496,.030566279729717],[.010261828288652,.030600025275167],[.010161635170872,.030633443118931],[.010061333230142,.030666532903129],[.009960923540617,.030699294273397],[.009860407177603,.030731726878888],[.00975978521755,.030763830372273],[.009659058738038,.03079560440975],[.009558228817767,.030827048651045],[.009457296536545,.030858162759415],[.009356262975275,.030888946401653],[.009255129215945,.030919399248091],[.009153896341616,.030949520972603],[.009052565436412,.030979311252611],[.008951137585505,.031008769769084],[.008849613875105,.031037896206544],[.008747995392451,.031066690253072],[.008646283225794,.031095151600306],[.00854447846439,.031123279943448],[.008442582198486,.031151074981266],[.00834059551931,.031178536416098],[.008238519519057,.031205663953853],[.008136355290878,.031232457304017],[.008034103928871,.031258916179656],[.007931766528065,.031285040297416],[.007829344184412,.031310829377528],[.007726837994772,.031336283143813],[.007624249056906,.03136140132368],[.007521578469457,.031386183648135],[.007418827331946,.031410629851778],[.007315996744755,.031434739672811],[.007213087809115,.031458512853036],[.007110101627101,.031481949137863],[.00700703930161,.031505048276306],[.006903901936357,.031527810020993],[.006800690635862,.031550234128164],[.006697406505433,.031572320357675],[.006594050651161,.031594068473],[.006490624179905,.031615478241233],[.006387128199278,.031636549433095],[.006283563817639,.031657281822929],[.00617993214408,.031677675188707],[.006076234288412,.031697729312034],[.005972471361157,.031717443978146],[.005868644473532,.031736818975914],[.00576475473744,.031755854097848],[.005660803265456,.031774549140098],[.005556791170816,.031792903902453],[.005452719567407,.03181091818835],[.005348589569753,.031828591804869],[.005244402293001,.031845924562742],[.005140158852914,.031862916276347],[.005035860365855,.031879566763717],[.004931507948778,.031895875846539],[.004827102719212,.031911843350155],[.004722645795254,.031927469103567],[.004618138295554,.031942752939435],[.004513581339303,.031957694694082],[.004408976046222,.031972294207493],[.004304323536549,.03198655132332],[.00419962493103,.032000465888879],[.004094881350902,.032014037755158],[.003990093917884,.032027266776813],[.003885263754166,.03204015281217],[.003780391982394,.032052695723232],[.003675479725661,.032064895375674],[.003570528107494,.032076751638847],[.003465538251839,.03208826438578],[.003360511283053,.032099433493181],[.003255448325892,.032110258841438],[.003150350505494,.032120740314619],[.003045218947373,.032130877800478],[.002940054777404,.032140671190449],[.00283485912181,.032150120379653],[.002729633107153,.032159225266897],[.002624377860318,.032167985754674],[.002519094508504,.032176401749168],[.002413784179212,.03218447316025],[.002308448000231,.032192199901481],[.002203087099626,.032199581890114],[.002097702605728,.032206619047093],[.001992295647121,.032213311297057],[.001886867352628,.032219658568338],[.001781418851302,.03222566079296],[.00167595127241,.032231317906644],[.001570465745428,.032236629848809],[.001464963400018,.032241596562566],[.001359445366028,.032246217994727],[.00125391277347,.032250494095799],[.001148366752513,.03225442481999],[.001042808433471,.032258010125204],[.000937238946789,.032261249973045],[.00083165942303,.032264144328817],[.000726070992868,.032266693161525],[.000620474787068,.032268896443871],[.000514871936481,.032270754152261],[.00040926357203,.032272266266801],[.000303650824695,.032273432771295],[.000198034825504,.032274253653254],[92416705518e-15,.032274728903884]],h=[[.091286604111815,.000298735779793],[.091247502481454,.002688238127538],[.091145864370807,.005075898091152],[.090981759437558,.00746007928776],[.09075530015103,.009839147718664],[.090466641715108,.012211472889198],[.090115981961863,.014575428926191],[.089703561215976,.016929395692256],[.089229662130024,.019271759896156],[.088694609490769,.02160091619847],[.088098769996564,.02391526831181],[.087442552006035,.026213230094844],[.086726405258214,.028493226639351],[.085950820564309,.030753695349588],[.085116329471329,.032993087013213],[.084223503897785,.035209866863042],[.083272955741727,.037402515628894],[.082265336461381,.039569530578832],[.08120133662867,.041709426549053],[.08008168545593,.043820736961749],[.078907150296148,.045902014830227],[.077678536117054,.047951833750597],[.076396684949434,.049968788879362],[.07506247531005,.051951497896226],[.073676821599542,.053898601951466],[.072240673475749,.055808766597225],[.070755015202858,.057680682702068],[.06922086497684,.059513067348201],[.067639274227625,.061304664710718],[.066011326898512,.063054246918278],[.064338138703282,.06476061489463],[.062620856361546,.066422599180399],[.060860656812842,.068039060734572],[.059058746410016,.069608891715145],[.05721636009245,.071131016238378],[.055334760539699,.072604391116154],[.053415237306106,.07402800657093],[.051459105937014,.075400886927784],[.049467707067153,.076722091283096],[.047442405501835,.077990714149396],[.045384589281588,.079205886075941],[.043295668730857,.080366774244592],[.041177075491445,.081472583040586],[.039030261541332,.08252255459781],[.036856698199564,.083515969318206],[.034657875117883,.084452146364948],[.032435299259796,.085330444129049],[.030190493867775,.086150260669096],[.027924997419306,.086911034123781],[.025640362572491,.087612243096981],[.023338155101933,.088253407015092],[.021019952825636,.08883408645639],[.018687344523641,.089353883452193],[.016341928849164,.089812441759604],[.013985313232951,.090209447105664],[.011619112781631,.09054462740274],[.009244949170797,.090817752935],[.006864449533597,.091028636515846],[.004479245345574,.091177133616206],[.002090971306534,.091263142463585]];const m=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,96,108,120,132,144,156,172,188,212,240,276,320,384,448,512,576,640,704,768,832,896,960,1024]),d=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),b=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,64,72,80,88,100,112,124,140,156,172,192,216,240,268,304,344,384,424,464,504,544,584,624,664,704,744,784,824,864,904,944,984,1024]),g=new Uint16Array([0,4,8,12,16,20,24,32,40,48,64,92,128]),y=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,1024]),f=new Uint16Array([0,4,8,12,16,20,28,36,44,56,68,80,96,112,128]),C=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120,132,144,160,176,196,216,240,264,292,320,352,384,416,448,480,512,544,576,608,640,672,704,736,768,800,832,864,896,928,960,992,1024]),T=new Uint16Array([0,4,8,12,16,20,24,28,32,36,40,44,52,60,68,76,84,92,100,108,116,124,136,148,160,172,188,204,220,240,260,284,308,336,364,396,432,468,508,552,600,652,704,768,832,896,960,1024]),v=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,64,76,92,108,128]),B=new Uint16Array([0,8,16,24,32,40,48,56,64,72,80,88,100,112,124,136,148,160,172,184,196,212,228,244,260,280,300,320,344,368,396,424,456,492,532,572,616,664,716,772,832,896,960,1024]),S=new Uint16Array([0,4,8,12,16,20,24,28,32,40,48,60,72,88,108,128]),O=new Uint16Array([0,12,24,36,48,60,72,84,96,108,120,132,144,156,172,188,204,220,236,252,268,288,308,328,348,372,396,420,448,476,508,544,580,620,664,712,764,820,880,944,1024]),M=new Uint16Array([0,4,8,12,16,20,24,28,36,44,52,60,72,88,108,128]);var w=[m,m,b,y,y,C,T,T,B,B,B,O],R=[d,d,g,f,f,f,v,v,S,S,S,M],x=new Uint8Array([12,12,12,14,14,14,15,15,15,15,15,15]),N=new Uint8Array([41,41,47,49,49,51,47,47,43,43,43,40]),A=function(){for(var e=new Float32Array(428),t=0;428>t;t++)e[t]=Math.pow(2,(t-200)/4);return e}(),E=function(){for(var e=new Float32Array(8191),t=0;8191>t;t++)e[t]=Math.pow(t,1.3333333333333333);return e}(),L=new Int32Array([96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]),P=function(){function e(e){this.maxBands=i[e.sampleIndex],this.nFilt=new Int32Array(8),this.length=new Array(8),this.direction=new Array(8),this.order=new Array(8),this.coef=new Array(8);for(var r=0;8>r;r++){this.length[r]=new Int32Array(4),this.direction[r]=new Array(4),this.order[r]=new Int32Array(4),this.coef[r]=new Array(4);for(var o=0;4>o;o++)this.coef[r][o]=new Float32Array(t)}this.lpc=new Float32Array(t),this.tmp=new Float32Array(t)}const t=20,r=[1,4,3],o=[2,6,5],a=[[0,-.43388373,-.7818315,-.9749279,.98480773,.86602539,.64278758,.34202015],[0,-.2079117,-.40673664,-.58778524,-.74314481,-.86602539,-.95105654,-.99452192,.99573416,.96182561,.8951633,.7980172,.67369562,.52643216,.36124167,.18374951],[0,-.43388373,.64278758,.34202015],[0,-.2079117,-.40673664,-.58778524,.67369562,.52643216,.36124167,.18374951]],i=[31,31,34,40,42,51,46,46,42,42,42,39,39];return e.prototype.decode=function(e,t){for(var i=t.windowCount,n=2===t.windowSequence?r:o,s=0;i>s;s++)if(this.nFilt[s]=e.read(n[0]))for(var l=e.read(1),c=this.nFilt[s],p=this.length[s],_=this.order[s],u=this.direction[s],h=this.coef[s],m=0;c>m;m++){if(p[m]=e.read(n[1]),(_[m]=e.read(n[2]))>20)throw new Error("TNS filter out of range: "+_[m]);if(_[m]){u[m]=!!e.read(1);for(var d=e.read(1),b=l+3-d,g=a[2*d+l],y=_[m],f=h[m],C=0;y>C;C++)f[C]=g[e.read(b)]}}},e.prototype.process=function(e,t,r){for(var o=Math.min(this.maxBands,e.maxSFB),a=this.lpc,i=this.tmp,n=e.info,s=n.windowCount,l=0;s>l;l++)for(var c=n.swbCount,p=this.nFilt[l],_=this.length[l],u=this.order[l],h=this.coef[l],m=this.direction[l],d=0;p>d;d++){var b=c,g=(c=Math.max(0,i-_[d]),u[d]);if(0!==g){for(var y=h[d],f=0;g>f;f++){var C=-y[f];a[f]=C;for(var T=0,v=f+1>>1;v>T;T++){var B=a[T],S=a[f-1-T];a[T]=B+C*S,a[f-1-T]=S+C*B}}var O,M=n.swbOffsets[Math.min(c,o)],w=n.swbOffsets[Math.min(b,o)],R=1;if(!((O=w-M)<=0))if(m[d]&&(R=-1,M=w-1),M+=128*l,r)for(var x=0;O>x;x++,M+=R)for(f=1;f<=Math.min(x,g);f++)t[M]-=t[M-f*R]*a[f-1];else for(x=0;O>x;x++,M+=R){i[0]=t[M];for(f=1;f<=Math.min(x,g);f++)t[M]+=i[f]*a[f-1];for(f=g;f>0;f--)i[f]=i[f-1]}}}},e}()}();var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){var t=function(){function e(e,t,r){this.bytes=new Uint8Array(e),this.start=t||0,this.pos=this.start,this.end=t+r||this.bytes.length}return Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.pos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remaining",{get:function(){return this.end-this.pos},enumerable:!0,configurable:!0}),e.prototype.readU8Array=function(e){if(this.pos>this.end-e)return null;var t=this.bytes.subarray(this.pos,this.pos+e);return this.pos+=e,t},e.prototype.readU32Array=function(e,t,r){if(void 0===t&&(t=1),this.pos>this.end-e*t*4)return null;if(1==t){for(var o=new Uint32Array(e),a=0;e>a;a++)o[a]=this.readU32();return o}var i=new Array(e);for(a=0;e>a;a++){var n=null;if(r){n={};for(var s=0;t>s;s++)n[r[s]]=this.readU32()}else{n=new Uint32Array(t);for(s=0;t>s;s++)n[s]=this.readU32()}i[a]=n}return i},e.prototype.read8=function(){return this.readU8()<<24>>24},e.prototype.readU8=function(){return this.pos>=this.end?null:this.bytes[this.pos++]},e.prototype.read16=function(){return this.readU16()<<16>>16},e.prototype.readU16=function(){if(this.pos>=this.end-1)return null;var e=this.bytes[this.pos+0]<<8|this.bytes[this.pos+1];return this.pos+=2,e},e.prototype.read24=function(){return this.readU24()<<8>>8},e.prototype.readU24=function(){var e=this.pos,t=this.bytes;if(e>this.end-3)return null;var r=t[e+0]<<16|t[e+1]<<8|t[e+2];return this.pos+=3,r},e.prototype.peek32=function(e){void 0===e&&(e=!1);var t=this.pos,r=this.bytes;if(t>this.end-4)return null;var o=r[t+0]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3];return e&&(this.pos+=4),o},e.prototype.read32=function(){return this.peek32(!0)},e.prototype.readU32=function(){return this.peek32(!0)>>>0},e.prototype.read4CC=function(){var e=this.pos;if(e>this.end-4)return null;for(var t="",r=0;4>r;r++)t+=String.fromCharCode(this.bytes[e+r]);return this.pos+=4,t},e.prototype.readFP16=function(){return this.read32()/65536},e.prototype.readFP8=function(){return this.read16()/256},e.prototype.readISO639=function(){for(var e=this.readU16(),t="",r=0;3>r;r++){var o=e>>>5*(2-r)&31;t+=String.fromCharCode(o+96)}return t},e.prototype.readUTF8=function(e){for(var t="",r=0;e>r;r++)t+=String.fromCharCode(this.readU8());return t},e.prototype.readPString=function(e){var t=this.readU8();console.assert(e>=t);var r=this.readUTF8(t);return this.reserved(e-t-1,0),r},e.prototype.skip=function(e){this.seek(this.pos+e)},e.prototype.reserved=function(e,t){for(var r=0;e>r;r++)console.assert(this.readU8()==t)},e.prototype.seek=function(e){(0>e||e>this.end)&&console.error("Index out of bounds (bounds: [0, "+this.end+"], index: "+e+")."),this.pos=e},e.prototype.subStream=function(t,r){return new e(this.bytes.buffer,t,r)},e}();e.Bytestream=t,__reflect(t.prototype,"ebet.Bytestream")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){var t=function(){function t(e){this.stream=e,this.tracks={}}return t.prototype.readBoxes=function(e,t){for(;e.peek32();){var r=this.readBox(e);if(r.type in t){var o=t[r.type];o instanceof Array||(t[r.type]=[o]),t[r.type].push(r)}else t[r.type]=r}},t.prototype._readHeader=function(e,t){t.size=e.readU32(),t.type=e.read4CC()},t.prototype._readFullHeader=function(e,t){t.version=e.readU8(),t.flags=e.readU24()},t.prototype._remainingBytes=function(e,t){return t.size-(e.position-t.offset)},t.prototype._skipRemainingBytes=function(e,t){e.skip(this._remainingBytes(e,t))},t.prototype._readRemainingBoxes=function(e,t){var r=e.subStream(e.position,this._remainingBytes(e,t));this.readBoxes(r,t),e.skip(r.length)},t.prototype.readBox=function(t){var r={offset:t.position};switch(this._readHeader(t,r),r.type){case"ftyp":r.name="File Type Box",r.majorBrand=t.read4CC(),r.minorVersion=t.readU32(),r.compatibleBrands=new Array((r.size-16)/4);for(var o=0;o<r.compatibleBrands.length;o++)r.compatibleBrands[o]=t.read4CC();break;case"moov":r.name="Movie Box",this._readRemainingBoxes(t,r);break;case"mvhd":r.name="Movie Header Box",this._readFullHeader(t,r),console.assert(0==r.version),r.creationTime=t.readU32(),r.modificationTime=t.readU32(),r.timeScale=t.readU32(),r.duration=t.readU32(),r.rate=t.readFP16(),r.volume=t.readFP8(),t.skip(10),r.matrix=t.readU32Array(9),t.skip(24),r.nextTrackId=t.readU32();break;case"trak":r.name="Track Box",this._readRemainingBoxes(t,r),this.tracks[r.tkhd.trackId]=new e.Track(this,r);break;case"tkhd":r.name="Track Header Box",this._readFullHeader(t,r),console.assert(0==r.version),r.creationTime=t.readU32(),r.modificationTime=t.readU32(),r.trackId=t.readU32(),t.skip(4),r.duration=t.readU32(),t.skip(8),r.layer=t.readU16(),r.alternateGroup=t.readU16(),r.volume=t.readFP8(),t.skip(2),r.matrix=t.readU32Array(9),r.width=t.readFP16(),r.height=t.readFP16();break;case"mdia":r.name="Media Box",this._readRemainingBoxes(t,r);break;case"mdhd":r.name="Media Header Box",this._readFullHeader(t,r),console.assert(0==r.version),r.creationTime=t.readU32(),r.modificationTime=t.readU32(),r.timeScale=t.readU32(),r.duration=t.readU32(),r.language=t.readISO639(),t.skip(2);break;case"hdlr":r.name="Handler Reference Box",this._readFullHeader(t,r),t.skip(4),r.handlerType=t.read4CC(),t.skip(12);var a=r.size-32;a>0&&(r.name=t.readUTF8(a));break;case"minf":r.name="Media Information Box",this._readRemainingBoxes(t,r);break;case"stbl":r.name="Sample Table Box",this._readRemainingBoxes(t,r);break;case"stsd":r.name="Sample Description Box",this._readFullHeader(t,r),r.sd=[],t.readU32(),this._readRemainingBoxes(t,r);break;case"avc1":t.reserved(6,0),r.dataReferenceIndex=t.readU16(),console.assert(0==t.readU16()),console.assert(0==t.readU16()),t.readU32(),t.readU32(),t.readU32(),r.width=t.readU16(),r.height=t.readU16(),r.horizontalResolution=t.readFP16(),r.verticalResolution=t.readFP16(),console.assert(0==t.readU32()),r.frameCount=t.readU16(),r.compressorName=t.readPString(32),r.depth=t.readU16(),console.assert(65535==t.readU16()),this._readRemainingBoxes(t,r);break;case"mp4a":t.reserved(6,0),r.dataReferenceIndex=t.readU16(),r.version=t.readU16(),t.skip(2),t.skip(4),r.channelCount=t.readU16(),r.sampleSize=t.readU16(),r.compressionId=t.readU16(),r.packetSize=t.readU16(),r.sampleRate=t.readU32()>>>16,console.assert(0==r.version),this._readRemainingBoxes(t,r);break;case"esds":r.name="Elementary Stream Descriptor",this._readFullHeader(t,r),this._skipRemainingBytes(t,r);break;case"avcC":r.name="AVC Configuration Box",r.configurationVersion=t.readU8(),r.avcProfileIndicaation=t.readU8(),r.profileCompatibility=t.readU8(),r.avcLevelIndication=t.readU8(),r.lengthSizeMinusOne=3&t.readU8(),console.assert(3==r.lengthSizeMinusOne,"TODO");var i=31&t.readU8();r.sps=[];for(o=0;i>o;o++)r.sps.push(t.readU8Array(t.readU16()));var n=31&t.readU8();r.pps=[];for(o=0;n>o;o++)r.pps.push(t.readU8Array(t.readU16()));this._skipRemainingBytes(t,r);break;case"btrt":r.name="Bit Rate Box",r.bufferSizeDb=t.readU32(),r.maxBitrate=t.readU32(),r.avgBitrate=t.readU32();break;case"stts":r.name="Decoding Time to Sample Box",this._readFullHeader(t,r),r.table=t.readU32Array(t.readU32(),2,["count","delta"]);break;case"stss":r.name="Sync Sample Box",this._readFullHeader(t,r),r.samples=t.readU32Array(t.readU32());break;case"stsc":r.name="Sample to Chunk Box",this._readFullHeader(t,r),r.table=t.readU32Array(t.readU32(),3,["firstChunk","samplesPerChunk","sampleDescriptionId"]);break;case"stsz":r.name="Sample Size Box",this._readFullHeader(t,r),r.sampleSize=t.readU32();var s=t.readU32();0==r.sampleSize&&(r.table=t.readU32Array(s));break;case"stco":r.name="Chunk Offset Box",this._readFullHeader(t,r),r.table=t.readU32Array(t.readU32());break;case"smhd":r.name="Sound Media Header Box",this._readFullHeader(t,r),r.balance=t.readFP8(),t.reserved(2,0);break;case"mdat":r.name="Media Data Box",console.assert(r.size>=8,"Cannot parse large media data yet."),r.data=t.readU8Array(this._remainingBytes(t,r));break;default:this._skipRemainingBytes(t,r)}return r},t.prototype.read=function(){(new Date).getTime(),this.file={},this.readBoxes(this.stream,this.file)},t.prototype.traceSamples=function(){var e=this.tracks[1],t=this.tracks[2];console.info("Video Samples: "+e.getSampleCount()),console.info("Audio Samples: "+t.getSampleCount());for(var r=0,o=0,a=0;100>a;a++){var i=e.sampleToOffset(r),n=t.sampleToOffset(o),s=e.sampleToSize(r,1),l=t.sampleToSize(o,1);n>i?(console.info("V Sample "+r+" Offset : "+i+", Size : "+s),r++):(console.info("A Sample "+o+" Offset : "+n+", Size : "+l),o++)}},t}();t.BOX_HEADER_SIZE=8,t.FULL_BOX_HEADER_SIZE=t.BOX_HEADER_SIZE+4,e.MP4Reader=t,__reflect(t.prototype,"ebet.MP4Reader")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){var t=function(){function t(e,t){this.file=e,this.trak=t}return t.prototype.getSampleSizeTable=function(){return this.trak.mdia.minf.stbl.stsz.table},t.prototype.getSampleCount=function(){return this.getSampleSizeTable().length},t.prototype.sampleToSize=function(e,t){for(var r=this.getSampleSizeTable(),o=0,a=e;e+t>a;a++)o+=r[a];return o},t.prototype.sampleToChunk=function(e){var t=this.trak.mdia.minf.stbl.stsc.table;if(1===t.length)return{index:0|e/(a=t[0]).samplesPerChunk,offset:e%a.samplesPerChunk};for(var r=0,o=0;o<t.length;o++){var a=t[o];if(o>0){var i=t[o-1],n=a.firstChunk-i.firstChunk,s=i.samplesPerChunk*n;if(!(e>=s))return{index:r+Math.floor(e/i.samplesPerChunk),offset:e%i.samplesPerChunk};if(e-=s,o==t.length-1)return{index:r+n+Math.floor(e/a.samplesPerChunk),offset:e%a.samplesPerChunk};r+=n}}},t.prototype.chunkToOffset=function(e){return this.trak.mdia.minf.stbl.stco.table[e]},t.prototype.sampleToOffset=function(e){var t=this.sampleToChunk(e);return this.chunkToOffset(t.index)+this.sampleToSize(e-t.offset,t.offset)},t.prototype.timeToSample=function(e){for(var t=this.trak.mdia.minf.stbl.stts.table,r=0,o=0;o<t.length;o++){var a=t[o].count*t[o].delta;if(!(e>=a))return r+Math.floor(e/t[o].delta);e-=a,r+=t[o].count}},t.prototype.getTotalTime=function(){return this.trak.mdia.mdhd.duration},t.prototype.getTotalTimeInSeconds=function(){return this.timeToSeconds(this.getTotalTime())},t.prototype.getTimeScale=function(){return this.trak.mdia.mdhd.timeScale},t.prototype.timeToSeconds=function(e){return e/this.getTimeScale()},t.prototype.secondsToTime=function(e){return e*this.getTimeScale()},t.prototype.foo=function(){},t.prototype.getSampleNALUnits=function(t){for(var r=this.file.stream.bytes,o=this.sampleToOffset(t),a=o+this.sampleToSize(t,1),i=[];a-o>0;){var n=new e.Bytestream(r.buffer,o).readU32();i.push(r.subarray(o+4,o+n+4)),o=o+n+4}return i},t}();e.Track=t,__reflect(t.prototype,"ebet.Track")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){var t=function(){function t(){this.width=0,this.height=0,this._isReady=!1,this._closed=!1,this._fps=30,this._currentIdx=0,this._duration=0,this._url="",this._framesLength=0,this.timeOut=30,this._isLoop=!1,this._delta=0,this._frameTime=0;var e=this;e._frameBuffers=[];var t="webgl"==egret.Capabilities.renderMode;e._decoder=new Decoder({rgb:!t}),e._framesLength=-1,e._decoder.onPictureDecoded=function(t,r,o){e.width=r,e.height=o,e._frameBuffers.push(new Uint8Array(t)),e._isReady||(e._isReady=!0,e.onVideoReady&&e.onVideoReady(e.width,e.height))}}return t.prototype.getCurrentPlayTime=function(){var e=this;return(e._currentIdx/e._fps).toFixed(2)+" / "+e._duration.toFixed(2)},t.prototype.getFramesLength=function(){var e=this;if(!e._video)return 0;if(-1==e._framesLength){for(var t=0;;){var r=e._video.getSampleNALUnits(t);if(!r||0==r.length)break;t++}this._framesLength=t}return this._framesLength},t.prototype.parse=function(e){var t=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.timeout=1e3*t.timeOut,t.onVideoLoading&&(r.onprogress=function(e){t._closed||t.onVideoLoading(r.response,e.loaded/e.total)}),r.onreadystatechange=function(){t._closed||4===r.readyState&&(r.status>=200&&r.status<300||304==r.status?(t._onComplete&&t._onComplete(r.response,r.status),t.onVideoLoaded&&t.onVideoLoaded(r.response,r.status)):r.status>400&&(t.onVideoErr(r.status),mo.emitter.emit("replay.error",r.status)))},r.ontimeout=function(){t._closed||(t.onVideoTimeout(),mo.emitter.emit("replay.error","timeout"))},r.onerror=function(e){mo.emitter.emit("replay.error",e.type)},r.send(null)},t.prototype._onComplete=function(t){var r=this;r._reader=new e.MP4Reader(new e.Bytestream(t)),r._reader.read();var o=r._video=r._reader.tracks[1];return o?(r.width=o.trak.tkhd.width,r.height=o.trak.tkhd.height,r._duration=r.getFramesLength()/this._fps,void r._parseFrame()):void mo.emitter.emit("replay.error","timeout")},t.prototype.setFPS=function(e){this._fps=e},t.prototype.setLoop=function(e){this._isLoop=e},t.prototype._parseFrame=function(){var e=this,t=e._reader,r=e._decoder,o=t.tracks[1].trak.mdia.minf.stbl.stsd.avc1.avcC,a=o.sps[0],i=o.pps[0];r.decode(a),r.decode(i),e._currentIdx=0,mo.tick(e._onTick,e)},t.prototype._onTick=function(e){var t=this,r=1/t._fps*1e3,o=t._lastT;if(t._lastT=e,o&&(t._delta+=e-o,t._delta>r)){for(var a=t._video.getSampleNALUnits(t._currentIdx),i=0;i<a.length;i++)t._decoder.decode(a[i]),t._delta-=r;mo.emitter.emit("replay.currentTime",t.getCurrentPlayTime()),t._currentIdx++,t._frameBuffers&&t._frameBuffers.length>0&&t._doPicDecoded(t._frameBuffers.shift()),0===a.length&&(t._isLoop?(t._currentIdx=0,t._delta=0):mo.clearTick(t._onTick,t))}},t.prototype.close=function(){var e=this;e._closed||(e._closed=!0),mo.clearTick(e._onTick,e),e._frameBuffers.length=0,e._reader=null,e._decoder=null},t.prototype.onPictureDecoded=function(e,t){this._onPictureDecoded=e,this._onPictureDecodedCtx=t},t.prototype._doPicDecoded=function(e){this._onPictureDecoded&&this._onPictureDecoded.call(this._onPictureDecodedCtx,e,this.width,this.height)},t}();e.H264Parser=t,__reflect(t.prototype,"ebet.H264Parser")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){var t=function(){function e(e,t){this.totalBytes=0,this.currentBytes=0,this.startTime=new Date,this.totalBytes=0,this.currentBytes=0,this._byteRate=e,this._fps=t,this.receivedFrames=0}return e.prototype.reset=function(){this.startTime=new Date,this.totalBytes=0,this.currentBytes=0,this.receivedFrames=0},e.prototype.receiveBytes=function(e){this.currentBytes+=e,this.totalBytes+=e,this.receivedFrames++},e.prototype.getNetworkStatus=function(e){e=e||1;var t=this.receivedFrames/(this._fps*e);return this.receivedFrames=0,t},e}();e.NetworkStatistics=t,__reflect(t.prototype,"ebet.NetworkStatistics")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){!function(e){e.decodeWorkerUrl="code/h264.js",e.videoAudioEnabled=!0,e.isDecoderMgrInstanceMode=!1,e.registerValueHandler((function(t){e.setValue(t,"decodeWorkerUrl"),e.setValue(t,"videoAudioEnabled",!0),e.setValue(t,"workerEnabled",!0),e.setValue(t,"isDecoderMgrInstanceMode",!1)}))}(e.PROJ||(e.PROJ={}))}(mo||(mo={}));var mainAudioPlayer=AV.Player.fromBuffer();mainAudioPlayer.preload(),mainAudioPlayer.noSupport=function(){mo.PROJ.videoAudioEnabled=!1};var havePlayed=!1,_isVideoMgrReady=!1,_audioPlayCb=function(){_isVideoMgrReady&&(havePlayed||(havePlayed=!0,mainAudioPlayer.play()))};!function(e){var t=function(){function t(t,r,o){this._currentUrl="";var a=this;this._currentUrl=t,this.reTryCount=0,this._timeoutMs=5e3,this._lastReceiveMessageTimestamp=0,this._lastReceiveMessageNanoTimestamp=0,this._serverMessageTimestmp={messageTs:0,messageDiff:0,ts:0},this._signalState={ts:0,count:0},this._fpsInfo={time:0,times:0,count:0,avgFPS:0,fps:24},mo.emitter.emit("setAudioPlayCb",_audioPlayCb),mo.PROJ.videoAudioEnabled&&(mainAudioPlayer?(this.audioPlayer=mainAudioPlayer,this.audioPlayer.volume=100):(this.audioPlayer=AV.Player.fromBuffer(),this.audioPlayer.preload(),this.audioPlayer.noSupport=function(){mo.PROJ.videoAudioEnabled=!1},mainAudioPlayer=this.audioPlayer)),this._useGL=void 0!==o&&o,this._tryConnect(),a.decoderMgr=mo.PROJ.isDecoderMgrInstanceMode?e.decoderMgr:new e.DecoderMgr,a.decoderMgr.currentUrl=a._currentUrl;var i={};i.useGL=this._useGL,i.reuseMemory=!1,i.transferMemory=!1,a.decoderMgr.initOpt(i),a.decoderMgr.on(e.DecoderMgr.ON_PIC_DECODED,a._doPicDecoded,a),a.decoderMgr.on(e.DecoderMgr.ON_AUDIO_DECODED,a._doAudioDecoded,a),a.decoderMgr.on(e.DecoderMgr.ON_SKIP_KEYFRAMES,a._doSkipKeyframe,a),a.decoderMgr.start()}return t.prototype.onPictureDecoded=function(e,t){this._onPictureDecoded=e,this._onPictureDecodedCtx=t},t.prototype._tryConnect=function(){this._lastReceiveMessageTimestamp=0,this._lastReceiveMessageNanoTimestamp=0,this._client&&(this._client.onopen=null,this._client.onmessage=null,this._client.onclose=null,this._client.onerror=null,this._client&&this._client.readyState==WebSocket.OPEN&&(this._client.readyState!==WebSocket.CLOSED||this._client.readyState!==WebSocket.CLOSING)&&this._client.close()),this._fpsInfo={time:0,times:0,count:0,avgFPS:0,fps:24},this._client=new WebSocket(this._currentUrl),this._client.onopen=this.onOpenCallback.bind(this),this._client.onerror=this.onErrorCallback.bind(this),console.log("connect to video server:"+this._currentUrl)},t.prototype._doPicDecoded=function(e){this._onPictureDecoded&&this._onPictureDecoded.call(this._onPictureDecodedCtx,e.buffer,e.width,e.height,e.infos)},t.prototype._doAudioDecoded=function(e){this.audioPlayer&&e.buffer&&this.audioPlayer.asset.source.add(e.buffer)},t.prototype._doSkipKeyframe=function(){this.recreateAudioPlayer(),this.onSkipKeyFrame&&this.onSkipKeyFrame()},t.prototype.getFPS=function(){return this._fpsInfo.fps},t.prototype.setIsReady=function(e){_isVideoMgrReady=e},t.prototype.onOpenCallback=function(t){this._client&&(this.reTryCount=0,this._client.binaryType="arraybuffer",this._client.onmessage=this.onMessageCallback.bind(this),this._client.onclose=this.onCloseCallback.bind(this),this._serverMessageTimestmp={messageTs:0,messageDiff:0,ts:0,localDiffTime:0},e.vtRecorder.recordTimming(this._currentUrl,e.TIMMING_SOCKET_CONNECTED),this.onOpen&&this.onOpen(t),this.startHeartTick())},t.prototype.onCloseCallback=function(e){console.log("The platform WebSocket connection has been closed."),this._serverMessageTimestmp={messageTs:0,messageDiff:0,ts:0,localDiffTime:0},this.onClose&&this.onClose(e),this.stopHeartTick()},t.prototype.onMessageCallback=function(e){var t=this;if(t.decoderMgr){var r,o=new Uint8Array(e.data),a=this.WSHeader(o),i=0,n=(new Date).getTime();if(0!==a.type){var s=new Uint8Array(o.subarray(8,16));i=t.uint64FromBytes(s),r=t.intFromBytes(o.subarray(16,20)),o=new Uint8Array(e.data,20,o.length-20);if(1==a.type&&t._lastReceiveMessageNanoTimestamp>0&&t._lastReceiveMessageNanoTimestamp-i>1e8)return void console.log("["+new Date+"][Receive Old Frames]:Skip it. [Info][CurrentMsgTs]:"+t._lastReceiveMessageNanoTimestamp+" OldMsgServerTimeTs:"+i+" TS:"+r+" OldTs:"+t._lastTimestamp+" Diff:"+(t._lastReceiveMessageNanoTimestamp-i));t._lastReceiveMessageNanoTimestamp=i,i=Math.floor(i/1e6),t._lastReceiveMessageTimestamp=i}var l=i;if(0==t._serverMessageTimestmp.ts){var c=l-n;t._serverMessageTimestmp.localDiffTime=c}switch(t._serverMessageTimestmp.messageTs=n,t._serverMessageTimestmp.ts=t._lastReceiveMessageTimestamp,a.type){case 1:if(0==t._fpsInfo.time?t._fpsInfo.time=t._lastReceiveMessageTimestamp:t._lastReceiveMessageTimestamp-t._fpsInfo.time>=1e3&&(t._fpsInfo.times++,t._fpsInfo.time=t._lastReceiveMessageTimestamp,t._fpsInfo.count>0&&(t._fpsInfo.fps=Math.ceil(t._fpsInfo.count/t._fpsInfo.times),this.decoderMgr.setFPS(t._fpsInfo.fps),0==t._fpsInfo.avgFPS&&(t._fpsInfo.avgFPS=t._fpsInfo.fps),t._fpsInfo.avgFPS=Math.ceil((t._fpsInfo.avgFPS+t._fpsInfo.fps)/2),100==t._fpsInfo.times&&(t._fpsInfo.times=0,t._fpsInfo.count=t._fpsInfo.avgFPS))),0===o[0]&&0===o[1]&&0===o[2]&&1===o[3]){this._lastBuffer&&this.decoderMgr.pushH264(this._lastTimestamp,this._lastBuffer),1==t.NALU(o[4]).UnitType&&(0==t._signalState.ts&&(t._signalState.ts=(new Date).getTime()),t._signalState.count++),this._lastBuffer=o,this._lastTimestamp=r,t._fpsInfo.count++}else{if(console.log("receive a split data"),!this._lastBuffer)return;var p=new Uint8Array(this._lastBuffer.length+o.length);p.set(this._lastBuffer),p.set(o,this._lastBuffer.length),this.decoderMgr.pushH264(r,p),this._lastBuffer=null}break;case 2:mo.PROJ.videoAudioEnabled&&t.decoderMgr.pushAAC(r,o);break;case 255:var _=String.fromCharCode.apply(String,o);switch(console.log(_),t.isErr=!0,mo.emitter.emit("eLogRecordVideoErrorCount"),mo.emitter.emit("eLogRecordVideoErrorCode",_),_){case"video streaming server error.":this._lastBuffer=!1}}}},t.prototype.getCurrentMessageTimestamp=function(){return this._lastTimestamp},t.prototype.getServerMessageTimestamp=function(){return this._serverMessageTimestmp},t.prototype.getLastReceiveMessageTimestamp=function(){return this._lastReceiveMessageTimestamp},t.prototype.onErrorCallback=function(e){var t=this;t.reTryCount++,egret.clearTimeout(t._timeoutId),t.reTryCount>5?t.onError&&t.onError(e):t.reTryCount<=1?t._tryConnect():t._timeoutId=egret.setTimeout((function(){t._tryConnect()}),t,t._timeoutMs),t.stopHeartTick()},t.prototype.WSHeader=function(e){var t={type:0,size:0};if(85===e[0]&&71===e[1]&&73===e[2]){switch(e[3]){case 1:t.type=1;break;case 2:t.type=2;break;case 255:t.type=255}t.type>0&&(t.size=this.intFromBytes(e.subarray(4,8)))}return t},t.prototype.NALU=function(e){var t="";if((t="string"==typeof e?parseInt(e,16).toString(2):e.toString(2)).length<8)for(var r=7;r>=t.length-1;r--)t="0"+t;var o={ForbiddenZero:0,RefIdc:0,UnitType:0},a=[];for(r=0;r<t.length;r++)a[r]=parseInt(t[r]);o.ForbiddenZero=a[0];var i=2*a[1]+a[2];o.RefIdc=i;var n=3;for(r=4;r>=0;r--)o.UnitType+=a[n]<<r,n++;return o},t.prototype.uint64FromBytes=function(e){var t=new DataView(e.buffer),r=!1,o=t.getUint32(0,r),a=t.getUint32(4,r);return Math.pow(2,32)*o+a},t.prototype.intFromBytes=function(e){for(var t=0,r=0;r<e.length;++r)t+=e[r],r<e.length-1&&(t<<=8);return t},t.prototype.setUrl=function(e){e!==this._currentUrl&&this._client&&this._client.readyState==WebSocket.OPEN&&(this._client.readyState!==WebSocket.CLOSED||this._client.readyState!==WebSocket.CLOSING)&&this._client.close(),this._currentUrl&&this.reOpen()},t.prototype.getUrl=function(){return this._currentUrl},t.prototype.close=function(){var e=this;e.decoderMgr&&(e.decoderMgr.unCtx(e),e.decoderMgr.stop(),e.decoderMgr.clear(),mo.PROJ.isDecoderMgrInstanceMode||e.decoderMgr.doDtor(),e.decoderMgr=null);var t=e._client;t&&(t.onopen=null,t.onmessage=null,t.onclose=null,t.onerror=null,t.readyState==WebSocket.OPEN&&(t.readyState!==WebSocket.CLOSED||t.readyState!==WebSocket.CLOSING)&&t.close(),e._client=null),this.audioPlayer&&this.audioPlayer.volume&&(this.audioPlayer.volume=0)},t.prototype.reOpen=function(){var t=this;if(!t.isErr){e.vtRecorder.reset(this._currentUrl),e.vtRecorder.recordTimming(this._currentUrl,e.TIMMING_CALL_PLAY),t.decoderMgr.start(),t.decoderMgr.on(e.DecoderMgr.ON_PIC_DECODED,t._doPicDecoded,t);var r=t._client;r&&(r.onopen=null,r.onmessage=null,r.onclose=null,r.onerror=null,this._client&&this._client.readyState==WebSocket.OPEN&&(this._client.readyState!==WebSocket.CLOSED||this._client.readyState!==WebSocket.CLOSING)&&this._client.close()),this._tryConnect(),mo.PROJ.videoAudioEnabled&&(this.audioPlayer=AV.Player.fromBuffer(),this.audioPlayer.play())}},t.prototype.getState=function(){return this._client?this._client.readyState:-1},t.prototype.getNetworkStatus=function(){var e=this,t=(new Date).getTime(),r=t-e._signalState.ts,o=0;return e._signalState.count>0&&(o=r/e._signalState.count/e._fpsInfo.fps),0>o&&(o=0),o=Math.round(o),e._signalState.ts=t,e._signalState.count=0,o},t.prototype.recreateAudioPlayer=function(){},t.prototype.startHeartTick=function(){var e=this;e.stopHeartTick(),e._intervalId4HeartTick=mo.TM.setInterval4Tick((function(){if(e._client){var t=new Uint8Array(1);try{e._client&&e._client.readyState==WebSocket.OPEN&&(e._client.readyState!==WebSocket.CLOSED||e._client.readyState!==WebSocket.CLOSING)&&e._client.send(t.buffer)}catch(e){console.error("hearttick error:"+e.toString())}}}),1e3)},t.prototype.stopHeartTick=function(){this._intervalId4HeartTick&&mo.TM.clearInterval(this._intervalId4HeartTick)},t}();t.isSingleWorkerMgrMode=!0,e.VideoSocketController=t,__reflect(t.prototype,"ebet.VideoSocketController")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};var egret,__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){e.web||(e.web={})}(egret||(egret={})),function(e){function t(e,t){var r=document.createElement("canvas");return isNaN(e)||isNaN(t)||(r.width=e,r.height=t),r}var r=function(e){function r(r,o){var a=e.call(this)||this;return a.surface=t(r,o),a.context=a.surface.getContext("2d"),a}return __extends(r,e),r.prototype.updateVideoBuffer=function(e,t,r){var o=this;o._curBuffer||(t||o.surface.width,r||o.surface.height,o._curBuffer=o.context.createImageData(t,r)),o._curBuffer.data.set(e),o.context.putImageData(o._curBuffer,0,0)},r.prototype.updateTexture=function(e){e.$refreshImageData(),e.$invalidateContentBounds()},r.prototype.release=function(){},r}(egret.HashObject);e.CanvasVideoContext=r,__reflect(r.prototype,"ebet.CanvasVideoContext",["ebet.VideoContext"]);var o=function(e){function r(r,o,a){var i=e.call(this)||this;i.defaultVertexSrc="\n        attribute vec3 position;\n\t\tattribute vec4 color;\n\t\tattribute vec2 textureCoord;\n\t\tvarying   vec4 vColor;\n\t\tvarying   vec2 vTextureCoord;\n\n\t\tvoid main(void){\n\t\t\tvColor        = color;\n\t\t\tvTextureCoord = textureCoord;\n\t\t\tgl_Position   = vec4(position, 1.0);\n\t\t}\n\t\t",i.fragmentSrc="\n        precision mediump float;\n        uniform sampler2D yTexture;\n        uniform sampler2D cbTexture;\n        uniform sampler2D crTexture;\n\n        varying vec4 vColor;\n        varying vec2 vTextureCoord;\n        const mat4 YUV2RGB = mat4(1.1643828125, 0, 1.59602734375, -.87078515625,\n           1.1643828125, -.39176171875, -.81296875, .52959375,\n           1.1643828125, 2.017234375, 0, -1.081390625,\n           0, 0, 0, 1);\n\n        void main() {\n           float y = texture2D(yTexture, vTextureCoord).r;\n           float cr = texture2D(cbTexture, vTextureCoord).r;\n           float cb = texture2D(crTexture, vTextureCoord).r;\n\n           gl_FragColor = vColor * vec4(y, cr, cb, 1.0) * YUV2RGB;\n        }\n        ",i.contextLost=!1,i.glID=null;var n=i;return n.surface=t(r,o),n.initWebGL(),n.initShader(),n.initPVT(a),n.intUniform(),n.initTexture(),i}return __extends(r,e),r.prototype.getTextureCoord=function(e){return void 0===e&&(e=G.videoCutType.origin),r.textureCoords[e]},r.prototype.initTexture=function(){var e=this;e.context,e.yTexture=e.createTexture(),e.cbTexture=e.createTexture(),e.crTexture=e.createTexture()},r.prototype.initShader=function(){var e=this,t=e.context,r=e.createShader(e.defaultVertexSrc,t.VERTEX_SHADER),o=e.createShader(e.fragmentSrc,t.FRAGMENT_SHADER);e.program=e.createProgram(r,o)},r.prototype.initPVT=function(e){var t=this,r=t.context,o=[];o[0]=r.getAttribLocation(t.program,"position"),o[1]=r.getAttribLocation(t.program,"color"),o[2]=r.getAttribLocation(t.program,"textureCoord");var a=[];a[0]=3,a[1]=4,a[2]=2;var i=t.index=[0,1,2,3,2,1];t.vPosition=t.createVbo([-1,1,0,1,1,0,-1,-1,0,1,-1,0]),t.vColor=t.createVbo([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),t.vTextureCoord=t.createVbo(t.getTextureCoord(e)),t.VBOList=[t.vPosition,t.vColor,t.vTextureCoord],t.iIndex=t.createIbo(i),t.setAttribute(t.VBOList,o,a),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.iIndex)},r.prototype.changeType=function(e){this.initPVT(e),mo.emitter.emit("replay.changeType",e)},r.prototype.intUniform=function(){var e=[],t=this,r=t.context;e[0]=r.getUniformLocation(t.program,"yTexture"),e[1]=r.getUniformLocation(t.program,"cbTexture"),e[2]=r.getUniformLocation(t.program,"crTexture"),t.uniLocation=e},r.prototype.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1),this.getWebGLContext()},r.prototype.destroy=function(){this.surface.width=this.surface.height=0},r.prototype.onResize=function(e,t){e=e||this.surface.width,t=t||this.surface.height,this.context&&this.context.viewport(0,0,e,t)},r.prototype.resize=function(e,t,r){var o=this.surface;r?(o.width<e&&(o.width=e),o.height<t&&(o.height=t)):(o.width!=e&&(o.width=e),o.height!=t&&(o.height=t)),this.onResize()},r.prototype.handleContextLost=function(){this.contextLost=!0},r.prototype.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},r.prototype.getWebGLContext=function(){for(var e,t={antialias:r.antialias,stencil:!0},o=["webgl","experimental-webgl"],a=0;a<o.length;a++){try{e=this.surface.getContext(o[a],t)}catch(e){}if(e)break}e?this.setContext(e):(console.error("getWebGLContext Failed."),alert("getWebGLContext Failed. Refresh page."),window.location.reload())},r.prototype.setContext=function(e){this.context=e,e.id=r.glContextId++,this.glID=e.id,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,1),e.clearDepth(1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},r.prototype.createTexture=function(){var e=this.context,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t},r.prototype.createShader=function(e,t){var r,o=this.context;switch(t){case o.VERTEX_SHADER:r=o.createShader(o.VERTEX_SHADER);break;case o.FRAGMENT_SHADER:r=o.createShader(o.FRAGMENT_SHADER);break;default:return}return o.shaderSource(r,e),o.compileShader(r),o.getShaderParameter(r,o.COMPILE_STATUS)?r:void console.warn(o.getShaderInfoLog(r))},r.prototype.createProgram=function(e,t){var r=this.context,o=r.createProgram();return r.attachShader(o,e),r.attachShader(o,t),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)?(r.useProgram(o),o):void console.warn(r.getProgramInfoLog(o))},r.prototype.setAttribute=function(e,t,r){var o=this.context;for(var a in e)o.bindBuffer(o.ARRAY_BUFFER,e[a]),o.enableVertexAttribArray(t[a]),o.vertexAttribPointer(t[a],r[a],o.FLOAT,!1,0,0)},r.prototype.createVbo=function(e){var t=this.context,r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r},r.prototype.createIbo=function(e){var t=this.context,r=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),r},r.prototype.updateVideoBuffer=function(e,t,r){var o,a,i,n=this,s=n.context,l=t*r,c=l>>2;o=e.subarray(0,l),a=e.subarray(l,l+c),i=e.subarray(l+c,l+2*c);var p=n.uniLocation;s.clearColor(0,0,0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.blendFunc(770,771),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.yTexture),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,t,r,0,s.LUMINANCE,s.UNSIGNED_BYTE,o),s.uniform1i(p[0],0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this.cbTexture),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,t>>1,r>>1,0,s.LUMINANCE,s.UNSIGNED_BYTE,a),s.uniform1i(p[1],1),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,this.crTexture),s.texImage2D(s.TEXTURE_2D,0,s.LUMINANCE,t>>1,r>>1,0,s.LUMINANCE,s.UNSIGNED_BYTE,i),s.uniform1i(p[2],2),s.drawElements(s.TRIANGLES,n.index.length,s.UNSIGNED_SHORT,0),s.flush()},r.prototype.updateTexture=function(e){var t=egret.web.WebGLRenderContext.getInstance().context;t&&(t.bindTexture(t.TEXTURE_2D,e.bitmapData.webGLTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.surface))},r.prototype.release=function(){if(this.context){var e=this.context.getExtension("WEBGL_lose_context");e&&e.loseContext()}},r}(egret.HashObject);o.glContextId=0,o.textureCoords={origin:[0,0,1,0,0,1,1,1],oneAnchor:[.3706,0,.6854,0,.3706,.375,.6854,.375],twoAnchors:[.4135,0,.6365,0,.4135,.5,.6365,.5],dealer:[.34595,.2625,.71297,.2625,.34595,.6375,.71297,.6375],cashWheelHigherScreen:[0,0,1,0,0,1,1,1]},e.WebGLVideoContext=o,__reflect(o.prototype,"ebet.WebGLVideoContext",["ebet.VideoContext"])}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){var t=function(t){function r(){var e=t.apply(this,arguments)||this;return e.SKIP_KEYFRAMES=120,e}return __extends(r,t),Object.defineProperty(r.prototype,"currentUrl",{set:function(e){this._currentUrl=e},enumerable:!0,configurable:!0}),r.prototype.setMute=function(e){this.isMute=e},r.prototype._initProp=function(){t.prototype._initProp.call(this);var e=this;e._fpsLimit=4,e._videoCache=[],e._audioCache=[],e.count=0,e.lastPlayedTimestamp=0,e._deltaTime=0,e.timerId=null,e._isInCache=!0,e.isMute=!1,e._fps=12,e.SKIP_KEYFRAMES=e._fps*e._fpsLimit,e._currentFPS=1e3/e._fps,e._processInterval=1e3/e._fps},r.prototype.start=function(){var e=this;e._running=!0,e.timerId=setTimeout((function(){e.processQueue(e)}),e._processInterval)},r.prototype.processQueue=function(e){e._running&&(e.timerId=setTimeout((function(){e.processQueue(e)}),e.processInterval)),e.decodeFromQueueTimer()},r.prototype.setFPS=function(e){var t=this;t._fps=e,t._processInterval=Math.ceil(1e3/t._fps),t._currentFPS=Math.ceil(1e3/t._fps),t.SKIP_KEYFRAMES=t._fps*t._fpsLimit},r.prototype.stop=function(){var e=this;e._running=!1,e.timerId&&clearTimeout(e.timerId)},r.prototype.dtor=function(){t.prototype.dtor.call(this);var e=this;e.clear(),e.worker&&e.worker.terminate(),e.decoder&&(e.decoder.onPictureDecoded=null),e.decoder=null},r.prototype.initOpt=function(e){var t=this;if(t.opt=e,mo.PROJ.workerEnabled){if(t.worker)return;var r=t.worker=new Worker(mo.PROJ.decodeWorkerUrl);return r.addEventListener("message",(function(e){var r=e.data;if(r.consoleLog)console.log(r.consoleLog);else{var o={};o.buffer=new Uint8Array(r.buf,0,r.length),o.width=r.width,o.height=r.height,o.infos=r.infos,t.ready=!0,t.emit(t.__class.ON_PIC_DECODED,o)}}),!1),void r.postMessage({type:"Broadway.js - Worker init",options:{rgb:!e.useGL,reuseMemory:!!e.reuseMemory}})}t.decoder||(t.decoder=new Decoder({rgb:!e.useGL})),t.decoder.onPictureDecoded=function(e,r,o,a){var i={};i.buffer=e,i.width=r,i.height=o,i.infos=a,t.ready=!0,t.emit(t.__class.ON_PIC_DECODED,i)}},r.prototype.decode=function(e,t){var r=this;if(!r._hasDtored)if(mo.PROJ.workerEnabled){var o=r.worker;if(!o)return void console.error("worker is null!");if(r.opt.transferMemory)o.postMessage({buf:e.buffer,offset:e.byteOffset,length:e.length,info:t},[e.buffer]);else{var a=new Uint8Array(e.length);a.set(e,0,e.length),o.postMessage({buf:a.buffer,offset:0,length:e.length,info:t},[a.buffer])}}else r.decoder.decode(e)},r.prototype.decodeFromQueueTimer=function(){var e=this,t=(new Date).getTime();if(e._lastTickMs){var r=t-e._lastTickMs;e._lastTickMs=t;var o=e.getDecodeH264Buffer(r);if(o&&e.decode(o.buffer),mo.PROJ.videoAudioEnabled&&!e.isMute){var a=e.getDecodeAACBuffer();a&&e.emit(e.__class.ON_AUDIO_DECODED,a)}}else e._lastTickMs=t},r.prototype.decodeFromQueue=function(e){var t=this;if(t._lastTickMs){var r=e-t._lastTickMs;t._lastTickMs=e;var o=t.getDecodeH264Buffer(r);if(o&&t.decode(o.buffer),mo.PROJ.videoAudioEnabled)if(t.isMute)t._audioCache.length=0;else{var a=t.getDecodeAACBuffer();a&&t.emit(t.__class.ON_AUDIO_DECODED,a)}}else t._lastTickMs=e},r.prototype.postMessage=function(e,t){return this.worker?void this.worker.postMessage(e,t):void console.log("worker is null!")},r.prototype.recycleMemory=function(e){this.worker&&this.worker.postMessage({reuse:e.buffer},[e.buffer])},r.prototype.clear=function(){var e=this;e._videoCache.length=0,e._audioCache.length=0,e.receivedKeyframe=!1,e.lastPlayedTimestamp=0,e._deltaTime=0,e.ready=!1,e._isInCache=!0},r.prototype.sortCaches=function(){mo.ARR.sort(this._videoCache,"timestamp:asc"),mo.ARR.sort(this._audioCache,"timestamp:asc")},r.prototype.getDecodeH264Buffer=function(e){var t=this;if(t._deltaTime+=e,t._deltaTime<t._currentFPS)return null;t._deltaTime%=t._currentFPS;var r=t._videoCache;if(t._isInCache&&r.length<5)return null;if(t._isInCache&&(t._isInCache=!1),0==r.length)return null;var o=t._searchVideoKeyframe();return o||(o=r.shift()),o.timestamp<t.lastPlayedTimestamp?null:(t.lastPlayedTimestamp=o.timestamp,o)},r.prototype._searchVideoKeyframe=function(){var e=this,t=e._videoCache;if(t.length<e.SKIP_KEYFRAMES)return null;for(var r=-1,o=0;o<t.length;o++)t[o].isKeyframe&&(r=o);if(-1!==r&&r>e.SKIP_KEYFRAMES){var a=t[r];return t.splice(0,r+1),e.emit(e.__class.ON_SKIP_KEYFRAMES),e.skipAACBuffer(a.timestamp),a}return null},r.prototype.getPackageByTimestamp=function(e,t){if(!e||0===e.length)return null;for(var r=0;r<e.length;r++)if(e[r].timestamp===t)return e[r];return null},r.prototype.getDecodeAACBuffer=function(){var e=this._audioCache,t=this.lastPlayedTimestamp;if(0===e.length||!t)return null;for(mo.ARR.sort(e,"timestamp:asc");0!==e.length;){var r=e[0];if(null==r)return null;if(r.timestamp-t>=0&&r.timestamp-t<=this._currentFPS)return e.shift();if(r.timestamp<t){if(t-r.timestamp>0&&t-r.timestamp<=this._currentFPS/2)return e.shift();e.shift()}return null}return null},r.prototype.skipAACBuffer=function(e){var t=this._audioCache;if(0!==t.length){mo.ARR.sort(t,"timestamp:asc");for(var r=-1,o=0;o<t.length;o++)if(t[o].timestamp+93>e){r=o;break}r>0&&t.splice(0,r)}},r.prototype.pushH264=function(e,t){0===e?this.decode(t):this._pushPackage(!0,e,t)},r.prototype.pushAAC=function(e,t){this._pushPackage(!1,e,t)},r.prototype._pushPackage=function(t,r,o){var a=this,i=t?a._videoCache:a._audioCache;if(!a.getPackageByTimestamp(i,r)){var n=a.receivedKeyframe,s=r>a.lastPlayedTimestamp;if(!s&&a.lastPlayedTimestamp-r>1500&&(a.lastPlayedTimestamp=r,a.emit(a.__class.ON_SKIP_KEYFRAMES),a._audioCache.length=0),!n||s){if(!t&&!s)return;var l={};if(l.buffer=o,l.timestamp=r,l.bufferSize=o.byteLength,t&&l.bufferSize>4&&101==o[4]&&(l.isKeyframe=!0),t&&!n&&!l.isKeyframe)return;i.length>=200&&i.shift(),i.push(l),mo.ARR.sort(i,"timestamp:asc"),t&&!n&&(e.vtRecorder.recordTimming(a._currentUrl,e.TIMMING_RECEIVED_FIRST_KEYFRAME),a.receivedKeyframe=!0,a.lastPlayedTimestamp=r,a.skipAACBuffer(r))}}},r}(mo.Emitter);t.ON_WORKER_DATA="ON_WORKER_DATA",t.ON_PIC_DECODED="ON_PIC_DECODED",t.ON_AUDIO_DECODED="ON_AUDIO_DECODED",t.ON_SKIP_KEYFRAMES="ON_SKIP_KEYFRAMES",e.DecoderMgr=t,__reflect(t.prototype,"ebet.DecoderMgr"),t.genGsList(["ready"],!0),e.decoderMgr=new t}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){var t=function(t){function r(e,r){var o=t.call(this)||this,a=o;return a.url=e,a.emitter=new mo.Emitter,a.type=r,a._initProp(),o}return __extends(r,t),r.prototype.getType=function(){return this.type},r.prototype.getCurrentPlayTime=function(){return 20},r.prototype._initProp=function(){var t=this,r=t.url,o="webgl"==egret.Capabilities.renderMode,a=!!window&&!!window.Worker;t.socketController=new e.VideoSocketController(r,a,o),t.socketController.onPictureDecoded(t.onPictureDecoded,t),t.smoothing=!0,t.socketController.onClose=function(){t.emitter.emit("onClose",t)},t.socketController.onError=function(){t.emitter.emit("onError",t)},t.socketController.onSkipKeyFrame=function(){t.emitter.emit("onSkipKeyFrame",t)}},r.prototype.setUrl=function(e){this.socketController.setUrl(e)},r.prototype.getUrl=function(){return this.socketController.getUrl()},r.prototype.changeType=function(e){var t=this;t.type=e;var r=t._videoContext;return r?(r.changeType(e),t.isWaitingChangeType=!1,void(t.waitingChangeType=null)):(t.isWaitingChangeType=!0,void(t.waitingChangeType=e))},r.prototype.onPictureDecoded=function(t,r,o){void 0===r&&(r=864),void 0===o&&(o=480);var a=this,i=Date.now();e.vtRecorder.recordFrameCount(a.url,i);var n="webgl"==egret.Capabilities.renderMode;a._videoBitmapData?(a._videoContext.updateVideoBuffer(t,r,o),a._videoContext.updateTexture(a)):(a._videoContext=n?new e.WebGLVideoContext(r,o,a.type):new e.CanvasVideoContext(r,o),a._videoContext.updateVideoBuffer(t,r,o),a._videoBitmapData=new egret.BitmapData(a._videoContext.surface),a.$setBitmapData(a._videoBitmapData))},r.prototype.close=function(){var e=this;e.socketController.close(),e._videoContext&&e._videoContext.release()},r.prototype.reOpen=function(){var e=this;e.socketController.onClose=function(){e.emitter.emit("onClose",e)},this.socketController.reOpen()},r}(egret.Bitmap);e.H264Sprite=t,__reflect(t.prototype,"ebet.H264Sprite")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){var t=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){var t=this,r=t.url;t._videoParser=new e.H264Parser,t._videoParser.onVideoErr=function(e){t.onVideoErr&&t.onVideoErr(e)},t._videoParser.onVideoTimeout=function(){t.onVideoTimeout&&t.onVideoTimeout()},t._videoParser.onVideoLoaded=function(){t.onVideoLoaded&&t.onVideoLoaded()},t._videoParser.onVideoLoading=function(e,r){t.onVideoLoading&&t.onVideoLoading(r)},t._videoParser.onVideoReady=function(e,r){t.onVideoReady&&t.onVideoReady(e,r)},t._videoParser.onPictureDecoded(t.onPictureDecoded,t),t._videoParser.parse(r)},r.prototype.setFPS=function(e){this._videoParser&&this._videoParser.setFPS(e)},r.prototype.setLoop=function(e){this._videoParser.setLoop(e)},r.prototype.setTimeout=function(e){this._videoParser.timeOut=e},r.prototype.onPictureDecoded=function(t,r,o){void 0===r&&(r=864),void 0===o&&(o=480);var a=this,i="webgl"==egret.Capabilities.renderMode;a._videoBitmapData?(a._videoContext.updateVideoBuffer(t,r,o),a._videoContext.updateTexture(a)):(a._videoContext=i?new e.WebGLVideoContext(r,o):new e.CanvasVideoContext(r,o),a._videoContext.updateVideoBuffer(t,r,o),a._videoBitmapData=new egret.BitmapData(a._videoContext.surface),a.$setBitmapData(a._videoBitmapData))},r.prototype.close=function(){this._videoParser.close()},r.prototype.reOpen=function(){},r}(e.H264Sprite);e.H264Player=t,__reflect(t.prototype,"ebet.H264Player")}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){e.videoCutType={origin:"origin",oneAnchor:"oneAnchor",twoAnchors:"twoAnchors",dealer:"dealer",cashWheelHigherScreen:"cashWheelHigherScreen"};var t=function(t){function r(){var e=t.apply(this,arguments)||this;return e._isMute=!1,e.onVideoCloseCallback=null,e._shouldRemoveWhenDisconnect=!0,e}return __extends(r,t),r.prototype.setMute=function(e){var t=this;t._isMute=e,t.spVideo&&t.spVideo.socketController&&t.spVideo.socketController.decoderMgr&&t.spVideo.socketController.decoderMgr.setMute(e)},r.prototype._initProp=function(){t.prototype._initProp.call(this);var r=this;r.networkStatus=0,r.curUrl=null,r.delayCount=0,r.videoLatency={ts:0,count:0},r._isStop=!1,r.type=e.videoCutType.origin,r.isBeginPlay=!1,r.onEmitter(mo.emitter,"_switchVideoVoice",r._switchVideoVoice)},r.prototype._switchVideoVoice=function(){this.setMute(!this._isMute)},r.prototype._onPlayVideo=function(){var t=this,r=t.spVideo,o=t.grp_video;if(!t._isStop&&r&&0!=r.width){mo.clearTick(t._onPlayVideo,t),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2;var a=1,i=1;switch(t.type){default:case e.videoCutType.origin:a=o.width,i=o.height;break;case e.videoCutType.twoAnchors:a=175,i=250;break;case e.videoCutType.oneAnchor:case e.videoCutType.dealer:a=350,i=250;break;case e.videoCutType.cashWheelHigherScreen:a=o.width,i=1.07*o.height}r.scaleX=a/r.width,r.scaleY=i/r.height,r.x=a/2,r.y=i/2,r.isWaitingChangeType?t.changeType(r.waitingChangeType):t.isWaitingChangeType&&t.changeType(t.waitingChangeType)}},r.prototype._rescaleSpVideo=function(e){this.type=e,this._onPlayVideo()},r.prototype.changeType=function(e){var t=this;if(t.type!=e&&"webgl"==egret.Capabilities.renderMode){if(!t.spVideo)return t.isWaitingChangeType=!0,void(t.waitingChangeType=e);t.spVideo.changeType(e),t.isWaitingChangeType=!1,t.waitingChangeType=null}},r.prototype.playWithType=function(t,r,o,a,i){var n=this;n.type=a||e.videoCutType.origin,n.play(t,r,o,i),mo.emitter.on("replay.changeType",n._rescaleSpVideo,n)},r.prototype.play=function(e,t,o,a){var i=this;if(e){if(mo.PROJ.isInnerNet)mo.emitter.emit("replay.error","isInnerNet");else if(!i.isBeginPlay)if(i.isBeginPlay=!0,i.grp_video=t,i.curUrl=e,ebet.vtRecorder.reset(i.curUrl),ebet.vtRecorder.recordTimming(i.curUrl,ebet.TIMMING_CALL_PLAY),i.setMute(!!a),egret.isNative){var n=egret.Capabilities.os.toLowerCase();if("android"==n){var s={};s.url=e,o&&(s.type="mp4"),mo.RT.call("video.play",s,(function(e){return e?void mo.emitter.emit("replay.error","videoError"):void 0})),mo.RT.receiver.on("video.onReady",i._onVideoReady_native,i),mo.RT.receiver.on("video.onDisconnected",i._onVideoDisconnected_native,i),mo.RT.receiver.on("video.onChangeVideoHost",(function(){i.emit(r.ON_VIDEO_CHANGE_HOST,null)}),i),mo.RT.receiver.on("video.onError",(function(e){var t=e.what;e.extra,mo.nextTick((function(){var e=1==t?String(501):"error";mo.emitter.emit("replay.error",e)}))}),i)}else"ios"==n&&(egret.ExternalInterface.addCallback("videoReady",(function(){mo.nextTick((function(){i.emit("ready",!0)}))})),egret.ExternalInterface.addCallback("videoOnChangeVideoHost",(function(){i.emit(r.ON_VIDEO_CHANGE_HOST,null)})),egret.ExternalInterface.addCallback("videoError",(function(e){mo.nextTick((function(){mo.emitter.emit("replay.error",e)}))})),egret.ExternalInterface.call("playVideo",e))}else{i.needToCheckVideoStatus=!o;var l=i.grp_video;if(!l)return;var c=i.spVideo=o?new ebet.H264Player(e):new ebet.H264Sprite(e,i.type);if(l.addChild(c),i.spVideo.emitter.on("onClose",(function(){"function"!=typeof i.onVideoCloseCallback?(i.spVideo.reOpen(),i.spVideo.socketController.isErr||mo.emitter.emit("onVideoReconnect")):i.onVideoCloseCallback(!1)})),i.spVideo.emitter.on("onError",(function(){"function"==typeof i.onVideoCloseCallback&&i.onVideoCloseCallback(!0)})),mo.tick(i._onPlayVideo,i),o)i.spVideo.onVideoReady=function(){i._onVideoReady_h5()};else{var p=i.spVideo.socketController.decoderMgr;p&&i.onEmitter(p,"ready",i._onVideoReady_h5)}}}else mo.emitter.emit("replay.error","noUrl")},r.prototype.stop=function(){var e=this;e.unAll(),e.unEmitter(),e._isStop=!0,mo.clearTick(e._onPlayVideo,e);var t=e.spVideo;(t&&(t.emitter.unAll("onClose"),mo.emitter.un("replay.changeType",e._rescaleSpVideo,e),t.close(),t.socketController&&t.socketController.decoderMgr&&t.socketController.decoderMgr.unCtx(e)),mo.RT.receiver.unCtx(e),e.ready=!1,e.spVideo&&e.spVideo.socketController&&e.spVideo.socketController.setIsReady(e.ready),egret.isNative&&e.curUrl)&&("ios"==egret.Capabilities.os.toLowerCase()?egret.ExternalInterface.call("stopVideo",e.curUrl):mo.RT.call("video.stop",{url:e.curUrl},(function(e){e&&console.error(e)})))},r.prototype.isVideoBeginPlay=function(){return this.isBeginPlay},r.prototype.isVideoStop=function(){return this._isStop},r.prototype._onVideoReady_h5=function(){var e=this,t=e.spVideo;ebet.vtRecorder.recordTimming(e.curUrl,ebet.TIMMING_START_PLAY),mo.emitter.emit("eLogRecordVideoPlay"),t&&(e.ready=!t.socketController||!!t.socketController.decoderMgr&&t.socketController.decoderMgr.ready),t&&t.socketController&&t.socketController.setIsReady(e.ready),e.ready&&e.img_bg&&(e.img_bg.visible=!1),e.needToCheckVideoStatus&&e.startCheckVideoStatus(),e._isMute&&e.setMute(!0)},r.prototype._onVideoReady_native=function(e){var t=this;e.url==t.curUrl&&(t.ready=!!e.ready,t.spVideo&&t.spVideo.socketController&&t.spVideo.socketController.setIsReady(t.ready),t.ready&&t.img_bg&&(t.img_bg.visible=!1),0==e.totalTime?mo.emitter.emit("replay.nativeCountdown",t.videoDuration):mo.emitter.emit("replay.nativeCountdown",e.totalTime))},r.prototype._onVideoDisconnected_native=function(e){var t=this;e.url==t.curUrl&&t.emit(t.__class.ON_VIDEO_DISCONNECTED)},r.prototype.reOpen=function(){var e=this;e.curUrl&&(egret.isNative?mo.RT.call("video.reOpen",{url:e.curUrl},(function(e){return e?mo.MSG.show("video error"):void 0})):e.spVideo&&e.spVideo.reOpen())},r.prototype.setShouldRemoveWhenDisconnect=function(e){this._shouldRemoveWhenDisconnect=e},r.prototype.clear=function(){var e=this;e.stop(),e.spVideo&&e._shouldRemoveWhenDisconnect&&e.spVideo.parent&&e.spVideo.parent.removeChild(e.spVideo),e.spVideo=null,e.layer=null,e.grp_video=null,e.img_bg=null,e.curUrl=null,mo.TM.clearInterval(e._intervalCheckVideoStatus),e.networkStatus=0,e.unEmitter()},r.prototype.startCheckVideoStatus=function(){var e=this;e.networkStatus=0,mo.TM.clearInterval(e._intervalCheckVideoStatus),e._intervalCheckVideoStatus=mo.TM.setInterval4Tick((function(){if(e.spVideo&&1==e.spVideo.socketController.getState()){var t=!1,o=e.spVideo.socketController.getFPS();0>o&&(o=24);var a=200/o,i=e.spVideo.socketController.getNetworkStatus(1),n=Math.round(i/a);n=0!=i?5>=n?5:8>=n?4:12>=n?3:17>=n?2:30>=n?1:0:0,e.networkStatus=n,e.emit("networkStatus",e.networkStatus);var s=mo.DATE.now(),l=e.spVideo.socketController.getServerMessageTimestamp(),c=Math.abs(l.ts-(s+l.localDiffTime));c>=3e3&&(t=!0);var p=(new Date).getTime(),_=18e4,u=p-e.videoLatency.ts;2>n?(0==e.videoLatency.count&&(e.videoLatency.ts=p),e.videoLatency.count++):n>=2&&u>=_&&(e.videoLatency.count=0),e.videoLatency.count>=60&&_>u&&(console.error("[VIDEO][WARNING]:Weak network. reconnect to other server. [WEAK_WIFI_COUNT]:"+e.videoLatency.count+" FPS:"+o+" OMF:"+i+" TIER:"+n+" latencyMaxTime:"+_),t=!0),t&&(e.videoLatency={ts:0,count:0},e.spVideo.socketController.reOpen(),e.emit(r.ON_VIDEO_CHANGE_HOST,3e4),mo.emitter.emit("onVideoReconnect"))}}),1e3)},r}(mo.Emitter);t.ON_VIDEO_DISCONNECTED="ON_VIDEO_DISCONNECTED",t.ON_VIDEO_CHANGE_HOST="changeVideoHost",e.VideoMgr=t,__reflect(t.prototype,"G.VideoMgr"),t.genGsList(["ready","networkStatus"],!0)}(G||(G={}));var ebet;__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){e.TIMMING_CALL_PLAY="TIMMING_CALL_PLAY",e.TIMMING_SOCKET_CONNECTED="TIMMING_SOCKET_CONNECTED",e.TIMMING_RECEIVED_FIRST_KEYFRAME="TIMMING_RECEIVED_FIRST_KEYFRAME",e.TIMMING_START_PLAY="TIMMING_START_PLAY";var t=function(){function t(){this.videoTimmings={}}return t.prototype.reset=function(e){this.videoTimmings[e]=this.initVideoTimming()},t.prototype.initVideoTimming=function(){for(var e=[],t=0;9>t;t++)e.push(0);return{vt1:{callPlayFunction:0,socketConnected:0,receivedFirstKeyFrame:0,startPlay:0,isUploaded:!1},vt2:{frameNumbers:e,isUploaded:!1}}},t.prototype.isUploadTimmingFinished=function(e){return this.videoTimmings[e].vt1.isUploaded},t.prototype.isUploadFrameFinished=function(e){return this.videoTimmings[e].vt2.isUploaded},t.prototype.getVideoReadyTimeStamp=function(e){return this.videoTimmings[e]?this.videoTimmings[e].vt1.startPlay:-1},t.prototype.uploadTimmingRecord=function(e){if(this.videoTimmings[e]){var t=this.videoTimmings[e].vt1,r={videoUrl:e,callPlayTimestamp:t.callPlayFunction,videoTimming:[t.socketConnected-t.callPlayFunction,t.receivedFirstKeyFrame-t.socketConnected,t.startPlay-t.receivedFirstKeyFrame]};mo.emitter.emit("VTRecorderTimmingUpload",r),t.isUploaded=!0}else console.log("VTRecorder uploadTimmingRecord no record of url: "+e)},t.prototype.uploadFrameRecord=function(e){var t=this;if(t.videoTimmings[e]){var r=t.videoTimmings[e].vt1,o=t.videoTimmings[e].vt2,a={videoUrl:e,callPlayTimestamp:r.callPlayFunction,videoFrames:o.frameNumbers};mo.emitter.emit("VTRecorderFrameUpload",a),o.isUploaded=!0,delete t.videoTimmings[e]}else console.log("VTRecorder uploadFrameRecord no record of url: "+e)},t.prototype.recordFrameCount=function(e,t){var r=this,o=r.getVideoReadyTimeStamp(e);if(-1!=o){if(!r.videoTimmings[e])return void console.log("VTRecorder recordFrameCount no record of url: "+e);var a=t-o;if(a>0&&9e3>a){var i=r.videoTimmings[e].vt2,n=Math.floor(a/1e3);i.frameNumbers[n]+=1}else r.isUploadFrameFinished(e)||r.uploadFrameRecord(e)}},t.prototype.recordTimming=function(t,r){var o=this,a=Date.now();if(o.videoTimmings[t]){var i=o.videoTimmings[t].vt1;switch(r){case e.TIMMING_CALL_PLAY:i.callPlayFunction=a;break;case e.TIMMING_SOCKET_CONNECTED:i.socketConnected=a;break;case e.TIMMING_RECEIVED_FIRST_KEYFRAME:i.receivedFirstKeyFrame=a;break;case e.TIMMING_START_PLAY:i.startPlay=a,o.isUploadTimmingFinished(t)||e.vtRecorder.uploadTimmingRecord(t)}}else console.log("VTRecorder recordTimming no record of url: "+t)},t}();e.VideoTimmingRecorder=t,__reflect(t.prototype,"ebet.VideoTimmingRecorder"),e.vtRecorder=new t}(ebet||(ebet={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(t){function r(){var e=t.apply(this,arguments)||this;return e._recordWebUrl="wss://voice.ebdf.online:5220",e._sendInterval=1e3,e._reconnectTime=2e3,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.initParams()},r.prototype.initParams=function(){var e=this;e._permissonResult=null,e._stream=null,e._isRunning=!1,e._isReadingMessage=!1,e._audioDataCache=null,e._audioCache=[],e._messageBuffer=[]},r.prototype.testVoice=function(e,t){this.readyToStart(e,t)},r.prototype.testClose=function(){this._websocket&&this._websocket.close()},r.prototype.checkIfPermission=function(){var e=this;return e.log("測試是否有收音權限"),navigator&&navigator.getUserMedia?void navigator.getUserMedia({video:!1,audio:!0},(function(t){e.log("有收音權限，準備關閉收音"),e._stream=t,e.stopDeviceRecording()}),(function(){e.log("沒有收音權限")})):void e.log("沒有收音權限")},r.prototype.readyToStart=function(e,t){var r=this;return navigator&&navigator.getUserMedia?(r._isRunning=!0,void navigator.getUserMedia({video:!1,audio:!0},(function(o){return r._isRunning?(r._userName=e,r._room=t,r._stream=o,void r.permissionReady(!0,r._stream)):void r.log("getUserMedia 已經呼叫endAll停止運行，故不繼續處理")}),(function(e){r.permissionReady(!1,null,e.message)}))):void r.permissionReady(!1,null,"沒有navigator或是navigator.getUserMedia")},r.prototype.permissionReady=function(e,t,r){var o=this;return e?o._isRunning?(o.log("權限取得，準備進行連線"),void o.connectToVoiceServer()):void o.log("permissionReady 已經呼叫endAll停止運行，故不繼續處理"):(o.log("權限取得失敗 "+r+" 即將結束所有功能"),void o.endAll())},r.prototype.connectToVoiceServer=function(){var t=this;return t._websocket&&(t._websocket.close(),t._websocket=null),t._isRunning?t._stream?(t._websocket=new WebSocket(t._recordWebUrl),t._websocket.onopen=function(){t._isRunning&&(t.log("握手成功"),t._websocket.send("user:"+t._userName),t._recorder=new e.SRecorder(t._stream,t._userName,t._room),t._recorder.start(),t._messageReader=new FileReader,t._messageReader.onloadend=t.playSoundAfterLoaded.bind(t),t._micTimerId&&clearInterval(t._micTimerId),t._micTimerId=setInterval((function(){t._websocket&&t._websocket.send(t._recorder.getBuffer()),t._recorder&&t._recorder.clear()}),t._sendInterval))},t._websocket.onclose=function(){t._isRunning&&(t.log("websocket onclose 準備重新連線，先關閉收音"),t.stopDeviceRecording(),mo.TM.setTimeout4Tick((function(){t._isRunning&&(t.endAll(),t.readyToStart(t._userName,t._room))}),t._reconnectTime))},void(t._websocket.onmessage=function(e){t._isRunning&&t._messageReader&&(e&&e.data&&t._messageBuffer.push(e.data),t._audioDataCache=e.data,t.readMessage())})):void t.log("connectToVoiceServer self._stream消失，故不繼續處理"):void t.log("connectToVoiceServer 已經呼叫endAll停止運行，故不繼續處理")},r.prototype.readMessage=function(){var e=this;if(!e._isReadingMessage){if(0==e._messageBuffer.length)return void(e._isReadingMessage=!1);e._isReadingMessage=!0;var t=e._messageBuffer.shift();e._messageReader.readAsText(t)}},r.prototype.playSoundAfterLoaded=function(e){var t=this;try{if(e&&e.target&&e.target.result){var r=e.target.result,o=13,a=(Math.floor(r.substr(0,o)),Math.floor(r[o]));o+=1;var i=r.substr(o,a);o+=a;var n=Math.floor(r[o]);o+=1,r.substr(o,n),o+=n;var s=t._audioDataCache.slice(o),l=window.URL||window.webkitURL;if(void 0===t._audioCache[i]){var c=document.createElement("audio");if(c.id="audio-player",c.controls=!0,c.style.display="none",c.src=l.createObjectURL(s),document.getElementById("song"))document.getElementById("song").appendChild(c);else{var p=document.createElement("div");p.appendChild(c),p.id="song"}t._audioCache[i]=c;try{c.play()}catch(e){t.error("播放失敗 : "+e)}}else{t._audioCache[i].src=l.createObjectURL(s);try{t._audioCache[i].play()}catch(e){t.error("播放失敗 : "+e)}}}t._isReadingMessage=!1,t.readMessage()}catch(e){t.error("播放失敗 : "+e),t._isReadingMessage=!1}},r.prototype.stopDeviceRecording=function(){var e=this;e._stream&&(e._stream.getTracks().forEach((function(e){e.stop()})),e._stream=null,e.log("關閉收音成功"))},r.prototype.endAll=function(){var e=this;e.stopDeviceRecording(),e._recorder&&(e._recorder.stop(),e._recorder=null),e._messageReader&&(e._messageReader.abort(),e._messageReader=null),e._micTimerId&&(clearInterval(e._micTimerId),e._micTimerId=null),e._websocket&&(e._websocket.close(),e._websocket=null),e.initParams(),e.log("收音結束")},r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log("[主播收音] : "+e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error("[主播收音] : "+e)},r}(mo.Emitter);e.VoiceRecMgr=t,__reflect(t.prototype,"G.VOICE.VoiceRecMgr"),e.mgr=new t}(e.VOICE||(e.VOICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){!function(e){var t=function(){function e(e,t,r){var o=this,a={sampleBits:16,sampleRate:44100};o.context=new AudioContext,o.audioInput=o.context.createMediaStreamSource(e),o.recorder=o.context.createScriptProcessor(4096,1,1),o.audioData={size:0,buffer:[],inputSampleRate:o.context.sampleRate,inputSampleBits:16,outputSampleRate:a.sampleRate,oututSampleBits:a.sampleBits,clear:function(){this.buffer=[],this.size=0},input:function(e){this.buffer.push(new Float32Array(e)),this.size+=e.length},compress:function(){for(var e=new Float32Array(this.size),t=0,r=0;r<this.buffer.length;r++)e.set(this.buffer[r],t),t+=this.buffer[r].length;for(var o=Math.floor(this.inputSampleRate/this.outputSampleRate),a=e.length/o,i=new Float32Array(a),n=0,s=0;a>n;)i[n]=e[s],s+=o,n++;return i},encodeWAV:function(){var e=Math.min(this.inputSampleRate,this.outputSampleRate),t=Math.min(this.inputSampleBits,this.oututSampleBits),r=this.compress(),o=r.length*(t/8),a=new ArrayBuffer(44+o),i=new DataView(a),n=0,s=function(e){for(var t=0;t<e.length;t++)i.setUint8(n+t,e.charCodeAt(t))};if(s("RIFF"),n+=4,i.setUint32(n,36+o,!0),n+=4,s("WAVE"),n+=4,s("fmt "),n+=4,i.setUint32(n,16,!0),n+=4,i.setUint16(n,1,!0),n+=2,i.setUint16(n,1,!0),n+=2,i.setUint32(n,e,!0),n+=4,i.setUint32(n,1*e*(t/8),!0),n+=4,i.setUint16(n,t/8*1,!0),n+=2,i.setUint16(n,t,!0),n+=2,s("data"),n+=4,i.setUint32(n,o,!0),n+=4,8===t)for(var l=0;l<r.length;l++,n++){var c=0>(p=Math.max(-1,Math.min(1,r[l])))?32768*p:32767*p;c=Math.floor(255/(65535/(c+32768))),i.setInt8(n,c)}else for(l=0;l<r.length;l++,n+=2){var p=Math.max(-1,Math.min(1,r[l]));i.setInt16(n,0>p?32768*p:32767*p,!0)}return new Blob([i],{type:"audio/wav"})},encodeBuffer:function(){var e=Math.min(this.inputSampleRate,this.outputSampleRate),o=Math.min(this.inputSampleBits,this.oututSampleBits),a=this.compress(),i=a.length*(o/8),n=t.length,s=r.length,l=(new Date).getTime(),c=new ArrayBuffer(14+n+1+r.length+44+i),p=new DataView(c),_=0,u=function(e){for(var t=0;t<e.length;t++)p.setUint8(_+t,e.charCodeAt(t))};if(u(l.toString()),_+=13,u(n.toString()),_+=1,u(t),_+=n,u(s.toString()),_+=1,u(r),_+=s,u("RIFF"),_+=4,p.setUint32(_,36+i,!0),_+=4,u("WAVE"),_+=4,u("fmt "),_+=4,p.setUint32(_,16,!0),_+=4,p.setUint16(_,1,!0),_+=2,p.setUint16(_,1,!0),_+=2,p.setUint32(_,e,!0),_+=4,p.setUint32(_,1*e*(o/8),!0),_+=4,p.setUint16(_,o/8*1,!0),_+=2,p.setUint16(_,o,!0),_+=2,u("data"),_+=4,p.setUint32(_,i,!0),_+=4,8===o)for(var h=0;h<a.length;h++,_++){var m=0>(d=Math.max(-1,Math.min(1,a[h])))?32768*d:32767*d;m=Math.floor(255/(65535/(m+32768))),p.setInt8(_,m)}else for(h=0;h<a.length;h++,_+=2){var d=Math.max(-1,Math.min(1,a[h]));p.setInt16(_,0>d?32768*d:32767*d,!0)}return p}},o.recorder.onaudioprocess=function(e){console.log("持續收音中"),o.audioData.input(e.inputBuffer.getChannelData(0))}}return e.prototype.start=function(){var e=this;e.audioInput.connect(e.recorder),e.recorder.connect(e.context.destination)},e.prototype.stop=function(){var e=this;e.audioInput&&(e.audioInput.disconnect(),e.audioInput=null),e.recorder&&(e.recorder.disconnect(),e.recorder=null),e.context&&(e.context.close(),e.context=null),e.audioData&&(e.clear(),e.audioData=null)},e.prototype.getBlob=function(){return this.audioData.encodeWAV()},e.prototype.getBuffer=function(){return this.audioData.encodeBuffer()},e.prototype.clear=function(){this.audioData.clear()},e}();e.SRecorder=t,__reflect(t.prototype,"G.VOICE.SRecorder")}(e.VOICE||(e.VOICE={}))}(G||(G={}));var mouse;__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){var t=function(){function e(){}return e.MOUSE_MOVE="mouseMove",e.MOUSE_OVER="mouseOver",e.MOUSE_OUT="mouseOut",e.ROLL_OVER="rollOver",e.ROLL_OUT="rollOut",e.MOUSE_WHEEL="mouseWheel",e}();e.MouseEvent=t,__reflect(t.prototype,"mouse.MouseEvent")}(mouse||(mouse={})),function(e){var t,r,o,a=function(a,i,n,s){if(a!=e.MouseEvent.ROLL_OVER||!t.isRollOver){if(a==e.MouseEvent.ROLL_OVER?t.isRollOver=!0:a==e.MouseEvent.ROLL_OUT&&delete t.isRollOver,o&&t.buttonModeForMouse)try{var l=r.$displayList.renderBuffer.surface;a==e.MouseEvent.ROLL_OVER?l.style.cursor="pointer":a==e.MouseEvent.ROLL_OUT&&(l.style.cursor="auto")}catch(e){}egret.TouchEvent.dispatchTouchEvent(t,a,i,!1,n,s,null)}};e.enable=function(s){o="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,r=s,o&&n();var l=function(r,o){t&&!t.$stage&&(a(e.MouseEvent.MOUSE_OUT,!0,r,o),a(e.MouseEvent.ROLL_OUT,!1,r,o),t=null);var i=s.$hitTest(r,o);null!=i&&i!=s?t?i!=t&&(a(e.MouseEvent.MOUSE_OUT,!0,r,o),t.$getConcatenatedVisible()&&t.hitTestPoint(r,o,!0)||a(e.MouseEvent.ROLL_OUT,!1,r,o),t=i,a(e.MouseEvent.ROLL_OVER,!1,r,o),a(e.MouseEvent.MOUSE_OVER,!0,r,o)):(t=i,a(e.MouseEvent.ROLL_OVER,!1,r,o),a(e.MouseEvent.MOUSE_OVER,!0,r,o)):t&&(a(e.MouseEvent.MOUSE_OUT,!0,r,o),a(e.MouseEvent.ROLL_OUT,!1,r,o),t=null)},c=NaN,p=NaN,_=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,o,a){if(c=t,p=o,_.call(this,t,o,a),i){var n=r.$hitTest(t,o);n||(n=r),egret.TouchEvent.dispatchTouchEvent(n,e.MouseEvent.MOUSE_MOVE,!0,!0,t,o,a,!0)}l(t,o)};var u=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(e,t,r){u.call(this,e,t,r),l(e,t)};var h=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(e,t,r){h.call(this,e,t,r),l(e,t)},s.addEventListener(egret.Event.ENTER_FRAME,(function(){NaN!=c&&NaN!=p&&l(c,p)}),null)},e.setButtonMode=function(e,t){e.buttonModeForMouse=t};var i=!1;e.setMouseMoveEnabled=function(e){i=e};var n=function(){var t="mousewheel",o=function(t){var o=t.type;("DOMMouseScroll"==o||"mousewheel"==o)&&(t.delta=t.wheelDelta?t.wheelDelta:-(t.detail||0),r.dispatchEventWith(e.MouseEvent.MOUSE_WHEEL,!1,t.delta))};window.addEventListener?("mousewheel"===t&&void 0!==document.mozFullScreen&&(t="DOMMouseScroll"),window.addEventListener(t,(function(e){o(e)}),!1)):window.attachEvent&&window.attachEvent("on"+t,(function(e){e=e||window.event,o(e)}))}}(mouse||(mouse={}));var particle;__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();!function(e){var t=function(){function e(){this.matrix=new egret.Matrix,this.reset()}return e.prototype.reset=function(){this.x=0,this.y=0,this.scale=1,this.rotation=0,this.alpha=1,this.currentTime=0,this.totalTime=1e3},e.prototype.$getMatrix=function(e,t){var r=this.matrix;if(r.identity(),this.rotation%360)var o=this.rotation,a=egret.NumberUtils.cos(o),i=egret.NumberUtils.sin(o);else a=1,i=0;return r.append(a*this.scale,i*this.scale,-i*this.scale,a*this.scale,this.x,this.y),(e||t)&&(r.tx-=e*r.a+t*r.c,r.ty-=e*r.b+t*r.d),r},e}();e.Particle=t,__reflect(t.prototype,"particle.Particle")}(particle||(particle={})),function(e){var t=function(t){function r(e,r){var o=t.call(this)||this;return o._pool=[],o.frameTime=0,o.particles=[],o._emitterX=0,o._emitterY=0,o.emissionTime=-1,o.maxParticles=200,o.numParticles=0,o.particleClass=null,o.particleMeasureRect=new egret.Rectangle,o.transformForMeasure=new egret.Matrix,o.bitmapNodeList=[],o.emissionRate=r,o.texture=e,o.$renderNode=new egret.sys.GroupNode,o.$renderNode.cleanBeforeRender=function(){},o}return __extends(r,t),r.prototype.getParticle=function(){return this._pool.length?this._pool.pop():this.particleClass?new this.particleClass:new e.Particle},r.prototype.removeParticle=function(e){var t=this.particles.indexOf(e);return-1!=t&&(e.reset(),this.particles.splice(t,1),this._pool.push(e),this.numParticles--,this.bitmapNodeList.length>this.numParticles&&(this.bitmapNodeList.length=this.numParticles,this.$renderNode.drawData.length=this.numParticles),!0)},r.prototype.initParticle=function(e){e.x=this.emitterX,e.y=this.emitterY,e.currentTime=0,e.totalTime=1e3},r.prototype.updateRelativeBounds=function(e){e?(null==this.relativeContentBounds&&(this.relativeContentBounds=new egret.Rectangle),this.relativeContentBounds.copyFrom(e),this.relativeContentBounds.x+=this.emitterX,this.relativeContentBounds.y+=this.emitterY):this.relativeContentBounds=null,this.mask=this.relativeContentBounds},Object.defineProperty(r.prototype,"emitterBounds",{get:function(){return this._emitterBounds},set:function(e){this._emitterBounds=e,this.updateRelativeBounds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"emitterX",{get:function(){return this._emitterX},set:function(e){this._emitterX=e,this.updateRelativeBounds(this.emitterBounds)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"emitterY",{get:function(){return this._emitterY},set:function(e){this._emitterY=e,this.updateRelativeBounds(this.emitterBounds)},enumerable:!0,configurable:!0}),r.prototype.start=function(e){void 0===e&&(e=-1),0!=this.emissionRate&&(this.emissionTime=e,this.timeStamp=egret.getTimer(),egret.startTick(this.update,this))},r.prototype.stop=function(e){void 0===e&&(e=!1),this.emissionTime=0,e&&(this.clear(),egret.stopTick(this.update,this))},r.prototype.update=function(e){var t=e-this.timeStamp;if(this.timeStamp=e,-1==this.emissionTime||this.emissionTime>0){for(this.frameTime+=t;this.frameTime>0;)this.numParticles<this.maxParticles&&this.addOneParticle(),this.frameTime-=this.emissionRate;-1!=this.emissionTime&&(this.emissionTime-=t,this.emissionTime<0&&(this.emissionTime=0))}for(var r,o=0;o<this.numParticles;)(r=this.particles[o]).currentTime<r.totalTime?(this.advanceParticle(r,t),r.currentTime+=t,o++):this.removeParticle(r);return this.$invalidateContentBounds(),0==this.numParticles&&0==this.emissionTime&&(egret.stopTick(this.update,this),this.dispatchEventWith(egret.Event.COMPLETE)),!1},r.prototype.$measureContentBounds=function(e){if(this.relativeContentBounds)e.copyFrom(this.relativeContentBounds);else if(this.numParticles>0){for(var t,r=this.texture,o=Math.round(r.$getScaleBitmapWidth()),a=Math.round(r.$getScaleBitmapHeight()),i=egret.Rectangle.create(),n=0;n<this.numParticles;n++){t=this.particles[n],this.transformForMeasure.identity(),this.appendTransform(this.transformForMeasure,t.x,t.y,t.scale,t.scale,t.rotation,0,0,o/2,a/2),this.particleMeasureRect.setEmpty(),this.particleMeasureRect.width=o,this.particleMeasureRect.height=a;var s=egret.sys.Region.create();if(s.updateRegion(this.particleMeasureRect,this.transformForMeasure),0==n)i.setTo(s.minX,s.minY,s.maxX-s.minX,s.maxY-s.minY);else{var l=Math.min(i.x,s.minX),c=Math.min(i.y,s.minY),p=Math.max(i.right,s.maxX),_=Math.max(i.bottom,s.maxY);i.setTo(l,c,p-l,_-c)}egret.sys.Region.release(s)}this.lastRect=i,e.setTo(i.x,i.y,i.width,i.height),egret.Rectangle.release(i)}else this.lastRect&&(i=this.lastRect,e.setTo(i.x,i.y,i.width,i.height),egret.Rectangle.release(i),this.lastRect=null)},r.prototype.setCurrentParticles=function(e){for(var t=this.numParticles;e>t&&this.numParticles<this.maxParticles;t++)this.addOneParticle()},r.prototype.changeTexture=function(e){this.texture!=e&&(this.texture=e,this.bitmapNodeList.length=0,this.$renderNode.drawData.length=0)},r.prototype.clear=function(){for(;this.particles.length;)this.removeParticle(this.particles[0]);this.numParticles=0,this.$renderNode.drawData.length=0,this.bitmapNodeList.length=0,this.$invalidateContentBounds()},r.prototype.addOneParticle=function(){var e=this.getParticle();this.initParticle(e),e.totalTime>0&&(this.particles.push(e),this.numParticles++)},r.prototype.advanceParticle=function(e,t){e.y-=t/6},r.prototype.$render=function(){if(this.numParticles>0)for(var e,t=this.texture,r=Math.round(t.$getScaleBitmapWidth()),o=Math.round(t.$getScaleBitmapHeight()),a=t._offsetX,i=t._offsetY,n=t._bitmapX,s=t._bitmapY,l=t._bitmapWidth,c=t._bitmapHeight,p=0;p<this.numParticles;p++){var _;e=this.particles[p],this.bitmapNodeList[p]||(_=new egret.sys.BitmapNode,this.bitmapNodeList[p]=_,this.$renderNode.addNode(this.bitmapNodeList[p]),_.image=t._bitmapData,_.imageWidth=t._sourceWidth,_.imageHeight=t._sourceHeight,_.drawImage(n,s,l,c,a,i,r,o)),(_=this.bitmapNodeList[p]).matrix=e.$getMatrix(r/2,o/2),_.blendMode=e.blendMode,_.alpha=e.alpha}},r.prototype.appendTransform=function(e,t,r,o,a,i,n,s,l,c){if(i%360)var p=i,_=egret.NumberUtils.cos(p),u=egret.NumberUtils.sin(p);else _=1,u=0;return n||s?(e.append(egret.NumberUtils.cos(s),egret.NumberUtils.sin(s),-egret.NumberUtils.sin(n),egret.NumberUtils.cos(n),t,r),e.append(_*o,u*o,-u*a,_*a,0,0)):e.append(_*o,u*o,-u*a,_*a,t,r),(l||c)&&(e.tx-=l*e.a+c*e.c,e.ty-=l*e.b+c*e.d),e},r}(egret.DisplayObject);e.ParticleSystem=t,__reflect(t.prototype,"particle.ParticleSystem")}(particle||(particle={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.startX=0,this.startY=0,this.velocityX=0,this.velocityY=0,this.radialAcceleration=0,this.tangentialAcceleration=0,this.rotationDelta=0,this.scaleDelta=0},t}(e.Particle);e.GravityParticle=t,__reflect(t.prototype,"particle.GravityParticle")}(particle||(particle={})),function(e){var t=function(t){function r(r,o){var a=t.call(this,r,200)||this;return a.parseConfig(o),a.emissionRate=a.lifespan/a.maxParticles,a.particleClass=e.GravityParticle,a}return __extends(r,t),r.prototype.parseConfig=function(e){function t(e){return void 0===e?0:e}if(this.emitterX=t(e.emitter.x),this.emitterY=t(e.emitter.y),this.emitterXVariance=t(e.emitterVariance.x),this.emitterYVariance=t(e.emitterVariance.y),this.gravityX=t(e.gravity.x),this.gravityY=t(e.gravity.y),1==e.useEmitterRect){var r=new egret.Rectangle;r.x=t(e.emitterRect.x),r.y=t(e.emitterRect.y),r.width=t(e.emitterRect.width),r.height=t(e.emitterRect.height),this.emitterBounds=r}this.maxParticles=t(e.maxParticles),this.speed=t(e.speed),this.speedVariance=t(e.speedVariance),this.lifespan=Math.max(.01,t(e.lifespan)),this.lifespanVariance=t(e.lifespanVariance),this.emitAngle=t(e.emitAngle),this.emitAngleVariance=t(e.emitAngleVariance),this.startSize=t(e.startSize),this.startSizeVariance=t(e.startSizeVariance),this.endSize=t(e.endSize),this.endSizeVariance=t(e.endSizeVariance),this.startRotation=t(e.startRotation),this.startRotationVariance=t(e.startRotationVariance),this.endRotation=t(e.endRotation),this.endRotationVariance=t(e.endRotationVariance),this.radialAcceleration=t(e.radialAcceleration),this.radialAccelerationVariance=t(e.radialAccelerationVariance),this.tangentialAcceleration=t(e.tangentialAcceleration),this.tangentialAccelerationVariance=t(e.tangentialAccelerationVariance),this.startAlpha=t(e.startAlpha),this.startAlphaVariance=t(e.startAlphaVariance),this.endAlpha=t(e.endAlpha),this.endAlphaVariance=t(e.endAlphaVariance),this.particleBlendMode=e.blendMode},r.prototype.initParticle=function(e){var t=e,o=r.getValue(this.lifespan,this.lifespanVariance);if(t.currentTime=0,t.totalTime=o>0?o:0,!(0>=o)){t.x=r.getValue(this.emitterX,this.emitterXVariance),t.y=r.getValue(this.emitterY,this.emitterYVariance),t.startX=this.emitterX,t.startY=this.emitterY;var a=r.getValue(this.emitAngle,this.emitAngleVariance),i=r.getValue(this.speed,this.speedVariance);t.velocityX=i*egret.NumberUtils.cos(a),t.velocityY=i*egret.NumberUtils.sin(a),t.radialAcceleration=r.getValue(this.radialAcceleration,this.radialAccelerationVariance),t.tangentialAcceleration=r.getValue(this.tangentialAcceleration,this.tangentialAccelerationVariance);var n=r.getValue(this.startSize,this.startSizeVariance);.1>n&&(n=.1);var s=r.getValue(this.endSize,this.endSizeVariance);.1>s&&(s=.1);var l=this.texture.textureWidth;t.scale=n/l,t.scaleDelta=(s-n)/o/l;var c=r.getValue(this.startRotation,this.startRotationVariance),p=r.getValue(this.endRotation,this.endRotationVariance);t.rotation=c,t.rotationDelta=(p-c)/o;var _=r.getValue(this.startAlpha,this.startAlphaVariance),u=r.getValue(this.endAlpha,this.endAlphaVariance);t.alpha=_,t.alphaDelta=(u-_)/o,t.blendMode=this.particleBlendMode}},r.getValue=function(e,t){return e+t*(2*Math.random()-1)},r.prototype.advanceParticle=function(e,t){var r=e;t/=1e3;var o=r.totalTime-r.currentTime;t=o>t?t:o,r.currentTime+=t;var a=r.x-r.startX,i=r.y-r.startY,n=Math.sqrt(a*a+i*i);.01>n&&(n=.01);var s=a/n,l=i/n,c=s,p=l;s*=r.radialAcceleration,l*=r.radialAcceleration;var _=c;c=-p*r.tangentialAcceleration,p=_*r.tangentialAcceleration,r.velocityX+=t*(this.gravityX+s+c),r.velocityY+=t*(this.gravityY+l+p),r.x+=r.velocityX*t,r.y+=r.velocityY*t,r.scale+=r.scaleDelta*t*1e3,r.scale<0&&(r.scale=0),r.rotation+=r.rotationDelta*t*1e3,r.alpha+=r.alphaDelta*t*1e3},r}(e.ParticleSystem);e.GravityParticleSystem=t,__reflect(t.prototype,"particle.GravityParticleSystem")}(particle||(particle={})),function(e){e.BASE||(e.BASE={}),mo.LOG.initLogger(e.BASE,"G.BASE"),mo.LOG.setLvl("G.BASE",3),mo.registerValidModuleFunc((function(){return!0})),mo.registerModuleNotFoundFunc((function(){mo.MSG.show("系统未开放！")})),mo.EUI.onJudgeSysId((function(){return!0}))}(G||(G={}));var mo;__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){!function(e){var t=function(){function e(e){void 0===e&&(e=[]),this.dataStore=e}return e.prototype.enqueue=function(e){this.dataStore.push(e)},e.prototype.dequeue=function(){return this.dataStore.shift()},e.prototype.front=function(){return this.dataStore[0]},e.prototype.back=function(){return this.dataStore[this.dataStore.length-1]},e.prototype.toString=function(){for(var e="",t=0;t<this.dataStore.length;++t)e+=this.dataStore[t]+"\n";return e},e.prototype.empty=function(){return 0==this.dataStore.length},e.prototype.count=function(){return this.dataStore.length},e}();e.Queue=t,__reflect(t.prototype,"mo.D.Queue")}(e.D||(e.D={}))}(mo||(mo={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this)},t.prototype._childrenCreated=function(){e.prototype._childrenCreated.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,r=t.data.num;Number(r)<1&&(r=1),t.label_num.text=r+"",t.jump.play(0)},t}(mo.EUI.Comp);e.ChipNum=t,__reflect(t.prototype,"G.BASE.ChipNum")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.selectDisable=!1,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this.effectX=30,this.effectY=30},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this),this.ico_front.visible=!1},Object.defineProperty(o.prototype,"chipValue",{get:function(){return this._chipValue},enumerable:!0,configurable:!0}),o.prototype.onExit=function(){r.prototype.onExit.call(this);var e=this;e.mc&&(e.mc.frameLoop.unRegisterTicker(),mo.EUI.helper.rm(e.mc),e.mc=null),egret.Tween.removeTweens(e.ico_front),e.removeTouchEvent()},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var o,a,i=this,n=!1,s=0,l=0,c=(new egret.Point(0,0),function(){s=-1,l=-1}),p=function(){i.parent.parent.scrollPolicyH="on",mo.EUI.helper.rm(i.btn_touch),mo.EUI.helper.rm(i.ico_front),i.grp_container.addChild(i.ico_front),i.grp_container.addChild(i.btn_touch),i.ico_front.anchorOffsetX=0,i.ico_front.anchorOffsetY=0,i.ico_front.x=0,i.ico_front.y=0,i.ico_front.visible=!1,i.grp_container.getChildIndex(i.btn_touch),i.grp_container.setChildIndex(i.ico_front,1),i.grp_container.setChildIndex(i.btn_touch,2),!0,n=!1};i.btn_touch.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(){t.log("TAP---\x3e")}),i),i.btn_touch.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(r){if(!i.selectDisable){if(e.playAudio("sweeping_chips"),i.input_value){if(-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);var c=i.input_value.text;if(!(c.length>0))return mo.MSG.show(e.id_c_msgCode.g_warning_set_chips);if((c=-1==e.UTIL.NUM.getNumFromNumStr(c)?0:e.UTIL.NUM.getNumFromNumStr(c)+"").replace(/\D/g,"")!=c)return mo.MSG.show(e.id_c_msgCode.g_warning_set_chips)}t.log("BEGIN---\x3e",r.target.hashCode,r.localX,r.localY),i.emitter.emit(i.__class.ON_CHOOSE,i),s=r.stageX,l=r.stageY,a=r.target,n&&p(),o&&(clearTimeout(o),o=null),o=setTimeout((function(){clearTimeout(o),o=null}),500)}}),i),new mo.NUM.Line(114,95,2,52),i.btn_touch.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(e){if(!i.selectDisable){if(o&&(clearTimeout(o),o=null),a!=e.target)return void t.log(a,e.target.hashCode);if(-1!=s||-1!=l){if(!n){var r=mo.NUM.calAnagle(s,l,e.stageX,e.stageY),c=mo.NUM.calDist(s,l,e.stageX,e.stageY);Math.abs(r)<60||Math.abs(r)}if(n){i.ico_front.x=e.localX,i.ico_front.y=e.localY;var p=i.parent.parent,_=p.hitTestPoint(e.localX,e.localY);p.scrollPolicyH=_?"on":"off",i.emitter.emit(i.__class.ON_DRAG,i,e.stageX,e.stageY)}}}}),i),i.btn_touch.addEventListener(egret.TouchEvent.TOUCH_END,(function(e){return i.selectDisable?void mo.MSG.show(mo.D.langCodeToTxt("g_gold_not_enough")):(o&&(clearTimeout(o),o=null),n&&(p(),i.emitter.emit(i.__class.ON_DRAG_END,i,e.stageX,e.stageY)),c(),void t.log("END---\x3e"))}),i),i.btn_touch.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,(function(){o&&(clearTimeout(o),o=null),n&&p()}),i),i.btn_touch.addEventListener(egret.TouchEvent.TOUCH_CANCEL,(function(){o&&(clearTimeout(o),o=null),n&&p()}),i)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var t=this;t._chipValue=t.data.v,t.isRectBorder=t._chipValue>=1e5;var o=t.data.disable;t.effectId="yuanxing_2",t._chipValue>=1e5&&(t.effectId="fangxing_1"),t.data.isl?(t.ico_chip.source=e.BASE.resHelper.getSettingChipRes(t._chipValue),t.ico_front.source=e.BASE.resHelper.getSettingChipRes(t._chipValue),t.data.noChanged&&(t.ico_chip.source=e.BASE.resHelper.getSettingChipRes(0),t.ico_front.source=e.BASE.resHelper.getChipRes(0)),t.setDisable(o)):(t.ico_chip.source=e.BASE.resHelper.getChipRes(t._chipValue),t.ico_front.source=e.BASE.resHelper.getChipRes(t._chipValue),t.setDisable(o))},o.prototype.setDisable=function(e){var t=this;t.ico_disable&&(t.ico_disable.visible=e,t.selectDisable=e,e&&(t.ico_disable.source=t.isRectBorder?"chip_cover":"chip_cover2"))},o.prototype.removeTouchEvent=function(){var e=this;e.btn_touch&&(e.btn_touch.removeEventListener(egret.TouchEvent.TOUCH_TAP,(function(){}),e),e.btn_touch.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(){}),e),e.btn_touch.removeEventListener(egret.TouchEvent.TOUCH_MOVE,(function(){}),e),e.btn_touch.removeEventListener(egret.TouchEvent.TOUCH_END,(function(){}),e),e.btn_touch.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,(function(){}),e),e.btn_touch.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,(function(){}),e))},o.prototype.getAnimatChips=function(){var e=this,t=e.ico_chip.source;e.animatChipQ||(e.animatChipQ=new mo.D.Queue);for(var r=[],o=(e.grp_container.getChildIndex(e.ico_front),0);3>o;o++){var a=e.animatChipQ.dequeue();a||(a=new eui.Image(t)),a.touchEnabled=!1,r.push(a),e.grp_container.addChildAt(a,1)}return r},o.prototype._jumpAnimation=function(){for(var e=this,t=e.getAnimatChips(),r=function(r){var o=t[r];o.visible=!0,o.y=0,egret.Tween.removeTweens(o),egret.Tween.get(o).wait(100*(r+1)).to({y:-30},100).wait(100).to({y:0},100).wait(100).call((function(){if(0==r)for(var o=0;o<t.length;o++){var a=t[o];a.visible=!1,-1!=e.grp_container.getChildIndex(a)&&(mo.EUI.helper.rm(a),e.animatChipQ.enqueue(a))}}))},o=0;o<t.length;o++)r(o)},o.prototype.showLight=function(){var e=this;e.mc||(e.mc=new mo.Sprite,e.addChild(e.mc),e.mc.x=e.effectX,e.mc.y=e.effectY,e.mc.scaleX=.87,e.mc.scaleY=.87,e.mc.frameLoop.cost=90);var t=mo.STR.format("sp/%s.png",e.effectId);e.mc.play(t,-1),e.mc.visible=!0},o.prototype.hideLight=function(){var e=this;e.mc&&(e.mc.frameLoop.unRegisterTicker(),e.mc.visible=!1)},o.prototype.isShowingLight=function(){return!!this.mc&&this.mc.visible},o}(mo.EUI.Comp);r.ON_CHOOSE="on_choose",r.ON_DRAG="on_drag",r.ON_DRAG_END="on_drag_end",t.Chip=r,__reflect(r.prototype,"G.BASE.Chip"),e.GC.gc.registerClass(r.__className,r)}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.showLight=function(){var e=this;e.border||(e.border=new eui.Image,e.addChild(e.border),e.border.width=75,e.border.height=75,e.border.verticalCenter=2,e.border.horizontalCenter=0,e.border.touchEnabled=!1,e.border.source=e.isRectBorder?"select_chip_rect":"select_chip_circle"),e.border.visible=!0},t.prototype.hideLight=function(){this.border&&(this.border.visible=!1)},t.prototype.isShowingLight=function(){return!!this.border&&this.border.visible},t}(e.BASE.Chip);t.Chip2=r,__reflect(r.prototype,"G.BASE.Chip2"),e.GC.gc.registerClass(r.__className,r)}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this.effectX=30,this.effectY=27},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;t.data.v>0&&(t.input_value.text=e.UTIL.NUM.getSplitNumStr(t.data.v)),t.input_value.prompt=mo.D.langCodeToTxt("g_custom"),t.input_value.addEventListener(egret.FocusEvent.FOCUS_IN,t.onInputFocusIn,t),t.input_value.addEventListener(egret.FocusEvent.FOCUS_OUT,t.onInputFocusOut,t),t.input_value.addEventListener(egret.Event.CHANGE,t.onInputChange,t),t.setData({v:t.getChipV()}),t.currentState=t.data.isl?"big":"small",mo.emitter.on("switchAndLeaveFocus",t.onSwitchLeaveFocus,t),mo.emitter.on("switchAndLeaveFocusBack",t.onSwitchLeaveFocusBack,t)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);this.effectId="fangxing_1"},o.prototype.onExit=function(){var e=this;r.prototype.onExit.call(this),e.unEmitter(),e.input_value.removeEventListener(egret.FocusEvent.FOCUS_IN,e.onInputFocusIn,e),e.input_value.removeEventListener(egret.FocusEvent.FOCUS_OUT,e.onInputFocusOut,e),e.input_value.removeEventListener(egret.Event.CHANGE,e.onInputChange,e),mo.emitter.unAll("switchAndLeaveFocus"),mo.emitter.unAll("switchAndLeaveFocusBack")},o.prototype.onSwitchLeaveFocus=function(){this.input_value.textDisplay.visible=!1,this.input_value.text+=" "},o.prototype.onSwitchLeaveFocusBack=function(){var e=this;e.input_value.textDisplay.visible=!0,e.input_value.text=e.input_value.text.substr(0,e.input_value.text.length-1)},o.prototype.getAnimatChips=function(){var e=this,r=e.ico_chip.source;e.animatChipQ||(e.animatChipQ=new mo.D.Queue);for(var o=[],a=(e.grp_container.getChildIndex(e.ico_front),0);3>a;a++){var i=e.animatChipQ.dequeue();i||((i=new eui.Image(r)).width=60,i.height=54),i.touchEnabled=!1,o.push(i),e.grp_container.addChildAt(i,1)}var n=o.pop();mo.EUI.helper.rm(n);var s=new t.ChipLabel;return s.setData({v:e.getEditValue(!1)}),o=[s].concat(o),e.grp_container.addChildAt(s,3),o},o.prototype._tap_btn_edit=function(){var t=this;return-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):(t.input_value.textDisplay.setFocus(),t.btn_touch.visible=!1,void t.emitter.emit(t.__class.ON_INPUT_FOCUS))},o.prototype.onInputChange=function(){var t=this,r=t.input_value.text;r.length<=9?(r.replace(/\D/g,"")!=r||0==Number(r))&&(t.input_value.text="",mo.MSG.show(e.id_c_msgCode.int_max9)):(t.input_value.text="",mo.MSG.show(e.id_c_msgCode.int_max9))},o.prototype.onInputFocusIn=function(){this.input_value.text=this.getEditValue()},o.prototype.onInputFocusOut=function(){var e=this;e.btn_touch.visible=!0,e.input_value.text=e.getEditValue(!1),e._chipValue=e.getChipV(),e.data.v=e.getChipV(),e.emitter.emit(e.__class.ON_INPUT_FOCUS_OUT)},o.prototype.getEditValue=function(t){void 0===t&&(t=!0);if(!this.input_value)return"";var r=this.input_value.text,o=e.UTIL.NUM.getNumFromNumStr(r);return isNaN(o)||-1==o?t?"":"1":t?o+"":e.UTIL.NUM.getSplitNumStr(o)},o.prototype.getChipV=function(){var e=this.getEditValue();return isNaN(e)?-1:parseInt(e)*CONST.c2sRate},o}(t.Chip);r.ON_INPUT_FOCUS="ON_INPUT_FOCUS",r.ON_INPUT_FOCUS_OUT="ON_INPUT_FOCUS_OUT",t.EditChip=r,__reflect(r.prototype,"G.BASE.EditChip"),e.GC.gc.registerClass(r.__className,r)}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.showLight=function(){var e=this;e.border||(e.border=new eui.Image,e.addChild(e.border),e.border.width=75,e.border.height=75,e.border.verticalCenter=2,e.border.horizontalCenter=0,e.border.touchEnabled=!1,e.border.source=e.isRectBorder?"select_chip_rect":"select_chip_circle"),e.border.visible=!0},t.prototype.hideLight=function(){this.border&&(this.border.visible=!1)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);this.isRectBorder=!0},t.prototype.isShowingLight=function(){return!!this.border&&this.border.visible},t.prototype.onInputFocusOut=function(){e.prototype.onInputFocusOut.call(this);mo.emitter.emit("changeEditChip",this.getChipV())},t.prototype.setDisable=function(e){var t=this;t.ico_disable&&(t.ico_disable.visible=e,t.selectDisable=e,e&&(t.ico_disable.source="chip_cover",t.ico_disable.width=t.ico_disable.height=70))},t}(e.BASE.EditChip);t.EditChip2=r,__reflect(r.prototype,"G.BASE.EditChip2"),e.GC.gc.registerClass(r.__className,r)}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this.effectX=30,this.effectY=27},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;t.data.v>0?(t.label_value.text=e.BASE.resHelper.commafy(t.data.v),t.input_value.text=e.BASE.resHelper.commafy(t.data.v)):(t.label_value.text=e.BASE.resHelper.commafy(t.getEditValue()),t.input_value.text=e.BASE.resHelper.commafy(t.getEditValue()),t.input_value.prompt=mo.D.langCodeToTxt("g_custom")),t.input_value.addEventListener(egret.FocusEvent.FOCUS_IN,t.onInputFocusIn,t),t.input_value.addEventListener(egret.FocusEvent.FOCUS_OUT,t.onInputFocusOut,t),t.input_value.addEventListener(egret.Event.CHANGE,t.onInputChange,t),t.setData({v:t.getChipV()}),t.currentState=t.data.isl?"big":"small"},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);this.effectId="fangxing_1"},o.prototype.getAnimatChips=function(){var e=r.prototype.getAnimatChips.call(this),o=e.pop();mo.EUI.helper.rm(o);var a=new t.ChipLabel;return a.setData({v:this.getEditValue()}),e=[a].concat(e),this.grp_container.addChildAt(a,3),e},o.prototype._tap_btn_edit=function(){var e=this;e.curChipValue=e.input_value.text.replace(/\D/g,""),e.input_value.textDisplay.setFocus(),e.btn_touch.visible=!1,e.emitter.emit(e.__class.ON_INPUT_FOCUS)},o.prototype.onInputChange=function(){var t=this,r=t.input_value.text;r.length<=9?(r.replace(/\D/g,"")!=r||0==Number(r))&&(t.input_value.text="",mo.MSG.show(e.id_c_msgCode.int_max9)):(t.input_value.text="",mo.MSG.show(e.id_c_msgCode.int_max9))},o.prototype.onInputFocusIn=function(){this.input_value.text=this.getEditValue()},o.prototype.onInputFocusOut=function(){var t=this;""==t.input_value.text&&t.curChipValue.length>0&&(t.input_value.text=t.curChipValue),t.btn_touch.visible=!0,t.label_value.text=e.BASE.resHelper.commafy(t.getEditValue()),t.input_value.text=e.BASE.resHelper.commafy(t.getEditValue()),t._chipValue=t.getChipV(),t.data.v=t.getChipV(),t.emitter.emit(t.__class.ON_INPUT_FOCUS_OUT)},o.prototype.getEditValue=function(){var e=this.input_value.text||"";return e.length?(-1!=e.indexOf(",")&&(e=e.replace(/,/g,"")),e):"1"},o.prototype.getChipV=function(){var e=this.getEditValue();return isNaN(e)?-1:parseInt(e)*CONST.c2sRate},o}(t.Chip);r.ON_INPUT_FOCUS="ON_INPUT_FOCUS",r.ON_INPUT_FOCUS_OUT="ON_INPUT_FOCUS_OUT",t.EditChipSet=r,__reflect(r.prototype,"G.BASE.EditChipSet")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this.data;this.label_value.text=t.v},t}(mo.EUI.Comp);e.ChipLabel=t,__reflect(t.prototype,"G.BASE.ChipLabel")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=egret.Tween,o=function(t){function o(){var e=t.apply(this,arguments)||this;return e.perBetArray=null,e.betDetailArray=null,e.duration=1e3,e.myTimeOutForPerBet=null,e.myTimeOut=null,e.isSet=!1,e._baccBetTypeArr=[CONST.betType.baccarat.playerPair,CONST.betType.baccarat.player,CONST.betType.baccarat.draw,CONST.betType.baccarat.banker,CONST.betType.baccarat.bankerPair,CONST.betType.baccarat.bankerLucky6,CONST.betType.baccarat.bankerDragonBonus,CONST.betType.baccarat.playerDragonBonus,CONST.betType.baccarat.big,CONST.betType.baccarat.small,CONST.betType.baccarat.bankerOdd,CONST.betType.baccarat.bankerEven,CONST.betType.baccarat.playerOdd,CONST.betType.baccarat.playerEven],e._dtBetTypeArr=[CONST.betType.dragonTiger.dragon,CONST.betType.dragonTiger.tiger,CONST.betType.dragonTiger.dragonOdd,CONST.betType.dragonTiger.dragonEven,CONST.betType.dragonTiger.tigerOdd,CONST.betType.dragonTiger.tigerEven,CONST.betType.dragonTiger.dragonBlack,CONST.betType.dragonTiger.dragonRed,CONST.betType.dragonTiger.tigerBlack,CONST.betType.dragonTiger.tigerRed,CONST.betType.dragonTiger.draw],e}return __extends(o,t),o.prototype._initProp=function(){t.prototype._initProp.call(this);this.curIsHavePlayer=null,this._betTypeArrToUse=[]},o.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.fly_desk.visible=!1},o.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.justEnterGame=!0,e.myTimeOut=setTimeout((function(){e.justEnterGame=!1}),2e3)},o.prototype.onExit=function(){t.prototype.onEnter.call(this);this.myTimeOut&&clearTimeout(this.myTimeOut)},o.prototype.setIsShowBetDetail=function(e){this.isShowBetDetail=e},o.prototype.setElementByTableType=function(e){var t=this;if(t.isShowBetDetail&&!t._tableType&&e){t._tableType=e,t._betTypeArrToUse=e!=CONST.tableType.baccarat?t._dtBetTypeArr.slice():t._baccBetTypeArr.slice();for(var r=0;r<t._betTypeArrToUse.length;r++){var o=t._betTypeArrToUse[r],a=t.getGroup("width=125;name=betTypeGrp_"+o),i=t.getLabel("name=betType;size=24;scaleX=0.5;scaleY=0.5;textColor=0xffffff;textAlign=right;verticalAlign=middle;right=66;wantWidth=165;verticalCenter=0"),n=t.getLabel("name=betType_dot;size=24;scaleX=0.5;scaleY=0.5;textColor=0xffffff;verticalCenter=0;horizontalCenter=0"),s=t.getLabel("name=betType_num;size=24;scaleX=0.5;scaleY=0.5;textColor=0xffffff;textAlign=left;verticalAlign=middle;left=68;wantWidth=165;verticalCenter=0");a.addChild(i),a.addChild(n),a.addChild(s),t.betDetail_list.addChild(a);var l=t.getGroup("width=125;name=perBetTypeGrp_"+o),c=t.getLabel("name=betType;size=24;scaleX=0.5;scaleY=0.5;textColor=0xffffff;textAlign=right;verticalAlign=middle;right=66;wantWidth=165;verticalCenter=0"),p=t.getLabel("name=betType_dot;size=24;scaleX=0.5;scaleY=0.5;textColor=0xffffff;verticalCenter=0;horizontalCenter=0"),_=t.getLabel("name=betType_num;size=24;scaleX=0.5;scaleY=0.5;textColor=0xffffff;textAlign=left;verticalAlign=middle;left=68;wantWidth=165;verticalCenter=0");l.addChild(c),l.addChild(p),l.addChild(_),t.perBet_list.addChild(l)}t._isElementSet=!0}},o.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this,o=r.data.data,a=r.data.tableType;if(r._isElementSet||r.setElementByTableType(a),r.grp_Player.visible=!1,r.grp_noPlayer.visible=!1,o){if(o.isIn||!mo.OBJ.isEmpty(o.bet)?(null==r.curIsHavePlayer?(r.curIsHavePlayer=!0,r.setDeskDrop()):(r.grp_Player.visible=!0,r.grp_noPlayer.visible=!1),r.label_name.text=e.GTS.mgr.verifyEmoji(o.userNick)):(r.grp_noPlayer.visible=!0,r.grp_Player.visible=!1,r.curIsHavePlayer=null),o.isSelf&&o.isIn){var i=e.GTS.mgr.money4Dis||0;r.label_money.text=e.UTIL.NUM.getSplitNumStr(r.countAllBetNum(o)),r.label_name.textColor=r.label_money.textColor=r.isShowBetDetail?16777215:6406007}else{i=e.GTS.mgr.otherMoney4Dis(o);o.currency&&e.COMM.FX.calcMoneyByCurrency(o.currency,i),r.label_money.text=e.UTIL.NUM.getSplitNumStr(r.countAllBetNum(o)),r.label_name.textColor=r.label_money.textColor=r.isShowBetDetail?16777215:6406007}var n=o.userNick;r.initialLayoutBetDetail(),r.updateBetDetail(o,n)}else r.grp_noPlayer.visible=!0,r.grp_Player.visible=!1,r.curIsHavePlayer=null},o.prototype.setDeskDrop=function(){var e=this,t=e.data.data;r.removeTweens(e.fly_desk);var o=e.fly_desk.y;e.fly_desk.source=t.isSelf?"ico_playerSit_1":"ico_playerSit_0",e.fly_desk.visible=!0,r.get(e.fly_desk,{loop:!1}).to({y:48},1e3).call((function(){e.fly_desk.visible=!1,e.fly_desk.y=o,e.grp_Player.visible=!0,e.grp_noPlayer.visible=!1,t.isSelf&&e.emitter.emit("over",e)}))},o.prototype.showBetDetail=function(){var e=this;e.isShowBetDetail&&(mo.OBJ.isEmpty(e.betDetailArray)||(e.betDetail.visible=!0))},o.prototype.hideBetDetail=function(){this.isShowBetDetail&&(this.betDetail.visible=!1)},o.prototype.updateBetDetail=function(t,r){var o=this;o.betDetailArray=t.bet;var a=t.currency||null;if(o.isShowBetDetail&&!mo.OBJ.isEmpty(o.betDetailArray)){for(var i=Object.keys(o.betDetailArray),n=0;n<i.length;n++){var s=i[n],l="betTypeGrp_"+s,c=o.betDetail_list.getChildByName(l);if(c){var p=c.getChildByName("betType"),_=c.getChildByName("betType_dot"),u=c.getChildByName("betType_num"),h=o.getBetTypeTxt(Number(i[n]));p&&(p.text=h);var m=o.betDetailArray[s],d=e.COMM.FX.calcMoneyByCurrency(a,m);u&&(u.text=0!=d?e.UTIL.NUM.getSplitNumStr(d):"0.01"),_&&(_.text="："),c.includeInLayout=!0}}""==o.label_userName_1.text&&(o.label_userName_1.text=r)}},o.prototype.initialLayoutBetDetail=function(){var e=this;if(e.isShowBetDetail)for(var t=0;t<e._betTypeArrToUse.length;t++){var r="betTypeGrp_"+e._betTypeArrToUse[t],o=e.betDetail_list.getChildByName(r);o&&(o.includeInLayout=!1)}},o.prototype.initialLayoutPerBet=function(){var e=this;if(e.isShowBetDetail)for(var t=0;t<e._betTypeArrToUse.length;t++){var r="perBetTypeGrp_"+e._betTypeArrToUse[t],o=e.perBet_list.getChildByName(r);o&&(o.includeInLayout=!1)}},o.prototype.clearPerBet=function(){var e=this;e.label_userName_2.text="";for(var t=0;t<e._betTypeArrToUse.length;t++){var r="perBetTypeGrp_"+e._betTypeArrToUse[t],o=e.perBet_list.getChildByName(r);if(o){var a=o.getChildByName("betType"),i=o.getChildByName("betType_dot"),n=o.getChildByName("betType_num");a&&(a.text=""),i&&(i.text=""),n&&(n.text=""),o.includeInLayout=!1}}},o.prototype.clearBet=function(){for(var e=this,t=0;t<e._betTypeArrToUse.length;t++){var r="betTypeGrp_"+e._betTypeArrToUse[t],o=e.betDetail_list.getChildByName(r);if(o){var a=o.getChildByName("betType"),i=o.getChildByName("betType_dot"),n=o.getChildByName("betType_num");a&&(a.text=""),i&&(i.text=""),n&&(n.text="")}}e.label_userName_1.text="",e.label_userName_2.text="",e.betDetailArray=null,e.betDetail.visible=!1,e.totalMoney=0},o.prototype.popUpBet=function(t){var r=this;if(!t.isSelf&&t.total&&!mo.OBJ.isEmpty(t.bet_delta)){var o=!0;for(var a in t.bet_delta)if(t.bet_delta[a]>0){o=!1;break}if(!o){r.clearPerBet();for(var i=[],n=0,s=Object.keys(t.bet_delta);n<s.length;n++){var l=s[n];0!=t.bet_delta[l]&&i.push(l)}for(var c=0;c<i.length;c++){var p=i[c],_="perBetTypeGrp_"+p,u=r.perBet_list.getChildByName(_);if(u){var h=u.getChildByName("betType"),m=u.getChildByName("betType_dot"),d=u.getChildByName("betType_num"),b=r.getBetTypeTxt(Number(i[c]));h&&(h.text=b);var g=t.bet_delta[p],y=e.COMM.FX.calcMoneyByCurrency(t.currency,g);d&&(d.text=0!=y?e.UTIL.NUM.getSplitNumStr(y):"0.01"),m&&(m.text="："),u.includeInLayout=!0}}""==r.label_userName_2.text&&(r.label_userName_2.text=t.userNick),r.perBet.visible=!0,r.myTimeOutForPerBet=setTimeout((function(){r.perBet.visible=!1,r.isSet=!1}),r.duration)}}},o.prototype.setDeskMsgHoverEffect=function(){var e=this;e.isShowBetDetail&&(e.grp_Player.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.showBetDetail,e),e.grp_Player.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.hideBetDetail,e))},o.prototype.getLabel=function(e){for(var t=new mo.EUI.Label,r=e.split(";"),o=0;o<r.length;o++){var a=r[o].split("=")[0],i=r[o].split("=")[1];t[a]=i}return t},o.prototype.getGroup=function(e){for(var t=new eui.Group,r=e.split(";"),o=0;o<r.length;o++){var a=r[o].split("=")[0],i=r[o].split("=")[1];t[a]=i}return t},o.prototype.__countAllBetNum=function(t){var r=0;for(var o in t.bet){r+=t.bet[o]}return 1>(r=e.COMM.FX.calcMoneyByCurrency(t.currency,r))&&0!=r?1:r},o.prototype.countAllBetNum=function(t){var r=0;for(var o in t.bet){var a=t.bet[o];r+=a=0!=(a=e.COMM.FX.calcMoneyByCurrency(t.currency,a))?a:Number(.01)}return parseFloat(r.toFixed(2))},o.prototype.getBetTypeTxt=function(e){var t="";switch(e){case CONST.betType.baccarat.playerPair:t="${{baccarat_player_pair}}";break;case CONST.betType.baccarat.player:t="${{baccarat_player}}";break;case CONST.betType.baccarat.draw:t="${{g_tie}}";break;case CONST.betType.baccarat.banker:t="${{baccarat_banker}}";break;case CONST.betType.baccarat.bankerPair:t="${{baccarat_banker_pair}}";break;case CONST.betType.baccarat.bankerLucky6:t="${{baccarat_banker_lucky6}}";break;case CONST.betType.baccarat.bankerDragonBonus:t="${{baccarat_bankerDragonBonus}}";break;case CONST.betType.baccarat.playerDragonBonus:t="${{baccarat_playerDragonBonus}}";break;case CONST.betType.baccarat.big:t="${{baccarat_big}}";break;case CONST.betType.baccarat.small:t="${{baccarat_small}}";break;case CONST.betType.baccarat.bankerOdd:t="${{baccarat_bankerOdd}}";break;case CONST.betType.baccarat.bankerEven:t="${{baccarat_bankerEven}}";break;case CONST.betType.baccarat.playerOdd:t="${{baccarat_playerOdd}}";break;case CONST.betType.baccarat.playerEven:t="${{baccarat_playerEven}}";break;case CONST.betType.dragonTiger.dragon:t="${{g_dragon_bet}}";break;case CONST.betType.dragonTiger.tiger:t="${{g_tiger_bet}}";break;case CONST.betType.dragonTiger.draw:t="${{g_tie}}";break;case CONST.betType.dragonTiger.dragonOdd:t="${{DT_customerBet_Dragon_odd}}";break;case CONST.betType.dragonTiger.dragonEven:t="${{DT_customerBet_Dragon_even}}";break;case CONST.betType.dragonTiger.tigerOdd:t="${{DT_customerBet_Tiger_odd}}";break;case CONST.betType.dragonTiger.tigerEven:t="${{DT_customerBet_Tiger_even}}";break;case CONST.betType.dragonTiger.dragonBlack:t="${{DT_customerBet_Dragon_black}}";break;case CONST.betType.dragonTiger.dragonRed:t="${{DT_customerBet_Dragon_red}}";break;case CONST.betType.dragonTiger.tigerBlack:t="${{DT_customerBet_Tiger_black}}";break;case CONST.betType.dragonTiger.tigerRed:t="${{DT_customerBet_Tiger_red}}"}return t},o}(mo.EUI.Comp);t.DeskMsg=o,__reflect(o.prototype,"G.BASE.DeskMsg")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),Object.defineProperty(r.prototype,"player",{get:function(){return this._player},set:function(e){this._player!=e&&this.pJump.play(0),this._player=e,this.label_pNum.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bet",{get:function(){return this._bet},set:function(t){this._bet!=t&&(this.label_bNum.text=e.UTIL.NUM.getSplitNumStr(Math.floor(Number(t)))+"",this.label_bNum.width<160&&t>0&&this.bJump.play(0)),this._bet=t;var r=this;this.label_bNum.text=r._bet>1?e.UTIL.NUM.getSplitNumStr(Math.floor(r._bet))+"":r._bet>0?"1":"0"},enumerable:!0,configurable:!0}),r.prototype._initProp=function(){t.prototype._initProp.call(this);this._player=0,this._bet=0},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);var r=this;r.label_pNum.text=r._player,r._bet>1?r.label_bNum.text=e.UTIL.NUM.getSplitNumStr(Math.floor(r._bet))+"":this.label_bNum.text=r._bet>0?"1":"0"},r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},r}(mo.EUI.Comp);t.BetInfoCard=r,__reflect(r.prototype,"G.BASE.BetInfoCard")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){t.SMALL_POKER_COLOR={RED:{TYPE:8519680,TOTAL:3543570,CURRENT:8519680},BLUE:{TYPE:144806,TOTAL:861767,CURRENT:144806},GREEN:{TYPE:5609728,TOTAL:2246155,CURRENT:5609728}};var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.setBackGroundColor=function(e,r){void 0===r&&(r=!0);var o=this;if(o.rect_bg_type&&o.rect_bg_total&&o.rect_bg_current&&o.img_bet_type_avatar){switch(e){case CONST.betType.baccarat.banker:o.label_betType.text="${{g_banker_simple_forpc35roomlistitem}}";break;case CONST.betType.dragonTiger.dragon:o.label_betType.text="${{g_dragon_simple_forpc35roomlistitem}}";break;case CONST.betType.baccarat.player:o.label_betType.text="${{g_player_simple_forpc35roomlistitem}}";break;case CONST.betType.dragonTiger.tiger:o.label_betType.text="${{g_tiger_simple_forpc35roomlistitem}}";break;case CONST.betType.baccarat.draw:o.label_betType.text=r?"${{g_tie_forpc35roomlistitem}}":"${{g_tie_dt_forpc35roomlistitem}}";break;case CONST.betType.dragonTiger.draw:o.label_betType.text="${{g_tie_dt_forpc35roomlistitem}}"}switch(e){case CONST.betType.baccarat.banker:case CONST.betType.dragonTiger.dragon:o.rect_bg_type.fillColor=t.SMALL_POKER_COLOR.RED.TYPE,o.rect_bg_total.fillColor=t.SMALL_POKER_COLOR.RED.TOTAL,o.rect_bg_current.fillColor=t.SMALL_POKER_COLOR.RED.CURRENT,o.img_bet_type_avatar.source="avatar_red";break;case CONST.betType.baccarat.player:case CONST.betType.dragonTiger.tiger:o.rect_bg_type.fillColor=t.SMALL_POKER_COLOR.BLUE.TYPE,o.rect_bg_total.fillColor=t.SMALL_POKER_COLOR.BLUE.TOTAL,o.rect_bg_current.fillColor=t.SMALL_POKER_COLOR.BLUE.CURRENT,o.img_bet_type_avatar.source="avatar_blue";break;case CONST.betType.baccarat.draw:case CONST.betType.dragonTiger.draw:o.rect_bg_type.fillColor=t.SMALL_POKER_COLOR.GREEN.TYPE,o.rect_bg_total.fillColor=t.SMALL_POKER_COLOR.GREEN.TOTAL,o.rect_bg_current.fillColor=t.SMALL_POKER_COLOR.GREEN.CURRENT,o.img_bet_type_avatar.source="avatar_green"}}},Object.defineProperty(o.prototype,"percent",{get:function(){return this._percent},enumerable:!0,configurable:!0}),o.prototype.setPercentAndBar=function(e){var t=this;(isNaN(e)||null==e)&&(e=0),t._percent!=e&&(t._percent=e,t.label_percent.text=t._percent+"%"),t.rect_bg_current.width=123*e/100},Object.defineProperty(o.prototype,"player",{get:function(){return this._player},set:function(e){this._player=e,this.label_pNum.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bet",{get:function(){return this._bet},set:function(t){var r=this;r._bet=t,r.label_bNum.text=r._bet>1?e.UTIL.NUM.getSplitNumStr(e.UTIL.fixedTo2(Math.floor(r._bet)))+"":r._bet>0?"1":"0"},enumerable:!0,configurable:!0}),o.prototype._initProp=function(){r.prototype._initProp.call(this);this._player=0,this._bet=0},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var t=this;t.label_pNum.text=t._player,t.label_bNum.text=t._bet>1?e.UTIL.NUM.getSplitNumStr(e.UTIL.fixedTo2(Math.floor(t._bet)))+"":t._bet>0?"1":"0"},o}(mo.EUI.Comp);t.BetInfoCard_tinyPoker=r,__reflect(r.prototype,"G.BASE.BetInfoCard_tinyPoker")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getCurrentState=function(){var t=e.prototype.getCurrentState.call(this);return"down"==t?this.iconDisplay.source=this.icon+"_f":"up"==t&&(this.iconDisplay.source=this.icon),t},t}(eui.Button);e.ButtonInverse=t,__reflect(t.prototype,"G.BASE.ButtonInverse")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(){};t.ChipData=r,__reflect(r.prototype,"G.BASE.ChipData");var o=function(){};t.ChipSelectData=o,__reflect(o.prototype,"G.BASE.ChipSelectData");var a=function(r){function o(){var e=r.apply(this,arguments)||this;return e._useOldChipsPlan=!1,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._chipList=[],e._chipWidth=60,e.chipClass="Chip2",e.editChipClass="EditChip2",e._isFirstIn=!0},Object.defineProperty(o.prototype,"chipValue",{get:function(){return this._chipV},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tableCtrl",{set:function(e){var t=this;return this._tableCtrl=e,t._tableCtrl?(t.scr_chips.addEventListener(egret.Event.CHANGE,t._onScrChange,t),t.onEmitter(mo.emitter,CONST.chipBarEvent.chipSetClose,(function(){t.rebuildChipList()})),t.onEmitter(mo.emitter,"changeEditChip",(function(e){t.isEditChipChosen()&&(t._chipV=e),t.rebuildChipList()})),void t.updateChipList()):void(t.visible=!1)},enumerable:!0,configurable:!0}),o.prototype.setIsMto=function(e){this._isMto=e},o.prototype._onScrChange=function(){var e=this;e._scrPositionDeviationTemp=e.scr_chips.viewport.contentWidth-e.scr_chips.viewport.scrollH},o.prototype.initScrollPosition=function(){this.scr_chips.viewport.scrollH=0},o.prototype.setScrollPosition=function(){var e=this,t=e.scr_chips.viewport.contentWidth,r=e._chipGrpLengthTemp;r&&r>t&&(e.scr_chips.viewport.scrollH=t-e._scrPositionDeviationTemp,e.scr_chips.viewport.scrollH<0&&(e.scr_chips.viewport.scrollH=0),e._scrPositionDeviationTemp=t-e.scr_chips.viewport.scrollH),e._chipGrpLengthTemp=t},o.prototype.setUseOldChipsPlan=function(e){this._useOldChipsPlan=e},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.onExit=function(){r.prototype.onExit.call(this);this.unEmitter()},o.prototype.rebuildChipList=function(){var e=this;e._tableCtrl&&e._tableCtrl.isMatch||(e.grp_chips&&e.grp_chips.removeChildren(),e.updateChipList())},o.prototype.updateChipList_old=function(){var t=this;if(t._tableCtrl&&(t.initScrollPosition(),t._chipList=t.getCurChipList(),t._chipList)){t._chipList=mo.ARR.sort(t._chipList,1),t.currChip=null,t._chipV=t._chipList[0];for(var r=0;r<t._chipList.length;r++){var o=new(e.GC.gc.getClass(t.chipClass));o.setData({v:t._chipList[r]}),o.scaleX=o.scaleY=.8,t.grp_chips.addChild(o),t.currChip||t.showLight(o),t.onEmitter(o.emitter,o.__class.ON_CHOOSE,t.onChipChoosed),t.onEmitter(o.emitter,o.__class.ON_DRAG,t.onChipMove),t.onEmitter(o.emitter,o.__class.ON_DRAG_END,t.onChipDrop)}if(t.isCustomChipListExist()){var a=t.getEditChipData();a&&t.createCustChip(a)}else t.createCustChip()}},o.prototype.updateChipList=function(){var e=this;if(e._tableCtrl&&e._tableCtrl.isMatch||e._useOldChipsPlan)e.updateChipList_old();else{e.currChip=null;var t=e.getEditChipData();if(e._chipList=e.getCurChipList(),e.sortByEnableOrNot(e._tableCtrl,e._chipList),e._chipV=e.getChipValueAfterUpdateList(e._chipV,e._isFirstIn,e._enableChipList),e._enableChipList&&e._enableChipList.length>=0){var r=e.isEditChipNeeded(),o=e._enableChipList.slice();r&&o.push(0),e.createNormalChip(o,r,t)}e._disableChipList&&e._disableChipList.length>=0&&e.createNormalChip(e._disableChipList,!1,t,!0),setTimeout((function(){e.setScrollPosition()}),100),e._isFirstIn=!1}},o.prototype.createNormalChip=function(t,r,o,a){void 0===a&&(a=!1);var i=this;if(t)for(var n=0;n<t.length;n++)if(r&&n==t.length-1){var s=null,l=(s=o?i.createCustChip(o):i.createCustChip()).getChipV(),c=i.isEditChipValueLegal(l);!!l&&s.setData({disable:!c}),c||i.setIsEditChipChosen_force(!1),i._chipV&&i.isEditChipChosen()&&(i.currChip=s,s.showLight(s))}else{var p=new(e.GC.gc.getClass(i.chipClass));p.setData({v:t[n],disable:a}),p.scaleX=p.scaleY=.8,i.grp_chips.addChild(p),i._chipV&&!i.isEditChipChosen()&&t[n]==i._chipV&&(i.currChip||i.showLight(p)),i.onEmitter(p.emitter,p.__class.ON_CHOOSE,i.onChipChoosed),i.onEmitter(p.emitter,p.__class.ON_DRAG,i.onChipMove),i.onEmitter(p.emitter,p.__class.ON_DRAG_END,i.onChipDrop)}},o.prototype.createCustChip=function(r){var o,a=this,i=new(e.GC.gc.getClass(a.editChipClass));return o=r?r.value:this._tableCtrl.getCustJeton(),i.setData(o?{v:Number(o)}:{v:0}),i.scaleX=i.scaleY=.8,a.grp_chips.addChild(i),a.onEmitter(i.emitter,i.__class.ON_CHOOSE,a.onChipChoosed),a.onEmitter(i.emitter,i.__class.ON_DRAG,a.onChipMove),a.onEmitter(i.emitter,i.__class.ON_DRAG_END,a.onChipDrop),a.onEmitter(i.emitter,t.EditChip.ON_INPUT_FOCUS,(function(){mo.nextTick((function(){}))})),a.onEmitter(i.emitter,t.EditChip.ON_INPUT_FOCUS_OUT,(function(){i.chipValue>=1&&a._tableCtrl.setCustJeton(i.chipValue)})),i},o.prototype.onChipChoosed=function(t){var r=this,o=r._tableCtrl;if(o.isMatch&&!o.hasEnrolled())return mo.MSG.show(o.canEnrolled()?e.id_c_msgCode.g_watch_match:e.id_c_msgCode.g_watch_match_no_join);r._chipV=t.data.v,r.emitter.emit(r.__class.ON_CHIP_CHOOSE,r._chipV),r.showLight(t);var a={};a.whichChip=r._chipV,a.whichGame=r._tableCtrl.type,e.RCD.mgr.recordState(e.RCD.RcdState.TYPE_CHIP,a)},o.prototype.onChipMove=function(e,t,r){var o=this;o._chipV=e.data.v,o.emitter.emit(o.__class.ON_CHIP_MOVE,t,r)},o.prototype.onChipDrop=function(e,t,r){var o=this;o._chipV=e.data.v,o._chipV&&!isNaN(o._chipV)&&o.emitter.emit(o.__class.ON_CHIP_DROP,t,r,o._chipV)},o.prototype._tap_btn_pre=function(){var e=this;e.scr_chips.viewport.scrollH-e._chipWidth>0?e.scr_chips.viewport.scrollH-=e._chipWidth:e.scr_chips.viewport.scrollH=0},o.prototype._tap_btn_next=function(){var e=this;e.scr_chips.viewport.scrollH+e.scr_chips.width+e._chipWidth<=e.scr_chips.viewport.contentWidth?e.scr_chips.viewport.scrollH+=e._chipWidth:e.scr_chips.viewport.scrollH=e.scr_chips.viewport.contentWidth-e.scr_chips.width},o.prototype._tap_btn_chipSetting=function(){e.RCD.mgr.recordState(e.RCD.RcdState.CHIP_EDIT),e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_chipSetting"),mo.emitter.emit(CONST.chipBarEvent.chipSetShow,this._tableCtrl)},o.prototype.showLight=function(e){var t=this;e&&(t.setIsEditChipChosen(e),t.currChip!=e&&(t.currChip&&t.currChip.hideLight(),t.currChip=e,t.currChip.showLight()))},o.prototype.showChipBarWithoutTableCtrl=function(){var t=this;t._chipList=[1,5,10,20,50,100],t._chipList=mo.ARR.sort(t._chipList,1),t._chipV=t._chipList[0];for(var r=0;r<t._chipList.length;r++){var o=new(e.GC.gc.getClass(t.chipClass));o.setData({v:t._chipList[r]}),o.scaleX=.8,o.scaleY=.8,t.grp_chips.addChild(o),t.currChip||t.showLight(o),t.onEmitter(o.emitter,o.__class.ON_CHOOSE,t.onChipChoosedWithoutTableCtrl),t.onEmitter(o.emitter,o.__class.ON_DRAG,t.onChipMove),t.onEmitter(o.emitter,o.__class.ON_DRAG_END,t.onChipDrop)}t.btn_chipSetting.visible=!1},o.prototype.onChipChoosedWithoutTableCtrl=function(e){var t=this;t._chipV=e.data.v,t.emitter.emit(t.__class.ON_CHIP_CHOOSE,t._chipV),t.showLight(e)},o}(e.BASE.ChipBarBase);a.ON_CHIP_MOVE="on_chip_move",a.ON_CHIP_DROP="on_chip_drop",a.ON_CHIP_CHOOSE="on_chip_choose",t.ChipBar2=a,__reflect(a.prototype,"G.BASE.ChipBar2")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);this.chipClass="Chip2",this.editChipClass="EditChip2"},t}(e.ChipBar2);e.ChipBar3=t,__reflect(t.prototype,"G.BASE.ChipBar3")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t._displacement=300,t}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this);this.grp_chips.parent.addEventListener(egret.Event.CHANGE,this._onListChange,this),this.showArrowImg(!1,!0)},t.prototype._initProp=function(){e.prototype._initProp.call(this);this.chipClass="Chip2",this.editChipClass="EditChip2"},t.prototype._onListChange=function(){var e=this;e.grp_chips.scrollH>=e.grp_chips.contentWidth-e.grp_chips.width?e.grp_chips.$children.length>9&&(e.grp_chips.scrollH=e.grp_chips.contentWidth-e.grp_chips.width,e.showArrowImg(!0,!1)):e.grp_chips.scrollH<=0?(e.grp_chips.scrollH=0,e.showArrowImg(!1,!0)):e.showArrowImg(!0,!0)},t.prototype.showArrowImg=function(e,t){var r=this;r.btn_next.alpha=t?1:.2,r.btn_next.enabled=t,r.btn_pre.alpha=e?1:.2,r.btn_pre.enabled=e},t.prototype._tap_btn_next=function(){this.moveByArrow(!0)},t.prototype._tap_btn_pre=function(){this.moveByArrow(!1)},t.prototype.moveByArrow=function(e){var t=this;if(!(t.grp_chips.contentWidth<t.grp_chips.width)){var r=t.grp_chips.scrollH,o=e?t._displacement:-1*t._displacement,a=egret.Ease.sineIn;t.getTween(t.grp_chips,{loop:!1}).to({scrollH:r+o},250,a).call((function(){t.rmTweens(t.grp_chips),t._onListChange()}))}},t}(e.ChipBar2);e.ChipBar4=t,__reflect(t.prototype,"G.BASE.ChipBar4")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.effectId="",e.sX=1,e.sY=1,e._light=!1,e.betNumComp_verticalCenter=-20,e.betNumComp_horizontalCenter=0,e}return __extends(o,r),o.prototype.setBetNumCompVerticalCenter=function(e){this.betNumComp_verticalCenter=e},o.prototype.setBetNumCompHorizontalCenter=function(e){this.betNumComp_horizontalCenter=e},Object.defineProperty(o.prototype,"label",{get:function(){return this._num},set:function(e){this._num=e,this.labelDisplay&&(this.labelDisplay.text=e.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"betNum",{get:function(){return this._betNum},set:function(t){var r=this;if(this._betNum=t,t){if(!r.betNumComp){var o=r.betNumComp=new e.BASE.BetNumRlt;0==r.label&&(o.label_num.width=56),o.horizontalCenter=r.betNumComp_horizontalCenter,o.verticalCenter=r.betNumComp_verticalCenter,r.img_focus.parent.addChild(o)}r.betNumComp.visible=!0,r.betNumComp.setData({num:t})}else r.betNumComp&&(r.betNumComp.visible=!1)},enumerable:!0,configurable:!0}),o.prototype.resetChip=function(){this.flyChip&&this.flyChip.reset()},o.prototype.betChip=function(e){this.flyChip.chipValue=e},o.prototype.initChip=function(e){this.flyChip&&this.flyChip.setData({chipList:e})},Object.defineProperty(o.prototype,"focus",{get:function(){return this._focus},set:function(e){this._focus=e,this.highlight=e,this.betNumComp&&(this.betNumComp.focus=e,t.log("---\x3e切换状态 %s",e?"大":"小"))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"highlight",{get:function(){return this._highlight},set:function(e){this._highlight=e,this.currentState=e?"in":"out"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"light",{set:function(e){var t=this;if(!t._hasDtored)if(t._light=e,t._light){if(t.mc)t.mc.visible=!0;else if(t.effectId){t.mc=new mo.Sprite,t.addChild(t.mc),t.mc.x=.5*t.width,t.mc.y=.5*t.height,t.mc.frameLoop.cost=90,t.mc.scaleX=t.sX,t.mc.scaleY=t.sY;var r=mo.STR.format("sp/%s.png",t.effectId);t.mc.play(r,-1)}}else t.mc&&(t.mc.visible=!1)},enumerable:!0,configurable:!0}),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._focus=!1,e._highlight=!1,e._betNum=0,e._num=0,e._lastNum=0},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);this.labelDisplay.text=this._num.toString()},o.prototype.onExit=function(){r.prototype.onExit.call(this);var e=this;e.mc&&(e.mc.frameLoop.unRegisterTimer(),mo.EUI.helper.rm(e.mc),e.mc=null)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this)},o.prototype.getCurrentState=function(){return this._highlight?"in":"out"},o}(mo.EUI.Comp);t.RltBetArea=r,__reflect(r.prototype,"G.BASE.RltBetArea")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.effectId="",e.languageKey="",e.languageAdd_leftUp="",e.languageAdd_rightUp="",e.languageWidth=0,e.languageHeight=0,e.languageHCenter=0,e.languageVCenter=0,e.languageSize=32,e.sX=1,e.sY=1,e._light=!1,e}return __extends(o,r),Object.defineProperty(o.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e,this.iconDisplay&&(this.iconDisplay.source=e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"betNum",{get:function(){return this._betNum},set:function(t){var r=this;if(this._betNum=t,t){if(!r.betNumComp){var o=r.betNumComp=new e.BASE.BetNumRlt;o.horizontalCenter=0,o.verticalCenter=0,r.img_focus.parent.addChild(o)}r.betNumComp.visible=!0,r.betNumComp.setData({num:t})}else r.betNumComp&&(r.betNumComp.visible=!1)},enumerable:!0,configurable:!0}),o.prototype.resetChip=function(){this.flyChip&&this.flyChip.reset()},o.prototype.betChip=function(e){this.flyChip.chipValue=e},o.prototype.initChip=function(e){this.flyChip&&this.flyChip.setData({chipList:e})},Object.defineProperty(o.prototype,"focus",{get:function(){return this._focus},set:function(e){this._focus=e,this.highlight=e,this.betNumComp&&(this.betNumComp.focus=e,t.log("---\x3e切换状态 %s",e?"大":"小"))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"light",{set:function(e){var t=this;if(t._light=e,t._light){if(t.mc)t.mc.visible=!0;else if(t.effectId){t.mc=new mo.Sprite,t.addChild(t.mc),t.mc.x=.5*t.width,t.mc.y=.5*t.height,t.mc.frameLoop.registerTicker(mo.custTimer),t.mc.frameLoop.cost=90,t.mc.scaleX=t.sX,t.mc.scaleY=t.sY;var r=mo.STR.format("sp/%s.png",t.effectId);t.mc.play(r,-1)}}else t.mc&&(t.mc.visible=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"highlight",{get:function(){return this._highlight},set:function(e){e!=this._highlight&&(this._highlight=e,this.invalidateState())},enumerable:!0,configurable:!0}),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._focus=!1,e._highlight=!1,e._betNum=0,e._icon=""},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);this.iconDisplay.source=this._icon},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);this.iconDisplay.visible=!1,this.showDeskText()},o.prototype.toggleDisable=function(e){this.rect_disable&&(this.rect_disable.alpha=e?1:0)},o.prototype.showDeskText=function(){var e=this;0!=e.languageAdd_leftUp.length&&e.putAddInfoLabel(!0,e.languageAdd_leftUp),0!=e.languageAdd_rightUp.length&&e.putAddInfoLabel(!1,e.languageAdd_rightUp);var t=new mo.EUI.Label;if(t.text=e.languageKey,t.textAlign="center",t.verticalAlign="middle",t.size=e.languageSize,t.scaleX=.5,t.scaleY=.5,t.height=e.languageHeight,t.textColor=15519344,t.wantWidth=e.languageWidth,t.horizontalCenter=e.languageHCenter,t.verticalCenter=0,"மூன்றாவது நெடுவரிசை\n2 to 1"==t.text&&(t.size=30,t.text="மூன்றாவது\nநெடுவரிசை\n2 to 1"),"இரண்டாவது நெடுவரிசை\n2 to 1"==t.text&&(t.size=30,t.text="இரண்டாவது\nநெடுவரிசை\n2 to 1"),"முதல் நெடுவரிசை\n2 to 1"==t.text&&(t.size=30,t.text="முதல்\nநெடுவரிசை\n2 to 1"),e.flyChip&&e.flyChip.visible){var r=e.img_focus.parent.getChildIndex(e.flyChip);e.img_focus.parent.addChildAt(t,r-1)}else e.img_focus.parent.addChild(t)},o.prototype.putAddInfoLabel=function(e,t){var r=this,o=new mo.EUI.Label;if(o.text=t,o.textAlign=e?"left":"right",o.verticalAlign="middle",o.size=22,o.scaleX=.5,o.scaleY=.5,o.width=r.languageWidth,o.height=22,o.textColor=15519344,r.flyChip&&r.flyChip.visible){var a=r.img_focus.parent.getChildIndex(r.flyChip);r.img_focus.parent.addChildAt(o,a-1)}else r.img_focus.parent.addChild(o)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this)},o.prototype.getCurrentState=function(){return this._highlight?"in":"out"},o.prototype.onExit=function(){r.prototype.onExit.call(this);var e=this;e.mc&&(e.mc.frameLoop.unRegisterTimer(),mo.EUI.helper.rm(e.mc),e.mc=null)},o}(mo.EUI.Comp);t.RltBetAreaMore=r,__reflect(r.prototype,"G.BASE.RltBetAreaMore")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.penetrable=!0,this._skinName=e.GW.mgr.currentTheme+"_TablePartSkin"},r.prototype.onEnter=function(){this.setVisibleByLang()},r.prototype.setVisibleByLang=function(){var e=this,t=mo.PROJ.lang;e["grp_"+t]&&(e["grp_"+t].visible=!0,e.grp_common.visible=!1)},r}(mo.EUI.Layer);t.ThemeGameTablePart=r,__reflect(r.prototype,"G.BASE.ThemeGameTablePart")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(){};e.LayerInfo=t,__reflect(t.prototype,"G.COMM.LayerInfo");var r=function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype._initProp=function(){e.prototype._initProp.call(this);this._layerList=[]},r.prototype.getLayerCanvas=function(){return null},r.prototype.getLayerLength=function(){return this._layerList.length},r.prototype.checkLayerClassExist=function(e){return!!this._layerList.some((function(t){return t._layerClass==e}))},Object.defineProperty(r.prototype,"currLayerInfo",{get:function(){var e=this;return e._layerList&&0!=e._layerList.length?e._layerList[e._layerList.length-1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currLayer",{get:function(){return this.currLayerInfo?this.currLayerInfo._layer:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currLayerName",{get:function(){var e=this;if(!e._layerList||0==e._layerList.length)return"";var t=e._layerList[e._layerList.length-1];return t._layerClass?t._layerClass.__className:""},enumerable:!0,configurable:!0}),r.prototype.pushLayer=function(e,t){void 0===t&&(t=null);var r=this;if(!r.checkLayerClassExist(e)){r.closeCurrLayer();var o=e.show({tray:r.getLayerCanvas(),param:t});r.pushLayerInfo(e,t,o)}},r.prototype.popLayer=function(){var e=this;if(!(e._layerList.length<=1)){e.closeCurrLayer(!0);var t=e.currLayerInfo;t&&t._layerClass&&(t._layer=t._layerClass.show({tray:e.getLayerCanvas(),param:t._layerParam}))}},r.prototype.pushLayerInfo=function(e,r,o){if(!this.checkLayerClassExist(e)){var a=new t;a._layerClass=e,a._layerParam=r,a._layer=o,this._layerList.push(a)}},r.prototype.pushMultiLayer=function(e){for(var t=0;t<e.length;t++)if(t==e.length-1){var r=e[t];this.pushLayer(r._layerClass,r._layerParam)}else{r=e[t];this.pushLayerInfo(r._layerClass,r._layerParam,r._layer)}},r.prototype.closeCurrLayer=function(e){var t=this,r=t.currLayer;r&&(r.close(),r=null),e&&t._layerList.length>1&&t._layerList.pop()},r.prototype.popAllLayerList=function(e){e&&this.closeCurrLayer(),this._layerList=[]},r}(mo.Emitter);e.LayerMgrBase=r,__reflect(r.prototype,"G.COMM.LayerMgrBase")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=CONST.layer.className,a=CONST.layer.layerClassToPush,i=CONST.layer.layerRoutes,n=function(t){function n(){var e=t.apply(this,arguments)||this;return e.currentTableType=-1,e.limitSelectIndexObj={},e}return __extends(n,t),n.prototype._initProp=function(){t.prototype._initProp.call(this);var e=this;e._visualType=CONST.layer.VisualType.version_pc35,CONST.layer.setVisualVersion(e._visualType),e.initRouteMap()},n.prototype.getVirtualVersion=function(){return this._visualType},n.prototype.initRouteMap=function(){var e=this;e._layerRouteMap=[];for(var t=i[e._visualType],r=0;r<t.length;r++){var o=t[r];e._layerRouteMap.push(o)}},n.prototype.getLayerCanvas=function(){return this.baseTopBar?this.baseTopBar.canvas:null},Object.defineProperty(n.prototype,"baseTopBar",{get:function(){return this._baseTopBar},set:function(e){this._baseTopBar=e},enumerable:!0,configurable:!0}),n.prototype.getRoomListClass=function(t){var r=this._layerRouteMap.find((function(e){return e.tableType==t}));return r?e.GC.gc.getClass(r.roomList):null},n.prototype.getRoomClass=function(t){var r=this._layerRouteMap.find((function(e){return e.tableType==t}));return r?e.GC.gc.getClass(r.gameRoom):null},n.prototype.checkIfCurrInPreLobby=function(){return"PreLobbyLayer"==this.currLayerName},n.prototype.checkIfCurrInRoomList=function(){var e=this;return e.currLayerName!=o.None&&!!e._layerRouteMap.find((function(t){return t.roomList==e.currLayerName}))},n.prototype.checkIfCurrInGameRoom=function(){var e=this;return e.currLayerName!=o.None&&!!e._layerRouteMap.find((function(t){return t.gameRoom==e.currLayerName}))},n.prototype.checkAndSendLeaveApi=function(t){var r=this;if(r.currLayerName.includes("MTOBaccList")?e.GTS.mgr.exitMultiBaccarat((function(){t&&t()})):"BBLayer"==r.currLayerName?(e.COMM.BB.exitLobby((function(){})),e.COMM.BB.resetAll(),t&&t()):"BBGameLayer"==r.currLayerName?t&&t():r.checkIfCurrInRoomList()?r.leaveApi(!0,(function(){t&&t()})):r.checkIfCurrInGameRoom()?r.leaveApi(!1,(function(){t&&t()})):t&&t(),r.baseTopBar&&r.baseTopBar.tableCtrl){var o=r.baseTopBar.tableCtrl,a=o.anchor?CONST.tableType.anchor:o.type;mo.emitter.emit("setShortcut",a,!0)}},n.prototype.leaveApi=function(t,r){var o=this;if(t)e.GTS.mgr.exitTableList(null,(function(){o.baseTopBar&&(o.baseTopBar.tableCtrl=null),r&&r()}));else{if(!o.baseTopBar||!o.baseTopBar.tableCtrl)return void(r&&r());o.baseTopBar.tableCtrl.exitTable((function(){o.baseTopBar&&(o.baseTopBar.tableCtrl=null),r&&r()}))}},n.prototype.closeLimitSelectDlg=function(){var e=this;e.limitSelectDlg&&e.limitSelectDlg.systemClose(),e.limitSelectDlg=null},n.prototype.enterRoomListApi=function(t,r){var o=this;switch(t){case CONST.tableType.all:o.closeLimitSelectDlg(),e.GTS.mgr.getMultiRangeList((function(t){var a=function(t,a){e.GTS.mgr.seletedBetLimitIndex=a;var i=o.getResourcePositionByGameType(CONST.tableType.all),n=function(){e.GTS.mgr.enterMultiBaccarat((function(){r&&r()}))};null!=i?e.GTS.RS.loadResource(i,n):n(),o.closeLimitSelectDlg()},i=function(){o.closeLimitSelectDlg(),n()},n=function(){o.limitSelectDlg||(o.limitSelectDlg=e.COMM.LimitSelectDlg.show({multiRangeList:t,selectCallBack:a,errorCallBack:i,target:o}),o.limitSelectDlg.btn_close.visible=!1)};if(t.length>0){n();var s=e.stageUtil.getHome();if(s.tray_dlg.$children.length>1&&s.tray_dlg.$children[0].hasOwnProperty("ADData")){var l=s.tray_dlg.$children.shift();s.tray_dlg.$children.push(l)}}else a(0,0)}));break;case CONST.tableType.BB:e.COMM.BB.initBBMgr((function(){r&&r()}),!1);break;case CONST.tableType.slot:case CONST.tableType.trialslot:e.GTS.mgr.loadPPGames(12,(function(){mo.emitter.emit("slotDataPC",e.GTS.mgr.getPPAll()),r&&r()}));break;case CONST.tableType.anchor:e.GTS.bcht.resetSelectedType(),e.GTS.bcht.enterAnchorTableList((function(){r&&r()}));break;default:e.GTS.mgr.enterTableList(t,(function(){r&&r()}))}},n.prototype.enterGameRoomApi=function(t,r,o){if(t)switch(r){case CONST.tableType.BB:if(t.isQuick){var a=t.quickMode;e.COMM.BB.quickEnterGameRoom(a,(function(){o&&o()}))}else e.COMM.BB.readyEnterGameRoom(t.matchId,(function(){o&&o()}));break;default:var i=this.getResourcePositionByGameType(r),n=function(){t.enterTable((function(){e.RCD.log_mgr.recordGetInLiveGame(),o&&o()}))};null!=i?e.GTS.RS.loadResource(i,n):n()}},n.prototype.checkBeforeFastEnterGameroom=function(t,r,o,a,i){if(t){var n=t.isMultiRange,s=this.getLimitSelectIndex(t.code),l=null!=s,c=t.multiRangeList&&t.multiRangeList.length,p=n&&l&&c&&t.multiRangeList[s]?function(){e.GTS.mgr.setRangeList4Multi(t.multiRangeList[s],(function(){a&&a((function(){i&&i()}))}))}:function(){a&&a((function(){i&&i()}))};o?o((function(){p()})):p()}},n.prototype.pushLayer=function(e,r){void 0===r&&(r=null),t.prototype.pushLayer.call(this,e,r);this.baseTopBar&&this.baseTopBar.enterNextLayer()},n.prototype.popLayer=function(){var e=this;if(!(e.getLayerLength()<=1)){e.closeCurrLayer(!0);var t=e.currLayerInfo;t&&t._layerClass&&(t._layer=t._layerClass.show({tray:e.getLayerCanvas(),param:t._layerParam})),e.baseTopBar&&e.baseTopBar.backPreLayer()}},n.prototype.checkAndPopAllLayerList=function(e){var t=this;t.checkAndSendLeaveApi((function(){t.popAllLayerList(!0),e&&e()}))},n.prototype.enterGameRoomList=function(e,t,r,o){var a=this,i=a.getRoomListClass(e);return!!i&&void a.enterRoomListApi(e,(function(){a.recordState(e,!1),t&&a.popAllLayerList(!0),r?(r.push({_layerClass:i}),a.pushMultiLayer(r)):a.pushLayer(i),o&&o()}))},n.prototype.enterGameRoom=function(t,r,o,a,i){var n=this;if(t){if(e.GTS.mgr.isTableMaintain(t.code))return mo.MSG.show("${{game_Maintenance}}");var s=n.getRoomClass(r);s&&n.enterGameRoomApi(t,r,(function(){n.recordState(r,!0),o&&n.popAllLayerList(!0),n.baseTopBar&&(n.baseTopBar.tableCtrl=t),e.GW.mgr.setCurrentThemeWithTableCtrl(t);var l={};l.tableCtrl=t,a?(a.push({_layerClass:s,_layerParam:l}),n.pushMultiLayer(a)):n.pushLayer(s,l),i&&i()}))}},n.prototype.backToPrevLayer=function(){var t=this;if(t.checkIfCurrInRoomList())t.checkAndSendLeaveApi((function(){e.muteMusic(!1),e.playMusic("main"),t.popLayer()}));else if(t.checkIfCurrInGameRoom()){var r=t.getGameTypeFromCurrLayerName();t.setCurrentTableType(r),t.backToRootLayer()}else e.muteMusic(!1),e.playMusic("main"),t.popLayer()},n.prototype.fastEnterGameRoomList=function(t,r){var o=this;o.checkAndPopAllLayerList((function(){var i=null;if(!(1==e.GW.mgr.getOpenGameArray().length)){i=[];for(var n=a[o._visualType],s=0;s<n.length;s++){var l=n[s],c=e.GC.gc.getClass(l);i.push({_layerClass:c})}}o.enterGameRoomList(t,!0,i,r)}))},n.prototype.fastEnterGameRoom=function(t,r,o,i){var n=this;if(e.GTS.mgr.isTableMaintain(t.code))return mo.MSG.show("${{game_Maintenance}}");n.checkBeforeFastEnterGameroom(t,r,(function(e){n.checkAndPopAllLayerList(e)}),(function(i){var s=[];if(!o){s=[];for(var l=a[n._visualType],c=0;c<l.length;c++){var p=l[c],_=e.GC.gc.getClass(p);s.push({_layerClass:_})}}var u=n.getRoomListClass(r);u&&s.push({_layerClass:u}),s.length||(s=null),n.setCurrentTableType(r),n.enterGameRoom(t,r,!0,s,i)}),i)},n.prototype.enterSingleGameLayer=function(){var e=this,t=e.checkSingleGameType();return-1!=t&&(e.fastEnterGameRoomList(t,(function(){e.baseTopBar&&e.baseTopBar.setSingleUI()})),!0)},n.prototype.backToRootLayer=function(){var t=this;e.muteMusic(!1),e.playMusic("main"),t.checkAndPopAllLayerList((function(){var r=[],o=a[t._visualType][0],i=e.GC.gc.getClass(o);r.push({_layerClass:i,_layerParam:null}),t.popAllLayerList(!0),t.pushMultiLayer(r)}))},n.prototype.checkSingleGameType=function(){if(1!=e.GW.mgr.getOpenGameArray().length)return-1;for(var t=r.games,o=0;o<t.length;o++){var a=t[o],i=r.gameType[a];if(e.GW.mgr.ifGameOpen(a))return i}return-1},n.prototype.recordState=function(t,r){var o=e.RCD.RcdState.INIT;switch(t){case CONST.tableType.all:break;case CONST.tableType.baccarat:r&&(o=e.RCD.RcdState.MENU_BACC);break;case CONST.tableType.dragonTiger:r&&(o=e.RCD.RcdState.MENU_DT);break;case CONST.tableType.roulette:r&&(o=e.RCD.RcdState.MENU_RLT);break;case CONST.tableType.sicBo:r&&(o=e.RCD.RcdState.MENU_DICE);break;case CONST.tableType.slot:r&&(o=e.RCD.RcdState.MENU_PP);break;case CONST.tableType.BB:break;case CONST.tableType.niuNiu:r&&(o=e.RCD.RcdState.MENU_NIUNIU)}e.RCD.mgr.recordState(o)},n.prototype.getGameTypeFromCurrLayerName=function(){var e=this,t=e.currLayerName;if(!t||0==t.length)return-1;var r=e._layerRouteMap.find((function(e){return e.roomList==t}));if(r)return r.tableType;var o=e._layerRouteMap.find((function(e){return e.gameRoom==t}));return o?o.tableType:-1},n.prototype.handleActivityDelay=function(){var t=this;if(!e.GW.mgr.isUserNull())if(t.checkIfCurrInGameRoom()){var r=t.baseTopBar.tableCtrl;if(r.type==CONST.tableType.baccarat&&r.isMatch&&e.UTIL.isMatchOver(r.matchCtrl))return void t.fastEnterGameRoomList(CONST.tableType.baccarat)}else if(!t.checkIfCurrInRoomList()||!t.currLayerName.includes("MTOBaccList"))return t.checkIfCurrInRoomList()&&"BJ_ElectronicRoomList"==t.currLayerName?void t.fastEnterGameRoomList(CONST.tableType.BJ_Electronic):void t.getCurrentTableType()},n.prototype.enterGameRoomAfterDelay=function(e){var t=(e.code,e.type);e.isMultiRange,this.fastEnterGameRoom(e,t)},n.prototype.handleOnKickFromTable=function(){var e=this,t=-1;if(e.checkIfCurrInGameRoom())t=e.getGameTypeFromCurrLayerName(),e.setCurrentTableType(t),e.backToRootLayer();else{if(e.checkIfCurrInRoomList()&&e.currLayerName.includes("MTOBaccList"))return void e.fastEnterGameRoomList(CONST.tableType.all);if(e.checkIfCurrInRoomList()&&"BJ_ElectronicRoomList"==e.currLayerName)return void e.fastEnterGameRoomList(CONST.tableType.BJ_Electronic)}},n.prototype.handlePlayerCloseGame=function(){var e=this,t=-1;e.checkIfCurrInGameRoom()&&(t=e.getGameTypeFromCurrLayerName(),e.setCurrentTableType(t),e.backToRootLayer())},n.prototype.enterBlackJackElectronic=function(e){var t=this.getRoomListClass(CONST.tableType.BJ_Electronic);return t?(this.pushLayer(t),void(e&&e())):null},n.prototype.enterMTORoomList=function(t){var r=this,o=r.getRoomListClass(CONST.tableType.all);if(!o||!t)return null;e.GTS.mgr.getMultiRangeList((function(o){r.closeLimitSelectDlg();var a=function(o,a){e.GTS.mgr.seletedBetLimitIndex=a;var i=r.getResourcePositionByGameType(CONST.tableType.all),n=function(){e.GTS.mgr.enterMultiBaccarat((function(){t&&t()}))};null!=i?e.GTS.RS.loadResource(i,n):n(),r.closeLimitSelectDlg()},i=function(){r.closeLimitSelectDlg()};o.length>0?r.limitSelectDlg||(r.limitSelectDlg=e.COMM.LimitSelectDlg.show({multiRangeList:o,selectCallBack:a,errorCallBack:i,target:r}),r.limitSelectDlg.btn_close.visible=!1):a(0,0)}));return function(){r.recordState(CONST.tableType.all,!1),r.pushLayer(o)}},n.prototype.setCurrentTableType=function(e){this.currentTableType=e},n.prototype.getCurrentTableType=function(){return this.currentTableType},n.prototype.retriveCurrentTableType=function(){var e=this.currentTableType;return this.currentTableType=-1,e},n.prototype.checkIfCurrInMTOBaccList=function(){return this.checkIfCurrInRoomList()&&this.currLayerName.includes("MTOBaccList")},n.prototype.checkIfCurrInTreasureChest=function(){return this.checkIfCurrInRoomList()&&this.currLayerName.includes("TreasureChest")},n.prototype.getResourcePositionByGameType=function(t){var r;switch(t){case CONST.tableType.all:r=e.GTS.ResourcePosition.MULTI_TABLE;break;case CONST.tableType.baccarat:r=e.GTS.ResourcePosition.BACC_ROOM;break;case CONST.tableType.dragonTiger:r=e.GTS.ResourcePosition.DT_ROOM;break;case CONST.tableType.roulette:r=e.GTS.ResourcePosition.RLT_ROOM;break;case CONST.tableType.sicBo:r=e.GTS.ResourcePosition.SICBO_ROOM;break;case CONST.tableType.niuNiu:r=e.GTS.ResourcePosition.NN_ROOM;break;case CONST.tableType.cashWheel:r=e.GTS.ResourcePosition.ARLT_ROOM}return r},n.prototype.getFirstLayerName=function(){return this._layerList.length>0?this._layerList[0]._layerClass.__className:null},n.prototype.getLayerList=function(){return this._layerList},n.prototype.recordLimitSelectIndex=function(e,t){this.limitSelectIndexObj[e]=t},n.prototype.getLimitSelectIndex=function(e){return this.limitSelectIndexObj[e]||0},n}(t.LayerMgrBase);t.LayerMgr=n,__reflect(n.prototype,"G.COMM.LayerMgr"),t.layerMgr=new n}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);var e=this;mo.emitter.on("BB.BBBetResult.Show",(function(t){if(t){var r=(t=String(t)).search("-");if(-1!=r){var o=t.substr(0,r),a=t.substr(r+1,t.length);e.showBBBetResultHistory(parseInt(o),parseInt(a))}}}))},r.prototype.onEnter=function(){t.prototype.onEnter.call(this),e.RCD.log_mgr.sendEvent_ClientButton("history")},r.prototype._tap_btn_close=function(){e.RCD.mgr.recordState(e.RCD.RcdState.C_INFO_ASSET),e.playAudio("btnclick")},r.prototype.showBBBetResultHistory=function(t,r){var o=this;o.betResult.registerCloseCB(o.closeBBBetResult.bind(this)),e.GTS.mgr.getBBBetResult(t,r,(function(e){o.betResult.showResult(e,!1,!0),o.betResult.visible=!0}))},r.prototype.closeBBBetResult=function(){this.betResult.unregisterCloseCB(),this.betResult.visible=!1},r}(mo.EUI.Dlg);t.AssetInfoDlg=r,__reflect(r.prototype,"G.COMM.AssetInfoDlg")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){var r=this;t.prototype.onEnter.call(this);var o=this;o.btn_music.selected=e.getMusicEnabled(),o.btn_sound.selected=e.getAudioEnabled(),o.originSetting={music:o.btn_music.selected,sound:o.btn_sound.selected},o.isConfirm=!1,mo.emitter.on("closeSoundSettingDlg",(function(){r.close()}),o);for(var a=e.GW.mgr.getLangs(),i=[],n=0;n<a.length;n++)a[n]==mo.PROJ.lang&&(o.drop_lang.whichLang=n),i.push({id:n,text:mo.D.langCodeToTxt("txt_"+a[n]),flag:"flg_"+a[n]});o.drop_lang.setData({list:i,target:this})},r.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;r.isConfirm||(e.setMusicEnabled(r.originSetting.music),e.setAudioEnabled(r.originSetting.sound))},r.prototype._tap_btn_music=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.MUSIC_SWITCH),e.setMusicEnabled(this.btn_music.selected),e.RCD.log_mgr.sendEvent_ClientButton("music")},r.prototype._tap_btn_sound=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.SOUND_SWITCH),e.setAudioEnabled(this.btn_sound.selected),e.RCD.log_mgr.sendEvent_ClientButton("sound")},r.prototype._tap_btn_ok=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.Y_SETTING),this.isConfirm=!0;var t=e.GW.mgr.getLangs()[this.drop_lang.whichLang];if(t!=mo.PROJ.lang){e.RCD.log_mgr.sendEvent_ClientButton("language");var r=t;e.GW.mgr.setLang(r),mo.playWaiting(1),mo.R.load(e.resList4Lang,(function(){var t=["BB_01_"+mo.PROJ.lang,"BB_02_"+mo.PROJ.lang];mo.R.load(t,(function(){}),this),e.COMM.layerMgr.checkAndPopAllLayerList((function(){var t=function(){mo.stopWaiting(),mo.moduleMgr.popAll(),mo.moduleMgr.run("HomeScene"),mo.emitter.emit("onChangeLangeage"),mo.emitter.emit("closeSoundSettingDlg")};e.GTS.mgr.getNewLangList((function(){e.GW.mgr.handleLanguage(t)}))}))})),this.close()}else this.close()},r}(mo.EUI.Dlg);t.SoundSettingDlg35=r,__reflect(r.prototype,"G.COMM.SoundSettingDlg35")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.chk_chip.addEventListener(eui.UIEvent.CHANGE,e._chk_change,e)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r,o=this;o.grp_chip.removeChildren(),o.grp_chip.touchChildren=!1,o.grp_chip.touchEnabled=!1,o._chipSelectData=o.data,o._chipSelectData.chipData.isCust?((r=new e.BASE.EditChipSet).btn_edit.visible=!1,r.setData({v:o._chipSelectData.chipData.value,isl:!0,noChanged:!0})):(r=new e.BASE.Chip).setData({v:o._chipSelectData.chipData.value,isl:!0}),o.grp_chip.addChild(r),r.btn_touch.touchEnabled=!1,o.chk_chip.selected=!!o._chipSelectData.isChk},r.prototype._chk_change=function(){var e=this;e._chipSelectData.isChk=e.chk_chip.selected,e.delegate.changeCommonChipList(e._chipSelectData)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r}(mo.EUI.ItemRenderer);t.ChipSetItem=r,__reflect(r.prototype,"G.COMM.ChipSetItem")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_chip=t.ChipSetItem,this.chipSetList=[]},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var e=this;e.btn_ok.label=mo.D.langCodeToTxt("g_ok_text"),e.scrollerbar_chips.init(e.scroller_chips,"v2")},o.prototype.childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype._data_list_chip=function(){return this.chipSetList},o.prototype._click_list_chip=function(){},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var t=this;if(t.tableCtrl=t.data.tableCtrl,t.tableCtrl){t._totalChipList=[];for(var o,a=mo.ARR.sort(t.tableCtrl.jetons,1),i=0,n=a.length;n>i;i++)(o=new e.BASE.ChipData).value=a[i],o.isCust=!1,t._totalChipList.push(o);(o=new e.BASE.ChipData).value=t.tableCtrl.getCustJeton()||0,o.isCust=!0,t._totalChipList.push(o),t.commonChipList=mo.ARR.sort(t.tableCtrl.getCustJetons(),{name:"value",type:1},{name:"isCust",type:1});var s;for(i=0,n=t._totalChipList.length;n>i;i++){(s=new e.BASE.ChipSelectData).chipData=t._totalChipList[i];for(var l=0,c=t.commonChipList.length;c>l;l++)if(o=t.commonChipList[l],s.chipData.isCust){if(o.isCust){s.isChk=!0;break}}else if(o.value==s.chipData.value){s.isChk=!0;break}t.chipSetList.push(s)}t.refreshList("list_chip")}},o.prototype.changeCommonChipList=function(e){for(var t,r=this,o=[],a=0,i=r.chipSetList.length;i>a;a++)(t=r.chipSetList[a]).chipData.isCust?e.chipData.isCust&&(t.isChk=e.isChk):t.chipData.value==e.chipData.value&&(t.isChk=e.isChk),t.isChk&&o.push(t.chipData);r.commonChipList=o},o.prototype._tap_btn_ok=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.Y_CHIP_EDIT),t.tableCtrl&&t.commonChipList?t.commonChipList.length>=6?t.tableCtrl.saveCustJetons(t.commonChipList,(function(){mo.emitter.emit(CONST.chipBarEvent.chipSetClose),t.close()})):mo.MSG.show(e.id_c_msgCode.warning_least_chip):t.close()},o.prototype._tap_btn_close=function(){e.RCD.mgr.recordState(e.RCD.RcdState.C_CHIP_EDIT),e.playAudio("btnclick")},o}(mo.EUI.Dlg);t.ChipSet=r,__reflect(r.prototype,"G.COMM.ChipSet"),mo.emitter.on(CONST.chipBarEvent.chipSetShow,(function(t){e.COMM.ChipSet.show({tableCtrl:t})}))}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(o){function a(){var t=o.apply(this,arguments)||this;return t.animationIndex=-1,t.animationMaxNum=24,t.isMailOpen=!e.GW.mgr.channel.disableMailSystem,t._isFullScreen=!1,t.sysMsgSpeed=.07,t._defaultBgImg="dg_lobby_bg",t}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var t=this;t.grp_notice_2.mask=new egret.Rectangle(0,0,t.grp_notice_2.width,t.grp_notice_2.height),e.GW.mgr.ifGameOpenByTableType(CONST.tableType.baccarat)||t.showMatchBoardBtn(!1)},a.prototype._initProp=function(){o.prototype._initProp.call(this);var e=this;e.sysMsgList=[],e._isFullScreen=!1,e.walletNames=["g_general_wallet","g_real_wallet","g_electric_wallet","g_battle_wallet","g_casino_wallet","g_sports_wallet","g_ticket_wallet"],e.localPoint=new egret.Point(0,0)},a.prototype.onEnter=function(){o.prototype.onEnter.call(this);var r=this;r.setPicBg(),r.bottomPanel.init(t.DGBottomPanelType.ad),e.GW.mgr.showWarningForIE();var a=e.BASE.resHelper.getMainTitle(e.GW.mgr.channel);e.getRemoteImg(a,(function(e,t){a==t&&(r.img_title.source=e||"mainTitle")})),r.grp_total_money.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(){e.GTS.mgr.isInMatch()||r.showCurrency()}),r),r.btn_audio_open.visible=e.getIsOpenAudio(),r.btn_audio_close.visible=!e.getIsOpenAudio(),r.initFullScreen(),r.btn_recharge.visible=r.isRechargeBtnShow(),r.label_currency.text=this.currencyCodeToTxt(e.COMM.FX.getOwnCurrency()),r.showMailBox(r.isMailOpen),r.setUnreadMailNum(),e.GW.mgr.ifGameSingle()&&r.setSingleUI(),r.updateSystemMenuState(),r.btn_money_wallet.enabled=!e.GW.mgr.isSingleWallet,r._roomShortCutMenu.init(),r.grtScroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,r.onGrtMouseOver.bind(r,r.grtScroller),r),r.grtScroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,r.onGrtMouseOver.bind(r,r.grtScroller),r),mo.emitter.on("match_table_close",r._onKickFromTable,r),mo.emitter.on("table_maintain",r._onKickFromTable_maintain,r),e.GTS.netMgr.onNotify(CONST.notifyEvent.kickFromTable,r._onKickFromTable,r),r.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_MONEY_CHANGED,r.dataChanged),r.onEmitter(e.GTS.userCtrl,"nick",r.dataChanged),r.onEmitter(e.GTS.mgr,"onlineCount",r._onOnlineCountChanged),r.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_SYS_MSG,r.updateSysMsg),mo.emitter.on("readyEnterGameRoomList",r.readyEnterGameRoomList.bind(r)),mo.emitter.on("readyEnterGameRoom",r.readyEnterGameRoom.bind(r)),mo.emitter.on("appearBottomPanel",r.appearBottomPanel.bind(r)),mo.emitter.on("gameTypeChange",r.saveCurGameType,r),mo.emitter.on("closeSoundSettingDlg",r.dataChanged,r),mo.emitter.on("hideRoomShortCutMenu",r.onHideRoomShortCutMenu,r),mo.emitter.on("roundIndexWrong",r.handleRoundIndexWrong,r),mo.emitter.on("playerWantCloseGame",r.handlePlayerCloseGame,r),r.onEmitter(e.stageUtil,e.StageUtil.ON_WIN_CLOSED,(function(){e.GTS.userCtrl.syncMoney(),r.updateWallet()})),r.onEmitter(mo.emitter,"go_in_match_room",r._hideWallet),e.GTS.netMgr.onNotify(CONST.bstBizType.mailAll,r.updateUnreadMailNum,r),e.GTS.netMgr.onNotify(CONST.bstBizType.mailSingle,r.updateUnreadMailNum,r),mo.emitter.on("refresh_unread_mail",r.setUnreadMailNum,r),e.GTS.netMgr.onNotify(CONST.bstBizType.worldMsgRm,r._worldMsgRm,r),document.addEventListener("fullscreenchange",(function(){r._isFullScreen=!r._isFullScreen})),document.addEventListener("fullscreenerror",(function(){})),e.GW.mgr.ifOnlyOpenPPGame()?e.GW.mgr.ifGameOpen(CONST.gameAPI.PRAGMATIC_PLAY_SLOT)||e.GW.mgr.ifGameOpen(CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT)?e.GTS.mgr.getKindsOfPPGames(12,(function(){})):mo.MSG.show("${{Prompt_message}}"):e.GTS.mgr.getKindsOfPPGames(12,(function(){})),r.updateWallet(),r.dataChanged(),r.onEmitter(e.VideoMgr,"networkStatus",(function(e){null!=e&&(r.img_wifi.source="ico_wifi_"+e)})),r.btn_match_board.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){r.showMD(e,"Competition_ranking",r.btn_match_board)}),r),r.btn_mail_box.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){r.showMD(e,"MailBoxSkinSkinText_004",r.grp_mail)}),r),r.btn_audio_open.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){r.showMD(e,"game_Mute",r.grp_audio_setting)}),r),r.btn_audio_close.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){r.showMD(e,"game_Mute",r.grp_audio_setting)}),r),r.btn_back.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){r.showMD(e,"MailBoxSkinSkinText_009",r.btn_back)}),r),r.showMatchBoardBtn(e.GTS.mgr.isInMatch()),r.onEmitter(mo.emitter,"closeMatchBoardBtn",(function(e){r.showMatchBoardBtn(e)})),mo.emitter.emit("juhuaPosition"),window.addEventListener("resize",(function(){r.isResize=!0})),e.GTS.mgr.initLoveGames(),mo.emitter.on("afterOpenChest",(function(){e.GTS.userCtrl.syncMoney(),r.updateWallet()}))},a.prototype.handleRoundIndexWrong=function(t){if(t){var r=e.COMM.layerMgr.getCurrentTableType();if(0==r&&(r=1),-1!=r){var o=t.type,a=t.code;if(null!=o&&null!=a&&!((a=a.toLowerCase()).indexOf("gd")>=0||a.indexOf("bp")>=0||a.indexOf("bg")>=0)){var i=!1;if(o==r&&(i=!0),i){e.GTS.mgr.refreshTableLuzhuData(t.code,(function(e){e&&mo.emitter.emit("roundIndexWrongRefreshTableList")}));var n=e.COMM.layerMgr.currLayerName+" roomList type : "+o;e.RCD.log_mgr.sendEvent_ClientRefresh(t.code,n,t.reason,t.logText,t.diff)}}}}},a.prototype.onHideRoomShortCutMenu=function(){this._roomShortCutMenu.setIsOpen(!1),this._roomShortCutMenu.closeList()},a.prototype.saveCurGameType=function(e){this._curGameType=e,this.updateWallet()},a.prototype.transformX=function(e){return 1599>e?1035:e>1599&&1684>e?1093:e>1684&&1769>e?1148:e>1769&&1854>e?1203:e>1854?1257:void 0},a.prototype.showMD=function(e,t,r){var o=this;o.label_md.text=mo.D.langCodeToTxt(t),o.grp_md.x=o.grp_button_bar.x+r.x+40-o.grp_md.width,o.grp_md.y=65,o.grp_md.alpha=1,o.grp_md.visible=!0,clearTimeout(o.handler),o.handler=setTimeout((function(){o.grp_md.alpha=1,o.grp_md.visible=!0,egret.Tween.get(o.grp_md).to({alpha:0},500).call((function(){egret.Tween.removeTweens(o.grp_md),o.grp_md.alpha=1,o.grp_md.visible=!1}))}),1e3)},a.prototype.resetButtonImage=function(e,t){if(e){var r=e.getChildByName("img");r&&(r.source=t)}},a.prototype.currencyCodeToTxt=function(e){return mo.D.langCodeToTxt("Currency_"+e)},a.prototype._onOnlineCountChanged=function(){this.label_online_num.text=e.UTIL.NUM.getSplitNumStr(e.GTS.mgr.onlineCount)},a.prototype.isRechargeBtnShow=function(){var t=-1==e.GTS.userCtrl.type,r=e.GW.mgr.hasBtn_recharge,o=!!e.GW.mgr.channel.rechargeUrl,a=e.GW.mgr.channelType==CONST.channelType.normal;return!t&&r&&o&&a},a.prototype.onExit=function(){o.prototype.onExit.call(this);var t=this;egret.Tween.removeTweens(t.label_notice_2),t.unEmitter(),t.sysMsgList.length=0,e.GTS.netMgr.unNotify(CONST.bstBizType.mailAll,t.updateUnreadMailNum,t),e.GTS.netMgr.unNotify(CONST.bstBizType.mailSingle,t.updateUnreadMailNum,t),e.GTS.netMgr.unNotify(CONST.notifyEvent.kickFromTable,t._onKickFromTable,t),mo.emitter.unAll("match_table_close"),mo.emitter.unAll("table_maintain"),mo.emitter.unAll("readyEnterGameRoomList"),mo.emitter.unAll("readyEnterGameRoom"),mo.emitter.unAll("appearBottomPanel"),mo.emitter.unAll("gameTypeChange"),mo.emitter.unAll("closeSoundSettingDlg"),mo.emitter.unAll("hideRoomShortCutMenu"),mo.emitter.unAll("roundIndexWrong"),mo.emitter.unAll("afterOpenChest"),mo.emitter.unAll("playerWantCloseGame")},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var t=this;t.label_user_id.text=e.GTS.userCtrl.nick4Dis,t.updateWallet(),t._onOnlineCountChanged(),t.img_wifi.visible=e.COMM.layerMgr.checkIfCurrInGameRoom()},a.prototype.setSingleUI=function(){this.btn_match_board.visible=e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)&&e.GTS.mgr.isInMatch()},a.prototype.showMailBox=function(e){var t=this;t.grp_mail&&(t.grp_mail.visible=e,t.grp_mail.includeInLayout=e)},a.prototype.showBackBtn=function(e){var t=this;t.btn_back&&(t.btn_back.visible=e,t.btn_back.includeInLayout=e)},a.prototype.showMatchBoardBtn=function(e){var t=this;t.btn_match_board&&(t.btn_match_board.visible=e,t.btn_match_board.includeInLayout=e)},a.prototype.showFooter=function(e){this.grp_footer&&(this.grp_footer.visible=e)},a.prototype.showBottomPanel=function(e){this.grp_bottom_panel&&(this.grp_bottom_panel.visible=e)},a.prototype.changeBg=function(e){void 0===e&&(e=!1);var t=this;e?(t.img_bg.source="dg_lobby_bg_2",t._defaultBgImg="dg_lobby_bg_2"):(t._defaultBgImg="dg_lobby_bg","dg_lobby_bg_2"==t.img_bg.source&&t.setPicBg())},a.prototype.setPicBg=function(){var t=this;if(null!=e.GW.mgr.getChannelTheme())t.img_bg.source=r.source_theme_bg[e.GW.mgr.getChannelTheme()]||t._defaultBgImg;else{var o=e.BASE.resHelper.getBackGroundImg(e.GW.mgr.channel);mo.R.getRemoteImg(o,(function(e){t.img_bg.source=e||t._defaultBgImg}))}},a.prototype.enterNextLayer=function(){var t=this,r=e.COMM.layerMgr.checkIfCurrInRoomList(),o=e.COMM.layerMgr.checkIfCurrInGameRoom(),a=(e.GW.mgr.ifGameSingle(),e.COMM.layerMgr.getLayerLength()),i=e.COMM.layerMgr.getGameTypeFromCurrLayerName();o?(t.showFooter(!1),t.showBottomPanel(!1),t._roomShortCutMenu.showList(i,[t.tableCtrl.code]),t.showBackBtn(a>1)):r?(t.showFooter(!0),t.showBottomPanel(!0),t._roomShortCutMenu.closeList(),t.changeBg(i==CONST.tableType.all),t.appearBottomPanel(!1),t.showBackBtn(a>1)):(t.showFooter(!0),t.showBottomPanel(!0),t.changeBg(),t._roomShortCutMenu.closeList()),t.grpGoodRoads.visible=t.checkGrpGoodRoadsShow(),t.updateWallet(),e.GW.mgr.ifGameSingle()&&t.setSingleUI(),t.updateSystemMenuState()},a.prototype.backPreLayer=function(){var t=this,r=e.COMM.layerMgr.checkIfCurrInRoomList(),o=e.COMM.layerMgr.checkIfCurrInGameRoom(),a=(e.GW.mgr.ifGameSingle(),e.COMM.layerMgr.getLayerLength()),i=e.COMM.layerMgr.getGameTypeFromCurrLayerName();o?(t.showBackBtn(a>1),t.showFooter(!1),t.showBottomPanel(!1)):r?(t.showBackBtn(a>1),t.showFooter(!0),t.showBottomPanel(!0),t.changeBg(),t._roomShortCutMenu.closeList(),i==CONST.tableType.all&&t.changeBg(!0)):(t.showFooter(!0),t.showBottomPanel(!0),t.changeBg(),t._roomShortCutMenu.closeList()),t.grpGoodRoads.visible=t.checkGrpGoodRoadsShow(),t.updateWallet(),e.GW.mgr.ifGameSingle()&&t.setSingleUI(),t.updateSystemMenuState()},a.prototype._onKickFromTable_maintain=function(){this._handleActivityDelay()},a.prototype._onKickFromTable=function(t){if(e.GTS.userCtrl.isTourist)e.COMM.layerMgr.checkAndPopAllLayerList((function(){var t=CONST.layer.layerClassToPush[CONST.layer.version][0],r=e.GC.gc.getClass(t);e.COMM.layerMgr.pushLayer(r),mo.TM.setTimeout((function(){mo.emitter.emit("backToDefault")}),100)}));else{if(e.COMM.layerMgr.getGameTypeFromCurrLayerName()==CONST.tableType.all)if(e.GW.mgr.ifGameSingle()){if(egret.isNative)return;window.location.reload(),e.muteMusic(!1),e.playMusic("main")}else e.COMM.layerMgr.popLayer();else this._handleActivityDelay();t&&t.kickType&&1==t.kickType&&mo.MSG.show(mo.D.langCodeToTxt("game_bet_for_no_out"))}},a.prototype._handleActivityDelay=function(t){void 0===t&&(t=!1),e.COMM.layerMgr.handleActivityDelay(),this.grp_wallet.visible=!1,t||mo.emitter.emit("closedlg");this.showMatchBoardBtn(!1)},a.prototype.setUnreadMailNum=function(){var r=this;r.label_unread_num.text="",r.grp_unread.visible=!1,r.isMailOpen&&-1!=e.GTS.userCtrl.type&&e.GTS.mgr.getMailList(1,t.MailState.UNREAD,(function(e){return e.mailList&&0!=e.mailList.length?(r.label_unread_num.text=e.mailList.length>9?"9+":e.mailList.length+"",void(r.grp_unread.visible=!0)):void(r.grp_unread.visible=!1)}))},a.prototype.updateUnreadMailNum=function(t){var r=this;if(r.isMailOpen&&-1!=e.GTS.userCtrl.type){var o=(t.event,CONST.mailEvent.bonus,0);setTimeout((function(){return r.grp_unread.visible?void("9+"!=r.label_unread_num.text&&(r.label_unread_num.text=8==parseFloat(r.label_unread_num.text)?"9+":parseFloat(r.label_unread_num.text)+1+"")):(r.label_unread_num.text="1",void(r.grp_unread.visible=!0))}),o)}},a.prototype.updateWallet=function(){var t=this;if(e.GTS.userCtrl.checkWallet(),e.GTS.mgr.isInMatch()||e.GW.mgr.isSingleWallet)t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.mgr.money4Dis.toFixed(2)));else{var r=[],o=0,a=e.GTS.userCtrl.getWalletMoney(CONST.gameWallet.GENERAL);a&&(r.push({name:mo.D.langCodeToTxt("g_general_wallet"),value:e.UTIL.NUM.getSplitNumStr(parseFloat(a.toFixed(2)))}),o+=a);for(var i=e.COMM.layerMgr.checkIfCurrInMTOBaccList()?CONST.tableType.baccarat:e.COMM.layerMgr.getCurrentTableType(),n=CONST.gameWallet.LIVE;n<=CONST.gameWallet.TICKET;n++){var s=e.GTS.userCtrl.getWalletMoney(n);e.GW.mgr.checkWalletWhereToShow(n,i)&&s&&(r.push({name:mo.D.langCodeToTxt(t.walletNames[n]),value:e.UTIL.NUM.getSplitNumStr(parseFloat(s.toFixed(2)))}),o+=s)}t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(o.toFixed(2))),t.list_wallet_item.dataProvider=new eui.ArrayCollection(r)}},a.prototype.showCurrency=function(){var t=this;if(!t.grp_currency.visible){var r=e.COMM.FX.getOwnCurrency();r&&"CNY"==r&&(t.label_currency.text=this.currencyCodeToTxt(r),t.grp_currency.visible=!0,setTimeout((function(){egret.Tween.get(t.grp_currency).to({alpha:0},500).call((function(){egret.Tween.removeTweens(t.grp_currency),t.grp_currency.alpha=1,t.grp_currency.visible=!1}))}),3e3))}},a.prototype.updateSystemMenuState=function(){var t=[];t.push({name:"${{topbar_setting_systemsetting}}",icon:"dg_btn_sys_setting",func:"_tap_btn_sysSetting"}),t.push({name:"${{topbar_setting_gamenotice}}",icon:"dg_btn_exclamation",func:"_tap_btn_user_agreement"}),(-1!=e.COMM.layerMgr.getCurrentTableType()||e.COMM.layerMgr.checkIfCurrInGameRoom()||e.GW.mgr.ifGameSingle()&&1==e.GW.mgr.getOpenGameArray().length||e.COMM.layerMgr.checkIfCurrInMTOBaccList())&&t.push({name:"${{topbar_setting_gamehelp}}",icon:"dg_btn_help",func:"_tap_btn_game_info"}),t.push({name:"${{history_asset_detail}}",icon:"dg_btn_asset",func:"_tap_btn_asset"}),t.push({name:"${{topbar_setting_userinfo}}",icon:"dg_btn_profile",func:"_tap_btn_playerInfo"}),this.list_system_menu_item.dataProvider=new eui.ArrayCollection(t)},a.prototype._click_list_system_menu_item=function(e){this.grp_system.visible=!1;var t=this[e.item.func];"function"==typeof t&&t()},a.prototype._tap_btn_sysSetting=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.OPEN_SETTING),e.COMM.SoundSettingDlg35.show()},a.prototype._tap_btn_playerInfo=function(){return e.playAudio("btnclick")},a.prototype._tap_btn_asset=function(){e.playAudio("btnclick")},a.prototype._tap_btn_user_agreement=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.AGREEMENT),t.UserAgreement.show()},a.prototype._tap_btn_game_info=function(){e.playAudio("btnclick");var t=e.COMM.layerMgr.getCurrentTableType();-1==t&&(t=e.COMM.layerMgr.getGameTypeFromCurrLayerName()),e.COMM.layerMgr.checkIfCurrInMTOBaccList()&&(t=CONST.tableType.baccarat),-1!=t&&(e.RCD.mgr.recordState(e.RCD.RcdState.GAME_RULES),e.COMM.RuleLoaderDG.show({type:t}))},a.prototype._tap_btn_audio_open=function(){e.playAudio("btnclick");this.btn_audio_open.visible=!1,this.btn_audio_close.visible=!0,e.setIsOpenAudio(!1),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_audio_open"),e.RCD.log_mgr.sendEvent_ClientButton("mute")},a.prototype._tap_btn_audio_close=function(){e.playAudio("btnclick");this.btn_audio_close.visible=!1,this.btn_audio_open.visible=!0,e.setIsOpenAudio(!0),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_audio_close"),e.RCD.log_mgr.sendEvent_ClientButton("mute")},a.prototype.initFullScreen=function(){document.fullscreenEnabled&&!egret.isNative&&(this._isFullScreen=window.innerHeight==screen.height)},a.prototype._tap_btn_mail_box=function(){return e.playAudio("btnclick"),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):(t.MailBox.show(),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_mail_box"),void e.RCD.log_mgr.sendEvent_ClientButton("mail"))},a.prototype._tap_btn_back=function(){e.playAudio("btnclick"),e.GTS.netMgr.request("gts.treasure.getActiveTreasure",{},(function(t){e.GTS.mgr.setTreasureInfo(t.treasureSyncData?t.treasureSyncData.mainInfo:{}),e.COMM.layerMgr.backToPrevLayer()}),(function(){e.GTS.mgr.setTreasureInfo({}),e.COMM.layerMgr.backToPrevLayer()})),mo.emitter.emit("backToDefault");this.showMatchBoardBtn(!1),mo.emitter.emit("juhuaPosition"),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_back"),e.RCD.log_mgr.sendEvent_ClientRoomListButton("btn_back"),e.RCD.log_mgr.sendEvent_ClientButton("back")},a.prototype._tap_btn_recharge=function(){return e.playAudio("btnclick"),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):(e.GW.mgr.openPage_recharge(),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_recharge"),void e.RCD.log_mgr.sendEvent_ClientButton("recharge"))},a.prototype._hideWallet=function(){this.grp_wallet.visible=!1;this.showMatchBoardBtn(e.GTS.mgr.isInMatch())},a.prototype._tap_wallet_touch_panel=function(){this._hideWallet()},a.prototype._tap_btn_money_wallet=function(){var t=this;e.GTS.mgr.isInMatch()||e.GW.mgr.isSingleWallet||(t.updateWallet(),t.grp_wallet.visible=!t.grp_wallet.visible,t.list_wallet_item.x="BJ_ElectronicRoomList"==e.COMM.layerMgr.currLayerName?5:230,e.RCD.log_mgr.sendEvent_Lobby_wait("btn_money_wallet"))},a.prototype._tap_btn_system_setting=function(){this.updateSystemMenuState(),this.grp_system.visible=!this.grp_system.visible,e.RCD.log_mgr.sendEvent_Lobby_wait("btn_system_setting")},a.prototype._tap_rect_grp_system_touch_panel=function(){this.grp_system.visible=!1},a.prototype._tap_btn_match_board=function(){if(e.playAudio("btnclick"),-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);var t=e.GTS.mgr.entryTable;if(t){var r,o=t.match.id,a=t.match.startTime,i=e.GTS.mgr.entryTable.code;e.GTS.mgr.getTableCtrlFromServerForMatchRank(i,(function(t){(r=t).matchUser?e.GTS.mgr.getMatchRankList(r.matchId,(function(t){r.rankList=t,e.COMM.MatchRankDlg.show({tableCtrl:r})})):e.GTS.mgr.getMatchRankList(o,(function(t){e.COMM.MatchRankDlg.show({rankList:t,startTime:a})}))}),(function(){}))}else mo.MSG.show(mo.D.langCodeToTxt("No_match"));e.RCD.log_mgr.sendEvent_Lobby_wait("btn_match_board")},a.prototype.preloadBeginAnimation=function(){var e=this;e.image_FullScreen.x,e.image_FullScreen.x=-2e3,e.image_FullScreen.visible=!0},a.prototype.showGameBeginAnimation1=function(){var e=this;e.image_FullScreen.visible=!0,e.image_rect.visible=!0,e.image_rect.alpha=.9},a.prototype.stopGameBeginAnimation1=function(){var e=this;e.animationTimer&&(mo.TM.clearInterval(e.animationTimer),e.animationTimer=null)},a.prototype.stopGameBeginAnimation2=function(){},a.prototype.checkGrpGoodRoadsShow=function(){return!!e.COMM.layerMgr.checkIfCurrInPreLobby()&&(!e.GW.mgr.ifGameSingle()&&(!!e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)&&0!=e.COMM.grtMgr.getGoodRoadRoomNumber()))},a.prototype.onGrtMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.grtWheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.grtWheel,r)}},a.prototype.grtWheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.list_grt.contentHeight<r.list_grt.height||(t.data<0&&(r.list_grt.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.list_grt.scrollV-=t.data*CONST.wheelRatio),r.list_grt.scrollV>=r.list_grt.contentHeight-r.list_grt.height&&(r.list_grt.scrollV=r.list_grt.contentHeight-r.list_grt.height),r.list_grt.scrollV<=0&&(r.list_grt.scrollV=0)))},a.prototype.refreshGoodRoadTip=function(){var r=this;if(e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)){r.list_grt.dataProvider=null;var o=e.GTS.mgr.getTableCtrlListWithGrt();r.grpGoodRoads.visible=r.checkGrpGoodRoadsShow(),r.img_grt_scroller_up.visible=o.length>3,r.img_grt_scroller_down.visible=o.length>3,r.list_grt.itemRenderer=t.GrtNeonItem,r.list_grt.dataProvider=new eui.ArrayCollection(o)}},a.prototype._tap_img_grt_scroller_up=function(){var e=this.grtScroller.viewport.scrollV-87;this.grtScroller.viewport.scrollV=0>e?0:e},a.prototype._tap_img_grt_scroller_down=function(){var e=this,t=e.grtScroller.viewport.scrollV+87;e.grtScroller.viewport.height+e.grtScroller.viewport.scrollV<e.grtScroller.viewport.contentHeight&&(e.grtScroller.viewport.scrollV=t)},a.prototype.updateSysMsg=function(t){var r=this;t.type==CONST.sysMsgType.bonus&&t.args&&(t.content=e.COMM.BONUS.getBonusMessage(t),t.is_multi_lang=!1),r.sysMsgList.push(t),!r.isPlay&&r.showSysMsg()},a.prototype._worldMsgRm=function(e){var t=this;t.sysMsgList=t.sysMsgList.filter((function(t){return t.id!=e})),t.cachePlayingSysMsgId==e&&(egret.Tween.removeTweens(t.label_notice_2),t.isPlay=!1,t.label_notice_2.x=1e4,t.showSysMsg())},a.prototype.showSysMsg=function(){var t=this;if(0!=t.sysMsgList.length&&!t.isPlay){var r=t.sysMsgList.shift();if(r&&r.content){var o=e.GTS.mgr.verifyEmoji(r.content);t.isPlay=!0,t.cachePlayingSysMsgId=r.id,egret.Tween.removeTweens(t.label_notice_2),t.label_notice_2.size=16,t.label_notice_2.text=o.replace(/\n/gi,""),t.label_notice_2.x=t.grp_notice_2.width;var a=-t.label_notice_2.width-10,i=(t.label_notice_2.width+t.grp_notice_2.width+2)/t.sysMsgSpeed;egret.Tween.get(t.label_notice_2).to({x:a},i).call((function(){egret.Tween.removeTweens(t.label_notice_2),t.isPlay=!1,t.showSysMsg()}),t)}}},a.prototype.switchButtomPanel=function(e){var t=this;t.bottomPanel&&t.bottomPanel.switch(e,t._curGameType)},a.prototype.switchAnimationList=function(t){if("BJ_ElectronicRoomList"==e.COMM.layerMgr.currLayerName)e.COMM.layerMgr.setCurrentTableType(t),e.COMM.layerMgr.backToPrevLayer();else{var r=e.BASE.AnimationListType.BACC;switch(t){case CONST.menu.specialType.match:r=e.BASE.AnimationListType.MATCH;break;case CONST.menu.specialType.quickPlay:r=e.BASE.AnimationListType.FASTIN;break;case CONST.tableType.all:r=e.BASE.AnimationListType.MTO;break;case CONST.tableType.baccarat:r=e.BASE.AnimationListType.BACC;break;case CONST.tableType.dragonTiger:r=e.BASE.AnimationListType.DT;break;case CONST.tableType.roulette:r=e.BASE.AnimationListType.RLT;break;case CONST.tableType.sicBo:r=e.BASE.AnimationListType.DICE;break;case CONST.tableType.slot:case CONST.tableType.trialslot:r=e.BASE.AnimationListType.SLOT;break;case CONST.tableType.BB:r=e.BASE.AnimationListType.BB;break;case CONST.tableType.niuNiu:r=e.BASE.AnimationListType.NN;break;case CONST.tableType.cashWheel:r=e.BASE.AnimationListType.CW;break;case CONST.tableType.BJ_Electronic:r=e.BASE.AnimationListType.JE}mo.emitter.emit("enterGameRoomList",r)}},a.prototype.readyEnterGameRoomList=function(t){t&&e.COMM.layerMgr.enterGameRoomList(t)},a.prototype.readyEnterGameRoom=function(t){t&&(t.isMultiRange?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null))},a.prototype.appearBottomPanel=function(e){var t=this;t.bottomPanel&&(e?t.bottomPanel.show():t.bottomPanel.hide())},a.prototype._tap_img_title=function(){null!=e.GW.mgr.channel.logoLinkUrl&&e.GW.mgr.channel.logoLinkUrl.length>0&&window.open(e.GW.mgr.channel.logoLinkUrl)},a.prototype.handlePlayerCloseGame=function(){e.COMM.layerMgr.handlePlayerCloseGame()},a}(mo.EUI.MenuLayer);t.BaseTopBarDG=o,__reflect(o.prototype,"G.COMM.BaseTopBarDG"),e.GC.gc.registerClass(o.__className,o)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t;!function(e){e[e.ad=0]="ad",e[e.roomListSelector=1]="roomListSelector"}(t=e.DGBottomPanelType||(e.DGBottomPanelType={}));var r=function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype.init=function(e,r,o){void 0===e&&(e=t.ad),void 0===r&&(r=CONST.tableType.baccarat);var a=this;a.roomListSelector.init(r,o),a.grp_ad_banner.visible=e==t.ad,a.grp_room_list_selector.visible=e==t.roomListSelector,a._type=e,a.grp_mask.mask=new egret.Rectangle(0,0,a.grp_mask.width,a.grp_mask.height)},r.prototype.switch=function(e,r){var o=this,a=function(){};if(e!=o._type){switch(e){case t.ad:a=function(){o.grp_room_list_selector.visible=!1,o.grp_ad_banner.visible=!0,o.adBanner.appear()},o.roomListSelector.hide(a);break;case t.roomListSelector:a=function(){o.grp_ad_banner.visible=!1,o.grp_room_list_selector.visible=!0,o.roomListSelector.appear(r)},o.adBanner.hide(a)}o._type=e}},r.prototype.hide=function(e){var t=this,r=egret.Ease.sineOut;t.grp_all.y=0,t.grp_all.alpha=1,t.rmTweens(t.grp_all),t.getTween(t.grp_all,{loop:!1}).to({alpha:0,y:110},250,r).call((function(){e&&e(),t.visible=!1}))},r.prototype.show=function(e){var t=this,r=egret.Ease.sineOut;t.grp_all.y=110,t.grp_all.alpha=0,t.visible=!0,t.rmTweens(t.grp_all),t.getTween(t.grp_all,{loop:!1}).to({alpha:1,y:0},250,r).call((function(){e&&e()}))},r}(mo.EUI.Comp);e.BaseTopBarDGBottomPanel=r,__reflect(r.prototype,"G.COMM.BaseTopBarDGBottomPanel")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;this.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onShortcutItemMouseOver.bind(t),t),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onShortcutItemMouseOver.bind(t),t),t.rect_tip_bg.width=t.label_game_name.textWidth+16},t.prototype.onShortcutItemMouseOver=function(e){var t=this;switch(e.type){case mouse.MouseEvent.MOUSE_OVER:t.grp_tip.visible=!0;break;case mouse.MouseEvent.MOUSE_OUT:t.grp_tip.visible=!1}t.rect_tip_bg.width=t.label_game_name.textWidth+16},t}(mo.EUI.ItemRenderer);e.LobbyGameItemRenderer=t,__reflect(t.prototype,"G.COMM.LobbyGameItemRenderer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.touchChildren=!0,t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t.prototype._tap_grp_game=function(){mo.emitter.emit("enterGame",this.data.gameType)},t}(mo.EUI.ItemRenderer);e.LobbyItemRenderer=t,__reflect(t.prototype,"G.COMM.LobbyItemRenderer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(t){function o(){var r,o,a,i=t.call(this)||this;return i._cbFunc=function(){},i.loopAnim=[],i._animSetting=((r={})[CONST.tableType.all]={anim:e.COMM.AnimName.LobbyItem_MTO,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r[CONST.tableType.baccarat]={anim:e.COMM.AnimName.LobbyItem_Bacc,animPlayType:e.COMM.AnimPlayType.LOOP_REVERSE,changeSpeed:160},r[CONST.tableType.dragonTiger]={anim:e.COMM.AnimName.LobbyItem_DT,animPlayType:e.COMM.AnimPlayType.LOOP_REVERSE,changeSpeed:130},r[CONST.tableType.sicBo]={anim:e.COMM.AnimName.LobbyItem_Sicbo,animPlayType:e.COMM.AnimPlayType.LOOP_REVERSE,changeSpeed:160},r[CONST.tableType.roulette]={anim:e.COMM.AnimName.LobbyItem_Rlt,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r[CONST.tableType.slot]={anim:e.COMM.AnimName.LobbyItem_Slot,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:200},r[CONST.tableType.trialslot]={anim:e.COMM.AnimName.LobbyItem_Slot,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:200},r[CONST.tableType.niuNiu]={anim:e.COMM.AnimName.LobbyItem_NN,animPlayType:e.COMM.AnimPlayType.LOOP_REVERSE,changeSpeed:160},r[CONST.tableType.BB]={anim:e.COMM.AnimName.LobbyItem_BB,animPlayType:e.COMM.AnimPlayType.LOOP_REVERSE,changeSpeed:160},r[CONST.tableType.anchor]={anim:e.COMM.AnimName.LobbyItem_Anchor,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r[CONST.tableType.cashWheel]={anim:e.COMM.AnimName.LobbyItem_CashWheel,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:80},r[CONST.tableType.BJ_Electronic]={anim:e.COMM.AnimName.LobbyItem_BJ_Electronic,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:80},r[CONST.menu.specialType.match]={anim:e.COMM.AnimName.LobbyItem_Match,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r[CONST.menu.specialType.quickPlay]={anim:e.COMM.AnimName.LobbyItem_Quick,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r[CONST.menu.specialType.chest]={anim:e.COMM.AnimName.LobbyItem_Chest,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r[CONST.menu.specialType.luckybag]={anim:e.COMM.AnimName.LobbyItem_luckybag,animPlayType:e.COMM.AnimPlayType.LOOP,changeSpeed:160},r),i._animObjSetting_normal=((o={})[CONST.tableType.all]={right:-10},o[CONST.tableType.baccarat]={right:0,verticalCenter:7},o[CONST.tableType.roulette]={scale:.9,right:-40,verticalCenter:13},o[CONST.tableType.niuNiu]={scale:.9,right:0,verticalCenter:5},o[CONST.menu.specialType.chest]={scale:.7,right:0,verticalCenter:5},o[CONST.tableType.BJ_Electronic]={scale:.8,right:0,verticalCenter:-5},o),i._animObjSetting_long=((a={})[CONST.tableType.dragonTiger]={right:-7},a[CONST.menu.specialType.chest]={scale:.7,right:7,verticalCenter:5},a[CONST.tableType.BJ_Electronic]={scale:.8,right:40,verticalCenter:-5},a),i}return __extends(o,t),o.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.data&&!e._isdataSet&&(e._gameType=e.data.gameType,e._cbFunc=e.data.func,e._size=e.data.sizeType,e.setSize(e._gameType,e._size),e.setBasicUI(e._gameType),e.setAnimation(e._gameType),e.setMouseEvent(),e._isdataSet=!0)},o.prototype.setAnimation=function(t){var r=this;if(!r.loopAnim.length){var o,a,i=r._animSetting[t].anim,n=r._animSetting[t].animPlayType,s=r._animSetting[t].changeSpeed;switch(n){case e.COMM.AnimPlayType.LOOP:o=e.COMM.ANIMATION.playLoop(r.img_animation,i,s);break;case e.COMM.AnimPlayType.LOOP_REVERSE:o=e.COMM.ANIMATION.playReverse(r.img_animation,i,s)}r.loopAnim.push(o),a=e.COMM.ANIMATION.playLoop(r.img_hover,e.COMM.AnimName.LobbyItem_Hover),r.loopAnim.push(a)}},o.prototype.setSize=function(t,r){void 0===r&&(r=e.BASE.LobbyItemDGSizeType.NORMAL);var o=this,a=null;switch(r){case e.BASE.LobbyItemDGSizeType.NORMAL:o.grp.width=420,o.grp.height=155,o.img_hover.height=136,(a=o._animObjSetting_normal[t])?(o.img_animation.scaleX=null!=a.scale?a.scale:1,o.img_animation.scaleY=o.img_animation.scaleX,o.grp_animation.right=null!=a.right?a.right:-60,o.grp_animation.verticalCenter=null!=a.verticalCenter?a.verticalCenter:0):o.grp_animation.right=-60,o.grp_mask.mask=new egret.Rectangle(o.grp_mask.x,o.grp_mask.y,365,Math.floor(.68*o.grp.height));break;case e.BASE.LobbyItemDGSizeType.FLAT:o.grp.width=420,o.grp.height=120,o.img_hover.height=112,(a=o._animObjSetting_normal[t])?(o.img_animation.scaleX=null!=a.scale?a.scale:1,o.img_animation.scaleY=o.img_animation.scaleX,o.grp_animation.right=null!=a.right?a.right:-60,o.grp_animation.verticalCenter=null!=a.verticalCenter?a.verticalCenter:0):o.grp_animation.right=-60,o.grp_mask.mask=new egret.Rectangle(o.grp_mask.x,o.grp_mask.y,365,Math.floor(.68*o.grp.height));break;case e.BASE.LobbyItemDGSizeType.LONG:o.grp.width=580,o.grp.height=155,o.img_hover.height=136,(a=o._animObjSetting_long[t])?(o.grp_animation.right=null!=a.right?a.right:3,o.grp_animation.verticalCenter=null!=a.verticalCenter?a.verticalCenter:0):o.grp_animation.right=3,o.grp_mask.mask=new egret.Rectangle(o.grp_mask.x,o.grp_mask.y,595,Math.floor(.68*o.grp.height));break;case e.BASE.LobbyItemDGSizeType.LONG_FLAT:o.grp.width=580,o.grp.height=120,o.img_hover.height=112,(a=o._animObjSetting_long[t])?(o.grp_animation.right=null!=a.right?a.right:3,o.grp_animation.verticalCenter=null!=a.verticalCenter?a.verticalCenter:0,o.img_animation.scaleX=null!=a.scale?a.scale:1,o.img_animation.scaleY=null!=a.scale?a.scale:1):o.grp_animation.right=3,o.grp_mask.mask=new egret.Rectangle(o.grp_mask.x,o.grp_mask.y,595,Math.floor(.68*o.grp.height))}},o.prototype.setBasicUI=function(e){var t=this;t.label_gameType.text=r.gameNameLobby[e],6==e?("my_mm"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(("hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(t.label_gameType.height=2*t.label_gameType.height),t.label_gameType.top=35):2==e&&"vi_vn"==mo.PROJ.lang&&(t.label_gameType.height=60,t.label_gameType.top=40,t.label_gameType.verticalAlign="middle"),t.img_icon.source=r.source_lobby_dg[e].icon},o.prototype.setMouseEvent=function(){var e=this;e.mouse_trigger.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.onMouseOver,e),e.mouse_trigger.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.onMouseOut,e),e.mouse_trigger.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),e.mouse_trigger.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e)},o.prototype.removeMouseEvent=function(){var e=this;e.mouse_trigger.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.onMouseOver,e),e.mouse_trigger.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.onMouseOut,e),e.mouse_trigger.removeEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),e.mouse_trigger.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e)},o.prototype.onMouseOver=function(){egret.Tween.get(this.img_hover).to({alpha:1},350),this.img_hover.visible=!0},o.prototype.onMouseOut=function(){var e=this;egret.Tween.get(e.img_hover).to({alpha:0},350),e.img_click_effect.visible=!1,e.img_hover.visible=!1},o.prototype.onTouchBegin=function(){this.img_click_effect.visible=!0},o.prototype.onTouchEnd=function(){this.img_click_effect.visible=!1},o.prototype._tap_mouse_trigger=function(){var t=this;if(t._cbFunc&&t._cbFunc(),t._gameType==CONST.menu.specialType.chest||t._gameType==CONST.menu.specialType.luckybag)e.GTS.netMgr.request("gts.treasure.getActiveTreasure",{},(function(t){t.treasureSyncData?(e.GTS.mgr.setTreasureInfo(t.treasureSyncData.mainInfo),e.GTS.mgr.getTreasureInfo().eventEndTime.getTime()>mo.DATE.now()?e.COMM.TreasureChest.show():mo.MSG.show(mo.D.langCodeToTxt("活動已經結束"))):mo.MSG.show(mo.D.langCodeToTxt("活動已經結束"))}),(function(e){console.log("err",e)}));else if(e.COMM.layerMgr.baseTopBar){e.COMM.layerMgr.baseTopBar.switchAnimationList(t._gameType);var r="";switch(t._gameType){case CONST.tableType.all:r="menu_tableAll";break;case CONST.tableType.baccarat:r="menu_baccarat";break;case CONST.tableType.dragonTiger:r="menu_dragonTiger";break;case CONST.tableType.sicBo:r="menu_sicBo";break;case CONST.tableType.roulette:r="menu_roulette";break;case CONST.tableType.slot:r="menu_slot";break;case CONST.tableType.trialslot:r="menu_trialslot";break;case CONST.tableType.niuNiu:r="menu_niuNiu";break;case CONST.tableType.anchor:r="menu_anchor";break;case CONST.tableType.cashWheel:r="menu_cashWheel";break;case CONST.tableType.BJ_Electronic:r="menu_bj_electrinic";break;case CONST.menu.specialType.quickPlay:r="menu_quickJoin";break;case CONST.menu.specialType.match:r="menu_match"}e.RCD.log_mgr.sendEvent_Lobby_wait(r)}},o.prototype.stopAnimation=function(){var e=this;if(e.loopAnim.length){for(var t=0;t<e.loopAnim.length;t++)mo.TM.clearInterval(e.loopAnim[t]),e.loopAnim[t]=null;e.img_animation.source=""}},o.prototype.onExit=function(){this.stopAnimation(),this.removeMouseEvent()},o}(mo.EUI.ItemRenderer);t.LobbyItemRendererDG=o,__reflect(o.prototype,"G.COMM.LobbyItemRendererDG"),e.GC.gc.registerClass(o.__className,o)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(mo.EUI.ItemRenderer);e.LobbyWalletItemRenderer=t,__reflect(t.prototype,"G.COMM.LobbyWalletItemRenderer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._childrenCreated=function(){},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.light.visible=!1,e.color_mt.visible=!1,e.color_bacc.visible=!1,e.color_dt.visible=!1,e.color_sicbo.visible=!1,e.color_rlt.visible=!1,e.color_slot.visible=!1,e.scroller.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(){e.showPicture()}),e)},r.prototype.onExit=function(){t.prototype.onExit.call(this)},r.prototype._tap_grp_mt=function(){var e=this;e.title_mt.currentState="down",e.icon_mt.currentState="down",e.light.x=e.grp_mt.x-6,e.light.visible=!0,e.color_mt.visible=!0,e.enterRoomList(0)},r.prototype._tap_grp_bacc=function(){var e=this;e.title_bacc.currentState="down",e.icon_bacc.currentState="down",e.light.x=e.grp_bacc.x-6,e.light.visible=!0,e.color_bacc.visible=!0,e.enterRoomList(1)},r.prototype._tap_grp_dt=function(){var e=this;e.title_dt.currentState="down",e.icon_dt.currentState="down",e.light.x=e.grp_dt.x-6,e.light.visible=!0,e.color_dt.visible=!0,e.enterRoomList(2)},r.prototype._tap_grp_sicbo=function(){var e=this;e.title_sicbo.currentState="down",e.icon_sicbo.currentState="down",e.light.x=e.grp_sicbo.x-6,e.light.visible=!0,e.color_sicbo.visible=!0,e.enterRoomList(3)},r.prototype._tap_grp_rlt=function(){var e=this;e.title_rlt.currentState="down",e.icon_rlt.currentState="down",e.light.x=e.grp_rlt.x-6,e.light.visible=!0,e.color_rlt.visible=!0,e.enterRoomList(4)},r.prototype._tap_grp_slot=function(){var t=this;t.title_slot.currentState="down",t.icon_slot.currentState="down",t.light.x=t.grp_slot.x-6,t.light.visible=!0,t.color_slot.visible=!0,e.GTS.mgr.getKindsOfPPGames(12,(function(){})),t.enterRoomList(5)},r.prototype.enterRoomList=function(t){var r=this;switch(t){case 0:e.GTS.mgr.getMultiRangeList((function(){r.tableCtrl&&r.tableCtrl.exitTable((function(){r.tableCtrl=null})),mo.emitter.emit(CONST.enterTabelListEvent.mto)})),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_MULTI);break;case 1:mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_BACC);break;case 2:mo.emitter.emit(CONST.enterTabelListEvent.dt),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_DT);break;case 3:mo.emitter.emit(CONST.enterTabelListEvent.sicbo),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_DICE);break;case 4:mo.emitter.emit(CONST.enterTabelListEvent.rlt),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_RLT);break;case 5:mo.emitter.emit(CONST.enterTabelListEvent.slot),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_PP)}e.muteMusic(!1),e.playMusic("main")},r.prototype._tap_img_right=function(){var e=this;e.scroller.viewport.scrollH+=80,e.scroller.viewport.scrollH>240&&(e.scroller.viewport.scrollH=240),e.showPicture()},r.prototype._tap_img_left=function(){var e=this;e.scroller.viewport.scrollH-=80,e.scroller.viewport.scrollH<0&&(e.scroller.viewport.scrollH=0),e.showPicture()},r.prototype.showPicture=function(){var e=this;e.scroller.viewport.scrollH<24?(e.img_right.visible=!0,e.img_left.visible=!1):e.scroller.viewport.scrollH>210&&(e.img_right.visible=!1,e.img_left.visible=!0)},r}(mo.EUI.Layer);t.MainLayer=r,__reflect(r.prototype,"G.COMM.MainLayer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype.onEnter=function(){o.prototype.onEnter.call(this);var t=this;t.animationList.x=350,t.animationList.y=70,e.GTS.netMgr.request("gts.treasure.getActiveTreasure",{},(function(r){r.treasureSyncData&&e.GTS.mgr.setTreasureInfo(r.treasureSyncData.mainInfo),t.enterDefaultPage(e.COMM.layerMgr.retriveCurrentTableType(),(function(){mo.PROJ.tableCode&&t.gotoGame(mo.PROJ.tableCode)}))}),(function(r){console.log("err",r),t.enterDefaultPage(e.COMM.layerMgr.retriveCurrentTableType(),(function(){mo.PROJ.tableCode&&t.gotoGame(mo.PROJ.tableCode)}))})),t.setQRcodeImg(),mo.emitter.on("enterGameRoomList",t.enterGameRoomList,t),mo.emitter.on("backToDefault",t.backToDefault,t),mo.emitter.emit("appearBottomPanel",1)},a.prototype.onExit=function(){o.prototype.onExit.call(this),mo.emitter.unAll("enterGameRoomList"),mo.emitter.unAll("backToDefault")},a.prototype.setQRcodeImg=function(){var t=this,r=e.BASE.resHelper.getH5QrCode(e.GW.mgr.channel);e.getRemoteImg(r,(function(e,o){r==o&&(t.img_qr.source=e||"",t.grp_qr.visible=""!=t.img_qr.source)}))},a.prototype.gotoGame=function(t){if(t){var r=this,o=function(t){var o=[CONST.tableType.BB,CONST.tableType.all,CONST.tableType.slot,CONST.tableType.BJ_Electronic],a=t.type,i=r._getGameApiByType(a);-1==o.indexOf(a)&&i&&e.GW.mgr.ifGameOpen(i)&&(r.readyEnterGameRoom(t),mo.PROJ.tableCode=null)},a=e.GTS.mgr.getTableCtrl(t);a?o(a):e.GTS.mgr.getTableCtrlFromServer(t,(function(e){o(e)}),(function(){}))}},a.prototype._getGameApiByType=function(e){for(var t in r.gameType){if(r.gameType[t]==e)return t}return null},a.prototype.readyEnterGameRoom=function(t){t&&(t.isMultiRange?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null))},a.prototype.enterDefaultPage=function(o,a){var i=this;if(i.animationList){var n=-1,s="",l=!1;if(-1==o){var c=e.GW.mgr.defaultGameTypeFromURL;if(n=i.animationList.getAnimationListTypeByTableType(c),s=i.animationList.getClassNameByTableType(c),-1!=n&&""!=s&&e.GW.mgr.ifGameOpenByTableType(c))i.animationList.setDefaultPage(n,s),i.animationList.showList(n,s,!0,(function(){a&&a()})),l=!0,e.COMM.layerMgr.baseTopBar.showBackBtn(!1);else if(e.GW.mgr.ifGameSingle()&&i.animationList.getNowOpenGamesList_onlyGame()&&1==i.animationList.getNowOpenGamesList_onlyGame().length){var p=e.COMM.layerMgr.checkSingleGameType();n=i.animationList.getAnimationListTypeByTableType(p),s=i.animationList.getClassNameByTableType(p),-1!=n&&""!=s&&(i.animationList.setDefaultPage(n,s),i.animationList.showList(n,s,!0,(function(){a&&a()})),l=!0,e.COMM.layerMgr.baseTopBar.showBackBtn(!1))}}if(!l){var _=e.BASE.AnimationListType.LOBBY,u="LobbyItemRendererDG";if(i.animationList.setDefaultPage(_,u),n=i.animationList.getAnimationListTypeByTableType(o),s=i.animationList.getClassNameByTableType(o),-1!=n&&""!=s)i.animationList.showList(n,s,!0,(function(){a&&a()}));else{c=e.GW.mgr.defaultGameTypeFromURL;0==o&&e.GW.mgr.ifGameOpenByTableType(c)?(n=i.animationList.getAnimationListTypeByTableType(c),s=i.animationList.getClassNameByTableType(c),i.animationList.setDefaultPage(n,s),i.animationList.showList(n,s,!0,(function(){a&&a()}))):i.animationList.showList(_,u,!0,(function(){a&&a()}))}if(e.GW.mgr.isDgt||1==e.GW.mgr.getOpenGameArray().length){for(var h=r.games,m=0,d=0;d<h.length;d++){var b=h[d];e.GW.mgr.ifGameOpen(b)&&(m+=1)}e.COMM.layerMgr.baseTopBar.showBackBtn(m>1&&!e.GW.mgr.isDgt)}else e.COMM.layerMgr.baseTopBar.showBackBtn(-1!=n&&n!=_)}var g=i.animationList.getDefaultType(),y=i.animationList.getNowListType(),f=i.animationList.getTableTypeByAnimationListType(y);e.COMM.layerMgr.setCurrentTableType(f),mo.emitter.emit("gameTypeChange",f),g!=e.BASE.AnimationListType.LOBBY&&e.COMM.layerMgr.baseTopBar.switchButtomPanel(t.DGBottomPanelType.roomListSelector),i.showSelectorOrAd(),e.COMM.layerMgr.baseTopBar.updateWallet()}},a.prototype.backToDefault=function(){var e=this;if(e.animationList){var t=e.animationList.getDefaultType();e.enterGameRoomList(t)}},a.prototype.enterGameRoomList=function(t){var r=this;if(t&&r.animationList&&e.COMM.layerMgr.baseTopBar){e.COMM.layerMgr.retriveCurrentTableType();var o="";switch(t){case e.BASE.AnimationListType.FASTIN:return void r.specialEnter(1);case e.BASE.AnimationListType.LOBBY:o="LobbyItemRendererDG";break;case e.BASE.AnimationListType.MTO:if(!r.animationList.isNowPlaying())var a=e.COMM.layerMgr.enterMTORoomList((function(){r.animationList.onlyPlayStartAnimation((function(){mo.emitter.emit("appearBottomPanel",0),e.COMM.layerMgr.setCurrentTableType(CONST.tableType.all),a&&a()}))}));return;case e.BASE.AnimationListType.BACC:o="BaccRoomListItemNeon";break;case e.BASE.AnimationListType.DT:o="DTRoomListItemNeon";break;case e.BASE.AnimationListType.DICE:o="DiceRoomRendererNeon";break;case e.BASE.AnimationListType.RLT:o="RltRoomListItemNeon";break;case e.BASE.AnimationListType.SLOT:o="SlotGameItem";break;case e.BASE.AnimationListType.BB:break;case e.BASE.AnimationListType.NN:o="NNRoomListItemNeon";break;case e.BASE.AnimationListType.CW:o="ARltRoomListItem";break;case e.BASE.AnimationListType.JE:r.animationList.isNowPlaying()||e.COMM.layerMgr.enterBlackJackElectronic((function(){e.COMM.layerMgr.setCurrentTableType(CONST.tableType.BJ_Electronic),e.COMM.layerMgr.baseTopBar.updateWallet()}))}0!=o.length&&(t==r.animationList.getDefaultType()&&(e.COMM.layerMgr.baseTopBar.showBackBtn(!1),r.showSelectorOrAd()),r.animationList.enterRoomList(t,o,(function(){var o=r.animationList.getNowListType(),a=r.animationList.getTableTypeByAnimationListType(o);e.COMM.layerMgr.setCurrentTableType(a),mo.emitter.emit("gameTypeChange",a),t!=r.animationList.getDefaultType()&&r.animationList.getDefaultType()==e.BASE.AnimationListType.LOBBY&&e.COMM.layerMgr.baseTopBar.showBackBtn(!e.GW.mgr.isDgt),e.COMM.layerMgr.baseTopBar.updateWallet(),r.showSelectorOrAd()})))}},a.prototype.specialEnter=function(t){e.GTS.mgr.retrieveTableCtrlToFastEnterGame(t,(function(t){if(t){var r=t.isMultiRange,o=t.roomLimit,a=function(){e.COMM.layerMgr.fastEnterGameRoom(t,t.type)};r&&o?e.GTS.mgr.setRangeList4Multi(o,(function(){a()})):a()}}))},a.prototype.showSelectorOrAd=function(){var r=this;if(r.animationList){var o=r.animationList.getNowListType(),a=e.GW.mgr.getOpenGameArray();e.COMM.layerMgr.baseTopBar.switchButtomPanel(o!=r.animationList.getDefaultType()?e.GW.mgr.ifGameSingle()?a.length>1?t.DGBottomPanelType.roomListSelector:t.DGBottomPanelType.ad:t.DGBottomPanelType.roomListSelector:r.animationList.getDefaultType()==e.BASE.AnimationListType.LOBBY||1==e.GW.mgr.getOpenGameArray().length?t.DGBottomPanelType.ad:t.DGBottomPanelType.roomListSelector)}},a}(mo.EUI.Layer);t.LobbyLayerDG=o,__reflect(o.prototype,"G.COMM.LobbyLayerDG"),e.GC.gc.registerClass(o.__className,o)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(t){function o(){return t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=e.COMM.layerMgr.retriveCurrentTableType();r.enterDefaultPage(o,(function(){mo.PROJ.tableCode&&r.gotoGame(mo.PROJ.tableCode)})),mo.emitter.on("enterGameRoomList",r.enterGameRoomList,r),mo.emitter.on("backToDefault",r.backToDefault,r)},o.prototype.onExit=function(){t.prototype.onExit.call(this),mo.emitter.unAll("enterGameRoomList"),mo.emitter.unAll("backToDefault")},o.prototype.gotoGame=function(t){if(t){var r=this,o=function(t){var o=[CONST.tableType.BB,CONST.tableType.all,CONST.tableType.slot,CONST.tableType.BJ_Electronic],a=t.type,i=r._getGameApiByType(a);-1==o.indexOf(a)&&i&&e.GW.mgr.ifGameOpen(i)&&(r.readyEnterGameRoom(t),mo.PROJ.tableCode=null)},a=e.GTS.mgr.getTableCtrl(t);a?o(a):e.GTS.mgr.getTableCtrlFromServer(t,(function(e){o(e)}),(function(){}))}},o.prototype._getGameApiByType=function(e){for(var t in r.gameType){if(r.gameType[t]==e)return t}return null},o.prototype.readyEnterGameRoom=function(t){t&&(t.isMultiRange?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null))},o.prototype.enterDefaultPage=function(t,o){var a=!1;if(-1==t){var i=e.GW.mgr.defaultGameTypeFromURL;if(e.GW.mgr.ifGameOpenByTableType(i))e.COMM.layerMgr.setCurrentTableType(i),e.COMM.layerMgr.baseTopBar.focusScrollGameType(i),e.COMM.layerMgr.enterGameRoomList(i,!1,null,o),a=!0,e.COMM.layerMgr.baseTopBar.showBackBtn(!1);else if(e.GW.mgr.ifGameSingle()){var n=e.COMM.layerMgr.checkSingleGameType();-1==n&&(n=e.COMM.layerMgr.baseTopBar.getDefaultGameType()),e.COMM.layerMgr.setCurrentTableType(n),e.COMM.layerMgr.baseTopBar.focusScrollGameType(n),e.COMM.layerMgr.enterGameRoomList(n,!1,null,o),a=!0,e.COMM.layerMgr.baseTopBar.showBackBtn(!1)}}if(!a){i=e.GW.mgr.defaultGameTypeFromURL;if(0==t&&e.GW.mgr.ifGameOpenByTableType(i)?(e.COMM.layerMgr.setCurrentTableType(i),e.COMM.layerMgr.baseTopBar.focusScrollGameType(i),e.COMM.layerMgr.enterGameRoomList(i,!1,null,o)):(-1==t&&(t=e.COMM.layerMgr.baseTopBar.getDefaultGameType()),e.COMM.layerMgr.setCurrentTableType(t),e.COMM.layerMgr.baseTopBar.focusScrollGameType(t),e.COMM.layerMgr.enterGameRoomList(t,!1,null,o)),e.GW.mgr.isDgt||1==e.GW.mgr.getOpenGameArray().length){for(var s=r.games,l=0,c=0;c<s.length;c++){var p=s[c];e.GW.mgr.ifGameOpen(p)&&(l+=1)}e.COMM.layerMgr.baseTopBar.showBackBtn(l>1&&!e.GW.mgr.isDgt)}else{var _=e.COMM.layerMgr.checkIfCurrInGameRoom();e.COMM.layerMgr.baseTopBar.showBackBtn(_)}}var u=e.COMM.layerMgr.getCurrentTableType();e.COMM.layerMgr.setCurrentTableType(u),mo.emitter.emit("gameTypeChange",u),e.COMM.layerMgr.baseTopBar.updateWallet()},o.prototype.backToDefault=function(){var t=e.COMM.layerMgr.baseTopBar.getDefaultGameType();this.enterGameRoomList(t)},o.prototype.enterGameRoomList=function(t){if(t&&-1!=t){switch(t){case CONST.tableType.all:var r=e.COMM.layerMgr.enterMTORoomList((function(){e.COMM.layerMgr.setCurrentTableType(CONST.tableType.all),r&&r()}));break;case e.BASE.AnimationListType.JE:e.COMM.layerMgr.enterBlackJackElectronic((function(){e.COMM.layerMgr.setCurrentTableType(CONST.tableType.BJ_Electronic),e.COMM.layerMgr.baseTopBar.updateWallet()}));break;default:e.COMM.layerMgr.enterGameRoomList(t),e.COMM.layerMgr.setCurrentTableType(t)}mo.emitter.emit("gameTypeChange",t),e.COMM.layerMgr.baseTopBar.updateWallet()}},o.prototype.specialEnter=function(t){e.GTS.mgr.retrieveTableCtrlToFastEnterGame(t,(function(t){if(t){var r=t.isMultiRange,o=t.roomLimit,a=function(){e.COMM.layerMgr.fastEnterGameRoom(t,t.type)};r&&o?e.GTS.mgr.setRangeList4Multi(o,(function(){a()})):a()}}))},o.prototype.showSelectorOrAd=function(){},o}(mo.EUI.Layer);t.LobbyLayerPC35=o,__reflect(o.prototype,"G.COMM.LobbyLayerPC35"),e.GC.gc.registerClass(o.__className,o)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.moveTime=2e3,e.waitTime=12e3,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this._skinName="RoomListSkin"},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.grp_ads.mask=new egret.Rectangle(0,0,e.grp_ads.width,e.grp_ads.height)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;mo.emitter.on("enterMatchFromeAD",(function(t){mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_BACC),mo.emitter.emit("enterMatchFromeADForPC",t)})),mo.PROJ.isPc&&e.GW.mgr.ifGameSingle()&&(r.pcRoomListScroller.height=540,r.pcRoomListScroller.horizontalCenter=0,r.grp_ads.horizontalCenter=0,r.grp_match.horizontalCenter=0)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;if(e.GTS.mgr.entryTable){var o=e.GTS.mgr.entryTable;if(o.match){var a=e.BASE.resHelper.getMatchEntryImg(o.match.id);e.getRemoteImg(a,(function(t,o){a==o&&(r.img_matchBg.source=t||"match_entry_pc",e.GW.mgr.ifGameSingle()?(r.grp_ads.visible=!0,r.grp_match.visible=!1):(r.grp_ads.visible=!1,r.grp_match.visible=!0))})),r.img_event0.source="ntc_event"}}else r.grp_ads.visible=!0,r.grp_match.visible=!1,r.currAds=r.img_event0,r.currAds.x=0,r.nextAds=r.img_event1,r.nextAds.x=r.grp_ads.width,r.ads=[],e.GTS.mgr.getAdList((function(t){var o,a=t,i=0;if(a.length>0){r.totalPage=a.length;for(var n=void 0,s=function(t){n=a[t].imgUrl,e.getRemoteImg(n,(function(e){(o={}).source=e||"ntc_event",o.ads=a[t],r.ads.push(o),++i==a.length&&r.initAds()}))},l=0,c=a.length;c>l;l++)s(l)}else r.totalPage=1,(o={}).source="ntc_event",o.ads=null,r.ads.push(o),r.initAds()}));r.pcRoomListScroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,r.onListMouseOver.bind(r,r.pcRoomListScroller),r),r.pcRoomListScroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,r.onListMouseOver.bind(r,r.pcRoomListScroller),r)},r.prototype.onListMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r)}},r.prototype.wheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.list_room.contentHeight<r.list_room.height||(t.data<0&&(r.list_room.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.list_room.scrollV-=t.data*CONST.wheelRatio),r.list_room.scrollV>=r.list_room.contentHeight-r.list_room.height&&(r.list_room.scrollV=r.list_room.contentHeight-r.list_room.height),r.list_room.scrollV<=0&&(r.list_room.scrollV=0)))},r.prototype.initAds=function(){var e=this;if(e.curr=e.ads.shift(),e.currAds.source=e.curr.source,e.initIndex(),e.ads.length>=1){e.next=e.ads.shift(),e.nextAds.source=e.next.source;var t=setTimeout((function(){e.moveAds(),clearTimeout(t)}),e.waitTime)}},r.prototype.initIndex=function(){var e=this;e.currPage=1;for(var t=0;t<e.totalPage;t++){var r=new eui.Rect(12,12,9474192);0==t&&(r.fillColor=16711680),r.name="rect_"+(t+1),r.ellipseWidth=12,r.ellipseHeight=12,e.grp_index.addChild(r)}},r.prototype.moveAds=function(){var t=this,r=t.grp_index.getChildByName("rect_"+t.currPage);r.fillColor=9474192,t.currPage++,t.currPage>t.totalPage&&(t.currPage=1),(r=t.grp_index.getChildByName("rect_"+t.currPage)).fillColor=16711680,egret.Tween.removeTweens(t.currAds),egret.Tween.removeTweens(t.nextAds),egret.Tween.get(t.currAds).to({x:-t.grp_ads.width},t.moveTime).wait(t.waitTime),egret.Tween.get(t.nextAds).to({x:e.GW.mgr.ifGameSingle()?-.5:0},t.moveTime).wait(t.waitTime).call((function(){t.currAds.x=t.grp_ads.width,t.tempAds=t.currAds,t.currAds=t.nextAds,t.nextAds=t.tempAds,t.ads.push(t.curr),t.curr=t.next,t.next=t.ads.shift(),t.nextAds.source=t.next.source,t.moveAds()}))},r.prototype.getTableCtrl=function(){var t=this,r=e.GTS.mgr.entryTable;r&&(e.playAudio("btnclick"),e.GTS.mgr.getTableCtrlFromServer(r.code,(function(r){t.tableCtrl=r,r.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:r,selectCallBack:t.gotoFast,target:t}):t.tableCtrl.isAccessible?t.gotoFast():mo.MSG.show(mo.D.langCodeToTxt("g_watch_match_cannot_join"))})))},r.prototype.gotoFast=function(){var t=this.tableCtrl;e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},r.prototype._tap_grp_ads=function(e){e.target==this.currAds?this.curr&&this.curr.ads&&this.curr.ads.url&&window.open(this.curr.ads.url,"_blank"):e.target==this.nextAds&&this.next&&this.next.ads&&this.next.ads.url&&window.open(this.next.ads.url,"_blank")},r.prototype._tap_img_matchBg=function(){this.getTableCtrl()},r.prototype._tap_btn_rank=function(){e.playAudio("btnclick");var t=e.GTS.mgr.entryTable,r=t.match.id,o=t.match.startTime;e.GTS.mgr.getMatchRankList(r,(function(t){e.COMM.MatchRankDlg.show({rankList:t,startTime:o})}))},r.prototype.onExit=function(){t.prototype.onExit.call(this),this.currAds&&egret.Tween.removeTweens(this.currAds),this.nextAds&&egret.Tween.removeTweens(this.nextAds),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,this.wheel,this)},r.prototype.readyGotoGame=function(t){var r=this;e.GTS.mgr.getTableCtrlFromServer(t,(function(e){e&&r.gotoGame(e)}))},r.prototype.gotoGame=function(){},r}(mo.EUI.Layer);t.RoomList=r,__reflect(r.prototype,"G.COMM.RoomList")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);this.userAgreeScrollerBar.init(this.userAgreeScroller,"v2")},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype._tap_btn_close=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.C_AGREEMENT)},r}(mo.EUI.Dlg);t.UserAgreement=r,__reflect(r.prototype,"G.COMM.UserAgreement")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e,r=t.apply(this,arguments)||this;return r.title_userInfo=mo.D.langCodeToTxt("topbar_setting_userinfo"),r.title_downline=mo.D.langCodeToTxt("UserInfoSkinText_014"),r.title_url=mo.D.langCodeToTxt("UserInfoSkinText_015"),r.title_upline=mo.D.langCodeToTxt("g_upline_data"),r.grpNameList=((e={})[r.title_userInfo]="grp_userInfo",e[r.title_downline]="grp_friend",e[r.title_url]="grp_url",e[r.title_upline]="grp_settle",e),r}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.input_nick.addEventListener(egret.Event.CHANGE,r.nickChange,r),r.btn_editer.visible=!0,r.btn_ok.visible=!1,r.label_id.text=e.GTS.userCtrl.name,r.input_nick.text=e.GTS.userCtrl.nick4Dis,e.GTS.userCtrl.loginTime&&(r.nowTime=mo.DATE.now()-e.GTS.userCtrl.loginTime.getTime()),r.parseTime(),e.GTS.userCtrl.getPersonalInfo((function(t){r.label_moneyGet.text=e.UTIL.NUM.getSplitNumStr(t.personalInfo.balance),r.label_moneyBet.text=e.UTIL.NUM.getSplitNumStr(t.personalInfo.effectiveBet)}));var o=new mo.CustTrigger;o.onSecond((function(){r.nowTime+=1e3,r.parseTime()})),o.countdown(mo.DATE.addDays(mo.DATE.date(),2)),r.setTabBarTitle(),r.selectedIndex=0,r.tab_bar.selectedIndex=r.selectedIndex,r.getData(r.selectedIndex),r.grp_moneyBet.visible=e.GW.mgr.channel.isTodayEffectiveBet,r.grp_moneyGet.visible=e.GW.mgr.channel.isTodayBalance},r.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.input_nick.removeEventListener(egret.Event.CHANGE,e.nickChange,e)},r.prototype.parseTime=function(){var e=mo.DATE.toHMS(this.nowTime);this.label_time.text=mo.STR.format("%s:%s:%s",mo.STR.fill(e[0],"00"),mo.STR.fill(e[1],"00"),mo.STR.fill(e[2],"00"))},r.prototype._tap_btn_editer=function(){var t=this;e.playAudio("btnclick"),t.input_nick.text="",e.RCD.mgr.recordState(e.RCD.RcdState.INFO_CHANGE_NICK),t.btn_editer.visible=!1,t.btn_ok.visible=!0},r.prototype.nickChange=function(){var t=this;t.input_nick.text=e.GTS.mgr.filterSpecialCharacters(t.input_nick.text),t.input_nick.text=e.GTS.mgr.filterEmoji(t.input_nick.text),t.input_nick.text==e.GTS.userCtrl.nick4Dis?(t.btn_editer.visible=!0,t.btn_ok.visible=!1):(t.btn_editer.visible=!1,t.btn_ok.visible=!0)},r.prototype._tap_btn_ok=function(){var t=this;e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.INFO_OK),e.GTS.userCtrl.changeNick(t.input_nick.text,(function(){t.btn_editer.visible=!0,t.btn_ok.visible=!1}))},r.prototype._tap_btn_close=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.C_INFO_PLAYER)},r.prototype._tap_tab_bar=function(){var e=this;e.selectedIndex!=e.tab_bar.selectedIndex&&(e.selectedIndex=e.tab_bar.selectedIndex,e.getData(e.selectedIndex))},r.prototype.getData=function(e){var t=this;t.grp_userInfo.visible=!1,t.grp_friend&&(t.grp_friend.visible=!1),t.grp_url&&(t.grp_url.visible=!1),t.grp_settle&&(t.grp_settle.visible=!1);var r=t.grpNameList[t.tab_bar.selectedItem.name];if(0==e)t.grp_userInfo.visible=!0;else switch(t[r].visible=!0,r){case"grp_friend":t.friendDownlineTable.getTableData();break;case"grp_url":t.friendUrlTable.getTableData();break;case"grp_settle":t.friendUplineTable.getTableData()}},r.prototype.setTabBarTitle=function(){var t=this,r=-1==e.GTS.userCtrl.type,o=e.GW.mgr.ifGameSingle(),a=e.GW.mgr.isSingleWallet;if(!(o||a||r)){var i=e.GTS.mgr.isUplineUser(),n=e.GW.mgr.channelType,s=[],l=t.title_userInfo,c=t.title_downline,p=t.title_url,_=t.title_upline,u=[{name:l}];i?n==CONST.channelType.normal?(u.push({name:c},{name:p}),s.push("grp_friend","grp_url")):(n==CONST.channelType.point||n==CONST.channelType.round)&&(u.push({name:c},{name:p},{name:_}),s.push("grp_friend","grp_url","grp_settle")):(n==CONST.channelType.point||n==CONST.channelType.round)&&(u.push({name:_}),s.push("grp_settle"));var h=new eui.ArrayCollection(u);t.tab_bar.dataProvider=h,t.setContent(s)}},r.prototype.setContent=function(t){var r=this;if(t[0])for(var o=e.GTS.mgr.planType()==CONST.rentPlan.planType.round,a=0;a<t.length;a++){switch(t[a]){case"grp_friend":r.friendDownlineTable=o?new e.COMM.FriendDownlineTableForRound:new e.COMM.FriendDownlineTableForPoint,r[t[a]].addChild(r.friendDownlineTable);break;case"grp_url":r.friendUrlTable=o?new e.COMM.FriendUrlTableForRound:new e.COMM.FriendUrlTable,r[t[a]].addChild(r.friendUrlTable);break;case"grp_settle":r.friendUplineTable=o?new e.COMM.FriendUplineTableForRound:new e.COMM.FriendUplineTableForPoint,r[t[a]].addChild(r.friendUplineTable)}r[t[a]].visible=!1}},r}(mo.EUI.Dlg);t.UserInfo=r,__reflect(r.prototype,"G.COMM.UserInfo")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.title_userInfo=mo.D.langCodeToTxt("g_user"),e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.label_id.text=e.GTS.userCtrl.name,r.input_nick.text=e.GTS.userCtrl.nick4Dis,e.GTS.userCtrl.loginTime&&(r.nowTime=mo.DATE.now()-e.GTS.userCtrl.loginTime.getTime()),r.parseTime(),e.GTS.userCtrl.getPersonalInfo((function(t){r.label_moneyGet.text=e.UTIL.NUM.getSplitNumStr(t.personalInfo.balance),r.label_moneyBet.text=e.UTIL.NUM.getSplitNumStr(t.personalInfo.effectiveBet)}));var o=new mo.CustTrigger;o.onSecond((function(){r.nowTime+=1e3,r.parseTime()})),o.countdown(mo.DATE.addDays(mo.DATE.date(),2)),r.setTabBarTitle(),r.selectedIndex=0,r.tab_bar.selectedIndex=r.selectedIndex,r.grp_moneyBet.visible=e.GW.mgr.channel.isTodayEffectiveBet,r.grp_moneyGet.visible=e.GW.mgr.channel.isTodayBalance,("my_mm"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(r.grp_moneyGet.verticalCenter=67,r.grp_moneyBet.verticalCenter=67,r.grp_onLineTime.verticalCenter=67)},r.prototype.onExit=function(){t.prototype.onExit.call(this)},r.prototype.parseTime=function(){var e=this,t=mo.DATE.toHMS(e.nowTime);e.label_time.text=mo.STR.format("%s:%s:%s",mo.STR.fill(t[0],"00"),mo.STR.fill(t[1],"00"),mo.STR.fill(t[2],"00")),e.label_time.size=72},r.prototype.nickChange=function(){var t=this;t.input_nick.text=e.GTS.mgr.verifyEmoji(t.input_nick.text),t.input_nick.text=e.GTS.mgr.filterSpecialCharacters(t.input_nick.text)},r.prototype._tap_btn_editer=function(){if(e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.INFO_CHANGE_NICK),this.input_nick.text==e.GTS.userCtrl.nick4Dis){var t=mo.D.langCodeToTxt("game_nameNotSame");mo.MSG.show(t)}else e.GTS.userCtrl.changeNick(this.input_nick.text,(function(){e.RCD.log_mgr.sendEvent_ClientButton("editNick")}))},r.prototype._tap_btn_close=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.C_INFO_PLAYER)},r.prototype._tap_tab_bar=function(){},r.prototype.setTabBarTitle=function(){var e=[{name:this.title_userInfo}],t=new eui.ArrayCollection(e);this.tab_bar.dataProvider=t},r}(mo.EUI.Dlg);t.UserInfo_dg=r,__reflect(r.prototype,"G.COMM.UserInfo_dg")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.maxNum=100,e._canTapQuickChat=!0,e.listTxtArr=[],e.isUseCannedMsg=!0,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._Item_list_chat=t.ChatRenderer,e._Item_list_text=t.ChatTextRenderer,e._Item_list_face=t.ChatFaceRenderer,e.chatList=[],e.text=null},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.onEnter=function(){var t=this;r.prototype.onEnter.call(this);var o=this;return e.GW.mgr.disableChatRoom?void mo.nextTick((function(){t.dtor()})):(o._isOpen=!0,o.grp_chat.visible=o._isOpen,o.btn_face&&(o.btn_face.selected=!1),o.scroller_face&&(o.scroller_face.visible=o.btn_face.selected),o.label_text_Input.text="",o.label_num.visible=!1,egret.isNative||window.addEventListener("keypress",o._enterEvent.bind(o),!1),o.setEventListener(),void o.onEmitter(e.GTS.mgr,"receivedFreeChatStatus",o.onReceivedFreeChatStatus))},o.prototype.onReceivedFreeChatStatus=function(){var t=this,r=e.GTS.mgr.canFreeChatThisRound(t._tableCtrl.roundCode);t.label_text_Input.enabled=r,t.canned_msg_trigger.visible=!r,t.canned_msg_closer.visible=!r,t.scroller_text.visible=!r,t.btn_lazy_message&&(t.btn_lazy_message.selected=t.scroller_text.visible),t.btn_lazy_message&&(t.btn_lazy_message.enabled=r)},o.prototype.setEventListener=function(){var e=this;e.label_text_Input.text="",e.label_num.visible=!1,e.label_text_Input.addEventListener(egret.Event.CHANGE,(function(){e.label_num.text=e.label_text_Input.text.length+"/50",e.label_num.visible=!0,e.label_num.style=e.label_text_Input.text.length>50?"txt_color_8":"txt_color_1"}),e),e.label_text_Input.textDisplay.addEventListener(egret.FocusEvent.FOCUS_IN,(function(){e.label_num.text=e.label_text_Input.text.length+"/50",e.label_num.visible=!0,e.label_num.style=e.label_text_Input.text.length>50?"txt_color_8":"txt_color_1"}),e),e.label_text_Input.textDisplay.addEventListener(egret.FocusEvent.FOCUS_OUT,(function(){e.label_num.visible=!1}),e),e.label_text_Input.enabled=!e.isUseCannedMsg,e.canned_msg_trigger.visible=e.isUseCannedMsg,e.canned_msg_closer.visible=!1,e.scroller_text.visible=!1,e.btn_lazy_message&&(e.btn_lazy_message.selected=e.scroller_text.visible),e.isUseCannedMsg&&e.setCannedMsg()},o.prototype.onExit=function(){var e=this;e.unEmitter(),e.label_text_Input.text="",e.label_text_Input.removeEventListener(egret.Event.CHANGE,(function(){}),e),e.label_text_Input.textDisplay.removeEventListener(egret.FocusEvent.FOCUS_IN,(function(){}),e),e.label_text_Input.textDisplay.removeEventListener(egret.FocusEvent.FOCUS_OUT,(function(){}),e),egret.isNative||window.removeEventListener("keypress",e._enterEvent,!1)},o.prototype.chatTextChange=function(){var t=this,r=t._tableCtrl;return e.GTS.mgr.canFreeChatThisRound(t._tableCtrl.roundCode),t.label_text_Input.visible=!1,t.label_noChat.visible=!0,t.btn_lazy_message&&(t.btn_lazy_message.enabled=!1),t.btn_go.enabled=!1,t.btn_face&&(t.btn_face.enabled=!1),r.isMatch&&r.hasEnrolled()?(t.label_text_Input.visible=!0,t.label_noChat.visible=!1,t.btn_lazy_message&&(t.btn_lazy_message.enabled=!0),t.btn_go.enabled=!0,void(t.btn_face&&(t.btn_face.enabled=!0))):void(t._tableCtrl&&t._tableCtrl.betCtrl&&t._tableCtrl.betCtrl.bet&&t._tableCtrl.betCtrl.bet>0&&(t.label_text_Input.visible=!0,t.label_noChat.visible=!1,t.btn_lazy_message&&(t.btn_lazy_message.enabled=!0),t.btn_go.enabled=!0,t.btn_face&&(t.btn_face.enabled=!0)))},o.prototype.resetChatUIWithClearInputText=function(){var t=this;t.resetChatUI(),t.label_text_Input.text="",t.label_text_Input.enabled=!1;var r=e.GTS.mgr.canFreeChatThisRound(t._tableCtrl.roundCode);t.label_text_Input.enabled=r,t.canned_msg_trigger.visible=!r},o.prototype.resetChatUI=function(){var e=this;e.btn_face.selected=!1,e.scroller_face.visible=e.btn_face.selected,e.label_noChat.text=mo.D.langCodeToTxt(e._tableCtrl.isMatch?"g_chat_match_join":"user_no_chat_1"),e.label_text_Input.visible=!0,e.scroller_text.visible=!1,e.btn_lazy_message&&(e.btn_lazy_message.selected=e.scroller_text.visible)},Object.defineProperty(o.prototype,"tableCtrl",{set:function(t){var r=this;r._tableCtrl=t,r.onEmitter(r._tableCtrl,CONST.BBT_table.chat,r.onChat),r.onEmitter(r._tableCtrl,CONST.BBT_table.openRound,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.shuffle,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.scanCard,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.payout,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.betStop,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.bet,r.chatTextChange),r.onEmitter(mo.emitter,CONST.matchEvent.matchRegisterSuccess,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.disTalkUser,r.onBanUser.bind(r)),r.onEmitter(r._tableCtrl,e.GTS.TableCtrl.ON_AFTER_BET,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.openRound,r.resetChatUIWithClearInputText),r.onEmitter(r._tableCtrl,CONST.BBT_table.shuffle,r.resetChatUIWithClearInputText),r.onEmitter(r._tableCtrl,CONST.BBT_table.betStop,r.resetChatUI),r.label_noChat.text=mo.D.langCodeToTxt(r._tableCtrl.isMatch?"g_chat_match_join":"user_no_chat_1"),r.chatTextChange(),e.GTS.mgr.chatRecorder.setCurTableCode(r._tableCtrl.code);var o=!!r._tableCtrl&&e.GTS.mgr.canFreeChatThisRound(r._tableCtrl.roundCode);r.label_text_Input.enabled=o,r.canned_msg_trigger.visible=!!r._tableCtrl&&!o,r.canned_msg_closer.visible=!1,r.scroller_text.visible=!1,r.btn_lazy_message&&(r.btn_lazy_message.selected=r.scroller_text.visible)},enumerable:!0,configurable:!0}),o.prototype.onChat=function(e){var r=this;if((r._tableCtrl.type==CONST.tableType.baccarat||r._tableCtrl.type==CONST.tableType.dragonTiger)&&e&&e.chat&&e.chat.content&&e.chat.content.indexOf("#emj_")>-1){var o=e.chat.content,a=parseInt(o.split("_")[1]);mo.emitter.emit("releaseEmoji",a)}else{if(e&&e.chat&&e.chat.arg&&e.chat.arg.msgId){var i=e.chat.arg.msgId,n=mo.D.getTxtByMatch(i);n&&n.length>0&&(e.chat.content=mo.D.langCodeToTxt(i))}for(;r.chatList.length>100;)r.chatList.shift();r.chatList.push(e),r.list_chat.removeChildren();for(var s,l,c=0,p=r.chatList.length;p>c;c++)s=r.chatList[c],(l=new t.ChatRenderer).chat({chat:s.chat}),r.list_chat.addChild(l);r.scroller_chat.validateNow(),r.scroller_chat.viewport.scrollV=r.scroller_chat.viewport.contentHeight<=r.scroller_chat.height?0:r.scroller_chat.viewport.contentHeight-r.scroller_chat.height}},o.prototype.onBanUser=function(e){var r=this,o=e.user.id;r.chatList=r.chatList.filter((function(e){return e.chat.userId!=o})),r.list_chat.removeChildren();for(var a,i,n=0,s=r.chatList.length;s>n;n++)a=r.chatList[n],(i=new t.ChatRenderer).chat({chat:a.chat}),r.list_chat.addChild(i);r.scroller_chat.validateNow(),r.scroller_chat.viewport.scrollV=r.scroller_chat.viewport.contentHeight<=r.scroller_chat.height?0:r.scroller_chat.viewport.contentHeight-r.scroller_chat.height},o.prototype._tap_btn_lazy_message=function(){var e=this;e.scroller_text&&(e.scroller_text.visible=e.btn_lazy_message.selected),e.canned_msg_closer.visible=e.btn_lazy_message.selected,e.btn_lazy_message.selected&&(e.btn_face.selected=!1,e.scroller_face.visible=!1)},o.prototype._tap_btn_face=function(){var t=this,r=t._tableCtrl;if(r.isMatch){if(!r.hasEnrolled())return mo.MSG.show(e.id_c_msgCode.g_chat_match_join)}else if(!r||mo.OBJ.isEmpty(r.betCtrl.betDetail))return mo.MSG.show(e.id_c_msgCode.user_no_chat);t.scroller_face&&(t.scroller_face.visible=t.btn_face.selected),t.btn_face.selected&&(t.btn_lazy_message&&(t.btn_lazy_message.selected=!1),t.scroller_text.visible=!1)},o.prototype._tap_btn_go=function(){var r=this,o=r._tableCtrl;if(mo.D.langCodeToTxt("chat_out_of_limit"),o.isMatch){if(!o.hasEnrolled())return mo.MSG.show(e.id_c_msgCode.g_chat_match_join)}else if(!o||mo.OBJ.isEmpty(o.betCtrl.betDetail))return mo.MSG.show(e.id_c_msgCode.user_no_chat);if(""==r.label_text_Input.text)mo.MSG.show(e.id_c_msgCode.user_no_null);else{if(e.GTS.mgr.isForbiddenChat())return void mo.MSG.show("${{chat_ban_warn}}");if(e.GTS.userCtrl)if(-1!=e.GTS.userCtrl.type){if(r._tableCtrl){var a=e.GTS.mgr.verifyEmoji(r.label_text_Input.text);r._tableCtrl.chat(a,{isTextTemplate:!0,msgId:r.getCannedMsgByText(a)},(function(){t.log("发送成功"),e.GTS.mgr.chatRecorder.record(a),e.RCD.log_mgr.sendEvent_ClientButton("game.chat.msg")})),r.label_text_Input.text=""}}else mo.MSG.show(e.id_c_msgCode.chat_tip_visitor)}r.label_text_Input.text="",r.label_num.text=r.label_text_Input.text.length+"/50"},o.prototype.getCannedMsgByText=function(e){var t=this;if(!t.listTxtArr||0==t.listTxtArr.length||!e||0==e.length)return null;var r=t.listTxtArr.indexOf(e);return-1==r?null:"g_channel_chat_"+(r+1)},o.prototype._data_list_face=function(){for(var e,t=[],r=0;20>r;r++)e="#emj_"+(r+1),t.push(e);return t},o.prototype.pad=function(e,t){return(Array(t).join("0")+e).slice(-t)},o.prototype._click_list_face=function(r){var o=this,a=r.item;if(o._tableCtrl){if(!o._canTapQuickChat)return mo.MSG.show(e.id_c_msgCode.user_no_continuitychat);o._canTapQuickChat=!1,mo.TM.setTimeout((function(){o&&(o._canTapQuickChat=!0)}),2e3),o._tableCtrl.chat(a,null,(function(){t.log("发送成功"),e.RCD.log_mgr.sendEvent_ClientButton("game.chat.emj")}))}o.btn_face&&(o.btn_face.selected=!1),o.scroller_face&&(o.scroller_face.visible=o.btn_face.selected)},o.prototype._tap_canned_msg_trigger=function(){var t=this,r=t._tableCtrl;if(r.isMatch){if(!r.hasEnrolled())return mo.MSG.show(e.id_c_msgCode.g_chat_match_join)}else if(!r||mo.OBJ.isEmpty(r.betCtrl.betDetail))return mo.MSG.show(e.id_c_msgCode.user_no_chat);t.canned_msg_closer.visible=!0,t.scroller_text.visible=!0,t.btn_lazy_message&&(t.btn_lazy_message.selected=t.scroller_text.visible),t.btn_face.selected=!1,t.scroller_face.visible=!1},o.prototype._tap_canned_msg_closer=function(){var e=this;e.canned_msg_closer.visible=!1,e.scroller_text.visible=!1,e.btn_lazy_message&&(e.btn_lazy_message.selected=e.scroller_text.visible),e.setCannedMsg()},o.prototype._data_list_text=function(){return this.listTxtArr},o.prototype.setCannedMsg=function(){var e=mo.D.getTxtByMatch("g_channel_chat_");this.listTxtArr=e,this.refreshList("list_text")},o.prototype._click_list_text=function(e){var t=e.item;this.label_text_Input.text=t,this._tap_canned_msg_closer()},o.prototype._enterEvent=function(e){var t=this;13==e.keyCode&&t.btn_go.enabled&&t.label_text_Input.text.length>0&&t._tap_btn_go()},o}(mo.EUI.Comp);t.Chat=r,__reflect(r.prototype,"G.BASE.Chat")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t}(e.BASE.Chat);t.Chat2=r,__reflect(r.prototype,"G.BASE.Chat2")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype.onEnter=function(){e.prototype.onEnter.call(this)},r.prototype._initProp=function(){e.prototype._initProp.call(this);var r=this;r._Item_list_chat=t.ChatRenderer,r._Item_list_text=t.ChatTextRenderer,r._Item_list_face=t.ChatFaceRenderer,r.chatList=[],r.text=null},r.prototype.onChat=function(e){for(var r=this;r.chatList.length>100;)r.chatList.shift();r.chatList.push(e),r.list_chat.removeChildren();for(var o,a,i=0,n=r.chatList.length;n>i;i++)o=r.chatList[i],(a=new t.ChatRendererARlt).chat({chat:o.chat}),r.list_chat.addChild(a);r.scroller_chat.validateNow(),r.scroller_chat.viewport.scrollV=r.scroller_chat.viewport.contentHeight<=r.scroller_chat.height?0:r.scroller_chat.viewport.contentHeight-r.scroller_chat.height},r.prototype.onBanUser=function(e){var r=this,o=e.user.id;r.chatList=r.chatList.filter((function(e){return e.chat.userId!=o})),r.list_chat.removeChildren();for(var a,i,n=0,s=r.chatList.length;s>n;n++)a=r.chatList[n],(i=new t.ChatRendererARlt).chat({chat:a.chat}),r.list_chat.addChild(i);r.scroller_chat.validateNow(),r.scroller_chat.viewport.scrollV=r.scroller_chat.viewport.contentHeight<=r.scroller_chat.height?0:r.scroller_chat.viewport.contentHeight-r.scroller_chat.height},r}(e.BASE.Chat);t.ChatARlt=r,__reflect(r.prototype,"G.BASE.ChatARlt")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var o=this;if(o.data&&o.data.chat){var a=o.data.chat,i=a.userId==e.GTS.userCtrl.id;o.grp_other.visible=!i,o.grp_my.visible=i,a.content&&(a.content=e.GTS.mgr.verifyEmoji(a.content)),a.userName&&(a.userName=e.GTS.mgr.verifyEmoji(a.userName)),a.userName=e.COMM.STRM.strMask(a.userName);var n=a.content.indexOf("#emj_")>-1;if(i)if(n){var s=a.content,l=parseInt(s.split("_")[1]);(p=new eui.Image).source=t.resHelper.getFaceImgById(l),p.verticalCenter=0,o.label_my.text="[ubb color=0x0e790b]"+a.userName+"：[/ubb]",(_=new mo.EUI.Label).size=14,_.text=a.userName+"：",p.x=_.width,o.grp_my.addChild(p)}else{o.label_my.width=388,(_=new mo.EUI.Label).size=28,_.width=430,_.scaleX=.5,_.scaleY=.5,_.cutWidth=500,_.text=a.userName+"："+a.content,_.lineSpacing=10,o.label_my.textColor=948491,o.label_my.text=_.text}else if(a.userId==CONST.chatUserId.fee){var c="";("ta_in"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang)&&(c="[/ubb]\n[ubb color = 0xFFFFFF]"),o.label_other.text="[ubb color=0xe0bf74]"+mo.D.langCodeToTxt("chat_system_title")+"：[/ubb][ubb color = 0xFFFFFF]"+a.content+c+mo.D.langCodeToTxt("history_tips")+a.arg.fee+"[/ubb]"}else if(a.userId==CONST.chatUserId.userEnter){c="";("my_mm"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(c="\n"),o.label_other.text="[ubb color=0xe0bf74]"+mo.D.langCodeToTxt("chat_system_title")+"：[/ubb][ubb color = 0xFFFFFF]"+a.content+"[/ubb]"+c+"[ubb color = 0xFFFFFF]"+mo.D.langCodeToTxt("chat_enter")+"[/ubb]"}else if(n){var p,_;s=a.content,l=parseInt(s.split("_")[1]);(p=new eui.Image).source=t.resHelper.getFaceImgById(l),p.verticalCenter=0,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]",(_=new mo.EUI.Label).size=14,_.text=a.userName+"：",p.x=_.width,o.grp_other.addChild(p)}else{o.label_other.width=370;if(a.content[0].match(/[\u0b80-\u0bff]/g)){var u=mo.PROJ.lang;mo.PROJ.lang="ta_in",o.label_other.cutWidth=320,o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content,mo.PROJ.lang=u}else if(a.content[0].match(/[\u1780-\u17CF]|[\u17D0-\u17DD]|[\u17E0-\u17E9]|[\u17F0-\u17F9]|[\u19E0-\u19FF]/g)){u=mo.PROJ.lang;mo.PROJ.lang="km_kh",o.label_other.cutWidth=320,a.content==mo.D.langCodeToTxt("chat_easy_win")?(o.label_other.cutWidth=200,o.label_other.text=a.content,o.label_other.cutWidth=300,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+o.label_other.text):(o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content),mo.PROJ.lang=u}else if(a.content[0].match(/[\u1000-\u100F]|[\u1010-\u101F]|[\u1020-\u102F]|[\u1030-\u103F]|[\u1040-\u104F]|[\u1050-\u105F]|[\u1060-\u106F]|[\u1070-\u107F]|[\u1080-\u108F]|[\u1090-\u109F]|[\uAA60-\uAA6F]|[\uAA70-\uAA7F]|[\uA9E0-\uA9EF]|[\uA9F0-\uA9FF]/g)){u=mo.PROJ.lang;mo.PROJ.lang="my_mm",o.label_other.cutWidth=320,o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content,mo.PROJ.lang=u}else if(a.content[0].match(/[\u0900-\u097f]/g)){u=mo.PROJ.lang;mo.PROJ.lang="hi_in",o.label_other.cutWidth=320,o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content,mo.PROJ.lang=u}else o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb][ubb color=0xFFFFFF]"+a.content+"[/ubb]"}}},o.prototype.setEmjoy=function(){var e=this,t=new mo.EUI.Label;t.size=28,t.scaleX=.5,t.scaleY=.5;var r=e.imgText.indexOf("#emj_");if(-1!=r){var o=e.imgText.substring(r+1,6+r+1),a=e.imgText.substring(r,7+r),i=new eui.Image;return i.source=o,i.verticalCenter=0,e.faceIndex=e.faceIndex+1,e.imgTextArr=e.imgText.split(a),t.text=e.imgTextArr[0],i.x=e.label_my.width/2+t.width/2,e.chatGroup.addChild(i),e.imgText=e.imgText.replace(a,"         "),void e.setEmjoy()}},o.prototype.pad=function(e,t){return(Array(t).join("0")+e).slice(-t)},o.prototype.chat=function(e){this.data=e},Object.defineProperty(o.prototype,"height",{get:function(){return this.bgHeight+16},enumerable:!0,configurable:!0}),o}(mo.EUI.ItemRenderer);t.ChatRenderer=r,__reflect(r.prototype,"G.BASE.ChatRenderer")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var o=this;if(o.data&&o.data.chat){var a=o.data.chat,i=a.userId==e.GTS.userCtrl.id;o.grp_other.visible=!i,o.grp_my.visible=i,a.content&&(a.content=e.GTS.mgr.verifyEmoji(a.content)),a.userName&&(a.userName=e.GTS.mgr.verifyEmoji(a.userName)),a.userName=e.COMM.STRM.strMask(a.userName);var n=a.content.indexOf("#emj_")>-1;if(i)if(n){var s=a.content,l=parseInt(s.split("_")[1]);(p=new eui.Image).source=t.resHelper.getFaceImgById(l),p.verticalCenter=0,o.label_my.text="[ubb color=0x0e790b]"+a.userName+"：[/ubb]",(_=new mo.EUI.Label).size=14,_.text=a.userName+"：",p.x=_.width,o.grp_my.addChild(p)}else{o.label_my.width=235,(_=new mo.EUI.Label).size=28,_.width=430,_.scaleX=.5,_.scaleY=.5,_.cutWidth=500,_.text=a.userName+"："+a.content,_.lineSpacing=10,o.label_my.textColor=948491,o.label_my.text=_.text}else if(a.userId==CONST.chatUserId.fee){var c="";("ta_in"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang)&&(c="[/ubb]\n[ubb color = 0xFFFFFF]"),o.label_other.text="[ubb color=0xe0bf74]"+mo.D.langCodeToTxt("chat_system_title")+"：[/ubb][ubb color = 0xFFFFFF]"+a.content+c+mo.D.langCodeToTxt("history_tips")+a.arg.fee+"[/ubb]"}else if(a.userId==CONST.chatUserId.userEnter){c="";("my_mm"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(c="\n"),o.label_other.text="[ubb color=0xe0bf74]"+mo.D.langCodeToTxt("chat_system_title")+"：[/ubb][ubb color = 0xFFFFFF]"+a.content+"[/ubb]"+c+"[ubb color = 0xFFFFFF]"+mo.D.langCodeToTxt("chat_enter")+"[/ubb]"}else if(n){var p,_;s=a.content,l=parseInt(s.split("_")[1]);(p=new eui.Image).source=t.resHelper.getFaceImgById(l),p.verticalCenter=0,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]",(_=new mo.EUI.Label).size=14,_.text=a.userName+"：",p.x=_.width,o.grp_other.addChild(p)}else{o.label_other.width=240;if(a.content[0].match(/[\u0b80-\u0bff]/g)){var u=mo.PROJ.lang;mo.PROJ.lang="ta_in",o.label_other.cutWidth=240,o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content,mo.PROJ.lang=u}else if(a.content[0].match(/[\u1780-\u17CF]|[\u17D0-\u17DD]|[\u17E0-\u17E9]|[\u17F0-\u17F9]|[\u19E0-\u19FF]/g)){u=mo.PROJ.lang;mo.PROJ.lang="km_kh",o.label_other.cutWidth=240,a.content==mo.D.langCodeToTxt("chat_easy_win")?(o.label_other.cutWidth=240,o.label_other.text=a.content,o.label_other.cutWidth=240,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+o.label_other.text):(o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content),mo.PROJ.lang=u}else if(a.content[0].match(/[\u1000-\u100F]|[\u1010-\u101F]|[\u1020-\u102F]|[\u1030-\u103F]|[\u1040-\u104F]|[\u1050-\u105F]|[\u1060-\u106F]|[\u1070-\u107F]|[\u1080-\u108F]|[\u1090-\u109F]|[\uAA60-\uAA6F]|[\uAA70-\uAA7F]|[\uA9E0-\uA9EF]|[\uA9F0-\uA9FF]/g)){u=mo.PROJ.lang;mo.PROJ.lang="my_mm",o.label_other.cutWidth=240,o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content,mo.PROJ.lang=u}else if(a.content[0].match(/[\u0900-\u097f]/g)){u=mo.PROJ.lang;mo.PROJ.lang="hi_in",o.label_other.cutWidth=240,o.label_other.textColor=16777215,o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb]\n"+a.content,mo.PROJ.lang=u}else o.label_other.text="[ubb color=0x909090]"+a.userName+"：[/ubb][ubb color=0xFFFFFF]"+a.content+"[/ubb]"}}},o.prototype.setEmjoy=function(){var e=this,t=new mo.EUI.Label;t.size=28,t.scaleX=.5,t.scaleY=.5;var r=e.imgText.indexOf("#emj_");if(-1!=r){var o=e.imgText.substring(r+1,6+r+1),a=e.imgText.substring(r,7+r),i=new eui.Image;return i.source=o,i.verticalCenter=0,e.faceIndex=e.faceIndex+1,e.imgTextArr=e.imgText.split(a),t.text=e.imgTextArr[0],i.x=e.label_my.width/2+t.width/2,e.chatGroup.addChild(i),e.imgText=e.imgText.replace(a,"         "),void e.setEmjoy()}},o.prototype.pad=function(e,t){return(Array(t).join("0")+e).slice(-t)},o.prototype.chat=function(e){this.data=e},Object.defineProperty(o.prototype,"height",{get:function(){return this.bgHeight+16},enumerable:!0,configurable:!0}),o}(mo.EUI.ItemRenderer);t.ChatRendererARlt=r,__reflect(r.prototype,"G.BASE.ChatRendererARlt")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;if(t.data){var r=t.data;if(t.label_text.text=r,"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang){var o=new mo.EUI.Label;o.size=30,o.width=310,o.scaleX=.5,o.scaleY=.5,o.cutWidth=190,"ta_in"==mo.PROJ.lang?"ஒரு நீண்ட வங்கியாளரை நாம் வைத்துக் கொள்வோம்"==r&&(o.cutWidth=170):"hi_in"==mo.PROJ.lang&&(o.cutWidth=200),o.text=r,t.label_text.text=o.text,t.label_text.height=o.height,t.grp.height=o.height/2+5}else t.grp.height=t.label_text.height+5;"Chia bài tốt đó, đừng dừng lại!"==r?t.label_text.text="Chia bài tốt đó, đừng\ndừng lại!":"Bạn là bùa may mắn của tôi!"==r?t.label_text.text="Bạn là bùa may mắn\ncủa tôi!":"Unas cartas estupendas, ¡sigue así!"==r?t.label_text.text="Unas cartas estupendas,\n ¡sigue así!":"Vous êtes mon porte-bonheur !"==r?t.label_text.text="Vous êtes mon\nporte-bonheur !":"Sie sind mein Glücksbringer!"==r?t.label_text.text="Sie sind mein\nGlücksbringer!":"놀랍네요. 멈추지 마세요!"==r?t.label_text.text="놀랍네요. 멈추지\n마세요!":"당신은 내 행운의 부적이에요!"==r?t.label_text.text="당신은 내 행운의\n부적이에요!":"Người đẹp thật là mát tay, ra ván nào thắng ván đó !"==r?t.label_text.text="Người đẹp thật là mát tay, ra ván nào thắng\nván đó !":"꼬마 아가씨, 키스를 보내주세요~!"==r?t.label_text.text="꼬마 아가씨, 키스를\n보내주세요~!":"귀엽기도 하지. 뭐가 뭔지 맞춰봐요 하하!"==r?t.label_text.text="귀엽기도 하지. 뭐가\n뭔지 맞춰봐요 하하!":"참 쉽죠? 당신은 아름답고 멋져요!"==r?t.label_text.text="참 쉽죠? 당신은\n아름답고 멋져요!":"สุดสวยนั้นเป็นที่นิยมชมชอบมาก คิดว่าอะไรเป็นอะไรหรือ ฮ่าฮ่า!"==r?t.label_text.text="สุดสวยนั้นเป็นที่นิยมชมชอบมาก\nคิดว่าอะไรเป็นอะไรหรือ\nฮ่าฮ่า!":"สาวน้อย~เธอน่ารักมาก~ ฉันรักเธอ~！"==r?t.label_text.text="สาวน้อย~เธอน่ารักมาก~\nฉันรักเธอ~！":"ชนะรางวัลได้ไม่ยากเลย เธอน่ารักมาก สาวสวย!"==r?t.label_text.text="ชนะรางวัลได้ไม่ยากเลย\nเธอน่ารักมาก สาวสวย!":"ភាពស្រស់ស្អាតគឺសំណាងល្អរបស់ខ្ញុំ អ្វីក៏ដោយដែលខ្ញុំភ្នាល់ ខ្ញុំឈ្នះ ~ ហាហា!"==r?t.label_text.text="ភាពស្រស់ស្អាតគឺសំណាងល្អរបស់ខ្ញុំ\nអ្វីក៏ដោយដែលខ្ញុំភ្នាល់\nខ្ញុំឈ្នះ ~ ហាហា!":"ស្រីស្អាត ~អូនអស្ចារ្យណាស់~ បងចូលចិត្ត~!"==r?t.label_text.text="ស្រីស្អាត ~\nអូនអស្ចារ្យណាស់~\nបងចូលចិត្ត~!":"ងាយស្រួលក្នុងការឈ្នះ អ្នកពិតជាល្អមែនទែន ស្រស់ស្អាត!"==r?t.label_text.text="ងាយស្រួលក្នុងការឈ្នះ\nអ្នកពិតជាល្អមែនទែន\nស្រស់ស្អាត!":"ဟိတ်ကောင်မလေး၊ အနမ်းလေးပေးပါဦး ~"==r?t.label_text.text="ဟိတ်ကောင်မလေး၊\nအနမ်းလေးပေးပါဦး ~":"အလှလေးရေ နာမည်ဘယ်လိုခေါ်လဲ။"==r?t.label_text.text="အလှလေးရေ\nနာမည်ဘယ်လိုခေါ်လဲ။":"ဒီချစ်စရာလေးက ငါ့ရဲ့ ကံကောင်းတဲ့အဆောင်လေးပေါ့၊ ဘာပဲဖြစ်ဖြစ် နိုင်မှာကိုပဲ လောင်းမှာပါ ~ ဟားဟား"==r?t.label_text.text="ဒီချစ်စရာလေးက ငါ့ရဲ့\nကံကောင်းတဲ့အဆောင်လေးပေါ့၊\nဘာပဲဖြစ်ဖြစ် နိုင်မှာကိုပဲ လောင်းမှာပါ\n~ ဟားဟား":"မိန်းမလှလေး ~ မင်းက မိုက်တယ် ~ ငါ အဲဒါကိုကြိုက်တယ် ~"==r?(t.label_text.text="မိန်းမလှလေး ~ မင်းက\nမိုက်တယ် ~ ငါ\nအဲဒါကိုကြိုက်တယ် ~",t.label_text.height+=15,t.grp.height+=15):"ஒரு நீண்ட வங்கியாளரை நாம் வைத்துக் கொள்வோம்"==r?t.label_text.text="ஒரு நீண்ட\nவங்கியாளரை நாம்\nவைத்துக் கொள்வோம்":"கவர்ச்சியானது, உங்கள் கையை அசைக்கவும்~"==r?t.label_text.text="கவர்ச்சியானது,\nஉங்கள் கையை\nஅசைக்கவும்~":"அழகானவளே, உன் பெயர் என்ன?"==r?t.label_text.text="அழகானவளே, உன்\nபெயர் என்ன?":"இவள் தான் என் அழகி, நான் எதில் பந்தயம் கட்டினாலும் அதில் நான் ஜெயிப்பேன்!"==r?t.label_text.text="இவள் தான் என் அழகி\n, நான் எதில் பந்தயம்\nகட்டினாலும்\nஅதில் நான்\nஜெயிப்பேன்!":"அழகான பெண் `நீ அற்புதமாய் இருக்கிறாய்` எனக்கு பிடித்திருக்கிறது!"==r?t.label_text.text="அழகான பெண் `நீ\nஅற்புதமாய்\nஇருக்கிறாய்` எனக்கு\nபிடித்திருக்கிறது!":"எளிமையான வெற்றி, நீ அற்புதமாய் இருக்கிறாய், அழகு!"==r?t.label_text.text="எளிமையான வெற்றி\n, நீ அற்புதமாய்\nஇருக்கிறாய், அழகு!":"Diese Süße ist mein Glücksbringer, egal auf was ich wette, ich gewinne ~ ha ha!"==r?t.label_text.text="Diese Süße ist mein\nGlücksbringer, egal auf\nwas ich wette, ich gewinne ~ ha ha!":"Hübsches Mädchen ~Du bist super~ Das gefällt mir~!"==r?t.label_text.text="Hübsches Mädchen ~Du bist super~ Das\ngefällt mir~!":"Hey, güzel kız, bana bir öpücük göndersene!"==r?t.label_text.text="Hey, güzel kız, bana bir öpücük\ngöndersene!":"Bu tatlı şey benim şans meleğim, ne olursa olsun kazanacağım, ha ha!"==r?t.label_text.text="Bu tatlı şey benim\nşans meleğim, ne\nolursa olsun\nkazanacağım, ha ha!":"Güzel kız! Gerçekten harikasın! Bunu çok beğendim!"==r?t.label_text.text="Güzel kız! Gerçekten harikasın! Bunu çok\nbeğendim!":"Jolie fille, tu es géniale, j’aime ça !"==r&&(t.label_text.text="Jolie fille, tu es\ngéniale, j’aime ça !")}},t}(mo.EUI.ItemRenderer);e.ChatTextRenderer=t,__reflect(t.prototype,"G.BASE.ChatTextRenderer")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;if(r.data){var o=r.data,a=parseInt(o.split("_")[1]);r.img_bg.source=e.resHelper.getFaceImgById(a)}},Object.defineProperty(r.prototype,"height",{get:function(){return this.img_bg.height},enumerable:!0,configurable:!0}),r}(mo.EUI.ItemRenderer);e.ChatFaceRenderer=t,__reflect(t.prototype,"G.BASE.ChatFaceRenderer")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;if(e.data){var r=e.data.tableCtrl;if(r){for(var o=r.roundCtrl,a=r.rangeList4Dis,i=void 0,n=void 0,s=void 0,l=0,c=a.length;c>l;l++)s=a[l],0==l?(i=s[0],n=s[1]):(i>s[0]&&(i=s[0]),n<s[1]&&(n=s[1]));e.label_roomLimit.text=mo.D.langCodeToTxt("g_bet_limit"),e.label_roomNo.text=mo.D.langCodeToTxt("g_room")+":"+(r.name||""),e.label_roundNo.text=mo.D.langCodeToTxt("g_round_no")+":"+(o.code||""),e.label_rounds.text=mo.D.langCodeToTxt("g_round")+":"+(o.index||"");var p=r.roundCtrl.currentDealerName();r.dealerNameTranslate&&r.dealerNameTranslate.hasOwnProperty(mo.PROJ.lang)&&""!=r.dealerNameTranslate[mo.PROJ.lang]&&(p=r.dealerNameTranslate[mo.PROJ.lang]),e.label_officer.text=mo.D.langCodeToTxt("g_dealer")+":"+(o.currentDealerNameOther(p)||"")}}},r.prototype._tap_grp_roomLimit=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_ROOM_LIMIT);var t=this.data.tableCtrl;e.COMM.LimitInfo.show({tableCtrl:t})},r.prototype._tap_icon_roomLimit=function(){this._tap_grp_roomLimit()},r}(mo.EUI.Comp);t.TableInfo=r,__reflect(r.prototype,"G.COMM.TableInfo")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._Item_list_limit=t.LimitSelectRenderer,e._multiRangeList=[],e.isSelected=!1,e.isTapCloseBtn=!1},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var e=this;if(e.data.selectCallBack&&(e.selectCallBack=e.data.selectCallBack),e.data.target&&(e.target=e.data.target),e.data.errorCallBack&&(e.errorCallBack=e.data.errorCallBack),e.data.cbBeforeSetRange&&(e.cbBeforeSetRange=e.data.cbBeforeSetRange),e.showClass=e.data.showClass,e.data.tableCtrl?(e._tableCtrl=e.data.tableCtrl,e._isMultiTable=!1):e._isMultiTable=!0,e._isMultiTable?e.parseRangeListContent(e.data.multiRangeList):e.parseRangeList(),e.cbForNewUILayer=e.data.cbForNewUILayer?e.data.cbForNewUILayer:function(){},e.refreshList("list_limit"),e._multiRangeList){var t=e._multiRangeList.length;4==t?(e.image_bg.height=290,e.scroller.height=200):5==t?(e.image_bg.height=340,e.scroller.height=250):(6==t||t>6)&&(e.image_bg.height=390,e.scroller.height=300),e.scroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.onMouseOver.bind(e,e.scroller),e),e.scroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.onMouseOver.bind(e,e.scroller),e)}},o.prototype.onMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.doWheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.doWheel,r)}},o.prototype.doWheel=function(e){var t=this;t.list_limit.contentHeight<t.list_limit.height||(e.data<0&&(t.list_limit.scrollV+=-e.data*CONST.wheelRatio),e.data>0&&(t.list_limit.scrollV-=e.data*CONST.wheelRatio),t.list_limit.scrollV>=t.list_limit.contentHeight-t.list_limit.height&&(t.list_limit.scrollV=t.list_limit.contentHeight-t.list_limit.height),t.list_limit.scrollV<=0&&(t.list_limit.scrollV=0))},o.prototype.parseRangeList=function(){var e=this;switch(e._multiRangeList=[],e._tableCtrl.type){case CONST.tableType.baccarat:e.sceneId=CONST.moduleId.bacc,e.parseRangeListContent(e._tableCtrl.multiRangeList);break;case CONST.tableType.dragonTiger:e.sceneId=CONST.moduleId.dt,e.parseRangeListContent(e._tableCtrl.multiRangeList);break;case CONST.tableType.roulette:e.sceneId=CONST.moduleId.roulette,e.parseRangeListContent(e._tableCtrl.multiRangeList);break;case CONST.tableType.sicBo:e.sceneId=CONST.moduleId.sicBo,e.parseRangeListContent(e._tableCtrl.multiRangeList);break;case CONST.tableType.niuNiu:e.sceneId=CONST.moduleId.nn,e.parseRangeListContent(e._tableCtrl.multiRangeList);break;case CONST.tableType.cashWheel:e.sceneId=CONST.moduleId.arlt,e.parseRangeListContent(e._tableCtrl.multiRangeList)}},o.prototype.parseRangeListContent=function(e){if(e&&0!=e.length)for(var t=0;t<e.length;t++)this._multiRangeList.push(this.parseRangeListDetail(e[t]))},o.prototype.parseRangeListDetail=function(t){var r=this,o=[];if(!t||0==t.length)return o;for(var a=[],i=[],n=0;n<t.length;n++){var s=t[n];s&&2==s.length&&(a.push(s[0]),i.push(s[1]))}if(0==a.length||0==i.length)return o;if(a=a.sort((function(e,t){return e-t})),i=i.sort((function(e,t){return t-e})),e.GW.mgr.channel&&e.GW.mgr.channel.isCustomBaccDTLimitDisplay){var l=[];if(r._tableCtrl&&r._tableCtrl.type==CONST.tableType.baccarat){if(t[CONST.rangeType.baccarat.banker])return l.push(t[CONST.rangeType.baccarat.banker][0]),l.push(t[CONST.rangeType.baccarat.banker][1]),o.push(l),o}else if(r._tableCtrl&&r._tableCtrl.type==CONST.tableType.dragonTiger){if(t[CONST.rangeType.dragonTiger.dragon])return l.push(t[CONST.rangeType.dragonTiger.dragon][0]),l.push(t[CONST.rangeType.dragonTiger.dragon][1]),o.push(l),o}else if(r._isMultiTable&&t[CONST.rangeType.baccarat.banker])return l.push(t[CONST.rangeType.baccarat.banker][0]),l.push(t[CONST.rangeType.baccarat.banker][1]),o.push(l),o}var c=[];return c.push(a[0]),c.push(i[0]),o.push(c),o},o.prototype._data_list_limit=function(){return this._multiRangeList},o.prototype._click_list_limit=function(){var t=this,r=t.list_limit.selectedIndex;if(t.isSelected=!0,t._isMultiTable)e.GTS.mgr.exitMultiBaccarat((function(){e.GTS.mgr.setRangeList4Multi(t.data.multiRangeList[r],(function(){t.selectCallBack&&t.selectCallBack.call(t.target,!0,r)}))}));else{var o=function(){e.GTS.mgr.setRangeList4Multi(t._tableCtrl.multiRangeList[r],(function(){e.COMM.layerMgr.recordLimitSelectIndex(t._tableCtrl.code,r),t.selectCallBack&&t.selectCallBack.call(t.target,!0,r)}))};t.cbBeforeSetRange?t.cbBeforeSetRange((function(){o()})):o()}t.close()},o.prototype._tap_btn_close=function(){this.isTapCloseBtn=!0},o.prototype.systemClose=function(){var e=this;e.errorCallBack&&(e.errorCallBack=null),e.close()},o.prototype.onExit=function(){r.prototype.onExit.call(this);var e=this;e.isSelected||e.isTapCloseBtn||!e.errorCallBack||e.errorCallBack()},o}(mo.EUI.Dlg);t.LimitSelectDlg=r,__reflect(r.prototype,"G.COMM.LimitSelectDlg")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r,o=this,a=this.data;r=a[2]?a[0]:e.UTIL.NUM.getMinAndMax(a),o.label_limit.text=e.UTIL.NUM.getSplitNumStr(r[0])+" - "+e.UTIL.NUM.getSplitNumStr(r[1]),o.grp.addEventListener(mouse.MouseEvent.MOUSE_OVER,o.showHoverEffect,o),o.grp.addEventListener(mouse.MouseEvent.MOUSE_OUT,o.hideHoverEffect,o)},r.prototype.showHoverEffect=function(){this.rect_hover.visible=!0},r.prototype.hideHoverEffect=function(){this.rect_hover.visible=!1},r}(mo.EUI.ItemRenderer);t.LimitSelectRenderer=r,__reflect(r.prototype,"G.COMM.LimitSelectRenderer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this._layerOpt.shownWithAction=!1},r.prototype.tryNextVideoUrl=function(){var t=this,r=t.data.bet||{},o=e.BASE.resHelper.getNexReplayUrl(r.round);return"loop2end"==o?void(t.label_video_loading.text="${{g_view_error}}"):void(t.video&&(t.video=new egret.Video,t.video.once(egret.Event.COMPLETE,t.onLoad,t),t.video.once(egret.IOErrorEvent.IO_ERROR,t.onLoadErr,t),t.video.load(o)))},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=null;r.isEnter=!0,r.videoLoading.visible=!1,r._playVideoConnecting(),mo.TM.setTimeout4Tick((function(){if(r.isEnter){var t=r.data.bet||{};o=e.BASE.resHelper.getNexReplayUrl(t.round),r.video=new egret.Video,r.video.x=0,r.video.y=0,mo.PROJ.isPc&&(r.video.width=1280,r.video.height=769),r.video.fullscreen=!1,r.video.poster="",r.video.load(o),r.grp_video.addChild(r.video),r.video.once(egret.Event.COMPLETE,r.onLoad,r),r.video.once(egret.IOErrorEvent.IO_ERROR,r.onLoadErr,r),r.label_current_play_time.addEventListener(egret.Event.ENTER_FRAME,r.showPosition,r),r.label_current_play_time.visible=!0,r.videoTextUpdateCount=1}}),500)},r.prototype.onLoadErr=function(){var e=this;e._playVideoConnecting(),mo.TM.setTimeout4Tick((function(){e.tryNextVideoUrl()}),500)},r.prototype.onLoad=function(){this._stopVideoConnecting(),this.video.play(0,!1)},r.prototype.showPosition=function(e){var t=this;t.video.length>0&&(t.videoTextUpdateCount%60==0?(e.target.text=t.toMMSS(t.video.position)+" / "+t.toMMSS(t.video.length),t.videoTextUpdateCount=1):t.videoTextUpdateCount++);var r=document.getElementsByTagName("video")[0];if(r){var o=1;window.innerWidth<window.innerHeight?(o=480/864,r.width=window.innerWidth,r.height=window.innerWidth*o):(r.width=window.innerWidth/2,r.height=r.width*o),r.style.top=(window.innerHeight-r.height)/2+"px",r.style.left=(window.innerWidth-r.width)/2+"px",r.style.zIndex="999999"}},r.prototype.toMMSS=function(e){var t=parseInt(e,10),r=Math.floor(t/3600),o=Math.floor((t-3600*r)/60),a=t-3600*r-60*o;return(10>o?"0"+o:""+o)+":"+(10>a?"0"+a:""+a)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},r.prototype.showRoundCode=function(){var e=this,t=e.data.bet;t&&t.roundCode&&(e.grp_bacc.visible=!0,e.label_bacc_time.text=t.roundCode.toString())},r.prototype.showUIs=function(){var e=this.data.bet;if(e)switch(e.tableType){case CONST.tableType.baccarat:this.showBaccUIs()}},r.prototype.showBaccUIs=function(){var t=this,r=t.data.bet;if(r&&r.round&&r.round.srcResults&&r.round.results){t.grp_bacc.visible=!0,t.label_bacc_username.text=r.userName+"(ID: "+r.userId+")",t.label_bacc_time.text=mo.DATE.format(r.betTime),t.label_bacc_roomid.text=r.tableCode.toString(),t.label_bacc_tableid.text=r.roundCode.toString(),t.label_bacc_dealerid.text=r.dealerName.toString(),t.label_bacc_betNum.text=r.bet.toString(),t.label_bacc_payoutNum.text=r.payout.toString();var o=r.round.srcResults,a=e.UTIL.calBaccarat(o[0],o[1],o[2]),i=e.UTIL.calBaccarat(o[3],o[4],o[5]);t.label_bacc_pp.text=""+a,t.label_bacc_bp.text=""+i,t.showCard(CONST.betType.baccarat.player,0,o[0]),t.showCard(CONST.betType.baccarat.player,1,o[1]),t.showCard(CONST.betType.baccarat.banker,0,o[3]),t.showCard(CONST.betType.baccarat.banker,1,o[4]),o[2]&&t.showCard(CONST.betType.baccarat.player,2,o[2]),o[5]&&t.showCard(CONST.betType.baccarat.banker,2,o[5]);for(var n=-1,s=0,l=0,c=0,p=r.round.results.length;p>c;c++){var _=r.round.results[c];_==CONST.betType.baccarat.bankerPair?s=1:_==CONST.betType.baccarat.playerPair?l=1:n=_==CONST.betType.baccarat.draw?CONST.betType.baccarat.draw:_}if(-1!=n){var u="";n==CONST.betType.baccarat.draw?u="zp_T":n==CONST.betType.baccarat.banker?u="zp_B":n==CONST.betType.baccarat.player&&(u="zp_P"),u+=s.toString()+l.toString()+"_ll_l",t.img_bacc_result.source=u}for(var h in r.betDetail)for(var m in t.showBaccBetOnDesk(parseInt(h),r.betDetail[h]),r.betDetail[h])console.log("detail = "+m)}},r.prototype.showBaccBetOnDesk=function(e,t){var r=this,o=null;switch(e){case CONST.betType.baccarat.draw:o=r.grp_bacc_desk_tie;break;case CONST.betType.baccarat.banker:o=r.grp_bacc_desk_banker;break;case CONST.betType.baccarat.player:o=r.grp_bacc_desk_player;break;case CONST.betType.baccarat.bankerPair:o=r.grp_bacc_desk_bankerPair;break;case CONST.betType.baccarat.playerPair:o=r.grp_bacc_desk_playerPair}if(o){var a=o.getChildByName("img_confirm"),i=o.getChildByName("grp_betNum");a&&(a.visible=!0),i&&(i.visible=!0,i.setData({num:t}))}},r.prototype.showCard=function(e,t,r){var o=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];o&&(o.visible=!0,o.setData({id:r}),o.turnOver(!1))},r.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;r.isEnter=!1,r.unEmitter(),r.videoLoading.hideAnim(),r.label_current_play_time.removeEventListener(egret.Event.ENTER_FRAME,r.showPosition,r);var o,a=document.getElementsByTagName("video");for(o=a.length-1;o>=0;o--)a[o].parentNode.removeChild(a[o]);e.BASE.resHelper.replayUrlIndex=0,e.BASE.resHelper.replayUrlLoopCount=0},r.prototype._playVideoConnecting=function(){this.label_video_loading.visible=!0},r.prototype._stopVideoConnecting=function(){this.label_video_loading.visible=!1},r.prototype._tap_btn_back=function(){this.close()},r}(mo.EUI.TopLayer);t.VideoDlg=r,__reflect(r.prototype,"G.COMM.VideoDlg"),mo.emitter.on(CONST.videoEvent.replay,(function(t){e.COMM.VideoDlg.show({bet:t})}))}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=r.data.url;o&&(r.onEmitter(e.stageUtil,e.StageUtil.ON_WIN_CLOSED,r.goBack),e.GW.mgr.openIframePage(o))},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype.goBack=function(){this.close()},r}(mo.EUI.TopLayer);t.IframeDlg=r,__reflect(r.prototype,"G.COMM.IframeDlg"),mo.emitter.on("openIframe",(function(t){e.COMM.IframeDlg.show({url:t})}))}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this),this._Item_list_room=e.COMM.SlotGameItem,this.ppLoadIndex=0,this.ppLoadMaxSize=0},r.prototype.rebuildScrollerBar=function(){var e=this;e.removeChild(e.scrollerbar),e.initScrollerBar()},r.prototype.initScrollerBar=function(){var t=this;t.scrollerbar=new e.COMM.ScrollerBar,t.addChild(t.scrollerbar),t.scrollerbar.init(t.pcRoomListScroller,"v_slot")},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.pcRoomListScroller.x=120,r.pcRoomListScroller.y=268,r.pcRoomListScroller.height=450,r.rect_list=new eui.Rect,r.rect_list.width=1105,r.rect_list.height=540,r.rect_list.x=160,r.rect_list.y=218,r.addChild(r.rect_list),r.swapChildren(r.rect_list,r.pcRoomListScroller),r.rect_list.visible=!1;var o=220;r.btn_hot=new eui.ToggleButton,r.btn_hot.x=180,r.btn_hot.y=o,r.btn_hot.label="${{g_hot_games}}",r.btn_hot.skinName="skins.Btn_fsH_Skin",r.addChild(r.btn_hot),r.btn_new=new eui.ToggleButton,r.btn_new.x=332,r.btn_new.y=o,r.btn_new.label="${{g_latest_games}}",r.btn_new.skinName="skins.Btn_fsN_Skin",r.addChild(r.btn_new),r.btn_all=new eui.ToggleButton,r.btn_all.x=484,r.btn_all.y=o,r.btn_all.label="${{g_all_games}}",r.btn_all.skinName="skins.Btn_fsA_Skin",r.addChild(r.btn_all),r.btn_jp=new eui.ToggleButton,r.btn_jp.x=636,r.btn_jp.y=o,r.btn_jp.label="${{jackpotGames}}",r.btn_jp.skinName="skins.Btn_fsA_Skin",r.addChild(r.btn_jp),r.btn_hot.selected=!0,r.btn_new.selected=!1,r.btn_all.selected=!1,r.btn_jp.selected=!1,r.p_search=new eui.Image,r.p_search.source="fs_2",r.p_search.width=240,r.p_search.x=900,r.p_search.y=o,r.addChild(r.p_search),r.label_input=new eui.TextInput,r.label_input.width=210,r.label_input.height=40,r.label_input.skinName="TextInput_04_Skin",r.label_input.x=906,r.label_input.y=228,r.label_input.height=37,r.label_input.width=190,r.addChild(r.label_input),r.btn_search=new eui.Button,r.btn_search.x=1100,r.btn_search.y=230,r.btn_search.skinName="skins.Btn_fsS_Skin",r.addChild(r.btn_search),r.btn_hot.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_hot,r),r.btn_new.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_new,r),r.btn_all.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_all,r),r.btn_jp.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_jp,r),r.btn_search.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_search,r),(e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)||e.GW.mgr.ifGameOpen(CONST.gameAPI.DRAGON_TIGER)||e.GW.mgr.ifGameOpen(CONST.gameAPI.ROULETTE)||e.GW.mgr.ifGameOpen(CONST.gameAPI.SIC_BO)||e.GW.mgr.ifGameOpen(CONST.gameAPI.BLOCK_CHAIN_BACCARAT))&&(r.btn_hot.visible=!0,r.btn_new.visible=!0,r.btn_all.visible=!0,r.btn_jp.visible=e.GTS.userCtrl.type!=CONST.userType.tourist&&!e.GW.mgr.ifGameOpen(CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT)),mo.emitter.on("onlySlotPC",(function(e){0==e&&r._tap_btn_hot(),1==e&&r._tap_btn_new(),2==e&&r._tap_btn_all(),3==e&&r._tap_btn_jp()})),r.label_input.addEventListener(egret.Event.CHANGE,r._tap_btn_search,r);var a=e.GTS.mgr.getPPAll();a.length>0?r.preloadPPImages(a,(function(){mo.stopWaiting(),r.ppLoadMaxSize=0,r.ppLoadIndex=0,r.dataSlot=a;var t=new eui.TileLayout;t.paddingTop=40,t.paddingLeft=60,t.paddingRight=15,t.paddingBottom=15,t.horizontalGap=40,t.verticalGap=40,r.list_room.layout=t;var o,i,n;if(o=e.GTS.mgr.getPPHot(),i=e.GTS.mgr.getPPNew(),n=e.GTS.mgr.getPPAll(),r.acHot=new eui.ArrayCollection(o),r.acNew=new eui.ArrayCollection(i),r.acAll=new eui.ArrayCollection(n),e.GW.mgr.ifGameOpen(CONST.gameAPI.PRAGMATIC_PLAY_SLOT)){for(var s=[],l=0;l<e.GTS.mgr.getPPAll().length;l++)1==e.GTS.mgr.getPPAll()[l].jackpot&&s.push(e.GTS.mgr.getPPAll()[l]);r.acJp=new eui.ArrayCollection(s)}r.list_room.dataProvider=r.acHot})):(r.maintenanceLabel=new eui.Label,r.maintenanceLabel.size=48,r.maintenanceLabel.text=mo.D.langCodeToTxt("g_server_maintenance_title"),r.maintenanceLabel.x=716-r.maintenanceLabel.width/2,r.maintenanceLabel.y=483-r.maintenanceLabel.height,r.maintenanceLabel.visible=!0,r.addChild(r.maintenanceLabel)),r.initScrollerBar()},r.prototype.preloadPPImages=function(e,t){var r=this;if(mo.playWaiting(1),r.ppLoadMaxSize=e.length,0!=r.ppLoadMaxSize){for(var o=function(o){var a=e[o].gameID;("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(a+="_cn"),mo.R.load(a,(function(){r.ppLoadIndex++,r.ppLoadIndex==r.ppLoadMaxSize&&t(),mo.R.get(a)||console.log(a+" missing")}))},a=0;a<r.ppLoadMaxSize;a++)o(a);r.btn_hot.selected=!0,r.btn_new.selected=!1,r.btn_all.selected=!1,r.btn_jp.selected=!1,r.list_room.scrollV=0}else t()},r.prototype._data_list_room=function(){},r.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.unEmitter(),e.btn_hot.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_hot,e),e.btn_new.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_new,e),e.btn_all.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_all,e),e.btn_jp.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_jp,e),e.btn_search.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_search,e),e.label_input.removeEventListener(egret.Event.CHANGE,e._tap_btn_search,e),mo.emitter.emit("setShortcut",CONST.tableType.slot,!0)},r.prototype._tap_btn_hot=function(){var e=this;e.pcRoomListScroller&&e.pcRoomListScroller.stopAnimation(),e.btn_hot.selected=!0,e.btn_new.selected=!1,e.btn_all.selected=!1,e.btn_jp.selected=!1,e.label_input.text="",e.list_room.dataProvider=e.acHot,e.rebuildScrollerBar()},r.prototype._tap_btn_new=function(){var e=this;e.pcRoomListScroller&&e.pcRoomListScroller.stopAnimation(),e.btn_hot.selected=!1,e.btn_new.selected=!0,e.btn_all.selected=!1,e.btn_jp.selected=!1,e.label_input.text="",e.list_room.dataProvider=e.acNew,e.rebuildScrollerBar()},r.prototype._tap_btn_all=function(){var e=this;e.pcRoomListScroller&&e.pcRoomListScroller.stopAnimation(),e.btn_hot.selected=!1,e.btn_new.selected=!1,e.btn_all.selected=!0,e.btn_jp.selected=!1,e.label_input.text="",e.list_room.dataProvider=e.acAll,e.rebuildScrollerBar()},r.prototype._tap_btn_jp=function(){var e=this;e.pcRoomListScroller&&e.pcRoomListScroller.stopAnimation(),e.btn_hot.selected=!1,e.btn_new.selected=!1,e.btn_all.selected=!1,e.btn_jp.selected=!0,e.label_input.text="",e.list_room.dataProvider=e.acJp,e.rebuildScrollerBar()},r.prototype._tap_btn_search=function(){var t=this;if(t.pcRoomListScroller&&t.pcRoomListScroller.stopAnimation(),""!=t.label_input.text){t.btn_hot.selected=!1,t.btn_new.selected=!1,t.btn_jp.selected=!1,t.btn_all.selected=!0;var r=[];t.label_input.text=e.GTS.mgr.verifyEmoji(t.label_input.text);for(var o=t.label_input.text.toLowerCase(),a=e.GTS.mgr.getPPAll(),i=0;i<a.length;i++){var n=a[i],s=n.chinese.toLowerCase(),l=n.english.toLowerCase(),c=n.gameID;(-1!=s.indexOf(o)||-1!=l.indexOf(o))&&r.push({gameID:c,technologyID:"H5",platform:"MOBILE,DOWNLOAD,WEB",chinese:n.chinese,english:n.english})}t.pcRoomListScroller.viewport.scrollH=0,t.resetGameList(r)}else t._tap_btn_all();mo.emitter.emit("focusOnPPSearch_slotOnly",null)},r.prototype.resetGameList=function(e){this.list_room.dataProvider=new eui.ArrayCollection(e),this.rebuildScrollerBar()},r}(e.COMM.RoomList);t.SlotRoomList=r,__reflect(r.prototype,"G.COMM.SlotRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var o=this;e.GW.mgr.ifGameSingleOnlyOpen(CONST.tableType.BJ_Electronic)||(o.bottomPanel.init(t.DGBottomPanelType.roomListSelector,CONST.tableType.BJ_Electronic),o.bottomPanel.switch(t.DGBottomPanelType.roomListSelector,CONST.tableType.BJ_Electronic));var a=e.GTS.mgr.getBlackJackUrl();e.stageUtil.showWin200BlackJack(a),mo.emitter.on("backToDefault",o.backToDefault,o)},o.prototype.backToDefault=function(){e.COMM.layerMgr.retriveCurrentTableType()},o.prototype.onExit=function(){r.prototype.onExit.call(this),e.stageUtil.closeWin200BlackJack(),mo.emitter.unAll("backToDefault")},o}(mo.EUI.Layer);t.BJ_ElectronicRoomList=r,__reflect(r.prototype,"G.COMM.BJ_ElectronicRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.call(this)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;if(r.img_bg.source=this._getGameTypeRes(),r.label_gameName.text="zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?r.data.chinese:r.data.english,("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(r.label_gameName.size=30,r.label_gameName.height=60,r.label_gameName.lineSpacing=0),-1==e.GTS.userCtrl.type)r.tgbtn_love.visible=!1;else{var o=e.GTS.mgr.getLoveGames(),a=CONST.tableType.slot+"",i=!1;if(o&&o[a])for(var n=0;n<o[a].length;n++)o[a][n]==r.data.gameId&&(i=!0);r.tgbtn_love.selected=!!i}},r.prototype._getGameTypeRes=function(){return this.data.gameID?"zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?this.data.gameID+"_cn":""+this.data.gameID:void 0},r.prototype._tap_btn_touch=function(){if(!e.GW.mgr.isClickSlotGame){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_slot");var r=this.data.gameID;e.GTS.mgr.getPPGame(r,(function(o){e.RCD.log_mgr.sendEvent_FirstGame(CONST.tableType.slot),e.RCD.log_mgr.recordGetInSlotGame();var a="pgsoft"==t.data.providerId;if(e.GW.mgr.openPPGamePage(r,o,a),document.fullscreenElement){var i=document.getElementById("forFullscreen");i.requestFullscreen&&i.requestFullscreen()}}))}},r.prototype._tap_tgbtn_love=function(){e.playAudio("btnclick");e.GTS.mgr.setLoveGames(CONST.tableType.slot,this.data.gameId)},r}(mo.EUI.ItemRenderer);t.SlotGameItem=r,__reflect(r.prototype,"G.COMM.SlotGameItem"),e.GC.gc.registerClass(r.__className,r)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t.animationIndex=1,t.animationMaxIndex=8,t}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this);this.animationTimerId=null,this.showAnimation()},t.prototype.onExit=function(){e.prototype.onExit.call(this);var t=this;t.animationTimerId&&(clearInterval(t.animationTimerId),t.animationTimerId=null)},t.prototype.dynamicMoveTo=function(e,t,r,o,a){var i=this;if(i.parent&&e&&e.parent){i._cb_btn_confirm||(i._cb_btn_confirm=o),i._cb_btn_cancel||(i._cb_btn_cancel=a);var n=e.parent.localToGlobal(e.x,e.y),s=i.parent.globalToLocal(n.x,n.y);i.x=s.x+t,i.y=s.y+r}},t.prototype.showBtns=function(e){var t=this;t.btn_confirm&&(t.btn_confirm.visible=e),t.btn_cancel&&(t.btn_cancel.visible=e),t.confirm_animation&&(t.confirm_animation.visible=e)},t.prototype._tap_btn_confirm=function(){this._cb_btn_confirm&&this._cb_btn_confirm()},t.prototype._tap_btn_cancel=function(){this._cb_btn_cancel&&this._cb_btn_cancel()},t.prototype.showAnimation=function(){var e=this;if(e.confirm_animation){e.animationTimerId&&(clearInterval(e.animationTimerId),e.animationTimerId=null),e.confirm_animation.visible=!0;e.animationTimerId=setInterval((function(){e.animationIndex++,e.animationIndex>e.animationMaxIndex&&(e.animationIndex=1);e.confirm_animation.source="dg_confirm_btn_eff_"+e.animationIndex}),100)}},t}(mo.EUI.Comp);e.DynamicConfirm=t,__reflect(t.prototype,"G.COMM.DynamicConfirm")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.DaluPainter,o=e.BACC.LZMTORes,a=function(t){function a(){return t.apply(this,arguments)||this}return __extends(a,t),a.prototype._tap_grp_container=function(){e.COMM.layerMgr.fastEnterGameRoom(this.tableCtrl,CONST.tableType.baccarat)},a.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this._setupLuzuPainter()},a.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.grp_container.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.onRoll,e),e.grp_container.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.onRoll,e),e.grp_betNow.visible=!1},a.prototype.onRoll=function(e){switch(e.type){case mouse.MouseEvent.MOUSE_OVER:this.grp_betNow.visible=!0;break;case mouse.MouseEvent.MOUSE_OUT:this.grp_betNow.visible=!1}},a.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;r.data&&(r.tableCtrl=r.data,r.tableCtrl&&r.tableCtrl!=r.oldTableCtrl&&(r.unEmitter(),r.onEmitter(r.tableCtrl,CONST.BBT_table.openRound,r._openRound),r.onEmitter(r.tableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.tableCtrl,CONST.BBT_table.betStop,r._betStop),r.onEmitter(r.tableCtrl,CONST.BBT_table.shuffle,r._shuffle),r.label_roadName.text=r.tableCtrl.name,r.analyst||(r.analyst=new e.BACC.LuzhuAnalyst(1)),r.oldTableCtrl=r.tableCtrl,r.img_like.visible=!1,r._gameStateChange(r.tableCtrl.gameState)))},a.prototype._handleState_betting=function(){var e=this,t=e.tableCtrl.getBetStopTime();if(t){var r=t.getTime()-mo.DATE.now()-1e3*e.tableCtrl.betSec;0>r&&(r=0),mo.TM.setTimeout((function(){e.compTimerState.stateBetting(),e.compTimerState.refreshTime(e.tableCtrl.betSec,t)}),r);var o=mo.DATE.date().getTime();mo.TM.setTimeout((function(){e.compTimerState.stateClearing()}),t.getTime()-o)}else e.compTimerState.stateClearing()},a.prototype._handleState_shuffle=function(){this.compTimerState.stateShuffle()},a.prototype._handleState_payout=function(){this.compTimerState.stateClearing()},a.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},a.prototype._updateGameState=function(e){var t=this;if(t.tableCtrl)switch(e){case CONST.gameState.betting:t._handleState_betting();break;case CONST.gameState.shuffle:t._handleState_shuffle();break;case CONST.gameState.payout:t._handleState_payout();break;case CONST.gameState.stopBet:t._handleState_stopBet()}},a.prototype._gameStateChange=function(e){this._updateUI(),this._updateGameState(e)},a.prototype._openRound=function(){this._gameStateChange(CONST.gameState.betting)},a.prototype._betStop=function(){this._gameStateChange(CONST.gameState.stopBet)},a.prototype._payout=function(){this._gameStateChange(CONST.gameState.payout)},a.prototype._shuffle=function(){this._gameStateChange(CONST.gameState.shuffle)},a.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.grp_container.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.onRoll,e),e.grp_container.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.onRoll,e),e.unEmitter()},a.prototype._updateUI=function(){this._refreshLuzhu()},a.prototype._refreshLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList,r=e.analyst;if(r.clearData(),t&&0!==t.length){for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});var i=e.tableCtrl.gameState==CONST.gameState.betting;if(e.daluPainter.setDaLuData(r.getDaLuData(),i),i)egret.Tween.get(e.img_like).to({visible:!1},400).to({visible:!0},400).to({visible:!1},400).to({visible:!0},400);var n=e.analyst.getDaLuData();if(n&&n.length>0){var s=n[n.length-1],l=s[s.length-1];e.img_like.visible=!0,e.img_like.source=l.winResult==CONST.betType.baccarat.banker?"like_b":"like_p"}}else e.daluPainter.setDaLuData([])},a.prototype._setupLuzuPainter=function(){var e={gridSize:9,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};e.res=o,e.lineColor=15263976,e.isForGoodRoad=!0,this.daluPainter=new r(this.scr_dalu,e)},a}(mo.EUI.ItemRenderer);t.GrtNeonItem=a,__reflect(a.prototype,"G.COMM.GrtNeonItem")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this,o=r.ruleContentScroller.getChildByName("container");switch(r.data.type){case CONST.tableType.all:case CONST.tableType.baccarat:o.addChild(new e.COMM.ContentBacc_CB);break;case CONST.tableType.dragonTiger:o.addChild(new e.COMM.ContentDT);break;case CONST.tableType.roulette:o.addChild(new e.COMM.ContentRlt);break;case CONST.tableType.sicBo:o.addChild(new e.COMM.ContentSicbo);break;case CONST.tableType.slot:o.addChild(new e.COMM.ContentSlot);break;case CONST.tableType.BB:o.addChild(new e.COMM.ContentBB);break;case CONST.tableType.niuNiu:o.addChild(new e.COMM.ContentBullBull);break;case CONST.tableType.anchor:o.addChild(new e.COMM.ContentAnchor)}r.ruleContentScrollerBar.init(r.ruleContentScroller,"v2")},r}(mo.EUI.Dlg);t.RuleLoader=r,__reflect(r.prototype,"G.COMM.RuleLoader")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this,o=r.ruleContentScroller.getChildByName("container");switch(r.data.type){case CONST.tableType.all:case CONST.tableType.baccarat:o.addChild(new e.COMM.ContentBacc_CB);break;case CONST.tableType.dragonTiger:o.addChild(new e.COMM.ContentDT);break;case CONST.tableType.roulette:o.addChild(new e.COMM.ContentRlt);break;case CONST.tableType.sicBo:o.addChild(new e.COMM.ContentSicbo);break;case CONST.tableType.slot:o.addChild(new e.COMM.ContentSlot);break;case CONST.tableType.BB:o.addChild(new e.COMM.ContentBB);break;case CONST.tableType.niuNiu:o.addChild(new e.COMM.ContentBullBull);break;case CONST.tableType.anchor:o.addChild(new e.COMM.ContentAnchor);break;case CONST.tableType.cashWheel:case CONST.tableType.cashWheel:o.addChild(new e.COMM.ContentArlt);break;case CONST.tableType.BJ_Electronic:o.addChild(new e.COMM.ContentBJE)}r.ruleContentScrollerBar.init(r.ruleContentScroller,"v2")},r}(mo.EUI.Dlg);t.RuleLoaderDG=r,__reflect(r.prototype,"G.COMM.RuleLoaderDG")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this)},t}(mo.EUI.Comp);e.ContentBacc=t,__reflect(t.prototype,"G.COMM.ContentBacc")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentBacc_CB_oddOppositeSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentBacc_CB_oddOpposite_ScnSkin":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t._skinName="ContentBacc_CB_oddOpposite_TcnSkin")},t.prototype.onEnter=function(){var t=this;e.prototype.onEnter.call(this),"th_th"==mo.PROJ.lang?(t.peach3.y=344,t.No1.y=533,t.No2.y=578,t.No3.y=628,t.NOLucky6_1.y=1059,t.NOLucky6_2.y=1113,t.label_forP3.x-=2):"my_mm"==mo.PROJ.lang?(t.peach3.y=344,t.No1.y=533,t.No2.y=578,t.No3.y=628,t.NOLucky6_1.y=1057,t.NOLucky6_2.y=1111,t.label_forP3.x-=2):"km_kh"==mo.PROJ.lang?(t.peach3.y=348,t.No1.y=533,t.No2.y=578,t.No3.y=627,t.NOLucky6_1.y=1064,t.NOLucky6_2.y=1113,t.label_forP3.x-=2):"ta_in"==mo.PROJ.lang?(t.peach3.y=337,t.No1.y=534,t.No2.y=578,t.No3.y=631,t.NOLucky6_1.y=1061,t.NOLucky6_2.y=1115,t.label_forP3.x-=2):"hi_in"==mo.PROJ.lang&&(t.peach3.y=344,t.No1.y=532,t.No2.y=577,t.No3.y=627,t.NOLucky6_1.y=1056,t.NOLucky6_2.y=1110,t.label_forP3.x-=2)},t}(mo.EUI.Comp);e.ContentBacc_CB=t,__reflect(t.prototype,"G.COMM.ContentBacc_CB")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentBB_oddOppositeSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentBB_oddOpposite_ScnSkin":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t._skinName="ContentBB_oddOpposite_TcnSkin")},t.prototype.onEnter=function(){e.prototype.onEnter.call(this);for(var t=["BB_01","BB_02","BB_03","BB_04","BB_05","BB_06"],r=this,o=0;o<t.length;o++){r.grp_content.getChildByName(t[o]).source=t[o]+"_"+mo.PROJ.lang}"my_mm"==mo.PROJ.lang||("km_kh"==mo.PROJ.lang?r.peach_1.y=3555:"ta_in"==mo.PROJ.lang&&(r.peach_1.y=3560))},t}(mo.EUI.Comp);e.ContentBB=t,__reflect(t.prototype,"G.COMM.ContentBB")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentDT_enSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentDT_scnSkin":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t._skinName="ContentDT_tcnSkin")},t.prototype.onEnter=function(){e.prototype.onEnter.call(this)},t}(mo.EUI.Comp);e.ContentDT=t,__reflect(t.prototype,"G.COMM.ContentDT")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentRlt_oddOppositeSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentRlt_oddOpposite_ScnSkin":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t._skinName="ContentRlt_oddOpposite_TcnSkin")},t.prototype.onEnter=function(){e.prototype.onEnter.call(this);for(var t=["rlt_02_00","rlt_02_01","rlt_02_02","rlt_02_03","rlt_02_04","rlt_02_05","rlt_02_06","rlt_02_07","rlt_02_08","rlt_02_09","rlt_02_10","rlt_02_11","rlt_15","rlt_16","rlt_17"],r=0;r<t.length;r++){this.grp_content.getChildByName(t[r]).source=11>=r?"rlt_02_"+mo.PROJ.lang:t[r]+"_"+mo.PROJ.lang}},t}(mo.EUI.Comp);e.ContentRlt=t,__reflect(t.prototype,"G.COMM.ContentRlt")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentSicbo_oddOppositeSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentSicbo_oddOpposite_ScnSkin":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t._skinName="ContentSicbo_oddOpposite_TcnSkin")},t.prototype.onEnter=function(){e.prototype.onEnter.call(this);for(var t=["sib_pc_01"],r=0;r<t.length;r++){this.grp_content.getChildByName(t[r]).source=t[r]+"_"+mo.PROJ.lang}"fr_fr"==mo.PROJ.lang&&(this.rule_sicbo_page3_text1.text="Tableau des chiffres \nimpairs")},t}(mo.EUI.Comp);e.ContentSicbo=t,__reflect(t.prototype,"G.COMM.ContentSicbo")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t}(mo.EUI.Comp);e.ContentSlot=t,__reflect(t.prototype,"G.COMM.ContentSlot")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentBullBull_oddOppositeSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentBullBull_oddOpposite_ScnSkin":"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?t._skinName="ContentBullBull_oddOpposite_TcnSkin":"in_id"==mo.PROJ.lang&&(t._skinName="ContentBullBull_oddOpposite_inidSkin")},t.prototype.onEnter=function(){e.prototype.onEnter.call(this),("th_th"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang)&&(this.label_title.y=this.label_title.y-3)},t}(mo.EUI.Comp);e.ContentBullBull=t,__reflect(t.prototype,"G.COMM.ContentBullBull")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentAnchor_enSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentAnchor_scnSkin":"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?t._skinName="ContentAnchor_tcnSkin":mo.PROJ.lang},t.prototype.onEnter=function(){e.prototype.onEnter.call(this);for(var t=["anchor03"],r=0;r<t.length;r++){this.grp_content.getChildByName(t[r]).source="en_us"==mo.PROJ.lang||"zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?t[r]+"_"+mo.PROJ.lang:t[r]+"_en_us"}if("ta_in"==mo.PROJ.lang){var o=new mo.EUI.Label;o.size=32,o.width=1600,o.scaleX=.5,o.scaleY=.5,o.cutWidth=1125,o.text=mo.D.langCodeToTxt("Rocket_Girls_Description_16"),console.log(o.text),this.Rocket_Girls_Description_16.text=o.text}},t}(mo.EUI.Comp);e.ContentAnchor=t,__reflect(t.prototype,"G.COMM.ContentAnchor")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);var t=this;"en_us"==mo.PROJ.lang?t._skinName="ContentArlt_enSkin":"zh_cn"==mo.PROJ.lang?t._skinName="ContentArlt_scnSkin":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t._skinName="ContentArlt_tcnSkin")},t.prototype.onEnter=function(){e.prototype.onEnter.call(this);for(var t=["arlt_04","arlt_05"],r=0;r<t.length;r++){this.grp_content.getChildByName(t[r]).source="ta_in"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang?t[r]+"_en_us":t[r]+"_"+mo.PROJ.lang}},t}(mo.EUI.Comp);e.ContentArlt=t,__reflect(t.prototype,"G.COMM.ContentArlt")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this)},t.prototype.onEnter=function(){e.prototype.onEnter.call(this);for(var t=0;12>t;t++){var r="img_spade_"+t,o=this.grp_content.getChildByName(r);"th_th"==mo.PROJ.lang&&(o.y+=6)}},t}(mo.EUI.Comp);e.ContentBJE=t,__reflect(t.prototype,"G.COMM.ContentBJE")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e._scrollerHeight=80,e._scrollerWidth=217,e}return __extends(r,t),r.prototype.onEnter=function(){this.setLuzhu()},r.prototype.setLuzhu=function(){var t=this;t.scroller_dalu.width=t._scrollerWidth,t.scroller_dalu.height=t._scrollerHeight;var r={gridSize:12,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6,lineColor:15263976};r.res=e.BACC.LZllRes,t.daluPainter=new e.BACC.DaluPainter(t.scroller_dalu,r)},r.prototype.refreshLuzhu=function(t){var r=this,o=function(t){var o=r.analyst=new e.BACC.LuzhuAnalyst(1);if(!t||0===t.length)return o;for(var a=0;a<t.length;a++)t[a].results&&o.receiveHistoryMsg({results:t[a].results,roundNo:t[a].code,cards:[]});return o}(t.luZhuList||[]);r.daluPainter.setDaLuData(o.getDaLuData())},r}(mo.EUI.Comp);t.ShortCutLuzhu_B=r,__reflect(r.prototype,"G.COMM.ShortCutLuzhu_B")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.setLuzhu=function(){var t=this;t.scroller_dalu.width=t._scrollerWidth,t.scroller_dalu.height=t._scrollerHeight;var r={gridSize:12,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6,lineColor:15263976};r.res=e.BACC.LZllRes,t.daluPainter=new e.BACC.DTDaluPainter(t.scroller_dalu,r)},r}(t.ShortCutLuzhu_B);t.ShortCutLuzhu_D=r,__reflect(r.prototype,"G.COMM.ShortCutLuzhu_D")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){this.setLuzhu()},r.prototype.setLuzhu=function(){this._NNRoadData=new e.NN.NNRoadData(20)},r.prototype.refreshLuzhu=function(e){var t=this,r=e.code,o=e.luZhuList,a=CONST.gameState.payout||e.gameState;switch(t._currentTableCode!=r&&(t._currentTableCode=r,t._NNRoadData.convertLuzhuList(o),t._setRoadData(!0)),a){case CONST.gameState.betting:case CONST.gameState.stopBet:t._addRoad(e);break;case CONST.gameState.payout:t._NNRoadData.convertLuzhuList(o);case CONST.gameState.shuffle:t._updateRoad(e)}},r.prototype._addRoad=function(e){var t=e.roundCtrl,r=t.cardHands,o=t.code;this._NNRoadData.addNewEmptyRoad(o,{cardHands:r,code:o}),this._setRoadData(!1)},r.prototype._updateRoad=function(e){var t=e.roundCtrl,r=t.cardHands,o=t.code;this._NNRoadData.updateLastRoad(o,r),this._setRoadData(!1)},r.prototype._setRoadData=function(t){void 0===t&&(t=!1);var r=this,o=r._NNRoadData.getRoadData();t&&r.grp.removeChildren();for(var a=1;5>=a;a++)if(r.grp.$children.length<a){(n=new e.NN.NNRoadListItem).setData(null),r.grp.addChild(n),n.x=50*(a-1)}for(var i=0;i<o.length;i++)if(r.grp.$children.length>i){r.grp.$children[i].setData(o[i].cardHands)}else{var n;(n=new e.NN.NNRoadListItem).setData(o[i].cardHands),r.grp.addChild(n),n.x=50*i}mo.nextTick((function(){r.scroller.viewport.scrollH=r._NNRoadData.getScrollHByOffset(5)}))},r.prototype.getRoadCounter=function(){return this._NNRoadData.getCounterInfo()},r}(mo.EUI.Comp);t.ShortCutLuzhu_N=r,__reflect(r.prototype,"G.COMM.ShortCutLuzhu_N")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.rtlNumRes,o=function(t){function o(){return t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onEnter=function(){this.setLuzhu()},o.prototype.setLuzhu=function(){var t=this,o={gridSize:20,showGrid:!0,isScroll:!0,maxCol:50,maxRow:6,lineColor:15263976};o.res=r,t.zhuPanLuPainter=new e.RLT.ZhuPanLuPainter(t.scroller,o),t.analyst=new e.RLT.LuzhuAnalyst},o.prototype.refreshLuzhu=function(e){var t=this,r=e.code,o=e.luZhuList;r&&o&&(t.analyst.clearData(),t.analyst.setGameId(r),t.analyst.parseLuZhuList(o),t.zhuPanLuPainter.setZhuPanData(t.analyst.getZhuPanData()))},o}(mo.EUI.Comp);t.ShortCutLuzhu_R=o,__reflect(o.prototype,"G.COMM.ShortCutLuzhu_R")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.maxShowNum=10,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this._Item_luzhuList=e.DICE.DiceResultRenderer},r.prototype.refreshLuzhu=function(e){var t=this;t._luzhuList=[];for(var r=e.luZhuList||[],o=0;o<r.length;o++)r[o].results&&t._luzhuList.push(r[o]);if(t._luzhuList.length<t.maxShowNum){var a=t.maxShowNum-t._luzhuList.length;for(o=0;a>o;o++)t._luzhuList.push(null)}else t._luzhuList.push(null);t.refreshList("luzhuList"),t.scroller.validateNow(),t.scroller.viewport.scrollH=t.scroller.viewport.contentWidth-t.scroller.width},r.prototype._data_luzhuList=function(){return this._luzhuList},r}(mo.EUI.Comp);t.ShortCutLuzhu_S=r,__reflect(r.prototype,"G.COMM.ShortCutLuzhu_S")}(e.COMM||(e.COMM={}))}(G||(G={}));var CONST;__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){this.luzhu.init(9,6,24,1,1,!1,48)},t.prototype.refreshLuzhu=function(e){var t=e.luZhuList||[];this.luzhu.updateLuzhu(t)},t}(mo.EUI.Comp);e.ShortCutLuzhu_CW=t,__reflect(t.prototype,"G.COMM.ShortCutLuzhu_CW")}(e.COMM||(e.COMM={}))}(G||(G={})),function(e){!function(t){var r,o,a,i,n,s,l,c,p,_;t.grpHeight=((r={})[e.tableType.baccarat]=571,r[e.tableType.dragonTiger]=571,r[e.tableType.roulette]=618,r[e.tableType.sicBo]=620,r[e.tableType.niuNiu]=620,r[e.tableType.cashWheel]=618,r),t.grp=((o={})[e.tableType.baccarat]="grp_b",o[e.tableType.dragonTiger]="grp_d",o[e.tableType.roulette]="grp_r",o[e.tableType.sicBo]="grp_s",o[e.tableType.niuNiu]="grp_n",o[e.tableType.cashWheel]="grp_cw",o),t.rendererHeight=((a={})[e.tableType.baccarat]=122,a[e.tableType.dragonTiger]=122,a[e.tableType.roulette]=150,a[e.tableType.sicBo]=125,a[e.tableType.niuNiu]=110,a[e.tableType.cashWheel]=150,a),t.betInfoTxt=((i={})[e.tableType.baccarat]=((n={})[e.betType.baccarat.banker]="label_b_b",n[e.betType.baccarat.player]="label_b_p",n[e.betType.baccarat.draw]="label_b_t",n),i[e.tableType.dragonTiger]=((s={})[e.betType.dragonTiger.dragon]="label_d_d",s[e.betType.dragonTiger.tiger]="label_d_t",s[e.betType.dragonTiger.draw]="label_d_tie",s),i[e.tableType.roulette]=((l={})[e.betType.roulette.red]="label_r_r",l[e.betType.roulette.black]="label_r_b",l[e.betType.roulette.odd]="label_r_o",l[e.betType.roulette.even]="label_r_e",l[e.betType.roulette.direct+":0"]="label_r_z",l),i[e.tableType.sicBo]=((c={})[e.betType.sicBo.odd]="label_s_o",c[e.betType.sicBo.even]="label_s_e",c[e.betType.sicBo.big]="label_s_b",c[e.betType.sicBo.small]="label_s_s",c),i),t.roundInfoTxt=((p={})[e.tableType.baccarat]="label_round_b",p[e.tableType.dragonTiger]="label_round_d",p),t.luzhuComponent=((_={})[e.tableType.baccarat]="shortCutLuzhu_B",_[e.tableType.dragonTiger]="shortCutLuzhu_D",_[e.tableType.roulette]="shortCutLuzhu_R",_[e.tableType.sicBo]="shortCutLuzhu_S",_[e.tableType.niuNiu]="shortCutLuzhu_N",_[e.tableType.cashWheel]="shortCutLuzhu_CW",_)}(e.shortCut||(e.shortCut={}))}(CONST||(CONST={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e._showPosition=0,e._hidePosition=-150,e._duration=300,e._displacement=300,e._defaultFirstGameType=CONST.tableType.baccarat,e._gameTypeQ=[CONST.tableType.baccarat,CONST.tableType.dragonTiger,CONST.tableType.roulette,CONST.tableType.sicBo,CONST.tableType.niuNiu,CONST.tableType.cashWheel],e._tableCtrlArr=[],e._isOpen=!1,e._exceptTableCodeArr=[],e}return __extends(o,r),o.prototype._tap_btn_switch_to_shortcut=function(){var t=this;t.btn_switch_to_shortcut.selected=!0,t.btn_switch_to_grt.selected=!1,t.btn_switch_to_grt.includeInLayout&&t.loadRoomList(),e.RCD.log_mgr.sendEvent_ClientButton("goodroad.click.shortcut.pc")},o.prototype._tap_btn_switch_to_grt=function(){var t=this;t.btn_switch_to_grt.selected=!0,t.btn_switch_to_shortcut.selected=!1;var r=t._getGameApiByType(CONST.tableType.baccarat);e.GW.mgr.ifGameOpen(r)&&t.drop_down.changeSelection(CONST.tableType.baccarat),t.firstGameType=CONST.tableType.baccarat,t.sortRoomListAllGoodRoadToTop(),t.refreshList("list_room"),e.RCD.log_mgr.sendEvent_ClientButton("goodroad.click.road.pc")},o.prototype.focusToShortcut=function(){var e=this;e.btn_switch_to_shortcut&&e.btn_switch_to_grt&&(e.btn_switch_to_shortcut.selected=!0,e.btn_switch_to_grt.selected=!1)},o.prototype.setIsOpen=function(e){this._isOpen=e},o.prototype._initProp=function(){r.prototype._initProp.call(this);this._Item_list_room=t.RoomShortCutRenderer},o.prototype._data_list_room=function(){return this._tableCtrlArr},o.prototype.checkShortCutAndGoodRoadVisibility=function(){var t=this,r=t._getGameApiByType(CONST.tableType.baccarat);e.GW.mgr.ifGameOpen(r)||(t.img_switch_to_shortcut_round.includeInLayout=!1,t.btn_switch_to_shortcut.includeInLayout=!1,t.btn_switch_to_grt.includeInLayout=!1,t.img_switch_to_shortcut_round.visible=!1,t.btn_switch_to_shortcut.visible=!1,t.btn_switch_to_grt.visible=!1);var o=e.COMM.grtMgr.isUserNeedGRT();if(e.COMM.layerMgr.baseTopBar.tableCtrl.type!=CONST.tableType.baccarat&&(o=!1),t.btn_switch_to_shortcut&&t.btn_switch_to_grt&&t.img_switch_to_shortcut_round&&(t.img_switch_to_shortcut_round.includeInLayout=!o,t.btn_switch_to_shortcut.includeInLayout=o,t.btn_switch_to_grt.includeInLayout=o,t.img_switch_to_shortcut_round.visible=!o,t.btn_switch_to_shortcut.visible=o,t.btn_switch_to_grt.visible=o,t.btn_switch_to_shortcut.selected=!o,t.btn_switch_to_grt.selected=o),t.isGRTToggleButtonSelect())t.sortRoomListAllGoodRoadToTop(),t.refreshList("list_room");else{var a=e.COMM.layerMgr.getCurrentTableType();t.drop_down.changeSelection(a),t.loadRoomList(a)}},o.prototype.isGRTToggleButtonSelect=function(){var e=this;return!(!e.btn_switch_to_grt||!e.btn_switch_to_grt.includeInLayout)&&e.btn_switch_to_grt.selected},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);this.grp.visible=!1},o.prototype.init=function(){var e=this;e._isOpen=!0,e.initListPosition(),e.initListLength(),e.loadRoomList(),e.initDropDownList(),e.addMouseOverEvent(),e.onEmitter(mo.emitter,"refreshRoomShortCutMenu",e.doRefreshRoomShortCutMenu),e.onEmitter(mo.emitter,"refreshRoomShortCutMenu_maintain",e.doRefreshRoomShortCutMenu_maintain),e.onEmitter(mo.emitter,"TableMaintainRefreshTableList",e.refreshRoomList),e.onEmitter(mo.emitter,"roundIndexWrongRefreshTableList",e.refreshRoomList),e.onEmitter(mo.emitter,CONST.goodRoadTip.GOOD_ROAD_CHECK_SHORTCUT_AND_GOODROAD,e.checkShortCutAndGoodRoadVisibility),e.onEmitter(mo.emitter,CONST.goodRoadTip.GOOD_ROAD_COMES_H5,e.sortRoomListOneGoodRoadToTop)},o.prototype.onExit=function(){r.prototype.onExit.call(this);this.unEmitter()},o.prototype.sortRoomListOneGoodRoadToTop=function(t){var r=this;if(r.isGRTToggleButtonSelect()){if(0==e.COMM.grtMgr.getGoodRoadRoomNumber()){var o=e.COMM.layerMgr.getCurrentTableType();return r.drop_down.changeSelection(o),void r.loadRoomList(o)}var a=t.tableCode,i=t.roadName;r._tableCtrlArr.forEach((function(e,t){e.tableCtrl.code==a&&(null!=i?(r._tableCtrlArr.splice(t,1),r._tableCtrlArr.unshift(e)):r.sortRoomListAllGoodRoadToTop())})),r.refreshList("list_room")}},o.prototype.sortRoomListAllGoodRoadToTop=function(){var t=e.COMM.grtMgr.getGoodRoadRooms(),r=Object.keys(t),o=[],a=[];this._tableCtrlArr.forEach((function(e){r.indexOf(e.tableCtrl.code)>-1?o.push(e):a.push(e)})),o.sort((function(e,r){var o=e.tableCtrl.code,a=r.tableCtrl.code,i=Math.abs(t[o][0]),n=Math.abs(t[a][0]);return i>n?1:i==n?0:-1})),this._tableCtrlArr=o.concat(a)},o.prototype.doRefreshRoomShortCutMenu=function(e,t){this.loadRoomList(e,[t])},o.prototype.doRefreshRoomShortCutMenu_maintain=function(){var t=this;if(e.COMM.layerMgr.checkIfCurrInGameRoom()){var r=e.COMM.layerMgr.getGameTypeFromCurrLayerName(),o=e.COMM.layerMgr.baseTopBar.tableCtrl.code;t.loadRoomList(r,[o]),t.initDropDownList(),t.drop_down.changeSelection(r)}},o.prototype.closeList=function(){this.grp.visible=!1},o.prototype.showList=function(e,t){var r=this;if(r._isOpen){if(r._gameTypeQ.indexOf(e)<0)return void r.closeList();r.initListPosition(),r.setHeightByGameType(e),r.loadRoomList(e,t),r.initDropDownList(),r.drop_down.changeSelection(e),r.checkShortCutAndGoodRoadVisibility(),r.grp.visible=!0}},o.prototype.loadRoomList=function(t,r){void 0===t&&(t=this._defaultFirstGameType),void 0===r&&(r=[]);var o=this;o._tableCtrlArr=[],o.scroller_room.stopAnimation();var a=o._getGameTypeListByQ(t).reduce((function(t,r){var a=[],i=o._getGameApiByType(r);return e.GW.mgr.ifGameOpen(i)&&(a=(a=e.GTS.mgr.getTableCtrlListByType(r)||[]).filter((function(t){return!e.GTS.mgr.isTableMaintain(t.$$data.code)}))),t.concat(a)}),[]);r&&0!=r.length&&(o._exceptTableCodeArr=r),a=a.filter((function(e){return-1==r.indexOf(e.code)}));for(var i=0;i<a.length;i++){var n=a[i],s=i!=a.length-1&&a[i].type!=a[i+1].type;o._tableCtrlArr.push({tableCtrl:n,showEndLine:s})}o.isGRTToggleButtonSelect()&&o._defaultFirstGameType==CONST.tableType.baccarat&&e.COMM.grtMgr.getGoodRoadRoomNumber()>0&&o.sortRoomListAllGoodRoadToTop(),o.refreshList("list_room"),o.firstGameType=t||o._defaultFirstGameType;var l=o.list_room.contentHeight>o.list_room.height;o.showArrowImg(!1,l)},o.prototype.setHeightByGameType=function(t){if(this.grp){var r=e.COMM.layerMgr.baseTopBar;if(r)if(r.tableCtrl){var o=CONST.shortCut.grpHeight[t];this.grp.height=parseFloat(o)}}},o.prototype.refreshRoomList=function(){this.refreshList("list_room")},o.prototype._getGameTypeListByQ=function(e){var t=this;if(t._gameTypeQ.indexOf(e)<0||!e)return t._gameTypeQ.slice();var r=t._gameTypeQ.slice();return[e].concat(r.filter((function(t){return t!=e})))},o.prototype._getGameApiByType=function(e){for(var t in CONST.menu.gameType){if(CONST.menu.gameType[t]==e)return t}return null},o.prototype.initListPosition=function(){var e=this;e.grp.left=e._showPosition,e.btn_expand_img.source="switch_table_on_dg"},o.prototype.initListLength=function(){},o.prototype.initDropDownList=function(){var t=this;if(e.GW.mgr.ifGameSingle()&&1==e.GW.mgr.getOpenGameArray().length)return t.drop_down.visible=!1,t.scroller_room.top=35,void(t.arrow_up.top=15);var r=[{id:CONST.tableType.baccarat,name:mo.D.langCodeToTxt("g_baccarat")},{id:CONST.tableType.dragonTiger,name:mo.D.langCodeToTxt("g_dragon_tiger")},{id:CONST.tableType.roulette,name:mo.D.langCodeToTxt("g_roulette")},{id:CONST.tableType.sicBo,name:mo.D.langCodeToTxt("g_sic_bo")},{id:CONST.tableType.niuNiu,name:mo.D.langCodeToTxt("g_nn_name")},{id:CONST.tableType.cashWheel,name:mo.D.langCodeToTxt("game_name_LadyLuck")}].filter((function(r){var o=t._getGameApiByType(r.id),a=e.GW.mgr.ifGameOpen(o),i=0!=t._tableCtrlArr.filter((function(e){return e.tableCtrl.type==r.id})).length;return a&&i}));r.length&&t.drop_down.setData({list:r,callback:this.changeQ,target:this})},o.prototype.changeQ=function(t){var r=this;if(r.firstGameType!=Number(t)){var o={};o.tableType=Number(t),e.RCD.mgr.recordState(e.RCD.RcdState.FAST_SELECT_GAME_TYPE,o),r.focusToShortcut(),r.loadRoomList(Number(t),r._exceptTableCodeArr)}},o.prototype.addMouseOverEvent=function(){var e=this;mo.PROJ.isPc&&(e.scroller_room.addEventListener(mouse.MouseEvent.MOUSE_OVER,e._onMouseOver.bind(e,e.scroller_room),e),e.scroller_room.addEventListener(mouse.MouseEvent.MOUSE_OUT,e._onMouseOver.bind(e,e.scroller_room),e),this.list_room.parent.addEventListener(egret.Event.CHANGE,this._onListChange,this))},o.prototype._onMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r._wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r._wheel,r)}},o.prototype._wheel=function(e){var t=this;t.list_room.contentHeight<t.list_room.height||(e.data<0&&(t.list_room.scrollV+=-e.data*CONST.wheelRatio),e.data>0&&(t.list_room.scrollV-=e.data*CONST.wheelRatio),t._onListChange())},o.prototype._onListChange=function(){var e=this;e.list_room.scrollV>=e.list_room.contentHeight-e.list_room.height?(e.list_room.scrollV=e.list_room.contentHeight-e.list_room.height,e.showArrowImg(!0,!1)):e.list_room.scrollV<=0?(e.list_room.scrollV=0,e.showArrowImg(!1,!0)):e.showArrowImg(!0,!0)},o.prototype.showArrowImg=function(e,t){this.arrow_up.visible=e,this.arrow_down.visible=t},o.prototype._tap_arrow_up=function(){this.moveByArrow(!0)},o.prototype._tap_arrow_down=function(){this.moveByArrow(!1)},o.prototype.moveByArrow=function(e){var t=this;if(!(t.list_room.contentHeight<t.list_room.height)){var r=t.list_room.scrollV,o=e?-1*t._displacement:t._displacement,a=egret.Ease.sineIn;t.getTween(t.list_room,{loop:!1}).to({scrollV:r+o},250,a).call((function(){t.rmTweens(t.list_room),t._onListChange()}))}},o}(mo.EUI.Comp);t.RoomShortCutMenu=r,__reflect(r.prototype,"G.COMM.RoomShortCutMenu")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.shortCut,o=function(t){function o(){var e=t.apply(this,arguments)||this;return e.tempSrcResult=[],e}return __extends(o,t),o.prototype.onEnter=function(){t.prototype.onEnter.call(this);this.label_good_road_name&&(this.label_good_road_name.text="")},o.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;r._tableCtrl=r.data.tableCtrl;var o=[CONST.BBT_table.scanCard,CONST.BBT_table.payout,CONST.BBT_table.shuffle,CONST.BBT_table.openRound,CONST.BBT_table.betStop,CONST.BBT_table.miZhuChanged,CONST.BBT_table.applyOvertime];if(r._tableCtrl!=r._oldTableCtrl){if(r.unEmitter(),r._tableCtrl.type==CONST.tableType.cashWheel)r.onEmitter(r._tableCtrl,CONST.BBT_table.openRound,r.onOpenRound_CashWheel),r.onEmitter(r._tableCtrl,CONST.BBT_table.payout,r.dataChanged);else for(var a=0;a<o.length;a++)r.onEmitter(r._tableCtrl,o[a],r.dataChanged);r.onEmitter(r._tableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,r.resetGamePage),r.onEmitter(mo.emitter,"deactivate",r._handleDeactivate),r._oldTableCtrl=r._tableCtrl}var i=r.data.showEndLine||!1;r.end_line.visible=i,r.timer.audioEnabled=!1,r.label_room_name.text=r._tableCtrl.name||"No data",r.setGrp(r._tableCtrl),r.setLuzhuData(r._tableCtrl),r.setRoundInfo(r._tableCtrl),r.tempSrcResult=r._tableCtrl.roundCtrl.srcResults||[],r._gameStateChange(r._tableCtrl.gameState),"de_de"==mo.PROJ.lang&&(r.label_t.text="TIE",r.label_d_ti.text="TIE"),("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(r.label_room_name.size=40,r.label_round_b.size=28,r.label_b.size=28,r.label_b_b.size=28,r.label_t.size=28,r.label_b_t.size=28,r.label_p.size=28,r.label_b_p.size=28,r.label_round_d.size=28,r.label_d_d.size=28,r.label_d_tie.size=28,r.label_d_t.size=28,r.label_s_b.size=28,r.label_s_s.size=28,r.label_s_o.size=28,r.label_s_e.size=28,r.label_r_r.size=28,r.label_r_b.size=28,r.label_r_o.size=28,r.label_r_e.size=28,r.label_r_z.size=28,r.label_n_b.size=28,r.label_n_p1.size=28,r.label_n_p2.size=28,r.label_n_p3.size=28,r.label_sb.size=28,r.label_ss.size=28,r.label_so.size=28,r.label_se.size=28)},o.prototype.resetGamePage=function(){var e=this;e.setLuzhuData(e._tableCtrl),e.setRoundInfo(e._tableCtrl);var t=e._tableCtrl.gameState;e._gameStateChange(t)},o.prototype._handleDeactivate=function(){},o.prototype.setGrp=function(e){var t=this,o=e.type;for(var a in r.grp){var i=r.grp[a],n=r.rendererHeight[a];t[i]?(t[i].visible=Number(a)==o,t[i].height=Number(a)==o?n:0):console.log("Group not exist : ",i)}},o.prototype.setRoundInfo=function(e){var t=this,o=e.type;if(o!=CONST.tableType.niuNiu){var a=e.countMap||{},i=0;t.setBetRatio(o,a);var n=r.betInfoTxt[o],s=r.roundInfoTxt[o];for(var l in n){var c=n[l];t[c]?(t[c].text=a[l]||0,i+=a[l]||0):console.log("Label not exist : ",c)}s&&t[s]&&(t[s].text="R:"+i)}else t.setRoundInfo_NN()},o.prototype.setRoundInfo_NN=function(){var e=this,t=e[r.luzhuComponent[CONST.tableType.niuNiu]].getRoadCounter();e.label_n_b.text=t[0],e.label_n_p1.text=t[1],e.label_n_p2.text=t[2],e.label_n_p3.text=t[3]},o.prototype.setBetRatio=function(e,t){var r,o=this,a=function(e,t){var r=e[0],i=e[1],n=e[2],s=t[0],l=t[1],c=r+i+n;c>0?(o[s]&&(o[s].height=r/c*214),o[l]&&(o[l].height=i/c*214)):a([33,33,33],[s,l])};switch(e){case CONST.tableType.baccarat:r=CONST.betType.baccarat,a([t[r.banker]||0,t[r.player]||0,t[r.draw]||0],["scroller_b_b","scroller_b_p"]);break;case CONST.tableType.dragonTiger:r=CONST.betType.dragonTiger,a([t[r.dragon]||0,t[r.tiger]||0,t[r.draw]||0],["scroller_d_b","scroller_d_p"])}},o.prototype.setLuzhuData=function(e){var t=e.type,o=r.luzhuComponent[t];return this[o]?void this[o].refreshLuzhu(e):void console.log("Luzhu not exist : ",o)},o.prototype.onScanCard_CashWheel=function(){var e=this,t=e._tableCtrl.roundCtrl.srcResults||[],o=t[t.length-1],a=r.luzhuComponent[CONST.tableType.cashWheel];e[a]&&(e.tempSrcResult.length==t.length?e[a].fixOne(o):e[a].updateOne(o),e.tempSrcResult=t)},o.prototype.onOpenRound_CashWheel=function(){this.dataChanged(),this.tempSrcResult=[]},o.prototype._tap_grp_switch_table=function(){var t=!1,r=e.COMM.layerMgr.baseTopBar;if(r){var o=r.tableCtrl;o&&(t=this._tableCtrl.code==o.code)}if(!t){var a=this.data.tableCtrl,i=a.type;if(e.GTS.mgr.isTableMaintain(a.code))return mo.MSG.show("${{game_Maintenance}}");if(mo.emitter.emit("closeMatchBoardBtn",!1),a.matchCtrl.isOver){e.GTS.mgr.clearTableByCode(a.code),mo.MSG.show(mo.D.langCodeToTxt("game_cannotjoin"));var n=e.COMM.layerMgr.getGameTypeFromCurrLayerName(),s=e.COMM.layerMgr.baseTopBar.tableCtrl.code;mo.emitter.emit("refreshRoomShortCutMenu",n,s)}else{var l={};l.tableType=a.type,l.tableCode=a.code,e.RCD.mgr.recordState(e.RCD.RcdState.FAST_SELECT_GAME_ROOM,l),e.COMM.layerMgr.fastEnterGameRoom(a,i)}}},o.prototype._checkRoadAndInRoomPosition=function(t){var r=this;switch(r._tableCtrl.type){case CONST.tableType.baccarat:case CONST.tableType.dragonTiger:r.grp_good_road_is_in.top=64;break;case CONST.tableType.roulette:r.label_is_in.verticalCenter=25;break;case CONST.tableType.sicBo:r.label_is_in.verticalCenter=5;break;case CONST.tableType.niuNiu:r.label_is_in.verticalCenter=8;break;case CONST.tableType.cashWheel:r.label_is_in.verticalCenter=-3}r.grp_good_road.includeInLayout=t,r.grp_good_road.visible=t;var o=!1,a=e.COMM.layerMgr.baseTopBar;if(a){var i=a.tableCtrl;i&&(o=r._tableCtrl.code==i.code)}r.grp_is_in.includeInLayout=o,r.grp_is_in.visible=o,r.rect_is_in.visible=o},o.prototype._gameStateChange=function(t){var r=this,o=e.COMM.grtMgr.checkGoodRoadVisibilityAndSetRoadName(r._tableCtrl,r.grp_good_road,r.label_good_road_name,r.rect_road_bg_color);switch(r._checkRoadAndInRoomPosition(o),t){case CONST.gameState.betting:var a=r._tableCtrl.getBetStopTime();if(a){var i=a.getTime()-mo.DATE.now()-1e3*r._tableCtrl.betSec;i>0?r.timer.stateClearing():i=0,setTimeout((function(){r.timer.stateBetting(),r.timer.refreshTime(r._tableCtrl.betSec,a)}),i)}else r.timer.stateClearing();break;case CONST.gameState.shuffle:r.timer.stateShuffle();break;case CONST.gameState.stopBet:r.timer.stateClearing();break;case CONST.gameState.payout:r.timer.stateClearing()}},o}(mo.EUI.ItemRenderer);t.RoomShortCutRenderer=o,__reflect(o.prototype,"G.COMM.RoomShortCutRenderer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(t){function o(){var e=t.apply(this,arguments)||this;return e._displacement=300,e.gameCount=0,e}return __extends(o,t),o.prototype.init=function(t,o){void 0===t&&(t=null);var a=this;a.itemArr=[];for(var i=r.games,n=e.GW.mgr.channelType==CONST.channelType.normal,s=function(o){var s=i[o];if(!e.GW.mgr.ifGameOpen(s))return"continue";if((s==CONST.gameAPI.PRAGMATIC_PLAY_SLOT||s==CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT)&&!n)return"continue";var l=r.gameType[s];"TPP"==s&&(l=CONST.tableType.trialslot);var c=t==l;a._createItem({gameType:l,cbFunc:function(){a.switchAnimationList(l)},isCurGame:c})},l=0;l<i.length;l++)s(l);a.addBlockInRoomListSelector(),a.grp_mask.mask=new egret.Rectangle(0,0,a.grp_mask.width,a.grp_mask.height),a.gameCount>8&&a.addMouseOverEvent(),a.btn_pre.visible=a.gameCount>8,a.btn_nxt.visible=a.gameCount>8,o&&o()},o.prototype.switchAnimationList=function(t){e.COMM.layerMgr.baseTopBar&&e.COMM.layerMgr.baseTopBar.switchAnimationList(t)},o.prototype._createItem=function(t){var r=this;r.addBlockInRoomListSelector();var o=new e.COMM.RoomListSelectorItem;o.setData(t),r.grp_room_list_selector.addChild(o),r.itemArr.push({gameType:t.gameType,item:o}),r.gameCount++},o.prototype.addBlockInRoomListSelector=function(){var e=new eui.Rect;e.width=45,e.height=110,e.alpha=0,this.grp_room_list_selector.addChild(e)},o.prototype._tap_btn_nxt=function(){this.moveByBtn(!0)},o.prototype._tap_btn_pre=function(){this.moveByBtn(!1)},o.prototype.moveByBtn=function(e){var t=this,r=t.scr_room_list_selector;if(!(r.viewport.contentWidth<=r.width)){var o=r.viewport.scrollH,a=e?t._displacement:-1*t._displacement,i=egret.Ease.sineIn;t.getTween(r.viewport,{loop:!1}).to({scrollH:o+a},250,i).call((function(){t.rmTweens(r.viewport),t._onListChange()}))}},o.prototype._onListChange=function(){var e=this.scr_room_list_selector,t=e.viewport.contentWidth-this.scr_room_list_selector.width;e.viewport.scrollH>=t?e.viewport.scrollH=t:e.viewport.scrollH<=0&&(e.viewport.scrollH=0)},o.prototype.addMouseOverEvent=function(){var e=this;mo.PROJ.isPc&&(e.scr_room_list_selector.addEventListener(mouse.MouseEvent.MOUSE_OVER,e._onMouseOver.bind(e,e.scr_room_list_selector),e),e.scr_room_list_selector.addEventListener(mouse.MouseEvent.MOUSE_OUT,e._onMouseOver.bind(e,e.scr_room_list_selector),e),e.scr_room_list_selector.addEventListener(egret.Event.CHANGE,e._onListChange,this))},o.prototype._onMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r._wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r._wheel,r)}},o.prototype._wheel=function(e){var t=this.scr_room_list_selector;t.viewport.contentWidth<=t.width||(e.data<0&&(t.viewport.scrollH+=-e.data*CONST.wheelRatio),e.data>0&&(t.viewport.scrollH-=e.data*CONST.wheelRatio),this._onListChange())},o.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},o.prototype.hide=function(e){var t=this,r=egret.Ease.sineOut;t.scr_room_list_selector.verticalCenter=0,t.scr_room_list_selector.alpha=1,t.scr_room_list_selector.touchChildren=!1,t.rmTweens(t.scr_room_list_selector),t.getTween(t.scr_room_list_selector,{loop:!1}).to({alpha:0,verticalCenter:100},250,r).call((function(){e&&e()}))},o.prototype.appear=function(e,t){void 0===e&&(e=CONST.tableType.baccarat);var r=this,o=egret.Ease.sineIn;r.changeCurGame(e),r.scr_room_list_selector.verticalCenter=100,r.scr_room_list_selector.alpha=0,r.scr_room_list_selector.touchChildren=!1,r.rmTweens(r.scr_room_list_selector),r.getTween(r.scr_room_list_selector,{loop:!1}).to({alpha:1,verticalCenter:0},250,o).call((function(){r.scr_room_list_selector.touchChildren=!0,t&&t()}))},o.prototype.changeCurGame=function(e){for(var t=this,r=0;r<t.itemArr.length;r++){var o=t.itemArr[r].item;t.itemArr[r].gameType==e?o.onChoose():o.offChoose()}},o}(mo.EUI.Comp);t.RoomListSelector=o,__reflect(o.prototype,"G.COMM.RoomListSelector")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu.source_room_list_seletor_item,o=CONST.menu.gameNameSelect,a=function(t){function a(){var e=t.apply(this,arguments)||this;return e._duration=120,e.isCurGame=!1,e}return __extends(a,t),a.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.grp.addEventListener(mouse.MouseEvent.MOUSE_OVER,e._onMouseOver,e),e.grp.addEventListener(mouse.MouseEvent.MOUSE_OUT,e._onMouseOut,e),mo.emitter.on("gameTypeChange",e.gameTypeChange,e)},a.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,a=e.data.gameType,i=e.data.cbFunc,n=e.data.isCurGame;null!=a&&i&&(e.gameType=a,e.cbFunc=i,e.isCurGame=n,e.img_game_h.source=r[e.gameType].image_hover,e.img_game_d.source=r[e.gameType].image,e.img_game_c.source=r[e.gameType].image_choose,e.label_game.text=o[e.gameType],e.isCurGame?e.onChoose():e.offChoose(),mo.emitter.on("onChangeLangeage",e.onChangeLangeage,e))},a.prototype.onChangeLangeage=function(){var e=this;e.grp_offChoose.removeChild(e.label_game),e.label_game=null,e.label_game=new mo.EUI.Label,e.label_game.size=36,e.label_game.horizontalCenter=0,e.label_game.verticalCenter=0,e.label_game.scaleX=.5,e.label_game.scaleY=.5,e.label_game.textAlign="center",e.label_game.text=o[e.gameType],e.grp_offChoose.addChild(e.label_game)},a.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;mo.emitter.un("gameTypeChange",e.gameTypeChange,e),e.grp.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e._onMouseOver,e),e.grp.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e._onMouseOut,e)},a.prototype._onMouseOver=function(){var e=this;if(!e.isCurGame){var t=egret.Ease.sineIn;e.rmTweens(e.label_game),e.getTween(e.label_game,{loop:!1}).to({alpha:0,verticalCenter:-5},e._duration,t).call((function(){})),e.rmTweens(e.img_game_h),e.getTween(e.img_game_h,{loop:!1}).to({alpha:1,width:180,height:180},e._duration,t).call((function(){})),e.rmTweens(e.img_game_d),e.getTween(e.img_game_d,{loop:!1}).to({alpha:0,width:160,height:160},e._duration,t).call((function(){}))}},a.prototype._onMouseOut=function(){var e=this;if(!e.isCurGame){var t=egret.Ease.sineOut;e.rmTweens(e.label_game),e.getTween(e.label_game,{loop:!1}).to({alpha:1,verticalCenter:0},e._duration,t).call((function(){})),e.rmTweens(e.img_game_h),e.getTween(e.img_game_h,{loop:!1}).to({alpha:0,width:160,height:160},e._duration,t).call((function(){})),e.rmTweens(e.img_game_d),e.getTween(e.img_game_d,{loop:!1}).to({alpha:1,width:160,height:160},e._duration,t).call((function(){}))}},a.prototype._tap_grp=function(){var t=this;if(!t.isCurGame){var r="";switch(t.gameType){case CONST.tableType.all:r="first_menu_tableAll";break;case CONST.tableType.baccarat:r="first_menu_baccarat";break;case CONST.tableType.dragonTiger:r="first_menu_dragonTiger";break;case CONST.tableType.sicBo:r="first_menu_sicBo";break;case CONST.tableType.roulette:r="first_menu_roulette";break;case CONST.tableType.slot:r="first_menu_slot";break;case CONST.tableType.trialslot:r="first_menu_trialslot";break;case CONST.tableType.niuNiu:r="first_menu_niuNiu";break;case CONST.tableType.anchor:r="first_menu_anchor";break;case CONST.tableType.cashWheel:r="first_menu_cashWheel";break;case CONST.menu.specialType.quickPlay:r="first_menu_quickJoin";break;case CONST.menu.specialType.match:r="first_menu_match"}e.RCD.log_mgr.sendEvent_Lobby_wait(r),e.RCD.log_mgr.sendEvent_ClientRoomListButton(r),t.emitter.emit(t.__class.ON_CLICK,t),t.cbFunc()}},a.prototype.offChoose=function(){var e=this;e.isCurGame=!1,e.img_game_h.alpha=0,e.img_game_d.alpha=1,e.label_game.alpha=1,e.label_game.verticalCenter=0,e.grp_offChoose.visible=!0,e.grp_onChoose.visible=!1},a.prototype.onChoose=function(){var e=this;e.isCurGame=!0,e.img_game_h.alpha=1,e.img_game_d.alpha=0,e.label_game.alpha=0,e.label_game.verticalCenter=0,e.grp_offChoose.visible=!1,e.grp_onChoose.visible=!0},a.prototype.gameTypeChange=function(e){var t=this;e==t.gameType?t.onChoose():t.offChoose()},a}(mo.EUI.Comp);a.ON_FOCUS="on_focus",a.OFF_FOCUS="off_focus",a.ON_CLICK="on_click",t.RoomListSelectorItem=a,__reflect(a.prototype,"G.COMM.RoomListSelectorItem")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(o){function a(){var t=o.apply(this,arguments)||this;return t.animationIndex=-1,t.animationMaxNum=24,t.isMailOpen=!e.GW.mgr.channel.disableMailSystem,t._isFullScreen=!1,t.sysMsgSpeed=.07,t.gamePriorityArr=[CONST.tableType.baccarat,CONST.tableType.BJ_Electronic,CONST.tableType.dragonTiger,CONST.tableType.roulette,CONST.tableType.sicBo,CONST.tableType.niuNiu,CONST.tableType.cashWheel,CONST.tableType.all,CONST.tableType.slot,CONST.tableType.trialslot,CONST.menu.specialType.chest],t.lobbyGameTypeListItemRendererArr=[],t.filter_gameIsOpen=function(t){var o=r.getGameApiByType(t);return e.GW.mgr.ifGameOpen(o)},t}return __extends(a,o),a.prototype._tap_btn_alert=function(){e.playAudio("btnclick")},a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);e.GW.mgr.ifGameOpenByTableType(CONST.tableType.baccarat)||this.showMatchBoardBtn(!1)},a.prototype._initProp=function(){o.prototype._initProp.call(this);var e=this;e.sysMsgList=[],e._isFullScreen=!1,e.walletNames=["g_general_wallet","g_real_wallet","g_electric_wallet","g_battle_wallet","g_casino_wallet","g_sports_wallet","g_ticket_wallet"],e.localPoint=new egret.Point(0,0)},a.prototype.focusScrollGameType=function(e){for(var t=0;t<this.lobbyGameTypeListItemRendererArr.length;t++){var r=this.lobbyGameTypeListItemRendererArr[t],o=r.getGameType();r.setSelected(o==e),r.rollEffect(o==e)}},a.prototype.getDefaultGameType=function(){return this.lobbyGameTypeListItemRendererArr.length>0?this.lobbyGameTypeListItemRendererArr[0].getGameType():-1},a.prototype.onEnter=function(){o.prototype.onEnter.call(this);var t=this;if(e.GW.mgr.ifGameSingleOnlyOpen(CONST.tableType.BJ_Live))return mo.MSG.show("${{Prompt_message}}");t.btn_money_wallet.source="pc35_icon_sum_open",t.grp_system.visible=!1,t.setQRcodeImg(),e.GW.mgr.showWarningForIE();var r=e.BASE.resHelper.getMainTitle(e.GW.mgr.channel);e.getRemoteImg(r,(function(e,o){r==o&&(t.img_title.source=e||"mainTitle")})),t.label_money.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(){e.GTS.mgr.isInMatch()||t.showCurrency()}),t),t.btn_audio_open.visible=e.getIsOpenAudio(),t.btn_audio_close.visible=!e.getIsOpenAudio(),t.btn_recharge.visible=t.isRechargeBtnShow(),t.btn_recharge.includeInLayout=t.isRechargeBtnShow(),t.label_currency.text=this.currencyCodeToTxt(e.COMM.FX.getOwnCurrency()),e.GW.mgr.ifGameSingle()&&t.setSingleUI(),t.updateSystemMenuState(),t._roomShortCutMenu.init(),t.grtScroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onGrtMouseOver.bind(t,t.grtScroller),t),t.grtScroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onGrtMouseOver.bind(t,t.grtScroller),t),mo.emitter.on("match_table_close",t._onKickFromTable,t),mo.emitter.on("table_maintain",t._onKickFromTable_maintain,t),e.GTS.netMgr.onNotify(CONST.notifyEvent.kickFromTable,t._onKickFromTable,t),t.onEmitter(mo.emitter,"activate_delay",t._handleActivityDelay),t.onEmitter(mo.emitter,"kick_table_by_front_end",t._handleOnKickFromTable),t.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_MONEY_CHANGED,t.dataChanged),t.onEmitter(e.GTS.userCtrl,"nick",t.dataChanged),t.onEmitter(e.GTS.mgr,"onlineCount",t._onOnlineCountChanged),t.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_SYS_MSG,t.updateSysMsg),mo.emitter.on("readyEnterGameRoomList",t.readyEnterGameRoomList.bind(t)),mo.emitter.on("readyEnterGameRoom",t.readyEnterGameRoom.bind(t)),mo.emitter.on("gameTypeChange",t.saveCurGameType,t),mo.emitter.on("closeSoundSettingDlg",t.dataChanged,t),mo.emitter.on("hideRoomShortCutMenu",t.onHideRoomShortCutMenu,t),mo.emitter.on("roundIndexWrong",t.handleRoundIndexWrong,t),mo.emitter.on("playerWantCloseGame",t.handlePlayerCloseGame,t),mo.emitter.on("refreshVideoIndex",t.refreshVideoIndex,t),t.onEmitter(e.stageUtil,e.StageUtil.ON_WIN_CLOSED,(function(){e.GW.mgr.hasLogin&&(e.GTS.userCtrl.syncMoney(),t.updateWallet())})),t.onEmitter(mo.emitter,"go_in_match_room",t._hideWallet),t.onEmitter(mo.emitter,"changeVideoQualityAndAddress",t.changeVideoQualityAndAddress),e.GTS.netMgr.onNotify(CONST.bstBizType.mailAll,t.updateUnreadMailNum,t),e.GTS.netMgr.onNotify(CONST.bstBizType.mailSingle,t.updateUnreadMailNum,t),e.GTS.netMgr.onNotify(CONST.bstBizType.worldMsgRm,t._worldMsgRm,t),document.addEventListener("fullscreenchange",(function(){t._isFullScreen=!t._isFullScreen})),document.addEventListener("fullscreenerror",(function(){})),e.GW.mgr.ifOnlyOpenPPGame()?e.GW.mgr.ifGameOpen(CONST.gameAPI.PRAGMATIC_PLAY_SLOT)||e.GW.mgr.ifGameOpen(CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT)?e.GTS.mgr.getKindsOfPPGames(12,(function(){})):mo.MSG.show("${{Prompt_message}}"):e.GTS.mgr.getKindsOfPPGames(12,(function(){})),t.updateWallet(),t.dataChanged(),t.onEmitter(e.VideoMgr,"networkStatus",(function(e){null!=e&&(t.img_wifi.source="ico_wifi_"+e)})),t.btn_asset_onTop.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){t.showMD(e,"history_asset_detail",t.grp_asset_onTop)}),t),t.btn_match_board.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){t.showMD(e,"Competition_ranking",t.btn_match_board)}),t),t.btn_audio_open.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){t.showMD(e,"game_Mute",t.grp_audio_setting)}),t),t.btn_audio_close.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){t.showMD(e,"game_Mute",t.grp_audio_setting)}),t),t.btn_back.addEventListener(mouse.MouseEvent.MOUSE_OVER,(function(e){t.showMD(e,"MailBoxSkinSkinText_009",t.btn_back)}),t),t.showMatchBoardBtn(e.GTS.mgr.isInMatch()),t.onEmitter(mo.emitter,"closeMatchBoardBtn",(function(e){t.showMatchBoardBtn(e)})),mo.emitter.emit("juhuaPosition"),window.addEventListener("resize",(function(){t.isResize=!0})),e.GTS.mgr.initLoveGames(),mo.emitter.on("afterOpenChest",(function(){e.GTS.userCtrl.syncMoney(),t.updateWallet()})),t.initGameTypeScroller(),t.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_TREASURE_OPEN,t._onTreasureOpen),t.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_TREASURE_CLOSE,t._onTreasureClose),t.onEmitter(e.GW.mgr,"gwMgr_changeVideoQuality",(function(){t.getVideoQualityAndSetButton()})),t.getVideoQualityAndSetButton(),e.RCD.log_mgr.setClientView()},a.prototype.isTreasureIncludeOpenedTableType=function(){for(var t=!1,r=this.gamePriorityArr.filter(this.filter_gameIsOpen),o=e.GTS.mgr.getTreasureTableType(),a=0;a<r.length;a++){var i=r[a];if(o.includes(i)){t=!0;break}}return t},a.prototype._onTreasureOpen=function(){this.addChestMenuItem()},a.prototype._onTreasureClose=function(){e.COMM.layerMgr.checkIfCurrInTreasureChest()&&this.closeChestAndfocusFirstGameItem()},a.prototype.handleRoundIndexWrong=function(t){if(t){var r=e.COMM.layerMgr.getCurrentTableType();if(0==r&&(r=1),-1!=r){var o=t.type,a=t.code;if(null!=o&&null!=a&&!((a=a.toLowerCase()).indexOf("gd")>=0||a.indexOf("bp")>=0||a.indexOf("bg")>=0)){var i=!1;if(o==r&&(i=!0),i){e.GTS.mgr.refreshTableLuzhuData(t.code,(function(e){e&&mo.emitter.emit("roundIndexWrongRefreshTableList")}));var n=e.COMM.layerMgr.currLayerName+" roomList type : "+o;e.RCD.log_mgr.sendEvent_ClientRefresh(t.code,n,t.reason,t.logText,t.diff)}}}}},a.prototype.onHideRoomShortCutMenu=function(){this._roomShortCutMenu.setIsOpen(!1),this._roomShortCutMenu.closeList()},a.prototype.saveCurGameType=function(e){this._curGameType=e,this.updateWallet()},a.prototype.transformX=function(e){return 1599>e?1035:e>1599&&1684>e?1093:e>1684&&1769>e?1148:e>1769&&1854>e?1203:e>1854?1257:void 0},a.prototype.showMD=function(e,t,r){var o=this;o.label_md.text=mo.D.langCodeToTxt(t),o.grp_md.x=o.grp_button_bar.x+r.x+40-o.grp_md.width,o.grp_md.y=47,o.grp_md.alpha=1,o.grp_md.visible=!0,clearTimeout(o.handler),o.handler=setTimeout((function(){o.grp_md.alpha=1,o.grp_md.visible=!0,egret.Tween.get(o.grp_md).to({alpha:0},500).call((function(){egret.Tween.removeTweens(o.grp_md),o.grp_md.alpha=1,o.grp_md.visible=!1}))}),1e3)},a.prototype.resetButtonImage=function(e,t){if(e){var r=e.getChildByName("img");r&&(r.source=t)}},a.prototype.currencyCodeToTxt=function(e){return mo.D.langCodeToTxt("Currency_"+e)},a.prototype._onOnlineCountChanged=function(){this.label_online_num.text=e.UTIL.NUM.getSplitNumStr(e.GTS.mgr.onlineCount)},a.prototype.isRechargeBtnShow=function(){var t=-1==e.GTS.userCtrl.type,r=e.GW.mgr.hasBtn_recharge,o=!!e.GW.mgr.channel.rechargeUrl,a=e.GW.mgr.channelType==CONST.channelType.normal;return!t&&r&&o&&a},a.prototype.onExit=function(){o.prototype.onExit.call(this);var t=this;t.unEmitter(),t.sysMsgList.length=0,e.GTS.netMgr.unNotify(CONST.bstBizType.mailAll,t.updateUnreadMailNum,t),e.GTS.netMgr.unNotify(CONST.bstBizType.mailSingle,t.updateUnreadMailNum,t),e.GTS.netMgr.unNotify(CONST.notifyEvent.kickFromTable,t._onKickFromTable,t),mo.emitter.un("refreshVideoIndex",t.refreshVideoIndex,t),mo.emitter.unAll("match_table_close"),mo.emitter.unAll("table_maintain"),mo.emitter.unAll("readyEnterGameRoomList"),mo.emitter.unAll("readyEnterGameRoom"),mo.emitter.unAll("gameTypeChange"),mo.emitter.unAll("closeSoundSettingDlg"),mo.emitter.unAll("hideRoomShortCutMenu"),mo.emitter.unAll("roundIndexWrong"),mo.emitter.unAll("afterOpenChest"),mo.emitter.unAll("playerWantCloseGame")},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var t=this;t.label_user_id.text=e.GTS.userCtrl.nick4Dis,t.updateWallet(),t._onOnlineCountChanged(),t.img_wifi.visible=e.COMM.layerMgr.checkIfCurrInGameRoom(),t.btn_change_vid_quality.visible=e.COMM.layerMgr.checkIfCurrInGameRoom(),t.btn_change_video.visible=e.COMM.layerMgr.checkIfCurrInGameRoom(),t.label_video_index.visible=e.COMM.layerMgr.checkIfCurrInGameRoom()},a.prototype.setSingleUI=function(){this.btn_match_board.visible=e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)&&e.GTS.mgr.isInMatch()},a.prototype.checkRightTopBarPosition=function(){var e=this,t=0;0==e.btn_match_board.visible&&t++,0==e.btn_back.visible&&t++,0==e.btn_change_vid_quality.visible&&t++;var r=6-t,o=17+36*r+11*(r-1)+29;e.img_header_bg_inroom_right.right=o-e.img_header_bg_inroom_right.width},a.prototype.showBackBtn=function(e){var t=this;t.btn_back&&(t.btn_back.visible=e,t.btn_back.includeInLayout=e,t.checkRightTopBarPosition())},a.prototype.showLeftMenu=function(e){this.grp_left_menu.visible=e},a.prototype.showMatchBoardBtn=function(e){var t=this;t.btn_match_board&&(t.btn_match_board.visible=e,t.btn_match_board.includeInLayout=e,t.checkRightTopBarPosition())},a.prototype.showHeaderOutRoom=function(e){var t=this;t.img_header_bg_outroom.visible=e,t.img_header_bg_inroom_left.visible=!e,t.img_header_bg_inroom_right.visible=!e,t.img_title.visible=e,t.grp_money.left=e?348:200,t.grp_player.left=e?221:58},a.prototype.enterNextLayer=function(){var t=this,r=e.COMM.layerMgr.checkIfCurrInRoomList(),o=e.COMM.layerMgr.checkIfCurrInGameRoom(),a=(e.GW.mgr.ifGameSingle(),e.COMM.layerMgr.getLayerLength()),i=e.COMM.layerMgr.getGameTypeFromCurrLayerName();"LobbyLayerPC35"==e.COMM.layerMgr.getFirstLayerName()&&a>0&&(a-=1),o?(t.showHeaderOutRoom(!1),t.showLeftMenu(!1),t._roomShortCutMenu.showList(i,[]),t.showBackBtn(a>1)):r?(t.showHeaderOutRoom(!0),t.showLeftMenu(!0),t._roomShortCutMenu.closeList(),t.showBackBtn(a>1)):(t.showHeaderOutRoom(!0),t.showLeftMenu(!0),t._roomShortCutMenu.closeList()),t.grpGoodRoads.visible=t.checkGrpGoodRoadsShow(),t.updateWallet(),e.GW.mgr.ifGameSingle()&&t.setSingleUI(),t.updateSystemMenuState()},a.prototype.backPreLayer=function(){var t=this,r=e.COMM.layerMgr.checkIfCurrInRoomList(),o=e.COMM.layerMgr.checkIfCurrInGameRoom(),a=(e.GW.mgr.ifGameSingle(),e.COMM.layerMgr.getLayerLength());"LobbyLayerPC35"==(e.COMM.layerMgr.getGameTypeFromCurrLayerName(),e.COMM.layerMgr.getFirstLayerName())&&a>0&&(a-=1),o?(t.showBackBtn(a>1),t.showHeaderOutRoom(!1),t.showLeftMenu(!1)):r?(t.showBackBtn(a>1),t.showHeaderOutRoom(!0),t.showLeftMenu(!0),t._roomShortCutMenu.closeList()):(t.showHeaderOutRoom(!0),t.showLeftMenu(!0),t._roomShortCutMenu.closeList()),t.grpGoodRoads.visible=t.checkGrpGoodRoadsShow(),t.updateWallet(),e.GW.mgr.ifGameSingle()&&t.setSingleUI(),t.updateSystemMenuState()},a.prototype._onKickFromTable_maintain=function(){this._handleOnKickFromTable()},a.prototype._onKickFromTable=function(t){if(e.GTS.userCtrl.isTourist)e.COMM.layerMgr.checkAndPopAllLayerList((function(){var r=CONST.layer.layerClassToPush[CONST.layer.version][0],o=e.GC.gc.getClass(r);e.COMM.layerMgr.pushLayer(o),t&&t.kickType&&1==t.kickType&&mo.MSG.show(mo.D.langCodeToTxt("game_bet_for_no_out"))}));else{if(e.COMM.layerMgr.getGameTypeFromCurrLayerName()==CONST.tableType.all)if(e.GW.mgr.ifGameSingle()){if(egret.isNative)return;window.location.reload(),e.muteMusic(!1),e.playMusic("main")}else e.COMM.layerMgr.popLayer();else this._handleOnKickFromTable();t&&t.kickType&&1==t.kickType&&mo.MSG.show(mo.D.langCodeToTxt("game_bet_for_no_out"))}},a.prototype._handleActivityDelay=function(t){void 0===t&&(t=!1);var r=this;e.COMM.layerMgr.handleActivityDelay();var o=e.COMM.layerMgr.checkIfCurrInGameRoom();r.grp_wallet.visible=!1,r.btn_money_wallet.source="pc35_icon_sum_open",r.showMatchBoardBtn(e.GTS.mgr.isInMatch()),!o&&mo.emitter.emit("closedlg")},a.prototype._handleOnKickFromTable=function(){var t=this;e.COMM.layerMgr.handleOnKickFromTable();var r=e.COMM.layerMgr.checkIfCurrInGameRoom();t.grp_wallet.visible=!1,t.btn_money_wallet.source="pc35_icon_sum_open",t.showMatchBoardBtn(!1),!r&&mo.emitter.emit("closedlg")},a.prototype.updateUnreadMailNum=function(t){var r=this;if(r.isMailOpen&&-1!=e.GTS.userCtrl.type){var o=(t.event,CONST.mailEvent.bonus,0);setTimeout((function(){return r.grp_unread.visible?void("9+"!=r.label_unread_num.text&&(r.label_unread_num.text=8==parseFloat(r.label_unread_num.text)?"9+":parseFloat(r.label_unread_num.text)+1+"")):(r.label_unread_num.text="1",void(r.grp_unread.visible=!0))}),o)}},a.prototype.updateWallet=function(){var t=this;if(e.GTS.userCtrl.checkWallet(),e.GTS.mgr.isInMatch()||e.GW.mgr.isSingleWallet)t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.mgr.money4Dis.toFixed(2)));else{var r=[],o=0,a=e.GTS.userCtrl.getWalletMoney(CONST.gameWallet.GENERAL);a&&(r.push({name:mo.D.langCodeToTxt("g_general_wallet"),value:e.UTIL.NUM.getSplitNumStr(parseFloat(a.toFixed(2)))}),o+=a);for(var i=e.COMM.layerMgr.getCurrentTableType(),n=CONST.gameWallet.LIVE;n<=CONST.gameWallet.TICKET;n++){var s=e.GTS.userCtrl.getWalletMoney(n);!e.COMM.layerMgr.checkIfCurrInGameRoom()&&(i!=CONST.tableType.all&&i!=CONST.tableType.slot)?s&&(r.push({name:mo.D.langCodeToTxt(t.walletNames[n]),value:e.UTIL.NUM.getSplitNumStr(parseFloat(s.toFixed(2)))}),o+=s):e.GW.mgr.checkWalletWhereToShow(n,i)&&s&&(r.push({name:mo.D.langCodeToTxt(t.walletNames[n]),value:e.UTIL.NUM.getSplitNumStr(parseFloat(s.toFixed(2)))}),o+=s)}t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(o.toFixed(2))),t.list_wallet_item.dataProvider=new eui.ArrayCollection(r),t.list_wallet_item.x=t.grp_money.x+5}},a.prototype.showCurrency=function(){var t=this;if(!t.grp_currency.visible){var r=e.COMM.FX.getOwnCurrency();r&&"CNY"==r&&(t.label_currency.text=this.currencyCodeToTxt(r),t.grp_currency.visible=!0,setTimeout((function(){egret.Tween.get(t.grp_currency).to({alpha:0},500).call((function(){egret.Tween.removeTweens(t.grp_currency),t.grp_currency.alpha=1,t.grp_currency.visible=!1}))}),3e3))}},a.prototype.updateSystemMenuState=function(){var t=[];t.push({name:"${{topbar_setting_systemsetting}}",icon:"dg_btn_sys_setting",func:"_tap_btn_sysSetting"}),t.push({name:"${{topbar_setting_gamenotice}}",icon:"dg_btn_exclamation",func:"_tap_btn_user_agreement"}),(-1!=e.COMM.layerMgr.getCurrentTableType()||e.COMM.layerMgr.checkIfCurrInGameRoom()||e.GW.mgr.ifGameSingle()&&1==e.GW.mgr.getOpenGameArray().length||e.COMM.layerMgr.checkIfCurrInMTOBaccList())&&e.COMM.layerMgr.getCurrentTableType()!=CONST.menu.specialType.chest&&t.push({name:"${{topbar_setting_gamehelp}}",icon:"dg_btn_help",func:"_tap_btn_game_info"}),t.push({name:"${{topbar_setting_userinfo}}",icon:"dg_btn_profile",func:"_tap_btn_playerInfo"}),this.isMailOpen&&t.push({name:"${{MailBoxSkinSkinText_004}}",icon:"dg_btn_mail",func:"_tap_btn_mail_box"}),this.list_system_menu_item.dataProvider=new eui.ArrayCollection(t)},a.prototype._click_list_system_menu_item=function(e){this.grp_system.visible=!1;var t=this[e.item.func];"function"==typeof t&&t()},a.prototype._tap_btn_sysSetting=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.OPEN_SETTING),e.COMM.SoundSettingDlg35.show()},a.prototype._tap_btn_playerInfo=function(){return e.playAudio("btnclick")},a.prototype._tap_btn_asset=function(){e.playAudio("btnclick")},a.prototype._tap_btn_asset_onTop=function(){this._tap_btn_asset()},a.prototype._tap_btn_user_agreement=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.AGREEMENT),t.UserAgreement.show()},a.prototype._tap_btn_game_info=function(){e.playAudio("btnclick");var t=e.COMM.layerMgr.getCurrentTableType();-1==t&&(t=e.COMM.layerMgr.getGameTypeFromCurrLayerName()),e.COMM.layerMgr.checkIfCurrInMTOBaccList()&&(t=CONST.tableType.baccarat),-1!=t&&(e.RCD.mgr.recordState(e.RCD.RcdState.GAME_RULES),e.COMM.RuleLoaderDG.show({type:t}))},a.prototype._tap_btn_audio_open=function(){e.playAudio("btnclick");this.btn_audio_open.visible=!1,this.btn_audio_close.visible=!0,e.setIsOpenAudio(!1),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_audio_open"),e.RCD.log_mgr.sendEvent_ClientButton("mute")},a.prototype._tap_btn_audio_close=function(){e.playAudio("btnclick");this.btn_audio_close.visible=!1,this.btn_audio_open.visible=!0,e.setIsOpenAudio(!0),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_audio_close"),e.RCD.log_mgr.sendEvent_ClientButton("mute")},a.prototype._tap_btn_mail_box=function(){return e.playAudio("btnclick"),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):(t.MailBox.show(),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_mail_box"),void e.RCD.log_mgr.sendEvent_ClientButton("mail"))},a.prototype._tap_btn_back=function(){e.playAudio("btnclick"),e.COMM.layerMgr.backToPrevLayer(),mo.emitter.emit("backToDefault"),this.showMatchBoardBtn(!1),mo.emitter.emit("juhuaPosition"),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_back"),e.RCD.log_mgr.sendEvent_ClientRoomListButton("btn_back"),e.RCD.log_mgr.sendEvent_ClientButton("back")},a.prototype._tap_btn_recharge=function(){return e.playAudio("btnclick"),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):(e.GW.mgr.openPage_recharge(),e.RCD.log_mgr.sendEvent_Lobby_wait("btn_recharge"),void e.RCD.log_mgr.sendEvent_ClientButton("recharge"))},a.prototype._hideWallet=function(){var t=this;t.grp_wallet.visible=!1,t.btn_money_wallet.source="pc35_icon_sum_open",t.showMatchBoardBtn(e.GTS.mgr.isInMatch())},a.prototype._tap_wallet_touch_panel=function(){this._hideWallet()},a.prototype._tap_btn_money_wallet=function(){var t=this;e.GTS.mgr.isInMatch()||e.GW.mgr.isSingleWallet||(t.updateWallet(),t.grp_wallet.visible=!t.grp_wallet.visible,t.btn_money_wallet.source="pc35_icon_sum_close",e.RCD.log_mgr.sendEvent_Lobby_wait("btn_money_wallet"))},a.prototype._tap_btn_system_setting=function(){this.updateSystemMenuState(),this.grp_system.visible=!this.grp_system.visible,e.RCD.log_mgr.sendEvent_Lobby_wait("btn_system_setting")},a.prototype._tap_rect_grp_system_touch_panel=function(){this.grp_system.visible=!1},a.prototype._tap_btn_match_board=function(){if(e.playAudio("btnclick"),-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);var t=e.GTS.mgr.entryTable;if(t){var r,o=t.match.id,a=t.match.startTime,i=e.GTS.mgr.entryTable.code;e.GTS.mgr.getTableCtrlFromServerForMatchRank(i,(function(t){(r=t).matchUser?e.GTS.mgr.getMatchRankList(r.matchId,(function(t){r.rankList=t,e.COMM.MatchRankDlg.show({tableCtrl:r})})):e.GTS.mgr.getMatchRankList(o,(function(t){e.COMM.MatchRankDlg.show({rankList:t,startTime:a})}))}),(function(){}))}else mo.MSG.show(mo.D.langCodeToTxt("No_match"));e.RCD.log_mgr.sendEvent_Lobby_wait("btn_match_board")},a.prototype.checkGrpGoodRoadsShow=function(){return!!e.COMM.layerMgr.checkIfCurrInPreLobby()&&(!e.GW.mgr.ifGameSingle()&&(!!e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)&&0!=e.COMM.grtMgr.getGoodRoadRoomNumber()))},a.prototype.onGrtMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.grtWheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.grtWheel,r)}},a.prototype.grtWheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.list_grt.contentHeight<r.list_grt.height||(t.data<0&&(r.list_grt.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.list_grt.scrollV-=t.data*CONST.wheelRatio),r.list_grt.scrollV>=r.list_grt.contentHeight-r.list_grt.height&&(r.list_grt.scrollV=r.list_grt.contentHeight-r.list_grt.height),r.list_grt.scrollV<=0&&(r.list_grt.scrollV=0)))},a.prototype.initGameTypeScroller=function(){var t=this,o=[],a=e.GW.mgr.channelType==CONST.channelType.normal;o=t.gamePriorityArr.filter(t.filter_gameIsOpen),a||(o=o.filter((function(e){var t=r.getGameApiByType(e);return t!=CONST.gameAPI.PRAGMATIC_PLAY_SLOT&&t!=CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT}))),o=t.getCustomGamePriorityArr(o);var i=e.COMM.layerMgr.getCurrentTableType();-1==i&&(i=o[0]);for(var n=0;n<o.length;n++){var s=o[n];r.getGameApiByType(s)==CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT&&(s=CONST.tableType.trialslot);var l={cbFunc:t.getCallBackFuncByType(s),gameType:s,isSelected:s==i};t.addMenuItem(l)}null!=e.GTS.mgr.getTreasureInfo()&&t.addChestMenuItem()},a.prototype.addMenuItem=function(t){var r=new e.COMM.LobbyGameTypeListItemRenderer;r.setData(t),this.grp_game_type.addChild(r),this.lobbyGameTypeListItemRendererArr.push(r)},a.prototype.getCallBackFuncByType=function(t){var r=this;return function(){for(var o=0;o<r.lobbyGameTypeListItemRendererArr.length;o++){var a=r.lobbyGameTypeListItemRendererArr[o],i=a.getGameType();a.setSelected(i==t),a.rollEffect(i==t)}t!=CONST.menu.specialType.chest?e.COMM.layerMgr.checkAndPopAllLayerList((function(){e.COMM.layerMgr.enterGameRoomList(t),e.COMM.layerMgr.setCurrentTableType(t)})):e.GTS.mgr.requestTreasureInfo((function(){if(null!=e.GTS.mgr.getTreasureInfo()){var o=[],a=e.GC.gc.getClass("TreasureChestPC35");o.push({_layerClass:a,_layerParam:null}),e.COMM.layerMgr.pushMultiLayer(o),e.COMM.layerMgr.setCurrentTableType(t),r.showBackBtn(!1)}else e.COMM.layerMgr.baseTopBar.closeChestAndfocusFirstGameItem()}))}},a.prototype.closeChestAndfocusFirstGameItem=function(){var t=e.COMM.layerMgr.baseTopBar.getDefaultGameType();e.COMM.layerMgr.checkAndPopAllLayerList((function(){e.COMM.layerMgr.enterGameRoomList(t),e.COMM.layerMgr.setCurrentTableType(t),e.COMM.layerMgr.baseTopBar.focusScrollGameType(t),e.COMM.layerMgr.baseTopBar.removeChestMenuItem()}))},a.prototype.getCustomGamePriorityArr=function(e){if(!mo.PROJ.gamePriority)return e;var t;try{t=JSON.parse(mo.PROJ.gamePriority);t=(t=t.filter((function(e,t,r){return t==r.indexOf(e)}))).filter((function(t){return-1!=e.indexOf(t)}));var r=function(e){return function(t){return-1==e.indexOf(t)}}(t);return t.concat(e.filter(r))}catch(t){return console.error(t),e}},a.prototype.refreshGoodRoadTip=function(){var r=this;if(e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)){r.list_grt.dataProvider=null;var o=e.GTS.mgr.getTableCtrlListWithGrt();r.grpGoodRoads.visible=r.checkGrpGoodRoadsShow(),r.img_grt_scroller_up.visible=o.length>3,r.img_grt_scroller_down.visible=o.length>3,r.list_grt.itemRenderer=t.GrtNeonItem,r.list_grt.dataProvider=new eui.ArrayCollection(o)}},a.prototype._tap_img_grt_scroller_up=function(){var e=this.grtScroller.viewport.scrollV-87;this.grtScroller.viewport.scrollV=0>e?0:e},a.prototype._tap_img_grt_scroller_down=function(){var e=this,t=e.grtScroller.viewport.scrollV+87;e.grtScroller.viewport.height+e.grtScroller.viewport.scrollV<e.grtScroller.viewport.contentHeight&&(e.grtScroller.viewport.scrollV=t)},a.prototype.updateSysMsg=function(t){var r=this;t.type==CONST.sysMsgType.bonus&&t.args&&(t.content=e.COMM.BONUS.getBonusMessage(t),t.is_multi_lang=!1),r.sysMsgList.push(t),!r.isPlay&&r.showSysMsg(),t&&r.worldMsgWarn&&(r.worldMsgWarn.visible=!0)},a.prototype._worldMsgRm=function(){},a.prototype.showSysMsg=function(){},a.prototype.switchAnimationList=function(t){var r=e.BASE.AnimationListType.BACC;switch(t){case CONST.menu.specialType.match:r=e.BASE.AnimationListType.MATCH;break;case CONST.menu.specialType.quickPlay:r=e.BASE.AnimationListType.FASTIN;break;case CONST.tableType.all:r=e.BASE.AnimationListType.MTO;break;case CONST.tableType.baccarat:r=e.BASE.AnimationListType.BACC;break;case CONST.tableType.dragonTiger:r=e.BASE.AnimationListType.DT;break;case CONST.tableType.roulette:r=e.BASE.AnimationListType.RLT;break;case CONST.tableType.sicBo:r=e.BASE.AnimationListType.DICE;break;case CONST.tableType.slot:case CONST.tableType.trialslot:r=e.BASE.AnimationListType.SLOT;break;case CONST.tableType.BB:r=e.BASE.AnimationListType.BB;break;case CONST.tableType.niuNiu:r=e.BASE.AnimationListType.NN;break;case CONST.tableType.cashWheel:r=e.BASE.AnimationListType.CW;break;case CONST.tableType.BJ_Electronic:r=e.BASE.AnimationListType.JE}mo.emitter.emit("enterGameRoomList",r)},a.prototype.readyEnterGameRoomList=function(t){t&&e.COMM.layerMgr.enterGameRoomList(t)},a.prototype.readyEnterGameRoom=function(t){t&&(t.isMultiRange?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null))},a.prototype.setQRcodeImg=function(){var t=this,r=e.BASE.resHelper.getH5QrCode(e.GW.mgr.channel);t.grp_qr.visible=!1,e.getRemoteImg(r,(function(e,o){r==o&&e&&(e.width=80,e.height=80,t.img_qr.source=e||"",t.grp_qr.visible=""!=t.img_qr.source)}))},a.prototype.refreshVideoIndex=function(e){"number"==typeof e&&(this.current_video_index=e,this.label_video_index.text=(e+1).toString())},a.prototype._tap_btn_change_video=function(){e.playAudio("btnclick"),this.openVideoSettingDlg()},a.prototype._tap_btn_change_vid_quality=function(){e.playAudio("btnclick"),this.openVideoSettingDlg()},a.prototype.openVideoSettingDlg=function(){var t=!1,r=this.btn_change_vid_quality.getChildAt(0);r&&"navigation_icon_hd"==r.source&&(t=!0);var o={isHD:t||!1,videoAddressList:e.getVideoList()||[],currentVideoIndex:this.current_video_index||0};e.COMM.VideoSettingDlgPC35.show(o)},a.prototype.changeVideoQualityAndAddress=function(t,r){var o=this,a=!1;"number"==typeof t&&o.current_video_index!=t&&(e.setVideoIndex(t),o.refreshVideoIndex(t),a=!0),r!=("navigation_icon_hd"==o.btn_change_vid_quality.getChildAt(0).source)?o.changeVideoQuality():a&&(mo.emitter.emit("stopVideoInRoom"),mo.emitter.emit("playVideoInRoom"))},a.prototype.changeVideoQuality=function(){mo.emitter.emit("changeVideoQuality")},a.prototype.getVideoQualityAndSetButton=function(){var t=e.GW.mgr.getVideoQuality(),r=this.btn_change_vid_quality.getChildAt(0);r&&(r.source="M"==t?"navigation_icon_sd":"navigation_icon_hd")},a.prototype._tap_img_title=function(){var t=mo.PROJ.externalurl&&mo.PROJ.externalurl.length>0?mo.PROJ.externalurl:e.GW.mgr.channel.logoLinkUrl;null!=t&&t.length>0&&(window.location.href=t)},a.prototype.isOnlySlotAndMulti=function(){for(var e=!0,t=0;t<this.lobbyGameTypeListItemRendererArr.length;t++){var r=this.lobbyGameTypeListItemRendererArr[t].getGameType();r!=CONST.tableType.all&&r!=CONST.tableType.slot&&r!=CONST.tableType.trialslot&&(e=!1)}return e},a.prototype.addChestMenuItem=function(){for(var t=this,r=-1,o=0;o<t.lobbyGameTypeListItemRendererArr.length;o++)t.lobbyGameTypeListItemRendererArr[o].data.gameType==CONST.menu.specialType.chest&&(r=o);if(-1==r&&e.GTS.userCtrl.type!=CONST.userType.tourist&&!t.isOnlySlotAndMulti()&&t.isTreasureIncludeOpenedTableType()){var a={cbFunc:t.getCallBackFuncByType(CONST.menu.specialType.chest),gameType:CONST.menu.specialType.chest,isSelected:!1};t.addMenuItem(a)}},a.prototype.removeChestMenuItem=function(){for(var e=this,t=-1,r=0;r<e.lobbyGameTypeListItemRendererArr.length;r++)e.lobbyGameTypeListItemRendererArr[r].data.gameType==CONST.menu.specialType.chest&&(t=r);-1!=t&&(e.grp_game_type.removeChildAt(t),e.lobbyGameTypeListItemRendererArr.splice(t,1))},a.prototype.handlePlayerCloseGame=function(){e.COMM.layerMgr.handleActivityDelay()},a}(mo.EUI.MenuLayer);t.BaseTopBarPC35=o,__reflect(o.prototype,"G.COMM.BaseTopBarPC35"),e.GC.gc.registerClass(o.__className,o)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.menu,o=function(t){function o(){var e=t.apply(this,arguments)||this;return e._cbFunc=function(){},e}return __extends(o,t),o.prototype._tap_grp_container=function(){e.playAudio("btnclick");var t=this;t.isSelected=!0,t._cbFunc&&t._cbFunc()},o.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.grp_container.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.onRoll,e),e.grp_container.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.onRoll,e)},o.prototype.onRoll=function(e){switch(e.type){case mouse.MouseEvent.MOUSE_OVER:this.rollEffect(!0);break;case mouse.MouseEvent.MOUSE_OUT:this.rollEffect(!1)}},o.prototype.rollEffect=function(e){var t=this,o=t.data.gameType;if(t.label_type_name.text=r.gameNameLobby[o],o==CONST.menu.specialType.chest){t.label_type_name.text=mo.D.langCodeToTxt("LuckyBag")}e||t.isSelected?(t.img_hover.visible=!0,t.label_type_name.textColor=15518832,t.img_type_icon.source="game_icon_id_"+o+"_h"):(t.img_hover.visible=!1,t.label_type_name.textColor=10066329,t.img_type_icon.source="game_icon_id_"+o)},o.prototype.setSelected=function(e){this.isSelected=e},o.prototype.getGameType=function(){return this.data.gameType},o.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.isSelected=e.data.isSelected,e._cbFunc=e.data.cbFunc,e.rollEffect(e.isSelected)},o.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.grp_container.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.onRoll,e),e.grp_container.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.onRoll,e)},o}(mo.EUI.Comp);t.LobbyGameTypeListItemRenderer=o,__reflect(o.prototype,"G.COMM.LobbyGameTypeListItemRenderer")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this._skinName="RoomListPC35Skin"},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.pcRoomListScroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,r.onListMouseOver.bind(r,r.pcRoomListScroller),r),r.pcRoomListScroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,r.onListMouseOver.bind(r,r.pcRoomListScroller),r),mo.emitter.on("roundIndexWrongRefreshTableList",r.onTableMaintainRefreshTableList,r);var o="roomList",a=e.COMM.layerMgr.getCurrentTableType();if(null!=a){switch(a){case CONST.tableType.baccarat:o="BaccRoomList";break;case CONST.tableType.dragonTiger:o="DtRoomList";break;case CONST.tableType.roulette:o="RltRoomList";break;case CONST.tableType.sicBo:o="SiboRoomList";break;case CONST.tableType.niuNiu:o="NNRoomList";break;case CONST.tableType.cashWheel:o="CWRoomList";break;case CONST.tableType.slot:o="SlotRoomList";break;case CONST.tableType.trialslot:o="SlotRoomList"}e.RCD.log_mgr.setRecord("client_location",o)}},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},r.prototype.onListMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r)}},r.prototype.wheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.pcRoomListScroller.viewport.contentHeight<r.pcRoomListScroller.height||(t.data<0&&(r.pcRoomListScroller.viewport.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.pcRoomListScroller.viewport.scrollV-=t.data*CONST.wheelRatio),r.pcRoomListScroller.viewport.scrollV>=r.pcRoomListScroller.viewport.contentHeight-r.pcRoomListScroller.height&&(r.pcRoomListScroller.viewport.scrollV=r.pcRoomListScroller.viewport.contentHeight-r.pcRoomListScroller.height),r.pcRoomListScroller.viewport.scrollV<=0&&(r.pcRoomListScroller.viewport.scrollV=0)))},r.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.pcRoomListScroller.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.onListMouseOver.bind(e,e.pcRoomListScroller),e),e.pcRoomListScroller.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.onListMouseOver.bind(e,e.pcRoomListScroller),e),mo.emitter.un("roundIndexWrongRefreshTableList",e.onTableMaintainRefreshTableList)},r.prototype.readyGotoGame=function(t){var r=this;e.GTS.mgr.getTableCtrlFromServer(t,(function(e){e&&r.gotoGame(e)}))},r.prototype.gotoGame=function(){},r.prototype.onTableMaintainRefreshTableList=function(){this.refreshList("list_room")},r}(mo.EUI.Layer);t.RoomListPC35=r,__reflect(r.prototype,"G.COMM.RoomListPC35")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this),this._skinName="SlotRoomListPC35Skin",this._Item_list_room=e.COMM.SlotGameItem,this.ppLoadIndex=0,this.ppLoadMaxSize=0},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.btn_hot.selected=!0,r.btn_new.selected=!1,r.btn_all.selected=!1,r.btn_hot.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_hot,r),r.btn_new.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_new,r),r.btn_all.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_all,r),r.btn_search.addEventListener(egret.TouchEvent.TOUCH_TAP,r._tap_btn_search,r),mo.emitter.on("onlySlotPC",(function(e){0==e&&r._tap_btn_hot(),1==e&&r._tap_btn_new(),2==e&&r._tap_btn_all(),3==e&&r._tap_btn_jp()})),r.label_input.addEventListener(egret.Event.CHANGE,r._tap_btn_search,r);var o=e.GTS.mgr.getPPAll();o.length>0?(r.preloadPPImages(o,(function(){mo.stopWaiting(),r.ppLoadMaxSize=0,r.ppLoadIndex=0,r.dataSlot=o;var t,a,i;if(t=e.GTS.mgr.getPPHot(),a=e.GTS.mgr.getPPNew(),i=e.GTS.mgr.getPPAll(),r.acHot=new eui.ArrayCollection(t),r.acNew=new eui.ArrayCollection(a),r.acAll=new eui.ArrayCollection(i),e.GW.mgr.ifGameOpen(CONST.gameAPI.PRAGMATIC_PLAY_SLOT)){for(var n=[],s=0;s<e.GTS.mgr.getPPAll().length;s++)1==e.GTS.mgr.getPPAll()[s].jackpot&&n.push(e.GTS.mgr.getPPAll()[s]);r.acJp=new eui.ArrayCollection(n)}r.list_room.dataProvider=new eui.ArrayCollection(r.loveGame(e.GTS.mgr.getPPHot()))})),r.label_maintenance.visible=!1):r.label_maintenance.visible=!0,r.label_input.textDisplay.promptColor=16777215,r.label_input.textDisplay.textColor=16777215,r.label_input.textDisplay.size=40,r.label_input.promptDisplay.size=20},r.prototype.preloadPPImages=function(e,t){var r=this;if(mo.playWaiting(1),r.ppLoadMaxSize=e.length,0!=r.ppLoadMaxSize){for(var o=function(o){var a=e[o].gameID;("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(a+="_cn"),mo.R.load(a,(function(){r.ppLoadIndex++,r.ppLoadIndex==r.ppLoadMaxSize&&t(),mo.R.get(a)||console.log(a+" missing")}))},a=0;a<r.ppLoadMaxSize;a++)o(a);r.btn_hot.selected=!0,r.btn_new.selected=!1,r.btn_all.selected=!1,r.list_room.scrollV=0}else t()},r.prototype._data_list_room=function(){},r.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.unEmitter(),e.btn_hot.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_hot,e),e.btn_new.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_new,e),e.btn_all.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_all,e),e.btn_search.removeEventListener(egret.TouchEvent.TOUCH_END,e._tap_btn_search,e),e.label_input.removeEventListener(egret.Event.CHANGE,e._tap_btn_search,e),mo.emitter.emit("setShortcut",CONST.tableType.slot,!0)},r.prototype._tap_btn_hot=function(){var t=this;t.pcRoomListScroller&&t.pcRoomListScroller.stopAnimation(),t.btn_hot.selected=!0,t.btn_new.selected=!1,t.btn_all.selected=!1,t.label_input.text="",t.list_room.dataProvider=new eui.ArrayCollection(t.loveGame(e.GTS.mgr.getPPHot()))},r.prototype._tap_btn_new=function(){var t=this;t.pcRoomListScroller&&t.pcRoomListScroller.stopAnimation(),t.btn_hot.selected=!1,t.btn_new.selected=!0,t.btn_all.selected=!1,t.label_input.text="",t.list_room.dataProvider=new eui.ArrayCollection(t.loveGame(e.GTS.mgr.getPPNew()))},r.prototype._tap_btn_all=function(){var t=this;t.pcRoomListScroller&&t.pcRoomListScroller.stopAnimation(),t.btn_hot.selected=!1,t.btn_new.selected=!1,t.btn_all.selected=!0,t.label_input.text="",t.list_room.dataProvider=t.acAll,t.list_room.dataProvider=new eui.ArrayCollection(t.loveGame(e.GTS.mgr.getPPAll()))},r.prototype._tap_btn_jp=function(){var t=this;if(t.pcRoomListScroller&&t.pcRoomListScroller.stopAnimation(),t.btn_hot.selected=!1,t.btn_new.selected=!1,t.btn_all.selected=!1,t.label_input.text="",e.GW.mgr.ifGameOpen(CONST.gameAPI.PRAGMATIC_PLAY_SLOT)){for(var r=[],o=0;o<e.GTS.mgr.getPPAll().length;o++)1==e.GTS.mgr.getPPAll()[o].jackpot&&r.push(e.GTS.mgr.getPPAll()[o]);t.list_room.dataProvider=new eui.ArrayCollection(t.loveGame(r))}},r.prototype._tap_btn_search=function(){var t=this;if(t.pcRoomListScroller&&t.pcRoomListScroller.stopAnimation(),""!=t.label_input.text){t.btn_hot.selected=!1,t.btn_new.selected=!1,t.btn_all.selected=!0;var r=[];t.label_input.text=e.GTS.mgr.verifyEmoji(t.label_input.text);for(var o=t.label_input.text.toLowerCase(),a=e.GTS.mgr.getPPAll(),i=0;i<a.length;i++){var n=a[i],s=n.chinese.toLowerCase(),l=n.english.toLowerCase(),c=n.gameID,p=n.gameId;(-1!=s.indexOf(o)||-1!=l.indexOf(o))&&r.push({gameID:c,gameId:p,technologyID:"H5",platform:"MOBILE,DOWNLOAD,WEB",chinese:n.chinese,english:n.english})}t.pcRoomListScroller.viewport.scrollH=0,t.resetGameList(r)}else t._tap_btn_all();mo.emitter.emit("focusOnPPSearch_slotOnly",null)},r.prototype.resetGameList=function(e){this.list_room.dataProvider=new eui.ArrayCollection(this.loveGame(e))},r.prototype.loveGame=function(t){var r=[],o=[],a=e.GTS.mgr.getLoveGames(),i=CONST.tableType.slot+"";if(a&&a[i]){for(var n=0;n<t.length;n++)for(var s=0;s<a[i].length;s++)t[n].gameId==a[i][s]&&(r.push(t[n]),o.push(t[n].gameId));for(n=0;n<t.length;n++)-1==o.indexOf(t[n].gameId)&&r.push(t[n])}return r.length>0?r:t},r}(e.COMM.RoomListPC35);t.SlotRoomListPC35=r,__reflect(r.prototype,"G.COMM.SlotRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=e.GTS.mgr.getBlackJackUrl();e.stageUtil.showWin200BlackJack(r),mo.emitter.on("backToDefault",this.backToDefault,this),e.RCD.log_mgr.setRecord("client_location","BJElectronicRoomList")},r.prototype.backToDefault=function(){e.COMM.layerMgr.retriveCurrentTableType()},r.prototype.onExit=function(){t.prototype.onExit.call(this),e.stageUtil.closeWin200BlackJack(),mo.emitter.unAll("backToDefault")},r}(mo.EUI.Layer);t.BJ_ElectronicRoomListPC35=r,__reflect(r.prototype,"G.COMM.BJ_ElectronicRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.maxNum=100,e._canTapQuickChat=!0,e.listTxtArr=[],e.isUseCannedMsg=!0,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._Item_list_chat=t.ChatRenderer,e._Item_list_text=t.ChatTextRenderer,e._Item_list_face=t.ChatFaceRenderer,e.chatList=[],e.text=null},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;e.GW.mgr.disableChatRoom||(t._isOpen=!0,t.grp_chat.visible=t._isOpen,t.btn_face&&(t.btn_face.selected=!1),t.scroller_face&&(t.scroller_face.visible=t.btn_face.selected),t.label_text_Input.text="",t.label_num.visible=!1,egret.isNative||window.addEventListener("keypress",t._enterEvent.bind(t),!1),t.setEventListener(),t.onEmitter(e.GTS.mgr,"receivedFreeChatStatus",t.onReceivedFreeChatStatus))},o.prototype.onReceivedFreeChatStatus=function(){var t=this,r=e.GTS.mgr.canFreeChatThisRound(t._tableCtrl.roundCode);t.label_text_Input.enabled=r,t.canned_msg_trigger.visible=!r,t.canned_msg_closer.visible=!r,t.scroller_text.visible=!r,t.btn_lazy_message&&(t.btn_lazy_message.selected=t.scroller_text.visible),t.btn_lazy_message&&(t.btn_lazy_message.enabled=r)},o.prototype.setEventListener=function(){var e=this;e.label_text_Input.text="",e.label_num.visible=!1,e.label_text_Input.addEventListener(egret.Event.CHANGE,(function(){e.label_num.text=e.label_text_Input.text.length+"/50",e.label_num.visible=!0,e.label_num.style=e.label_text_Input.text.length>50?"txt_color_8":"txt_color_1"}),e),e.label_text_Input.textDisplay.addEventListener(egret.FocusEvent.FOCUS_IN,(function(){e.label_num.text=e.label_text_Input.text.length+"/50",e.label_num.visible=!0,e.label_num.style=e.label_text_Input.text.length>50?"txt_color_8":"txt_color_1"}),e),e.label_text_Input.textDisplay.addEventListener(egret.FocusEvent.FOCUS_OUT,(function(){e.label_num.visible=!1}),e),e.label_text_Input.enabled=!e.isUseCannedMsg,e.canned_msg_trigger.visible=e.isUseCannedMsg,e.canned_msg_closer.visible=!1,e.scroller_text.visible=!1,e.btn_lazy_message&&(e.btn_lazy_message.selected=e.scroller_text.visible),e.isUseCannedMsg&&e.setCannedMsg()},o.prototype.onExit=function(){var e=this;e.unEmitter(),e.label_text_Input.text="",e.label_text_Input.removeEventListener(egret.Event.CHANGE,(function(){}),e),e.label_text_Input.textDisplay.removeEventListener(egret.FocusEvent.FOCUS_IN,(function(){}),e),e.label_text_Input.textDisplay.removeEventListener(egret.FocusEvent.FOCUS_OUT,(function(){}),e),egret.isNative||window.removeEventListener("keypress",e._enterEvent,!1)},o.prototype.chatTextChange=function(){var t=this,r=t._tableCtrl;return e.GTS.mgr.canFreeChatThisRound(t._tableCtrl.roundCode),t.label_text_Input.visible=!1,t.label_noChat.visible=!0,t.btn_lazy_message&&(t.btn_lazy_message.enabled=!1),t.btn_go.enabled=!1,t.btn_face&&(t.btn_face.enabled=!1),r.isMatch&&r.hasEnrolled()?(t.label_text_Input.visible=!0,t.label_noChat.visible=!1,t.btn_lazy_message&&(t.btn_lazy_message.enabled=!0),t.btn_go.enabled=!0,void(t.btn_face&&(t.btn_face.enabled=!0))):void(t._tableCtrl&&t._tableCtrl.betCtrl&&t._tableCtrl.betCtrl.bet&&t._tableCtrl.betCtrl.bet>0&&(t.label_text_Input.visible=!0,t.label_noChat.visible=!1,t.btn_lazy_message&&(t.btn_lazy_message.enabled=!0),t.btn_go.enabled=!0,t.btn_face&&(t.btn_face.enabled=!0)))},o.prototype.resetChatUIWithClearInputText=function(){var t=this;t.resetChatUI(),t.label_text_Input.text="",t.label_text_Input.enabled=!1;var r=e.GTS.mgr.canFreeChatThisRound(t._tableCtrl.roundCode);t.label_text_Input.enabled=r,t.canned_msg_trigger.visible=!r},o.prototype.resetChatUI=function(){var e=this;e.btn_face.selected=!1,e.scroller_face.visible=e.btn_face.selected,e.label_noChat.text=mo.D.langCodeToTxt(e._tableCtrl.isMatch?"g_chat_match_join":"user_no_chat_1"),e.label_text_Input.visible=!0,e.scroller_text.visible=!1,e.btn_lazy_message&&(e.btn_lazy_message.selected=e.scroller_text.visible)},Object.defineProperty(o.prototype,"tableCtrl",{set:function(t){var r=this;r._tableCtrl=t,r.onEmitter(r._tableCtrl,CONST.BBT_table.chat,r.onChat),r.onEmitter(r._tableCtrl,CONST.BBT_table.openRound,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.shuffle,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.scanCard,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.payout,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.betStop,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.bet,r.chatTextChange),r.onEmitter(mo.emitter,CONST.matchEvent.matchRegisterSuccess,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.disTalkUser,r.onBanUser.bind(r)),r.onEmitter(r._tableCtrl,e.GTS.TableCtrl.ON_AFTER_BET,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.openRound,r.resetChatUIWithClearInputText),r.onEmitter(r._tableCtrl,CONST.BBT_table.shuffle,r.resetChatUIWithClearInputText),r.onEmitter(r._tableCtrl,CONST.BBT_table.betStop,r.resetChatUI),r.label_noChat.text=mo.D.langCodeToTxt(r._tableCtrl.isMatch?"g_chat_match_join":"user_no_chat_1"),r.chatTextChange(),e.GTS.mgr.chatRecorder.setCurTableCode(r._tableCtrl.code);var o=!!r._tableCtrl&&e.GTS.mgr.canFreeChatThisRound(r._tableCtrl.roundCode);r.label_text_Input.enabled=o,r.canned_msg_trigger.visible=!!r._tableCtrl&&!o,r.canned_msg_closer.visible=!1,r.scroller_text.visible=!1,r.btn_lazy_message&&(r.btn_lazy_message.selected=r.scroller_text.visible),r.scroller_face.visible=!1},enumerable:!0,configurable:!0}),o.prototype.onChat=function(e){var r=this;if((r._tableCtrl.type==CONST.tableType.baccarat||r._tableCtrl.type==CONST.tableType.dragonTiger)&&e&&e.chat&&e.chat.content&&e.chat.content.indexOf("#emj_")>-1){var o=e.chat.content,a=parseInt(o.split("_")[1]);mo.emitter.emit("releaseEmoji",a)}else{if(e&&e.chat&&e.chat.arg&&e.chat.arg.msgId){var i=e.chat.arg.msgId,n=mo.D.getTxtByMatch(i);n&&n.length>0&&(e.chat.content=mo.D.langCodeToTxt(i))}for(;r.chatList.length>100;)r.chatList.shift();r.chatList.push(e),r.list_chat.removeChildren();for(var s,l,c=0,p=r.chatList.length;p>c;c++)s=r.chatList[c],(l=new t.ChatRenderer).chat({chat:s.chat}),r.list_chat.addChild(l);r.scroller_chat.validateNow(),r.scroller_chat.viewport.scrollV=r.scroller_chat.viewport.contentHeight<=r.scroller_chat.height?0:r.scroller_chat.viewport.contentHeight-r.scroller_chat.height}},o.prototype.onBanUser=function(e){var r=this,o=e.user.id;r.chatList=r.chatList.filter((function(e){return e.chat.userId!=o})),r.list_chat.removeChildren();for(var a,i,n=0,s=r.chatList.length;s>n;n++)a=r.chatList[n],(i=new t.ChatRenderer).chat({chat:a.chat}),r.list_chat.addChild(i);r.scroller_chat.validateNow(),r.scroller_chat.viewport.scrollV=r.scroller_chat.viewport.contentHeight<=r.scroller_chat.height?0:r.scroller_chat.viewport.contentHeight-r.scroller_chat.height},o.prototype._tap_btn_lazy_message=function(){var e=this;e.scroller_text&&(e.scroller_text.visible=e.btn_lazy_message.selected),e.canned_msg_closer.visible=e.btn_lazy_message.selected,e.btn_lazy_message.selected&&(e.btn_face.selected=!1,e.scroller_face.visible=!1)},o.prototype._tap_btn_face=function(){var t=this,r=t._tableCtrl;if(r.isMatch){if(!r.hasEnrolled())return mo.MSG.show(e.id_c_msgCode.g_chat_match_join)}else if(!r||mo.OBJ.isEmpty(r.betCtrl.betDetail))return mo.MSG.show(e.id_c_msgCode.user_no_chat);t.scroller_face&&(t.scroller_face.visible=t.btn_face.selected),t.btn_face.selected&&(t.btn_lazy_message&&(t.btn_lazy_message.selected=!1),t.scroller_text.visible=!1)},o.prototype._tap_btn_go=function(){var r=this,o=r._tableCtrl;if(mo.D.langCodeToTxt("chat_out_of_limit"),o.isMatch){if(!o.hasEnrolled())return mo.MSG.show(e.id_c_msgCode.g_chat_match_join)}else if(!o||mo.OBJ.isEmpty(o.betCtrl.betDetail))return mo.MSG.show(e.id_c_msgCode.user_no_chat);if(""==r.label_text_Input.text)mo.MSG.show(e.id_c_msgCode.user_no_null);else{if(e.GTS.mgr.isForbiddenChat())return void mo.MSG.show("${{chat_ban_warn}}");if(e.GTS.userCtrl)if(-1!=e.GTS.userCtrl.type){if(r._tableCtrl){var a=e.GTS.mgr.verifyEmoji(r.label_text_Input.text);r._tableCtrl.chat(a,{isTextTemplate:!0,msgId:r.getCannedMsgByText(a)},(function(){t.log("发送成功"),e.GTS.mgr.chatRecorder.record(a),e.RCD.log_mgr.sendEvent_ClientButton("game.chat.msg")})),r.label_text_Input.text=""}}else mo.MSG.show(e.id_c_msgCode.chat_tip_visitor)}r.label_text_Input.text="",r.label_num.text=r.label_text_Input.text.length+"/50"},o.prototype.getCannedMsgByText=function(e){var t=this;if(!t.listTxtArr||0==t.listTxtArr.length||!e||0==e.length)return null;var r=t.listTxtArr.indexOf(e);return-1==r?null:"g_channel_chat_"+(r+1)},o.prototype._data_list_face=function(){for(var e,t=[],r=0;20>r;r++)e="#emj_"+(r+1),t.push(e);return t},o.prototype.pad=function(e,t){return(Array(t).join("0")+e).slice(-t)},o.prototype._click_list_face=function(r){var o=this,a=r.item;if(o._tableCtrl){if(!o._canTapQuickChat)return mo.MSG.show(e.id_c_msgCode.user_no_continuitychat);o._canTapQuickChat=!1,mo.TM.setTimeout((function(){o&&(o._canTapQuickChat=!0)}),2e3),o._tableCtrl.chat(a,null,(function(){t.log("发送成功"),e.RCD.log_mgr.sendEvent_ClientButton("game.chat.emj")}))}o.btn_face&&(o.btn_face.selected=!1),o.scroller_face&&(o.scroller_face.visible=o.btn_face.selected)},o.prototype._tap_canned_msg_trigger=function(){var t=this,r=t._tableCtrl;if(r.isMatch){if(!r.hasEnrolled())return mo.MSG.show(e.id_c_msgCode.g_chat_match_join)}else if(!r||mo.OBJ.isEmpty(r.betCtrl.betDetail))return mo.MSG.show(e.id_c_msgCode.user_no_chat);t.canned_msg_closer.visible=!0,t.scroller_text.visible=!0,t.btn_lazy_message&&(t.btn_lazy_message.selected=t.scroller_text.visible),t.btn_face.selected=!1,t.scroller_face.visible=!1},o.prototype._tap_canned_msg_closer=function(){var e=this;e.canned_msg_closer.visible=!1,e.scroller_text.visible=!1,e.btn_lazy_message&&(e.btn_lazy_message.selected=e.scroller_text.visible),e.setCannedMsg()},o.prototype._data_list_text=function(){return this.listTxtArr},o.prototype.setCannedMsg=function(){var e=mo.D.getTxtByMatch("g_channel_chat_");this.listTxtArr=e,this.refreshList("list_text")},o.prototype._click_list_text=function(e){var t=e.item;this.label_text_Input.text=t,this._tap_canned_msg_closer()},o.prototype._enterEvent=function(e){var t=this;13==e.keyCode&&t.btn_go.enabled&&t.label_text_Input.text.length>0&&t._tap_btn_go()},o}(mo.EUI.Comp);t.ChatPC35=r,__reflect(r.prototype,"G.BASE.ChatPC35")}(e.BASE||(e.BASE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.ThemeTemplate=0,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var o=this;o._Item_list_chest=t.TreasureChestItem,o.openTimer=new e.TableTimer,o.countdownTimer=new e.TableTimer,o.endTimer=new e.TableTimer,o.ThemeTemplate=1;var a="";1==o.ThemeTemplate&&(a+="_newYear"),o._skinName="TreasureChestPC35"+a+"Skin"},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this,t=new egret.Shape;e.grp_countdownForGraphics&&(e.grp_countdownForGraphics.addChild(t),e.graphics=t.graphics,t.x=e.grp_countdownForGraphics.width/2,t.y=e.grp_countdownForGraphics.height/2,e.grp_countdownForGraphics.rotation=-90)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;if(t.treasureInfo=e.GTS.mgr.getTreasureInfo(),t.treasureInfo){t.onEmitter(t.countdownTimer,e.TableTimer.ON_TICK,t._onTick_countdownTimer),t.onEmitter(t.countdownTimer,e.TableTimer.ON_END,t._onEnd_countdownTimer),t.onEmitter(t.openTimer,e.TableTimer.ON_TICK,t._onTick_openTimer),t.onEmitter(t.openTimer,e.TableTimer.ON_END,t._onEnd_openTimer),t.label_countdown.text=mo.STR.format(mo.D.langCodeToTxt("Treasurechest_reciprocal"),30),t.onEmitter(t.endTimer,e.TableTimer.ON_TICK,t._onTick_endTimer),t.onEmitter(t.endTimer,e.TableTimer.ON_END,t._onEnd_endTimer),mo.emitter.on("clickChest",(function(e){t.openChestByTreasureId(e)})),t.treasureId=t.treasureInfo.id,t.eventList=t.treasureInfo.eventList,t.icon_howmaneyChest.visible=!1,t.label_remaining_base.visible=!1,t.btn_callWinnerList.visible=!1,t.setWaitOrGetOn(),t.getChestNumber();"pcBanner.png","pcActivity.png";var o=mo.STR.format("treasure/%d/pcBanner.png",t.treasureId),a=mo.STR.format("treasure/%d/pcActivity.png",t.treasureId);e.getRemoteImg(o,(function(e){t.img_banner.source=e})),e.getRemoteImg(a,(function(e){t.img_activity.source=e})),t.initScrollerBar()}else t.grp_base&&(t.grp_base.visible=!1)},o.prototype.onExit=function(){var e=this;r.prototype.onExit.call(this),e.openTimer.stop(),e.countdownTimer.stop(),e.endTimer.stop(),e.closeOpenAnimation(),mo.emitter.unAll("clickChest")},o.prototype.setWaitOrGetOn=function(){var t=this;if(t.getSession(),t.grp_getOn.visible=t.currentBoxQty>0&&t.isOn,t.grp_wait.visible=!t.isOn,t.isOn){e.GTS.netMgr.request("gts.treasure.getUserKeys",{treasureId:t.treasureId},(function(e){e.treasureSyncData&&(t.keys=e.treasureSyncData.userKeys,t.label_keys.text=t.keys?"x "+t.keys:"x 0")}),(function(e){console.log("err",e)}));var r=t.eventList[t.whichSession].endTime.getTime(),o=t.eventList[t.whichSession].endTime,a=r-mo.DATE.now();t.endTimer.start(a,o)}else if(t.nextOpenTime>0){(a=t.nextOpenTime-mo.DATE.now())>0&&t.countdownTimer.start(a,t.nextOpenTimeData)}else t.label_num_d.text="00",t.label_num_h.text="00",t.label_num_m.text="00",t.label_num_s.text="00"},o.prototype.getSession=function(){var e=this;if(e.whichSession=-1,e.nextSession=-1,e.nextOpenTime=-1,e.nextOpenTimeData=mo.DATE.date(),e.isOn=!1,e.eventList[0].startTime.getTime()>mo.DATE.now())e.nextSession=0;else for(var t=0;t<e.eventList.length;t++)e.eventList[t].startTime.getTime()<=mo.DATE.now()&&(e.eventList[t].endTime.getTime()>mo.DATE.now()?(e.isOn=!0,e.whichSession=t,e.nextSession=t+1):e.nextSession=t+1<e.eventList.length?t+1:-1);e.isOn||e.eventList[e.nextSession]&&(e.nextOpenTime=e.eventList[e.nextSession].startTime.getTime(),e.nextOpenTimeData=e.eventList[e.nextSession].startTime)},o.prototype.getChestNumber=function(){var t=this;e.GTS.netMgr.request("gts.treasure.getActiveTreasure",{},(function(e){if(e.treasureSyncData)if(t.dayBoxQty=e.treasureSyncData.todayBoxQty,t.currentBoxQty=e.treasureSyncData.remainingBoxQty,t.setWaitOrGetOn(),t.icon_howmaneyChest.visible=!0,t.label_remaining_base.visible=!0,t.btn_callWinnerList.visible=!0,t.isOn)if(t.currentBoxQty>0)t.label_remaining_base.text="x  "+t.currentBoxQty,t.label_remaining_list.text="x  "+t.currentBoxQty,t.btn_callChestList.enabled=0!=t.currentBoxQty;else if(t.label_remaining_base&&t.nextSession&&(t.label_remaining_base.text=t.eventList[t.nextSession]?"x  "+t.eventList[t.nextSession].limitBoxQty:"x  0"),t.grp_wait.visible=!0,t.grp_getOn.visible=!1,t.eventList[t.nextSession]&&(t.nextOpenTime=t.eventList[t.nextSession].startTime.getTime(),t.nextOpenTimeData=t.eventList[t.nextSession].startTime),t.nextOpenTime>0){var r=t.nextOpenTime-mo.DATE.now();r>0&&t.countdownTimer.start(r,t.nextOpenTimeData)}else t.label_num_d.text="00",t.label_num_h.text="00",t.label_num_m.text="00",t.label_num_s.text="00";else 0==t.nextSession?(t.treasureInfo.eventStartTime.getTime()>mo.DATE.now()&&(t.icon_howmaneyChest.visible=!1,t.label_remaining_base.visible=!1,t.btn_callWinnerList.visible=!1),t.label_remaining_base.text="x  "+t.eventList[0].limitBoxQty,t.label_remaining_list.text="x  "+t.eventList[0].limitBoxQty):t.eventList[t.nextSession]?(t.label_remaining_base.text="x  "+t.eventList[t.nextSession].limitBoxQty,t.label_remaining_list.text="x  "+t.eventList[t.nextSession].limitBoxQty):(t.label_remaining_base.text="x  0",t.label_remaining_list.text="x  0")}),(function(e){console.log("err",e)}))},o.prototype._onTick_countdownTimer=function(e,t,r){var o=this;o.label_num_d.text=Math.floor(t/60/60/24)>9?""+Math.floor(t/60/60/24):"0"+Math.floor(t/60/60/24),o.label_num_h.text=Math.floor(t/60/60%24)>9?""+Math.floor(t/60/60%24):"0"+Math.floor(t/60/60%24),o.label_num_m.text=Math.floor(t/60%60)>9?""+Math.floor(t/60%60):"0"+Math.floor(t/60%60),o.label_num_s.text=Math.floor(t%60%60)>9?""+Math.floor(t%60%60):"0"+Math.floor(t%60%60),0==o.icon_howmaneyChest.visible&&r&&o.treasureInfo.eventStartTime.getTime()<mo.DATE.now()&&(o.icon_howmaneyChest.visible=!0,o.label_remaining_base.visible=!0,o.btn_callWinnerList.visible=!0)},o.prototype._onEnd_countdownTimer=function(){var e=this;e.countdownTimer.stop(),setTimeout((function(){e.getChestNumber()}),1500)},o.prototype._tap_btn_callChestList=function(){var t=this;if(t.chestList.touchChildren=!0,t.keys>0){t.getChestNumber();var r={treasureId:t.treasureId,eventId:t.eventList[t.whichSession].eventId};e.GTS.netMgr.requestWithErr("gts.treasure.scrambling",r,(function(e){if(t.btn_callChestList.touchEnabled=!1,e.treasureSyncData){var r=[];if(t.currentBoxQty<15)for(var o=0;15>o;o++)r.push(o<t.currentBoxQty?{index:o,bonusAmount:-1,currentBoxQty:-1}:{index:o,bonusAmount:-1,currentBoxQty:0});else for(o=0;15>o;o++)r.push({index:o,bonusAmount:-1,currentBoxQty:-1});t.list_chest.dataProvider=new eui.ArrayCollection(r),t.btn_closeChestList.visible=!1,t.label_countdown.visible=!0,t.grp_chestList.visible=!0,t.grp_chestList.scaleX=.1,t.grp_chestList.scaleY=.1,t.openTimer.start(3e4,mo.DATE.addSeconds(mo.DATE.date(),30)),t.getTween(t.grp_chestList).to({scaleX:1.1,scaleY:1.1},200).to({scaleX:1,scaleY:1},180).call((function(){t.rmTweens(t.grp_chestList)})),t.grp_base.visible=!1}}),(function(t){4093==t||4100==t?mo.MSG.show(mo.D.langCodeToTxt("daily_opened_out_limit")+" ( %s )",t):4111==t||4097==t?(mo.MSG.show(mo.D.langCodeToTxt("g_openBox_channel_deny")+" , error code : %s",t),e.COMM.layerMgr.baseTopBar.closeChestAndfocusFirstGameItem()):mo.MSG.show(mo.D.langCodeToTxt("g_openBox_channel_deny")+" , error code : %s",t)}))}else mo.MSG.show("${{treasurechest_message}}")},o.prototype._tap_btn_closeChestList=function(){var e=this;e.btn_callChestList.touchEnabled=!0,e.grp_chestList.visible=!1,e.grp_base.visible=!0,e.btn_closeChestList.visible=!1,e.label_countdown.visible=!0,e.grp_showChest.visible=!1,e.openTimer.stop(),e.closeOpenAnimation()},o.prototype._onTick_openTimer=function(e,t,r){var o=this;(o.label_countdown.text=t,.001>e&&mo.emitter.emit("chestTimeending"),r&&(o.label_countdown.textColor=o.getColor(t),10>=t&&o.label_countdown))&&(o.rmTweens(o.label_countdown),o.getTween(o.label_countdown,{loop:!1}).to({scaleX:.8,scaleY:.8},150).to({scaleX:.5,scaleY:.5},50).call((function(){o.rmTweens(o.label_countdown)})));var a=o.graphics;a&&(a.clear(),a.lineStyle(2,o.getColor(t)),a.drawArc(0,0,20,Math.PI/180*360*(1-e),0,!1),a.endFill()),0==t&&(o.btn_callChestList.touchEnabled=!0,o.grp_chestList.visible=!1,o.grp_base.visible=!0,o.openTimer.stop())},o.prototype.getColor=function(e){return e>10?CONST.StateColor.green:CONST.StateColor.red},o.prototype._onEnd_openTimer=function(){this.openTimer.stop()},o.prototype.winnerListChange=function(t){for(var r=[],o=0;o<t.length;o++){var a=mo.DATE.format(t[o].rewardTime,"YYYY/MM/DD"),i=t[o].userName.substr(0,2)+"***"+t[o].userName.substr(-2),n=e.UTIL.NUM.getSplitNumStr(parseFloat(t[o].money.toFixed(2))),s=o%2==0?0:.3;r.push({time:a,name:i,money:n,alpha:s})}return r},o.prototype._tap_btn_callWinnerList=function(){var t=this;e.GTS.netMgr.request("gts.treasure.rewardList",{treasureId:t.treasureId},(function(e){e.treasureSyncData&&(t.rewardListBig=t.winnerListChange(e.treasureSyncData.rewardListBig),t.rewardListNew=t.winnerListChange(e.treasureSyncData.rewardListNew),t.list_winners.dataProvider=new eui.ArrayCollection(0==t.btn_allOrLatest.selected?t.rewardListBig:t.rewardListNew),t.rebuildScrollerBar(),t.grp_winnerList.visible=!0,t.grp_winnerList.scaleX=.1,t.grp_winnerList.scaleY=.1,t.getTween(t.grp_winnerList).to({scaleX:1.18,scaleY:1.18},220).call((function(){t.rmTweens(t.grp_winnerList)})),t.grp_base.visible=!1)}),(function(e){console.log("err",e)}))},o.prototype._tap_btn_closeWinList=function(){this.grp_winnerList.visible=!1,this.grp_base.visible=!0},o.prototype._tap_btn_allOrLatest=function(){},o.prototype._tap_clickAll=function(){e.playAudio("btnclick");var t=this;t.rebuildScrollerBar(),t.list_winners.dataProvider=new eui.ArrayCollection(t.rewardListBig),t.btn_allOrLatest.selected=!1},o.prototype._tap_clickLatest=function(){e.playAudio("btnclick");var t=this;t.rebuildScrollerBar(),t.list_winners.dataProvider=new eui.ArrayCollection(t.rewardListNew),t.btn_allOrLatest.selected=!0},o.prototype.openChest=function(e){var t=this;t.list_chest.dataProvider=new eui.ArrayCollection(e),t.btn_closeChestList.visible=!0,t.graphics.clear(),t.label_countdown.text=mo.STR.format(mo.D.langCodeToTxt("Treasurechest_reciprocal"),30),t.label_countdown.visible=!1,t.grp_showChest.visible=!0,t.playOpenAnimation()},o.prototype.openChestByTreasureId=function(t){var r=this;r.chestList.touchChildren=!1,r.openTimer.stop();var o={treasureId:r.treasureId,eventId:r.eventList[r.whichSession].eventId,bgBoxNum:15};e.GTS.netMgr.requestWithErr("gts.treasure.openBox",o,(function(o){if(o.treasureSyncData){r.currentBoxQty=o.treasureSyncData.remainingBoxQty,r.label_remaining_base.text="x  "+r.currentBoxQty,r.label_remaining_list.text="x  "+r.currentBoxQty,0==r.currentBoxQty?(mo.MSG.show("${{treasurechest_message1}}"),r.btn_callChestList.enabled=!1):r.btn_callChestList.enabled=!0,r.label_bonusAmount.text=e.UTIL.NUM.getSplitNumStr(parseFloat(o.treasureSyncData.bonusAmount.toFixed(2)));var a=o.treasureSyncData.bgBoxList,i=a.shift();a.splice(t.index,0,i),r.openChest(a),mo.emitter.emit("afterOpenChest"),e.GTS.netMgr.request("gts.treasure.getUserKeys",{treasureId:r.treasureId},(function(e){e.treasureSyncData&&(r.keys=e.treasureSyncData.userKeys,r.label_keys.text=r.keys?"x "+r.keys:"x 0")}),(function(e){console.log("err",e)}))}else 1==r.grp_chestList.visible&&(r.btn_callChestList.touchEnabled=!0,r.grp_chestList.visible=!1,r.grp_base.visible=!0,r.openTimer.stop(),r.grp_showChest.visible=!1,r.closeOpenAnimation())}),(function(t){console.log("openbox fail ",t),4093==t||4100==t?mo.MSG.show(mo.D.langCodeToTxt("daily_opened_out_limit")+" ( %s )",t):4111==t||4097==t?(mo.MSG.show(mo.D.langCodeToTxt("g_openBox_channel_deny")+" , error code : %s",t),e.COMM.layerMgr.baseTopBar.closeChestAndfocusFirstGameItem()):mo.MSG.show(mo.D.langCodeToTxt("g_openBox_channel_deny")+" , error code : %s",t),1==r.grp_chestList.visible&&(r.btn_callChestList.touchEnabled=!0,r.grp_chestList.visible=!1,r.grp_base.visible=!0,r.openTimer.stop(),r.grp_showChest.visible=!1,r.closeOpenAnimation())}))},o.prototype.playOpenAnimation=function(){var e=this;if(e.ThemeTemplate=1,1==e.ThemeTemplate){var t=new mo.Sprite;e.grp_chestOpenAnima.addChild(t),t.x=0,t.y=-25,t.frameLoop.cost=80,t.scaleX=.5,t.scaleY=.5,t.play("sp/red_bag_mc.png",1)}else{t=new mo.Sprite;e.grp_chestOpenAnima.addChild(t),t.x=0,t.y=0,t.frameLoop.cost=90,t.scaleX=.8,t.scaleY=.8;var r=new mo.Sprite;e.grp_chestOpenAnima.addChild(r),r.x=0,r.y=0,r.frameLoop.cost=40,r.scaleX=.8,r.scaleY=.8,t.play("sp/chest_mc.png",1),r.play("sp/coin_mc.png",1)}},o.prototype.closeOpenAnimation=function(){var e=this;e.openDragonBone&&e.openDragonBone.clear(),e.grp_chestOpenAnima.removeChildren(),e.openDragonBone=null},o.prototype.rebuildScrollerBar=function(){var e=this;e.grp_winnerList.removeChild(e.scrollerbar_winnerList),e.initScrollerBar()},o.prototype.initScrollerBar=function(){var t=this;t.scrollerbar_winnerList=new e.COMM.ScrollerBar,t.grp_winnerList.addChild(t.scrollerbar_winnerList),t.scrollerbar_winnerList.init(t.winnersList,"vChest")},o.prototype._onTick_endTimer=function(){},o.prototype._onEnd_endTimer=function(){var e=this;e.endTimer.stop(),e.setWaitOrGetOn(),e.getChestNumber(),1==e.grp_chestList.visible&&(e.btn_callChestList.touchEnabled=!0,e.grp_chestList.visible=!1,e.grp_base.visible=!0,e.openTimer.stop(),e.grp_showChest.visible=!1,e.closeOpenAnimation()),e.currentBoxQty>0&&mo.MSG.show("${{treasurechest_message1}}")},o}(mo.EUI.Layer);t.TreasureChestPC35=r,__reflect(r.prototype,"G.COMM.TreasureChestPC35"),e.GC.gc.registerClass(r.__className,r)}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.onExit=function(){t.prototype.onExit.call(this)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;if(e.radio_address_list=[],e.data&&e.grp_video_address){for(var r=e.data.videoAddressList,o=0;o<r.length;o++){var a=new eui.RadioButton;a.label=(o+1).toString(),a.value=o,a.groupName="address",e.data.currentVideoIndex==o&&(a.selected=!0),e.radio_address_list.push(a),e.grp_video_address.addChild(a)}e.data.isHD?e.radio_HD&&(e.radio_HD.selected=!0):e.radio_SD&&(e.radio_SD.selected=!0)}},r.prototype._tap_btn_close=function(){var t=this;e.playAudio("btnclick");var r=0,o=!1;t.radio_address_list&&t.radio_address_list[0]&&t.radio_address_list[0].group&&(r=t.radio_address_list[0].group.selectedValue),t.radio_HD&&t.radio_HD.group&&"HD"==t.radio_HD.group.selectedValue&&(o=!0),t.radio_address_list=[],t.grp_video_address.removeChildren(),mo.emitter.emit("changeVideoQualityAndAddress",r,o)},r}(mo.EUI.Dlg);t.VideoSettingDlgPC35=r,__reflect(r.prototype,"G.COMM.VideoSettingDlgPC35")}(e.COMM||(e.COMM={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this._Item_list_room=t.DiceRoomRendererNeon},o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype._data_list_room=function(){for(var t,r=[],o=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.sicBo),a=0,i=o.length;i>a;a++){t=o[a];var n={};n.tableCtrl=t,r.push(n)}return r},o.prototype._click_list_room=function(e){var t=e.item.tableCtrl;this.gotoGame(t)},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomList);t.DiceRoomSelector=r,__reflect(r.prototype,"G.DICE.DiceRoomSelector"),e.GC.gc.registerClass(r.__className,r)}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.maxShowNum=13,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this._Item_resultList=t.DiceResultRendererNeon},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var t=this;if(t.data&&t.data.tableCtrl){var o=t.data.tableCtrl;t.label_roomName.text=o.name;var a=o.roundCtrl.currentDealerName();o.dealerNameTranslate&&o.dealerNameTranslate.hasOwnProperty(mo.PROJ.lang)&&""!=o.dealerNameTranslate[mo.PROJ.lang]&&(a=o.dealerNameTranslate[mo.PROJ.lang]),t.dealer.setData({dealerName:o.roundCtrl.currentDealerNameOther(a),dealerId:o.roundCtrl.dealerId,tableCode:o.code});for(var i,n,s,l=o.rangeList4Dis,c=0,p=l.length;p>c;c++)s=l[c],0==c?(i=s[0],n=s[1]):(i>s[0]&&(i=s[0]),n<s[1]&&(n=s[1]));t.label_roomLimit.visible=!o.isMultiRange,t.label_roomName.y=o.isMultiRange?12:4,1e3>i&&1e3>n?t.label_roomLimit.text=mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(i),e.UTIL.NUM.getSplitNumStr(n)):1e3>i&&n>=1e3?t.label_roomLimit.text=mo.STR.format("%s-%sK",e.UTIL.NUM.getSplitNumStr(i),e.UTIL.NUM.getSplitNumStr(n/1e3)):i>=1e3&&n>=1e3&&(t.label_roomLimit.text=mo.STR.format("%sK-%sK",e.UTIL.NUM.getSplitNumStr(i/1e3),e.UTIL.NUM.getSplitNumStr(n/1e3)));var _=o.countMap||{},u=CONST.betType.sicBo;t.label_big.text=_[u.big]||0,t.label_small.text=_[u.small]||0,t.label_single.text=_[u.odd]||0,t.label_double.text=_[u.even]||0,t._updateGameState(),t.parseLuZhuResult(o),t.refreshList("resultList"),t.scroller.validateNow(),t.scroller.viewport.scrollH=t.scroller.viewport.contentWidth-t.scroller.width}},o.prototype.parseLuZhuResult=function(e){var t=this;t._resultList=[];for(var r=e.luZhuList,o=0,a=r.length;a>o;o++)r[o].results&&t._resultList.push(r[o]);if(t._resultList.length<t.maxShowNum)for(o=0,a=t.maxShowNum-t._resultList.length;a>o;o++)t._resultList.push(null);else t._resultList.push(null)},o.prototype._data_resultList=function(){return this._resultList},o}(e.RoomListItem);t.DiceRoomRenderer=r,__reflect(r.prototype,"G.DICE.DiceRoomRenderer")}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.maxShowNum=13,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this._Item_resultList=t.DiceResultRenderer},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);this.scaleX=e.BASE.scaleXY_DG,this.scaleY=e.BASE.scaleXY_DG},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var t=this;if(t.data&&t.data.tableCtrl){var o=t.data.tableCtrl;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(t.label_big.size=24,t.label_small.size=24,t.label_double.size=24,t.label_single.size=24),t.label_roomName.text=o.name,t.dealer.setData({dealerName:o.roundCtrl.dealerName,dealerId:o.roundCtrl.dealerId,tableCode:o.code,dealerNameTranslate:o.dealerNameTranslate});for(var a,i,n,s=o.rangeList4Dis,l=0,c=s.length;c>l;l++)n=s[l],0==l?(a=n[0],i=n[1]):(a>n[0]&&(a=n[0]),i<n[1]&&(i=n[1]));t.label_roomLimit.visible=!o.isMultiRange;var p=e.GW.mgr.isChangeDisplayDecimalMark?",":".",_=i>=1e3?""+e.UTIL.NUM.getSplitNumStr(i/1e3):""+i;_=-1!=_.indexOf(p)?_.substring(0,_.indexOf(p)+4):_,_=i>=1e3?_+"K":_;var u=a>=1e3?""+e.UTIL.NUM.getSplitNumStr(a/1e3):""+a;u=-1!=u.indexOf(p)?u.substring(0,u.indexOf(p)+4):u,u=a>=1e3?u+"K":u,t.label_roomLimit.text=mo.STR.format("%s-%s",u,_);var h=o.countMap||{},m=CONST.betType.sicBo;t.label_big.text=h[m.big]||0,t.label_small.text=h[m.small]||0,t.label_single.text=h[m.odd]||0,t.label_double.text=h[m.even]||0,t._updateGameState(),t.parseLuZhuResult(o),t.refreshList("resultList"),t.scroller.validateNow(),t.scroller.viewport.scrollH=t.scroller.viewport.contentWidth-t.scroller.width,t.setMaintainMask()}},o.prototype.parseLuZhuResult=function(e){var t=this;t._resultList=[];for(var r=e.luZhuList,o=0,a=r.length;a>o;o++)r[o].results&&t._resultList.push(r[o]);if(t._resultList.length<t.maxShowNum)for(o=0,a=t.maxShowNum-t._resultList.length;a>o;o++)t._resultList.push(null);else t._resultList.push(null)},o.prototype._data_resultList=function(){return this._resultList},o.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_sicBo"),t.data.tableCtrl&&!e.GTS.mgr.isTableMaintain(t.data.tableCtrl.code)&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},o}(e.RoomListItem);t.DiceRoomRendererNeon=r,__reflect(r.prototype,"G.DICE.DiceRoomRendererNeon"),e.GC.gc.registerClass(r.__className,r)}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this;e.diceBetMgr=new t.DiceBetMgr,e.diceBetMgr.isFirstPlay=!1,e.initBetArea_1(),e.initBetArea_2()},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var e=this;e.data.param&&(e.diceBetMgr.tableCtrl=e.tableCtrl,e.diceBottomBar.setData({tableCtrl:e.tableCtrl,diceBetMgr:e.diceBetMgr}))},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;t.chipBar.tableCtrl=t.tableCtrl,t.chipBar.btn_chipSetting.visible=!1,t.tableCtrl.gameState,e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,t.onEmitter(e.VideoMgr,"networkStatus",(function(t){null!=t&&(e.COMM.layerMgr.baseTopBar.img_wifi.source="ico_wifi_"+t)})),mo.PROJ.isSkipVideoLoading||(t.onEmitter(mo.emitter,"videoLoading",(function(){t.image_rect.visible=!0,t.image_rect.alpha=.9,t.img_video_loading.visible=!0,t.videoLoading.visible=!0,setInterval((function(){t.videoLoading.loading.play(0)}),800)})),t.onEmitter(mo.emitter,"videoLoadingHide",(function(){t.videoLoading.loading.stop(),t.image_rect.visible=!1,t.videoLoading.visible=!1,t.img_video_loading.visible=!1}))),t.diceBetMgr.recoverBetInfo(),t._gameStateChange(t.tableCtrl.gameState),e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t)},o.prototype.initBetArea_1=function(){var e=this,t=0;e.table_1.setData({diceBetMgr:e.diceBetMgr}),e.table_1.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(r){0==t&&(t=1,e.diceBetMgr.isFirstPlay=!1,e.diceBetMgr.onBetAreaTap(e.table_1.x+r.localX,e.table_1.y+r.localY,e.chipBar.chipValue),setTimeout((function(){t=0}),200))}),e)},o.prototype.initBetArea_2=function(){var e=this,t=0;e.table_2.setData({diceBetMgr:e.diceBetMgr}),e.table_2.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(r){0==t&&(t=1,e.diceBetMgr.isFirstPlay=!1,e.onChipDrop(e.table_2.x+r.localX,e.table_2.y+r.localY,e.chipBar.chipValue),setTimeout((function(){t=0}),200))}),e)},o.prototype.onChipDrop=function(e,t){var r=this,o=r.getTablePoint(e,t);r.diceBetMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)},o.prototype.onChipMove=function(e,t){var r=this.getTablePoint(e,t);this.diceBetMgr.chipMoveCheck(r.x,r.y)},o.prototype.onChipChoose=function(){},o.prototype.getTablePoint=function(e,t){return new egret.Point(e,t)},o.prototype._tap_btn_back=function(){this._onKickFromTable()},o.prototype.onExit=function(){r.prototype.onExit.call(this),this.diceBetMgr.reset(),this.diceBetMgr.unAll(),this.diceBetMgr.doDtor(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!1,e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,this.showBonus,this),e.COMM.BONUS.leaveBonusDlg()},o.prototype._gameStateChange=function(e){switch(e){case CONST.gameState.betting:case CONST.gameState.shuffle:case CONST.gameState.stopBet:break;case CONST.gameState.payout:this.diceBetMgr.betAreaSettlement()}},o.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},o}(e.BASE.BaseTableLayer);t.DiceTable=r,__reflect(r.prototype,"G.DICE.DiceTable"),e.GC.gc.registerClass(r.__className,r)}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.IBetMgrEvent,o=e.COMM.Payout,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.maxShowNum=18,e.maxHistoryShowNum=6,e.maxSumShowNum=13,e.justEnterGame=!1,e.noBetRoundCount=0,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);var e=this;e.initKeepResult(),e._Item_resultList=t.DiceHistoryResultRenderer,e._Item_historyList=t.DiceHistoryRenderer,e._Item_sumList=t.DiceSumRenderer,e.anylyst=new t.LuzhuAnalyst},i.prototype.initKeepResult=function(){var e=this;e.keepResult=[],e.keepResult_AllSame=0,e.keepResult_Small=1,e.keepResult_Even=2,e.keepResult_Odd=3,e.keepResult_Big=4;for(var t=0;t<=e.keepResult_Big;t++)e.keepResult.push(0)},i.prototype.addKeepResult=function(e){var t=this;t.justEnterGame||e>t.keepResult_Big||0>e||(t.keepResult[e]++,t.resetKeepResultOnlyOppose(e))},i.prototype.resetKeepResultOnlyOppose=function(e){var t=this;switch(e){case t.keepResult_Small:t.resetKeepResultByTarget(t.keepResult_Big);break;case t.keepResult_Big:t.resetKeepResultByTarget(t.keepResult_Small);break;case t.keepResult_Odd:t.resetKeepResultByTarget(t.keepResult_Even);break;case t.keepResult_Even:t.resetKeepResultByTarget(t.keepResult_Odd)}},i.prototype.resetKeepResultByTarget=function(e){e>this.keepResult_Big||0>e||(this.keepResult[e]=0)},i.prototype.getKeepResultBigThan=function(e){for(var t=0;t<=this.keepResult_Big;t++)if(this.keepResult[t]>=e)return t;return-1},i.prototype.checkandPlayResultSound=function(){var e=this,t=e.getKeepResultBigThan(2);if(-1!=t){if(t==e.keepResult_AllSame)return egret.Tween.get(e.grp_button).wait(4e3).call((function(){e.diceTableCtrl&&e.diceTableCtrl.playAudio("s_triples")})),void e.resetKeepResultByTarget(e.keepResult_AllSame);if((t=e.getKeepResultBigThan(5))==e.keepResult_Small||t==e.keepResult_Big||t==e.keepResult_Odd||t==e.keepResult_Even){var r="";switch(t){case e.keepResult_Small:r="s_asktheway_2";break;case e.keepResult_Big:r="s_asktheway_1";break;case e.keepResult_Odd:r="s_asktheway_3";break;case e.keepResult_Even:r="s_asktheway_4"}if(""!=r)egret.Tween.get(e.grp_button).wait(4e3).call((function(){e.diceTableCtrl&&e.diceTableCtrl.playAudio(r)}));e.resetKeepResultByTarget(t)}}},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);this.initDaluPainter(),this.compTimerState.audioEnabled=!0},i.prototype.initDaluPainter=function(){var e=this,r={gridSize:17,maxCol:300,maxRow:6,offsetX:0,offsetY:0};r.strList="ta_in"==mo.PROJ.lang||"de_de"==mo.PROJ.lang?["Even","Odd","Triple"]:[mo.D.langCodeToTxt("g_even"),mo.D.langCodeToTxt("g_odd"),mo.D.langCodeToTxt("roadmap_triple")],e._oddEvenPainter=new t.DaluPainter(e.scroller_oddEven,r);var o={gridSize:17,maxCol:300,maxRow:6,offsetX:0,offsetY:0};o.strList="ta_in"==mo.PROJ.lang||"de_de"==mo.PROJ.lang?["Big","Small","Triple"]:[mo.D.langCodeToTxt("roadmap_big"),mo.D.langCodeToTxt("roadmap_small"),mo.D.langCodeToTxt("roadmap_triple")],e._bigSmallPainter=new t.DaluPainter(e.scroller_bigSmall,o)},i.prototype._data_resultList=function(){var e=this,t=mo.OBJ.clone(e.anylyst.historyResultList);if(t.length<e.maxShowNum)for(var r=0,o=e.maxShowNum-t.length;o>r;r++)t.push(null);else t.push(null);return t},i.prototype._data_historyList=function(){var e=this,t=mo.OBJ.clone(e.anylyst.historyResultListExt);if(t.length<e.maxHistoryShowNum)for(var r=0,o=e.maxHistoryShowNum-t.length;o>r;r++)t.push(null);return t},i.prototype._data_sumList=function(){var e=this,t=mo.OBJ.clone(e.anylyst.sumListExt);if(t.length<e.maxSumShowNum)for(var r=0,o=e.maxSumShowNum-t.length;o>r;r++)t.push(null);return t},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);var t=this,r=t.diceTableCtrl;t.compTimerState.tableCtrl=r,t.BetSettingLayer=new e.COMM.BetSetting,t.BetSettingLayer.tableCtrl=t.diceTableCtrl,t.BetSettingLayer.grp_bet_setting.right=190,t.BetSettingLayer.grp_bet_setting.bottom=120,t.grp_bet_setting.addChild(t.BetSettingLayer),t.onEmitter(mo.emitter,"onRoomShortcutExpand",t.onRoomShortcutExpand),t._refreshLuzhu()},i.prototype.onRoomShortcutExpand=function(e){var t=this,r=e?170:80;egret.Tween.get(t.grp_result_show).to({left:r},300).call((function(){egret.Tween.removeTweens(t.grp_result_show)})),r=e?233:143,egret.Tween.get(t.compTimerState).to({left:r},300).call((function(){egret.Tween.removeTweens(t.compTimerState)}))},i.prototype.dataChanged=function(){var t=this;a.prototype.dataChanged.call(this),t.justEnterGame=!0;var o=t.diceTableCtrl=t.data.tableCtrl;t.diceBetMgr=t.data.diceBetMgr,t.diceBetMgr.on(r.ON_BET_AMOUNT_CHG,t.betNumChanged,t),t.onEmitter(o,CONST.BBT_table.shuffle,t._onShuffle),t.onEmitter(o,CONST.BBT_table.openRound,t._openRound),t.onEmitter(o,CONST.BBT_table.payout,t._payout),t.onEmitter(o,CONST.BBT_table.betStop,t._betStop),t.onEmitter(o,CONST.BBT_table.bet,t._bet),t.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,t._onRefreshInfo),t.onEmitter(o,"betStopAfterAFK",t._betStopAfterAFK),t._refreshRoomInfo(),t._refreshRoundState(),t._refreshLuzhu(),t._refreshOpBtns()},i.prototype._betStopAfterAFK=function(){this.diceBetMgr.betFinalConfirm()},i.prototype._onRefreshInfo=function(){var e=this;e.diceBetMgr.recoverBetInfo(),e._refreshRoomInfo(),e._refreshRoundState(),e._refreshLuzhu(),e._refreshOpBtns()},i.prototype._onShuffle=function(){var e=this;e.justEnterGame=!1,e.diceBetMgr.clear(),e._refreshRoomInfo(),e._gameStateChange(CONST.gameState.shuffle)},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e._settlePanel&&(e._settlePanel.close(),e._settlePanel=null),e.diceBetMgr.clear(),e._refreshRoomInfo(),e._gameStateChange(CONST.gameState.betting),e.noBetRoundCount++,e.setNoBetHint(e.noBetRoundCount)},i.prototype._payout=function(){var t=this;t.diceBetMgr.clear(),t.justEnterGame=!1,e.log("显示派彩界面"),t._gameStateChange(CONST.gameState.payout)},i.prototype._betStop=function(){this.justEnterGame=!1,mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),e.log("停止下注"),this._gameStateChange(CONST.gameState.stopBet)},i.prototype._bet=function(){},i.prototype._refreshRoomInfo=function(){this.tableInfo.setData({tableCtrl:this.diceTableCtrl})},i.prototype._refreshRoundState=function(){var e=this;e.showBetMoney();var t=e.diceTableCtrl.gameState;e._gameStateChange(t)},i.prototype._refreshLuzhu=function(){var e=this;e.anylyst.setGameId(e.diceTableCtrl.code),e.anylyst.clearData();var t=e.diceTableCtrl.luZhuList;(e.anylyst.parseLuZhuList(t),e.parseLuZhuResult(),e.refreshList("resultList"),e.resultScroller.validateNow(),e.resultScroller.width<e.resultScroller.viewport.contentWidth)&&(e.resultScroller.viewport.scrollH=e.resultScroller.viewport.contentWidth-e.resultScroller.width,0==mo.OBJ.clone(e.anylyst.historyResultList).length&&(e.resultScroller.viewport.scrollH=0));e.refreshList("sumList"),e.sicboSumScroller.validateNow(),e.sumList.width<e.sicboSumScroller.viewport.contentWidth&&(e.sicboSumScroller.viewport.scrollH=e.sicboSumScroller.viewport.contentWidth-e.sicboSumScroller.width),e.refreshList("historyList"),e.sicboDiceScroller.validateNow(),e.historyList.width<e.sicboDiceScroller.viewport.contentWidth&&(e.sicboDiceScroller.viewport.scrollH=e.sicboDiceScroller.viewport.contentWidth-e.sicboDiceScroller.width),e._oddEvenPainter.setDaLuData(e.anylyst.oddEvenListExt),e._bigSmallPainter.setDaLuData(e.anylyst.bigSmallListExt);var r=e.anylyst.numberRatioList;0==r[0].count?(e.hot_0.visible=!1,e.hot_1.visible=!1,e.cold_0.visible=!1,e.cold_1.visible=!1):(e.hot_0.visible=!0,e.hot_1.visible=!0,e.cold_0.visible=!0,e.cold_1.visible=!0,e.hot_0.setData({type:1,no:r[0].num}),r[0].count>0?(e.hot_1.visible=!0,e.hot_1.setData({type:1,no:r[1].num})):e.hot_1.visible=!1,e.cold_0.setData({type:0,no:r[5].num}),e.cold_1.setData({type:0,no:r[4].num}))},i.prototype.parseLuZhuResult=function(){var e=this;e._resultList=[];for(var t=e.anylyst.historyResultList,r=0,o=t.length;o>r;r++)e._resultList.push(t[r]);if(e._resultList.length<e.maxShowNum)for(r=0,o=e.maxShowNum-e._resultList.length;o>r;r++)e._resultList.push(null)},i.prototype._refreshOpBtns=function(){var e=this;e.diceTableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.diceBetMgr.hasUnConfirmedBet())},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this;t.diceBetMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.diceBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):(t.btn_again.enabled=t.diceBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0))},i.prototype.checkIsBet=function(){var e=this.diceBetMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},i.prototype._gameStateChange=function(t){var r=this;r.showBetMoney(),r.switchResultPanel();var a=r.diceTableCtrl;switch(e.BASE.TimerStateSmallLottery.State,t){case CONST.gameState.betting:var i=parseInt((6*Math.random()+1).toString());a.playAudio("p_start_bet_"+i),r.checkandPlayResultSound(),r.diceTableCtrl.roundCount<=1&&r._refreshLuzhu(),r.diceBetMgr.stopBet(!1),r.btn_again.enabled=r.diceBetMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_again.enabled=!1,r.btn_again.visible=!1,r.btn_double.enabled=!0);var n=a.getBetStopTime();if(n){var s=n.getTime()-mo.DATE.now()-1e3*a.betSec;0>s&&(s=0),mo.TM.setTimeout((function(){r.compTimerState.stateBetting(),r.compTimerState.refreshTime(a.betSec,n)}),s)}else r.compTimerState.stateClearing();break;case CONST.gameState.shuffle:r.diceBetMgr.stopBet(!0),r._refreshLuzhu(),r.compTimerState.stateShuffle();break;case CONST.gameState.stopBet:r.diceBetMgr.stopBet(!0),r.openCloseBtns(),r.diceBetMgr.betFinalConfirm(),r.compTimerState.stateClearing();break;case CONST.gameState.payout:var l=e.UTIL.calPayout(r.diceTableCtrl.roundCtrl,r.diceTableCtrl.betCtrl).payoutDetail;!mo.OBJ.isEmpty(l)&&!r.justEnterGame?(r._settlePanel=o.show({tableCtrl:r.diceTableCtrl}),a.playAudio("coins_drop")):(e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3)),r.diceBetMgr.stopBet(!0),r.diceBetMgr.betAreaSettlement(),r.compTimerState.stateClearing(),r._refreshLuzhu()}},i.prototype.switchResultPanel=function(){var e=this;if(e.diceTableCtrl.gameState==CONST.gameState.payout){e.label_wait.visible=!1,e.grp_finish.visible=!0;var t=e.diceTableCtrl.roundCtrl.srcResults||[],r=0,o=!1;t[0]==t[1]&&t[0]==t[2]&&(o=!0);for(var a=0,i=t.length;i>a;a++)e["no_"+a].source="di_"+t[a],r+=t[a];e.label_sum.text=r+"",o?(e.label_type.text=mo.D.langCodeToTxt("roadmap_triple"),e.addKeepResult(e.keepResult_AllSame)):(r>=11?(e.label_type.text=mo.D.langCodeToTxt("roadmap_big"),e.addKeepResult(e.keepResult_Big)):10>=r&&(e.label_type.text=mo.D.langCodeToTxt("roadmap_small"),e.addKeepResult(e.keepResult_Small)),e.addKeepResult(r%2==0?e.keepResult_Even:e.keepResult_Odd))}else e.label_wait.visible=!0,e.grp_finish.visible=!1},i.prototype.betNumChanged=function(){this._refreshOpBtns(),this.showBetMoney()},i.prototype.showBetMoney=function(){var t=this;t.tableInfo.setData({tableCtrl:t.diceTableCtrl});var r=t.diceTableCtrl.betCtrl.betDetail4Dis,o=0;if(r)for(var a in r)o+=r[a];t.label_betNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(o)},i.prototype._tap_btn_confirm=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),t.diceBetMgr.startBet();var r=(t.diceBetMgr.unBetInvalidTypes(),t.diceBetMgr.packUnConfirmedBet());mo.OBJ.isEmpty(r)?(t.betNumChanged(),t.diceBetMgr.finishBet()):t.diceTableCtrl.bet(r,(function(){t.diceTableCtrl.playAudio("p_bet_success"),e.log("下注成功"),mo.MSG.show(e.id_c_msgCode.bacc_bet_success),t.diceBetMgr.confirmBet(),t.betNumChanged(),t.diceBetMgr.finishBet(),t.noBetRoundCount=0}),(function(){t.diceBetMgr.undo(),t.diceBetMgr.betFinalConfirm(),t.betNumChanged(),t.diceBetMgr.finishBet()}))},i.prototype._tap_btn_again=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),this.diceBetMgr.redoBet(),this.betNumChanged()},i.prototype._tap_btn_double=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),this.diceBetMgr.doubleBet(),this.betNumChanged(),e.RCD.log_mgr.sendEvent_ClientButton("game.double")},i.prototype._tap_btn_undo=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),this.diceBetMgr.undo(),this.betNumChanged()},i.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},i.prototype.setNoBetHint=function(){},i}(mo.EUI.Layer);t.DiceBottomBar=a,__reflect(a.prototype,"G.DICE.DiceBottomBar")}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var t=this;t.touchChildren=!1;var o=CONST.betType.sicBo;t.betTypeList=[o.small,o.odd,o.allTriple,o.even,o.big,o.anyTriple_1,o.anyTriple_2,o.anyTriple_3,o.anyTriple_4,o.anyTriple_5,o.anyTriple_6,o.pair_1,o.pair_2,o.pair_3,o.pair_4,o.pair_5,o.pair_6,o.point_4,o.point_5,o.point_6,o.point_7,o.point_8,o.point_9,o.point_10,o.point_11,o.point_12,o.point_13,o.point_14,o.point_15,o.point_16,o.point_17,o.together_1_2,o.together_1_3,o.together_1_4,o.together_1_5,o.together_1_6,o.together_2_3,o.together_2_4,o.together_2_5,o.together_2_6,o.together_3_4,o.together_3_5,o.together_3_6,o.together_4_5,o.together_4_6,o.together_5_6,o.singleNum_1,o.singleNum_2,o.singleNum_3,o.singleNum_4,o.singleNum_5,o.singleNum_6],t.offsetX=(e.GW.mgr.ifGameSingle(),0)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var e=this;e.data&&(e.diceBetMgr=e.data.diceBetMgr,e.initDiceTableOne())},o.prototype.initDiceTableOne=function(){var r,o,a,i=this,n=i.offsetX;i.betAreaMap={};for(var s=0,l=i.betTypeList.length;l>s;s++)r=i.betTypeList[s],(o=i["betArea_"+s]).betType=r,new t.DiceBetHelper(o,r).setBetMgr(i.diceBetMgr),a=new mo.NUM.Polygon(mo.p(i.x+o.x+n,i.y+o.y),mo.p(i.x+o.x+n,i.y+o.y+o.height),mo.p(i.x+o.x+o.width+n,i.y+o.y+o.height),mo.p(i.x+o.x+o.width+n,i.y+o.y)),i.diceBetMgr.registerBetRecorder(r,new e.COMM.BaseBetRecorder(r)),i.diceBetMgr.registerBetArea(r,a),i.betAreaMap[r]=o},o.prototype.clearAllHedgeInBetArea=function(){if(this.betAreaMap)for(var e in this.betAreaMap)this.betAreaMap[e].toggleDisable(!1)},o.prototype.disableMultiHedgeArea=function(e){if(this.betAreaMap)for(var t in this.betAreaMap)!isNaN(parseInt(t))&&e.indexOf(parseInt(t))>=0&&this.betAreaMap[t].toggleDisable(!0)},o}(mo.EUI.Comp);t.DiceTableOne=r,__reflect(r.prototype,"G.DICE.DiceTableOne")}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.BaseBetRecorder,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var t=this;t.touchChildren=!1,t.threeList=["1,2,6","1,3,5","2,3,4","2,5,6","3,4,6","1,2,3","1,3,6","1,4,5","2,3,5","3,5,6","1,2,4","1,4,6","2,3,6","2,4,5","4,5,6","1,2,5","1,3,4","1,5,6","2,4,6","3,4,5"],t.betTypeList=[];for(var r,a,i=1;6>=i;i++){(r=[]).push(i),r.push(i);for(var n=1;6>=n;n++)i!=n&&((a=[]).push(r[0]),a.push(r[1]),a.push(n),a.sort(),t.betTypeList.push(a.join(",")))}t.betTypeList=t.betTypeList.concat(t.threeList),t.offsetX=(e.GW.mgr.ifGameSingle(),0)},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var e=this;e.data&&(e.diceBetMgr=e.data.diceBetMgr,e.initDiceTableTwo())},a.prototype.initDiceTableTwo=function(){for(var e,o,a,i=this,n=i.offsetX,s=0,l=i.betTypeList.length;l>s;s++)e=30>s?CONST.betType.sicBo.same2+":"+i.betTypeList[s]:CONST.betType.sicBo.noSame+":"+i.betTypeList[s],o=i["betArea_"+s],new t.DiceBetHelper(o,e).setBetMgr(i.diceBetMgr),a=new mo.NUM.Polygon(mo.p(i.x+o.x+n,i.y+o.y),mo.p(i.x+o.x+n,i.y+o.y+o.height),mo.p(i.x+o.x+o.width+n,i.y+o.y+o.height),mo.p(i.x+o.x+o.width+n,i.y+o.y)),i.diceBetMgr.registerBetRecorder(e,new r(e)),i.diceBetMgr.registerBetArea(e,a)},a}(mo.EUI.Comp);t.DiceTableTwo=o,__reflect(o.prototype,"G.DICE.DiceTableTwo")}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t.data&&(t.img_bg.source=0==t.data.type?"blk_coldNum":"blk_hotNum",t.label_num.text=t.data.no+"")},t}(mo.EUI.Comp);e.DiceHot=t,__reflect(t.prototype,"G.DICE.DiceHot")}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.maxShowNum=20,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this._Item_resultList=t.DiceResultRendererPC35},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var t=this;if(t.data&&t.data.tableCtrl){var o=t.data.tableCtrl;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(t.label_big.size=24,t.label_small.size=24,t.label_double.size=24,t.label_single.size=24),"ko_kr"==mo.PROJ.lang||"ja_jp"==mo.PROJ.lang||"in_id"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang?(t.label_big_title.text="${{g_big}}",t.label_small_title.text="${{g_small}}",t.label_double_title.text="${{g_even}}",t.label_single_title.text="${{g_odd}}"):(t.label_big_title.text="${{g_big_simple}}",t.label_small_title.text="${{g_small_simple}}",t.label_double_title.text="${{g_even_simple}}",t.label_single_title.text="${{g_odd_simple}}"),t.label_roomName.text=o.name;var a={dealerName:o.roundCtrl.dealerName,dealerId:o.roundCtrl.dealerId,tableCode:o.code,dealerNameTranslate:o.dealerNameTranslate,is3rdParty:o.is3rdParty};t.dealer.setData(a);for(var i,n,s,l=o.rangeList4Dis,c=0,p=l.length;p>c;c++)s=l[c],0==c?(i=s[0],n=s[1]):(i>s[0]&&(i=s[0]),n<s[1]&&(n=s[1]));t.label_roomLimit.visible=!o.isMultiRange;var _=e.GW.mgr.isChangeDisplayDecimalMark?",":".",u=e.UTIL.NUM.getRoomLimitDisplay(n,_),h=e.UTIL.NUM.getRoomLimitDisplay(i,_);t.label_roomLimit.text=mo.STR.format("%s-%s",h,u);var m=o.countMap||{},d=CONST.betType.sicBo;t.label_big.text=m[d.big]||0,t.label_small.text=m[d.small]||0,t.label_single.text=m[d.odd]||0,t.label_double.text=m[d.even]||0,t._updateGameState(),t.parseLuZhuResult(o),t.refreshList("resultList"),t.scroller.validateNow(),t.scroller.viewport.scrollH=t.scroller.viewport.contentWidth-t.scroller.width,t.setMaintainMask()}},o.prototype.parseLuZhuResult=function(e){var t=this;t._resultList=[];for(var r=e.luZhuList,o=0,a=r.length;a>o;o++)r[o].results&&t._resultList.push(r[o]);if(t._resultList.length<t.maxShowNum)for(o=0,a=t.maxShowNum-t._resultList.length;a>o;o++)t._resultList.push(null);else t._resultList.push(null)},o.prototype._data_resultList=function(){return this._resultList},o.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_sicBo"),t.data.tableCtrl&&!t.data.tableCtrl.isMaintain&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},o}(e.RoomListItem);t.DiceRoomRendererPC35=r,__reflect(r.prototype,"G.DICE.DiceRoomRendererPC35"),e.GC.gc.registerClass(r.__className,r)}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);this._Item_list_room=t.DiceRoomRendererPC35},o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype._data_list_room=function(){for(var t,r=[],o=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.sicBo),a=0,i=o.length;i>a;a++){t=o[a];var n={};n.tableCtrl=t,r.push(n)}return r},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomListPC35);t.DiceRoomSelectorPC35=r,__reflect(r.prototype,"G.DICE.DiceRoomSelectorPC35"),e.GC.gc.registerClass(r.__className,r)}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this;e.diceBetMgr=new t.DiceBetMgr,e.diceBetMgr.isFirstPlay=!1,e.initBetArea_1(),e.initBetArea_2()},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var e=this;e.data.param&&(e.diceBetMgr.tableCtrl=e.tableCtrl,e.diceBottomBar.setData({tableCtrl:e.tableCtrl,diceBetMgr:e.diceBetMgr}))},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;t.chipBar.tableCtrl=t.tableCtrl,t.chipBar.btn_chipSetting.visible=!1,t.tableCtrl.gameState,e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!0,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!0,t.onEmitter(e.VideoMgr,"networkStatus",(function(t){null!=t&&(e.COMM.layerMgr.baseTopBar.img_wifi.source="ico_wifi_"+t)})),mo.PROJ.isSkipVideoLoading||(t.onEmitter(mo.emitter,"videoLoading",(function(){t.image_rect.visible=!0,t.image_rect.alpha=.9,t.img_video_loading.visible=!0,t.videoLoading.visible=!0,setInterval((function(){t.videoLoading.loading.play(0)}),800)})),t.onEmitter(mo.emitter,"videoLoadingHide",(function(){t.videoLoading.loading.stop(),t.image_rect.visible=!1,t.videoLoading.visible=!1,t.img_video_loading.visible=!1}))),t.diceBetMgr.recoverBetInfo(),t.onEmitter(t.diceBetMgr,"clearAllHedgeBetEvent",t.clearAllHedgeInBetArea),t.onEmitter(t.diceBetMgr,"checkHedgeAndDisableArea",t.disableMultiHedgeArea),t._gameStateChange(t.tableCtrl.gameState),e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t),t.chat.tableCtrl=t.tableCtrl,t.chat.rect_disible_mask.visible=e.GW.mgr.disableChatRoom;var o=new eui.TileLayout;o.orientation="columns",o.horizontalGap=3,o.columnWidth=50,o.paddingTop=10,o.paddingLeft=5,o.verticalGap=1,o.rowHeight=48,o.requestedColumnCount=3,o.requestedRowCount=2,t.chipBar.grp_chips.layout=o,t.chipBar.scr_chips.width=165,t.chipBar.scr_chips.x=25,t.chipBar.btn_pre.x=7,t.chipBar.btn_next.x=205,t.chipBar.x=620,t.diceBetMgr.checkConfirmedBetsAndLockHedge()},o.prototype.clearAllHedgeInBetArea=function(){this.table_1.clearAllHedgeInBetArea()},o.prototype.disableMultiHedgeArea=function(e){this.table_1.disableMultiHedgeArea(e)},o.prototype.resetGamePage=function(){var e=this;e.diceBetMgr.recoverBetInfo();var t=e.tableCtrl.gameState;e._gameStateChange(t)},o.prototype.initBetArea_1=function(){var e=this,t=0;e.table_1.setData({diceBetMgr:e.diceBetMgr}),e.table_1.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(r){0==t&&(t=1,e.diceBetMgr.isFirstPlay=!1,e.diceBetMgr.onBetAreaTap(e.table_1.x+r.localX,e.table_1.y+r.localY,e.chipBar.chipValue,!0),e.diceBetMgr.clearAllHedgeInBetArea(),e.diceBetMgr.checkAllBetsAndLockHedge(),setTimeout((function(){t=0}),200))}),e)},o.prototype.initBetArea_2=function(){var e=this,t=0;e.table_2.setData({diceBetMgr:e.diceBetMgr}),e.table_2.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(r){0==t&&(t=1,e.diceBetMgr.isFirstPlay=!1,e.onChipDrop(e.table_2.x+r.localX,e.table_2.y+r.localY,e.chipBar.chipValue),setTimeout((function(){t=0}),200))}),e)},o.prototype.onChipDrop=function(e,t){var r=this,o=r.getTablePoint(e,t);r.diceBetMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)},o.prototype.onChipMove=function(e,t){var r=this.getTablePoint(e,t);this.diceBetMgr.chipMoveCheck(r.x,r.y)},o.prototype.onChipChoose=function(){},o.prototype.getTablePoint=function(e,t){return new egret.Point(e,t)},o.prototype.onExit=function(){r.prototype.onExit.call(this),this.diceBetMgr.reset(),this.diceBetMgr.unAll(),this.diceBetMgr.doDtor(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!1,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!1,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!1,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!1,e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,this.showBonus,this),e.COMM.BONUS.leaveBonusDlg()},o.prototype._gameStateChange=function(e){var t=this;switch(e){case CONST.gameState.betting:var r=mo.DATE.now(),o=t.tableCtrl.notifyMs-(r-t.tableCtrl.roundCtrl.startTime.getTime());o>0?(t.stopBet(!0),setTimeout((function(){t.stopBet(!1)}),o)):t.stopBet(!1),t.diceBetMgr&&(t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkConfirmedBetsAndLockHedge());break;case CONST.gameState.shuffle:t.stopBet(!0);break;case CONST.gameState.stopBet:t.stopBet(!0),t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkConfirmedBetsAndLockHedge();break;case CONST.gameState.payout:t.stopBet(!0),t.diceBetMgr.betAreaSettlement(),t.diceBetMgr.clearAllHedgeInBetArea()}},o.prototype.stopBet=function(e){this.diceBetMgr.stopBet(e)},o.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},o}(e.BASE.BaseTableLayer);t.DiceTablePC35=r,__reflect(r.prototype,"G.DICE.DiceTablePC35"),e.GC.gc.registerClass(r.__className,r)}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.IBetMgrEvent,o=e.COMM.Payout,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.animationIndex=1,e.animationMaxIndex=8,e.maxShowNum=16,e.maxHistoryShowNum=7,e.maxSumShowNum=16,e.justEnterGame=!1,e.noBetRoundCount=0,e.lastGrp_btn_undo_confirmIndex=[-1,-1],e.doubleBet=!1,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);var e=this;e.initKeepResult(),e._Item_resultList=t.DiceHistoryResultRendererPC35,e._Item_historyList=t.DiceHistoryRendererPC35,e._Item_sumList=t.DiceSumRenderer,e.anylyst=new t.LuzhuAnalyst},i.prototype.initKeepResult=function(){var e=this;e.keepResult=[],e.keepResult_AllSame=0,e.keepResult_Small=1,e.keepResult_Even=2,e.keepResult_Odd=3,e.keepResult_Big=4;for(var t=0;t<=e.keepResult_Big;t++)e.keepResult.push(0)},i.prototype.addKeepResult=function(e){var t=this;t.justEnterGame||e>t.keepResult_Big||0>e||(t.keepResult[e]++,t.resetKeepResultOnlyOppose(e))},i.prototype.resetKeepResultOnlyOppose=function(e){var t=this;switch(e){case t.keepResult_Small:t.resetKeepResultByTarget(t.keepResult_Big);break;case t.keepResult_Big:t.resetKeepResultByTarget(t.keepResult_Small);break;case t.keepResult_Odd:t.resetKeepResultByTarget(t.keepResult_Even);break;case t.keepResult_Even:t.resetKeepResultByTarget(t.keepResult_Odd)}},i.prototype.resetKeepResultByTarget=function(e){e>this.keepResult_Big||0>e||(this.keepResult[e]=0)},i.prototype.getKeepResultBigThan=function(e){for(var t=0;t<=this.keepResult_Big;t++)if(this.keepResult[t]>=e)return t;return-1},i.prototype.checkandPlayResultSound=function(){var e=this,t=e.getKeepResultBigThan(2);if(-1!=t){if(t==e.keepResult_AllSame)return egret.Tween.get(e.grp_button).wait(4e3).call((function(){e.diceTableCtrl&&e.diceTableCtrl.playAudio("s_triples")})),void e.resetKeepResultByTarget(e.keepResult_AllSame);if((t=e.getKeepResultBigThan(5))==e.keepResult_Small||t==e.keepResult_Big||t==e.keepResult_Odd||t==e.keepResult_Even){var r="";switch(t){case e.keepResult_Small:r="s_asktheway_2";break;case e.keepResult_Big:r="s_asktheway_1";break;case e.keepResult_Odd:r="s_asktheway_3";break;case e.keepResult_Even:r="s_asktheway_4"}if(""!=r)egret.Tween.get(e.grp_button).wait(4e3).call((function(){e.diceTableCtrl&&e.diceTableCtrl.playAudio(r)}));e.resetKeepResultByTarget(t)}}},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);this.initDaluPainter(),this.compTimerState.audioEnabled=!0},i.prototype.initDaluPainter=function(){var e=this,r={gridSize:17,maxCol:300,maxRow:6,offsetX:0,offsetY:0,colorList:[16732160,35980,3977776]};r.strList=[mo.D.langCodeToTxt("g_even_simple"),mo.D.langCodeToTxt("g_odd_simple"),mo.D.langCodeToTxt("g_triple_simple")],e._oddEvenPainter=new t.DaluPainter(e.scroller_oddEven,r);var o={gridSize:17,maxCol:300,maxRow:6,offsetX:0,offsetY:0,colorList:[11141200,144806,3977776]};o.strList=[mo.D.langCodeToTxt("g_big_simple"),mo.D.langCodeToTxt("g_small_simple"),mo.D.langCodeToTxt("g_triple_simple")],e._bigSmallPainter=new t.DaluPainter(e.scroller_bigSmall,o)},i.prototype._data_resultList=function(){var e=this,t=mo.OBJ.clone(e.anylyst.historyResultList);if(t.length<e.maxShowNum)for(var r=0,o=e.maxShowNum-t.length;o>r;r++)t.push(null);else t.push(null);return t},i.prototype._data_historyList=function(){var e=this,t=mo.OBJ.clone(e.anylyst.historyResultListExt);if(t.length<e.maxHistoryShowNum)for(var r=0,o=e.maxHistoryShowNum-t.length;o>r;r++)t.push(null);return t},i.prototype._data_sumList=function(){var e=this,t=mo.OBJ.clone(e.anylyst.sumListExt);if(t.length<e.maxSumShowNum)for(var r=0,o=e.maxSumShowNum-t.length;o>r;r++)t.push(null);return t},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);var t=this,r=t.diceTableCtrl;t.compTimerState.tableCtrl=r,t.BetSettingLayer=new e.COMM.BetSetting,t.BetSettingLayer.tableCtrl=t.diceTableCtrl,t.grp_bet_setting.addChild(t.BetSettingLayer),t.onEmitter(mo.emitter,"onRoomShortcutExpand",t.onRoomShortcutExpand),mo.emitter.on("showDynamicConfirm",t.showDynamicConfirmGroup,t),mo.emitter.on("hideDynamicConfirm",t.hideDynamicConfirmGroup,t),t.showAnimation()},i.prototype.onExit=function(){a.prototype.onExit.call(this),mo.emitter.unAll("showDynamicConfirm"),mo.emitter.unAll("hideDynamicConfirm")},i.prototype.showDynamicConfirmGroup=function(t,r){var o=this;if(o.grp_btn_undo_confirm){var a,i;a=.7*o.grp_btn_undo_confirm.width,i=.7*o.grp_btn_undo_confirm.height,o.grp_btn_undo_confirm.visible=!0;var n=0,s=0,l=t.x,c=t.y+r.height;s=c>=630?l>=755&&1015>=l?664-2.35*i-5:l>1015?664-2.75*i-5:664-2.1*i-5:c+5,165>=l?(n=l+2+16+5,s=c-2-11-i/2,474==c?s=c+5:565==c||601==c?n+=24:637==c&&(s-=.75*i)):l>=1220?(n=l-5-a,s=c-2-11-i/2):n=l+2+8-a/2,o.doubleBet?(o.grp_btn_undo_confirm.x=o.lastGrp_btn_undo_confirmIndex[0],o.grp_btn_undo_confirm.y=o.lastGrp_btn_undo_confirmIndex[1]):(o.grp_btn_undo_confirm.x=n,o.grp_btn_undo_confirm.y=s);var p=o.diceBetMgr.betRecoders;for(var _ in p){var u=e.UTIL.getRange(o.diceTableCtrl.type,o.diceTableCtrl.rangeList,_)[0];p[_].unconfirmedBet>0&&r.type==_&&u<=p[_].totalBet&&(o.lastGrp_btn_undo_confirmIndex[0]=o.grp_btn_undo_confirm.x,o.lastGrp_btn_undo_confirmIndex[1]=o.grp_btn_undo_confirm.y)}}},i.prototype.hideDynamicConfirmGroup=function(){var e=this;e.grp_btn_undo_confirm&&(e.diceTableCtrl.gameState==CONST.gameState.betting?(e.grp_btn_undo_confirm.visible=e.diceBetMgr.hasUnConfirmedBet(),e.grp_btn_undo_confirm.x=e.lastGrp_btn_undo_confirmIndex[0],e.grp_btn_undo_confirm.y=e.lastGrp_btn_undo_confirmIndex[1]):e.grp_btn_undo_confirm.visible=!1)},i.prototype.onRoomShortcutExpand=function(e){var t=this,r=e?170:80;egret.Tween.get(t.grp_result_show).to({left:r},300).call((function(){egret.Tween.removeTweens(t.grp_result_show)})),r=e?233:143,egret.Tween.get(t.compTimerState).to({left:r},300).call((function(){egret.Tween.removeTweens(t.compTimerState)}))},i.prototype.dataChanged=function(){var t=this;a.prototype.dataChanged.call(this),t.justEnterGame=!0;var o=t.diceTableCtrl=t.data.tableCtrl;t.diceBetMgr=t.data.diceBetMgr,t.diceBetMgr.on(r.ON_BET_AMOUNT_CHG,t.betNumChanged,t),t.onEmitter(o,CONST.BBT_table.shuffle,t._onShuffle),t.onEmitter(o,CONST.BBT_table.openRound,t._openRound),t.onEmitter(o,CONST.BBT_table.payout,t._payout),t.onEmitter(o,CONST.BBT_table.betStop,t._betStop),t.onEmitter(o,CONST.BBT_table.bet,t._bet),t.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,t._onRefreshInfo),t.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,t.resetGamePage),t.onEmitter(o,"betStopAfterAFK",t._betStopAfterAFK),t.onEmitter(mo.emitter,"deactivate",t._handleDeactivate),t._refreshRoomInfo(),t._refreshLuzhu(),t._refreshOpBtns(),setTimeout((function(){t.setViewport()}),10);var i=t.diceTableCtrl.gameState;t._gameStateChange(i)},i.prototype.resetGamePage=function(){var e=this;e._refreshRoomInfo(),e._refreshOpBtns(),e._refreshLuzhu(),e.diceBetMgr.recoverBetInfo(),e.hideDynamicConfirmGroup();var t=e.diceTableCtrl.gameState;e._gameStateChange(t)},i.prototype._handleDeactivate=function(){},i.prototype._betStopAfterAFK=function(){this.diceBetMgr.betFinalConfirm()},i.prototype._onRefreshInfo=function(){var e=this;e.diceBetMgr.recoverBetInfo(),e._refreshRoomInfo(),e._refreshLuzhu(),e._refreshOpBtns();var t=e.diceTableCtrl.gameState;e._gameStateChange(t)},i.prototype._onShuffle=function(){var e=this;e.justEnterGame=!1,e.diceBetMgr.clear(),e._refreshRoomInfo(),e._gameStateChange(CONST.gameState.shuffle)},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e._settlePanel&&(e._settlePanel.close(),e._settlePanel=null),e.diceBetMgr.clear(),e._refreshRoomInfo();var t=parseInt((6*Math.random()+1).toString());e.diceTableCtrl.playAudio("p_start_bet_"+t),e.noBetRoundCount++,e.setNoBetHint(e.noBetRoundCount),e._gameStateChange(CONST.gameState.betting)},i.prototype._payout=function(){var t=this;t.diceBetMgr.clear(),t.justEnterGame=!1,e.log("显示派彩界面");var r=e.UTIL.calPayout(t.diceTableCtrl.roundCtrl,t.diceTableCtrl.betCtrl).payoutDetail;!mo.OBJ.isEmpty(r)?(t._settlePanel=o.show({tableCtrl:t.diceTableCtrl}),t.diceTableCtrl.playAudio("coins_drop")):(e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3)),t._gameStateChange(CONST.gameState.payout)},i.prototype._betStop=function(){var t=this;t.justEnterGame=!1,mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),e.log("停止下注"),t._gameStateChange(CONST.gameState.stopBet),t.lastGrp_btn_undo_confirmIndex[0]=-1,t.lastGrp_btn_undo_confirmIndex[1]=-1},i.prototype._bet=function(){},i.prototype._refreshRoomInfo=function(){this.tableInfo.setData({tableCtrl:this.diceTableCtrl})},i.prototype._refreshLuzhu=function(){var e=this;e.anylyst.setGameId(e.diceTableCtrl.code),e.anylyst.clearData();var t=e.diceTableCtrl.luZhuList;(e.anylyst.parseLuZhuList(t),e.parseLuZhuResult(),e.refreshList("resultList"),e.resultScroller.validateNow(),e.resultScroller.width<e.resultScroller.viewport.contentWidth)&&(e.resultScroller.viewport.scrollH=e.resultScroller.viewport.contentWidth-e.resultScroller.width,0==mo.OBJ.clone(e.anylyst.historyResultList).length&&(e.resultScroller.viewport.scrollH=0));e.refreshList("sumList"),e.sicboSumScroller.validateNow(),e.sumList.width<e.sicboSumScroller.viewport.contentWidth&&(e.sicboSumScroller.viewport.scrollH=e.sicboSumScroller.viewport.contentWidth-e.sicboSumScroller.width),e.refreshList("historyList"),e.sicboDiceScroller.validateNow(),e.historyList.width<e.sicboDiceScroller.viewport.contentWidth&&(e.sicboDiceScroller.viewport.scrollH=e.sicboDiceScroller.viewport.contentWidth-e.sicboDiceScroller.width),e._oddEvenPainter.setDaLuData(e.anylyst.oddEvenListExt),e._bigSmallPainter.setDaLuData(e.anylyst.bigSmallListExt);var r=e.anylyst.numberRatioList;0==r[0].count?(e.hot_0.visible=!1,e.hot_1.visible=!1,e.cold_0.visible=!1,e.cold_1.visible=!1):(e.hot_0.visible=!0,e.hot_1.visible=!0,e.cold_0.visible=!0,e.cold_1.visible=!0,e.hot_0.setData({type:1,no:r[0].num}),r[0].count>0?(e.hot_1.visible=!0,e.hot_1.setData({type:1,no:r[1].num})):e.hot_1.visible=!1,e.cold_0.setData({type:0,no:r[5].num}),e.cold_1.setData({type:0,no:r[4].num}))},i.prototype.setViewport=function(){var e=this,t=mo.OBJ.clone(e.anylyst.historyResultList);e.resultScroller.width<e.resultScroller.viewport.contentWidth&&(e.resultScroller.viewport.scrollH=e.resultScroller.viewport.contentWidth-e.resultScroller.width,0==t.length&&(e.resultScroller.viewport.scrollH=0)),e.sumList.width<e.sicboSumScroller.viewport.contentWidth&&(e.sicboSumScroller.viewport.scrollH=e.sicboSumScroller.viewport.contentWidth-e.sicboSumScroller.width),e.historyList.width<e.sicboDiceScroller.viewport.contentWidth&&(e.sicboDiceScroller.viewport.scrollH=e.sicboDiceScroller.viewport.contentWidth-e.sicboDiceScroller.width),0==t.length&&(e.sumList.scrollH=0,e.historyList.scrollH=0)},i.prototype.parseLuZhuResult=function(){var e=this;e._resultList=[];for(var t=e.anylyst.historyResultList,r=0,o=t.length;o>r;r++)e._resultList.push(t[r]);if(e._resultList.length<e.maxShowNum)for(r=0,o=e.maxShowNum-e._resultList.length;o>r;r++)e._resultList.push(null)},i.prototype._refreshOpBtns=function(){var e=this;e.diceTableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.diceBetMgr.hasUnConfirmedBet())},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this;t.diceBetMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.diceBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):(t.btn_again.enabled=t.diceBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0))},i.prototype.checkIsBet=function(){var e=this.diceBetMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},i.prototype._gameStateChange=function(t){var r=this;r.showBetMoney(),r.switchResultPanel();var o=r.diceTableCtrl;switch(e.BASE.TimerStateSmallLottery.State,t){case CONST.gameState.betting:r.checkandPlayResultSound(),r.diceTableCtrl.roundCount<=1&&r._refreshLuzhu(),r.btn_again.enabled=r.diceBetMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_again.enabled=!1,r.btn_again.visible=!1,r.btn_double.enabled=!0);var a=o.getBetStopTime();if(a){var i=a.getTime()-mo.DATE.now()-1e3*o.betSec;0>i&&(i=0),setTimeout((function(){r.compTimerState.stateBetting(),r.compTimerState.refreshTime(o.betSec,a)}),i)}else r.compTimerState.stateClearing();break;case CONST.gameState.shuffle:r._refreshLuzhu(),r.compTimerState.stateShuffle();break;case CONST.gameState.stopBet:r.openCloseBtns(),r.diceBetMgr.betFinalConfirm(),r.compTimerState.stateClearing();break;case CONST.gameState.payout:r.diceBetMgr.betAreaSettlement(),r.compTimerState.stateClearing(),r._refreshLuzhu()}},i.prototype.switchResultPanel=function(){var e=this;if(e.diceTableCtrl.gameState==CONST.gameState.payout){e.label_wait.visible=!1,e.grp_finish.visible=!0;var t=e.diceTableCtrl.roundCtrl.srcResults||[],r=0,o=!1;t[0]==t[1]&&t[0]==t[2]&&(o=!0);for(var a=0,i=t.length;i>a;a++)e["no_"+a].source="di_"+t[a],r+=t[a];e.label_sum.text=r+"",o?(e.label_type.text=mo.D.langCodeToTxt("roadmap_triple"),e.addKeepResult(e.keepResult_AllSame)):(r>=11?(e.label_type.text=mo.D.langCodeToTxt("roadmap_big"),e.addKeepResult(e.keepResult_Big)):10>=r&&(e.label_type.text=mo.D.langCodeToTxt("roadmap_small"),e.addKeepResult(e.keepResult_Small)),e.addKeepResult(r%2==0?e.keepResult_Even:e.keepResult_Odd))}else e.label_wait.visible=!0,e.grp_finish.visible=!1},i.prototype.betNumChanged=function(){this._refreshOpBtns(),this.showBetMoney()},i.prototype.showBetMoney=function(){var t=this;t.tableInfo.setData({tableCtrl:t.diceTableCtrl});var r=t.diceTableCtrl.betCtrl.betDetail4Dis,o=0;if(r)for(var a in r)o+=r[a];t.label_betNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(o)},i.prototype._tap_btn_confirm=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),t.diceBetMgr.startBet();var r=(t.diceBetMgr.unBetInvalidTypes(),t.diceBetMgr.packUnConfirmedBet());mo.OBJ.isEmpty(r)?(t.betNumChanged(),t.diceBetMgr.finishBet(),t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkConfirmedBetsAndLockHedge()):t.diceTableCtrl.bet(r,(function(){t.diceTableCtrl.playAudio("p_bet_success"),e.log("下注成功"),mo.MSG.show(e.id_c_msgCode.bacc_bet_success),t.diceBetMgr.confirmBet(),t.betNumChanged(),t.diceBetMgr.finishBet(),t.noBetRoundCount=0,t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkConfirmedBetsAndLockHedge()}),(function(){t.diceBetMgr.undo(),t.diceBetMgr.betFinalConfirm(),t.betNumChanged(),t.diceBetMgr.finishBet(),t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkConfirmedBetsAndLockHedge()}))},i.prototype._tap_btn_again=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),t.diceBetMgr.redoBet(),t.betNumChanged(),t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkAllBetsAndLockHedge()},i.prototype._tap_btn_double=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),t.doubleBet=!0,t.diceBetMgr.doubleBet(),t.betNumChanged(),t.doubleBet=!1,e.RCD.log_mgr.sendEvent_ClientButton("game.double")},i.prototype._tap_btn_undo=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),t.diceBetMgr.undo(),t.betNumChanged(),t.diceBetMgr.clearAllHedgeInBetArea(),t.diceBetMgr.checkConfirmedBetsAndLockHedge()},i.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},i.prototype.showAnimation=function(){var e=this;if(e.confirm_animation){e.animationTimerId&&(clearInterval(e.animationTimerId),e.animationTimerId=null),e.confirm_animation.visible=!0;e.animationTimerId=setInterval((function(){e.animationIndex++,e.animationIndex>e.animationMaxIndex&&(e.animationIndex=1);e.confirm_animation.source="dg_confirm_btn_eff_"+e.animationIndex}),100)}},i.prototype.setNoBetHint=function(){},i}(mo.EUI.Layer);t.DiceBottomBarPC35=a,__reflect(a.prototype,"G.DICE.DiceBottomBarPC35")}(e.DICE||(e.DICE={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;if(r.data){r.grp_label.removeChildren();for(var o,a,i,n=r.data.anylyst.calcHot(),s=0,l=0,c=0,p=n.length;p>c;c++)0!=(o=n[c]).winResult&&((i=new mo.EUI.Label).width=16,i.height=48,i.size=11,i.maxSize=11,("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(i.height=36,i.size=20,i.maxSize=16),i.textAlign="center",i.verticalAlign="middle",i.text=o.winResult,r.grp_label.addChild(i),-1==(a=e.UTIL.getRouletteColor(o.winResult))?(i.x=20*s,i.y=0,s++):1==a&&(i.x=20*l,i.y=51,l++))}},r}(mo.EUI.Comp);t.RltStatHot=r,__reflect(r.prototype,"G.RLT.RltStatHot")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.BaseBetRecorder,o=function(e){function o(){var t=e.apply(this,arguments)||this;return t.offsetXSingle=0,t.offsetYSingle=0,t}return __extends(o,e),o.prototype._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;t.touchChildren=!1,t._betAreaList=[];for(var r=0;37>r;r++)t._betAreaList.push(this["betArea"+r])},o.prototype._initHedgeBetAreaMap=function(){var e;this.hedgeBetAreaMap=((e={})[CONST.betType.roulette.red]=this.betAreaRed,e[CONST.betType.roulette.black]=this.betAreaBlack,e[CONST.betType.roulette.odd]=this.betAreaOdd,e[CONST.betType.roulette.even]=this.betAreaEven,e[CONST.betType.roulette.big]=this.betAreaBig,e[CONST.betType.roulette.small]=this.betAreaSmall,e)},o.prototype.clearAllHedgeInBetArea=function(){if(this.hedgeBetAreaMap)for(var e in this.hedgeBetAreaMap)this.hedgeBetAreaMap[e].toggleDisable(!1)},o.prototype.disableMultiHedgeArea=function(e){if(this.hedgeBetAreaMap)for(var t in this.hedgeBetAreaMap)!isNaN(parseInt(t))&&e.indexOf(parseInt(t))>=0&&this.hedgeBetAreaMap[t].toggleDisable(!0)},o.prototype._initBetArea1st=function(){var e,o,a,i,n,s,l=this,c=l.data.betMgr,p=CONST.betType.roulette,_=l.offsetXSingle;for(o=0;37>o;o++)i=p.direct+":"+o,s=l["betArea"+o],0==o&&s.setBetNumCompHorizontalCenter(20),(e=new t.RltBetAreaHelper(s,i)).setBetMgr(c),n=new mo.NUM.Polygon(mo.p(l.x+s.x+_,l.y+s.y),mo.p(l.x+s.x+_,l.y+s.y+s.height),mo.p(l.x+s.x+s.width+_,l.y+s.y+s.height),mo.p(l.x+s.x+s.width+_,l.y+s.y)),c.registerBetRecorder(i,new r(i)),c.registerBetArea(i,n);var u,h,m,d,b,g,y,f;for(u=mo.p(l.betArea3.x+_,l.betArea3.y),n=l.getPolygonByCenterPoint(u),h=l.getBetArea(u.x-7-_,u.y-7,14,14),(e=new t.RltBetAreaCrossHelper(h,p.four,[l.betArea0,l.betArea1,l.betArea2,l.betArea3])).setBetNumCompHorizontalCenter(10),e.setBetMgr(c),c.registerBetRecorder(p.four,new r(p.four)),c.registerBetArea(p.four,n),d=mo.STR.format("%s:%s,%s,%s",p.three,0,1,2),u=mo.p(l.betArea1.x+_,l.betArea1.y),n=l.getPolygonByCenterPoint(u),h=l.getBetArea(u.x-7-_,u.y-7,14,14),(e=new t.RltBetAreaCrossHelper(h,d,[l.betArea0,l.betArea1,l.betArea2])).setBetNumCompHorizontalCenter(10),e.setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n),d=mo.STR.format("%s:%s,%s,%s",p.three,0,2,3),u=mo.p(l.betArea2.x+_,l.betArea2.y),n=l.getPolygonByCenterPoint(u),h=l.getBetArea(u.x-7-_,u.y-7,14,14),(e=new t.RltBetAreaCrossHelper(h,d,[l.betArea0,l.betArea2,l.betArea3])).setBetNumCompHorizontalCenter(10),e.setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n),o=0;3>o;o++)for(a=0;11>a;a++)b=o+1+3*a,g=o+1+3*(a+1),d=mo.STR.format("%s:%s,%s",p.split,b,g),t.log("---\x3ecombineKey",d),m=l["betArea"+g],u=mo.p(m.x,m.y),n=new mo.NUM.Polygon(mo.p(l.x+u.x-7+_,l.y+u.y+7),mo.p(l.x+u.x-7+_,l.y+u.y+m.height-7),mo.p(l.x+u.x+7+_,l.y+u.y+m.height-7),mo.p(l.x+u.x+7+_,l.y+u.y+7)),h=l.getBetArea(u.x-7,u.y+7,14,m.height-14),(e=new t.RltBetAreaCrossHelper(h,d,[l["betArea"+b],l["betArea"+g]])).setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n);for(o=0;2>o;o++)for(a=0;12>a;a++)y=o+1+3*a,f=o+2+3*a,d=mo.STR.format("%s:%s,%s",p.split,y,f),t.log("---\x3ecombineKey",d),m=l["betArea"+y],u=mo.p(m.x,m.y),n=new mo.NUM.Polygon(mo.p(l.x+u.x+7+_,l.y+u.y-7),mo.p(l.x+u.x+7+_,l.y+u.y+7),mo.p(l.x+u.x+m.width-7+_,l.y+u.y+7),mo.p(l.x+u.x+m.width-7+_,l.y+u.y-7)),h=l.getBetArea(u.x+7,u.y-7,m.width-14,14),(e=new t.RltBetAreaCrossHelper(h,d,[l["betArea"+y],l["betArea"+f]])).setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n);var C,T,v,B,S,O=0;for(o=0;3>o;o++)C=o+1,d=mo.STR.format("%s:%s,%s",p.split,O,C),t.log("---\x3ecombineKey",d),m=l["betArea"+C],u=mo.p(m.x,m.y),n=new mo.NUM.Polygon(mo.p(l.x+u.x-7+_,l.y+u.y+7),mo.p(l.x+u.x-7+_,l.y+u.y+m.height-7),mo.p(l.x+u.x+7+_,l.y+u.y+m.height-7),mo.p(l.x+u.x+7+_,l.y+u.y+7)),h=l.getBetArea(u.x-7,u.y+7,14,m.height-14),(e=new t.RltBetAreaCrossHelper(h,d,[l["betArea"+O],l["betArea"+C]])).setBetNumCompHorizontalCenter(10),e.setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n);for(o=0;2>o;o++)for(a=0;11>a;a++)d=mo.STR.format("%s:%s,%s",p.corner,a,o),O=o+1+3*a,C=o+2+3*a,T=o+4+3*a,v=o+5+3*a,t.log("---\x3ecombineKey",d),t.log(O,C,T,v),m=l["betArea"+T],u=mo.p(m.x+_,m.y),n=l.getPolygonByCenterPoint(u),h=l.getBetArea(u.x-7-_,u.y-7,14,14),(e=new t.RltBetAreaCrossHelper(h,d,[l["betArea"+O],l["betArea"+C],l["betArea"+T],l["betArea"+v]])).setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n);for(o=0;11>o;o++)d=mo.STR.format("%s:%s",p.line,o),t.log("---\x3ecombineKey",d),O=3*o+1,C=3*o+2,T=3*o+3,v=3*o+4,B=3*o+5,S=3*o+6,t.log(O,C,T,v,B,S),m=l["betArea"+S],u=mo.p(m.x+_,m.y),n=l.getPolygonByCenterPoint(u),h=l.getBetArea(u.x-7-_,u.y-7,14,14),(e=new t.RltBetAreaCrossHelper(h,d,[l["betArea"+O],l["betArea"+C],l["betArea"+T],l["betArea"+v],l["betArea"+B],l["betArea"+S]])).setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n);for(o=0;12>o;o++)d=mo.STR.format("%s:%s",p.street,o),t.log("---\x3ecombineKey",d),O=3*o+1,C=3*o+2,T=3*o+3,t.log(O,C,T),m=l["betArea"+T],u=mo.p(m.x,m.y),n=new mo.NUM.Polygon(mo.p(l.x+u.x+7+_,l.y+u.y-7),mo.p(l.x+u.x+7+_,l.y+u.y+7),mo.p(l.x+u.x+m.width-7+_,l.y+u.y+7),mo.p(l.x+u.x+m.width-7+_,l.y+u.y-7)),h=l.getBetArea(u.x+7,u.y-7,m.width-14,14),(e=new t.RltBetAreaCrossHelper(h,d,[l["betArea"+O],l["betArea"+C],l["betArea"+T]])).setBetMgr(c),c.registerBetRecorder(d,new r(d)),c.registerBetArea(d,n)},o.prototype._initBetArea2nd=function(){var e,o,a,i,n,s,l,c,p=this,_=p.data.betMgr,u=CONST.betType.roulette,h=p.offsetXSingle;for(s=0;3>s;s++){for(c=[],o=mo.STR.format("%s:%s",u.column,s),t.log("---\x3ecombineKey",o),l=0;12>l;l++)c.push(p["betArea"+(s+1+3*l)]);i=p["betAreaCol"+s],a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),(e=new t.RltBetAreaBatchHelper(p["betAreaCol"+s],o,c)).setBetMgr(_),_.registerBetRecorder(o,new r(o)),_.registerBetArea(o,n)}for(s=0;3>s;s++){for(c=[],o=mo.STR.format("%s:%s",u.dozen,s),t.log("---\x3ecombineKey",o),l=0;12>l;l++)c.push(p["betArea"+(12*s+(l+1))]);i=p["betAreaDa"+s],a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),t.log(n.toString()),(e=new t.RltBetAreaBatchHelper(p["betAreaDa"+s],o,c)).setBetMgr(_),_.registerBetRecorder(o,new r(o)),_.registerBetArea(o,n)}var m,d=u.red,b=[1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];for(c=[],s=0;s<b.length;s++)m=b[s],c.push(p["betArea"+m]);for(i=p.betAreaRed,a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),(e=new t.RltBetAreaBatchHelper(p.betAreaRed,d,c)).setBetMgr(_),_.registerBetRecorder(d,new r(d)),_.registerBetArea(d,n),d=u.black,b=[2,4,6,8,10,11,13,15,17,20,22,24,26,28,29,31,33,35],c=[],s=0;s<b.length;s++)m=b[s],c.push(p["betArea"+m]);i=p.betAreaBlack,a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),(e=new t.RltBetAreaBatchHelper(p.betAreaBlack,d,c)).setBetMgr(_),_.registerBetRecorder(d,new r(d)),_.registerBetArea(d,n);var g=[],y=[];for(s=1;36>=s;s++)m=s,s%2==0?y.push(p["betArea"+m]):g.push(p["betArea"+m]);i=p.betAreaEven,a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),e=new t.RltBetAreaBatchHelper(p.betAreaEven,u.even,y),_.registerBetRecorder(u.even,new r(u.even)),e.setBetMgr(_),_.registerBetArea(u.even,n),i=p.betAreaOdd,a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),e=new t.RltBetAreaBatchHelper(p.betAreaOdd,u.odd,g),_.registerBetRecorder(u.odd,new r(u.odd)),e.setBetMgr(_),_.registerBetArea(u.odd,n);var f=[],C=[];for(s=1;36>=s;s++)m=s,18>=s?C.push(p["betArea"+m]):f.push(p["betArea"+m]);i=p.betAreaBig,a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),(e=new t.RltBetAreaBatchHelper(p.betAreaBig,u.big,f)).setBetMgr(_),_.registerBetRecorder(u.big,new r(u.big)),_.registerBetArea(u.big,n),i=p.betAreaSmall,a=mo.p(p.x+i.x,p.y+i.y),n=new mo.NUM.Polygon(mo.p(a.x+h,a.y),mo.p(a.x+h,a.y+i.height),mo.p(a.x+i.width+h,a.y+i.height),mo.p(a.x+i.width+h,a.y)),(e=new t.RltBetAreaBatchHelper(p.betAreaSmall,u.small,C)).setBetMgr(_),_.registerBetRecorder(u.small,new r(u.small)),_.registerBetArea(u.small,n)},o.prototype.getPolygonByCenterPoint=function(e,t,r){void 0===t&&(t=7),void 0===r&&(r=7);var o=mo.p(this.x+e.x,this.y+e.y);return new mo.NUM.Polygon(mo.p(o.x-t,o.y-r),mo.p(o.x-t,o.y+r),mo.p(o.x+t,o.y+r),mo.p(o.x+t,o.y-r))},o.prototype.getBetArea=function(e,t,r,o){var a=new eui.Group;return a.x=e,a.y=t,a.width=r,a.height=o,this.grp_container.addChild(a),a.touchEnabled=!1,a.touchChildren=!1,a},Object.defineProperty(o.prototype,"betAreaList",{get:function(){return this._betAreaList},enumerable:!0,configurable:!0}),o.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t._initHedgeBetAreaMap(),t.data.betMgr&&(t._initBetArea1st(),t.data.has2nd&&t._initBetArea2nd())},o}(mo.EUI.Comp);t.RltBetChart=o,__reflect(o.prototype,"G.RLT.RltBetChart")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.BaseBetRecorder,o=function(e){function o(){var t=e.apply(this,arguments)||this;return t.offsetX=0,t.offsetY=0,t}return __extends(o,e),o.prototype._childrenCreated=function(){e.prototype._childrenCreated.call(this);this.touchChildren=!1},o.prototype._initBetArea1st=function(){var e,r,o,a,i,n=this,s=n.data.betMgr,l=(CONST.betType.roulette,[16,33,1,20,14,31,9,22,18,29,7,28,11,36,13,27,6,34,17,25,2,21,4,19]),c={},p="",_=n.offsetX;for(a=0;a<l.length;a++)i=l[a],p=mo.STR.format("%s:%s",t.AdvBetType.side,i),t.log("---\x3ecombineKey",p),r=n["betArea2nd"+i],o=new mo.NUM.Polygon(mo.p(n.x+r.x+_,n.y+r.y),mo.p(n.x+r.x+_,n.y+r.y+r.height),mo.p(n.x+r.x+r.width+_,n.y+r.y+r.height),mo.p(n.x+r.x+r.width+_,n.y+r.y)),(e=new t.RltBetAreaSideHelper(r,p)).setBetMgr(s),c[i]=e,s.registerBetArea(p,o);var u=[24,5,10,23,8,30],h={24:new mo.NUM.Polygon(mo.p(n.x+42+_,n.y+3),mo.p(n.x+47+_,n.y+37),mo.p(n.x+62+_,n.y+37),mo.p(n.x+62+_,n.y+3)),5:new mo.NUM.Polygon(mo.p(n.x+38+_,n.y+3),mo.p(n.x+25+_,n.y+9),mo.p(n.x+18+_,n.y+13),mo.p(n.x+37+_,n.y+37),mo.p(n.x+42+_,n.y+37)),10:new mo.NUM.Polygon(mo.p(n.x+13+_,n.y+18),mo.p(n.x+7+_,n.y+30),mo.p(n.x+3+_,n.y+45),mo.p(n.x+33+_,n.y+45),mo.p(n.x+35+_,n.y+41)),23:new mo.NUM.Polygon(mo.p(n.x+3+_,n.y+50),mo.p(n.x+7+_,n.y+65),mo.p(n.x+13+_,n.y+78),mo.p(n.x+35+_,n.y+55),mo.p(n.x+33+_,n.y+50)),8:new mo.NUM.Polygon(mo.p(n.x+18+_,n.y+82),mo.p(n.x+26+_,n.y+89),mo.p(n.x+37+_,n.y+92),mo.p(n.x+41+_,n.y+63),mo.p(n.x+37+_,n.y+60)),30:new mo.NUM.Polygon(mo.p(n.x+42+_,n.y+92),mo.p(n.x+62+_,n.y+92),mo.p(n.x+62+_,n.y+63),mo.p(n.x+45+_,n.y+63))};for(a=0;a<u.length;a++)i=u[a],p=mo.STR.format("%s:%s",t.AdvBetType.side,i),t.log("---\x3ecombineKey",p),r=n["betArea2nd"+i],(e=new t.RltBetAreaSideHelper(r,p)).setBetMgr(s),c[i]=e,s.registerBetArea(p,h[i]);var m=[12,35,3,26,0,32,15],d={12:new mo.NUM.Polygon(mo.p(n.x+369+_,n.y+3),mo.p(n.x+369+_,n.y+33),mo.p(n.x+390+_,n.y+33),mo.p(n.x+392+_,n.y+3)),35:new mo.NUM.Polygon(mo.p(n.x+397+_,n.y+3),mo.p(n.x+394+_,n.y+33),mo.p(n.x+410+_,n.y+33),mo.p(n.x+422+_,n.y+9),mo.p(n.x+414+_,n.y+3)),3:new mo.NUM.Polygon(mo.p(n.x+427+_,n.y+12),mo.p(n.x+415+_,n.y+36),mo.p(n.x+415+_,n.y+39),mo.p(n.x+440+_,n.y+30),mo.p(n.x+435+_,n.y+20)),26:new mo.NUM.Polygon(mo.p(n.x+416+_,n.y+45),mo.p(n.x+416+_,n.y+49),mo.p(n.x+444+_,n.y+60),mo.p(n.x+444+_,n.y+36)),0:new mo.NUM.Polygon(mo.p(n.x+415+_,n.y+55),mo.p(n.x+415+_,n.y+60),mo.p(n.x+427+_,n.y+84),mo.p(n.x+440+_,n.y+67)),32:new mo.NUM.Polygon(mo.p(n.x+394+_,n.y+64),mo.p(n.x+397+_,n.y+92),mo.p(n.x+410+_,n.y+92),mo.p(n.x+422+_,n.y+89),mo.p(n.x+410+_,n.y+64)),15:new mo.NUM.Polygon(mo.p(n.x+369+_,n.y+64),mo.p(n.x+369+_,n.y+92),mo.p(n.x+392+_,n.y+92),mo.p(n.x+390+_,n.y+64))};for(a=0;a<m.length;a++)i=m[a],p=mo.STR.format("%s:%s",t.AdvBetType.side,i),t.log("---\x3ecombineKey",p),r=n["betArea2nd"+i],(e=new t.RltBetAreaSideHelper(r,p)).setBetMgr(s),c[i]=e,s.registerBetArea(p,d[i])},o.prototype._initAAA=function(){var e,o,a=this,i=a.data.betMgr,n=(CONST.betType.roulette,a.offsetX);o=t.AdvBetType.rltDC;var s=a.betAreaDC;new t.RltBetAreaSegmentHelper(s,o).setBetMgr(i),i.registerBetRecorder(o,new r(o)),e=new mo.NUM.Polygon(mo.p(a.x+s.x+10+n,a.y+s.y+4),mo.p(a.x+s.x+4+n,a.y+s.y+.5*s.height),mo.p(a.x+s.x+10+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width-50+n,a.y+s.y+4)),i.registerBetArea(o,e),o=t.AdvBetType.rltOrphan;s=a.betAreaOrphan;new t.RltBetAreaSegmentHelper(s,o).setBetMgr(i),i.registerBetRecorder(o,new r(o)),e=new mo.NUM.Polygon(mo.p(a.x+s.x+n,a.y+s.y+4),mo.p(a.x+s.x+51+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width+n,a.y+s.y+4)),i.registerBetArea(o,e),o=t.AdvBetType.rltTC;s=a.betAreaTC;new t.RltBetAreaSegmentHelper(s,o).setBetMgr(i),i.registerBetRecorder(o,new r(o)),e=new mo.NUM.Polygon(mo.p(a.x+s.x+n,a.y+s.y+4),mo.p(a.x+s.x+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width+n,a.y+s.y+4)),i.registerBetArea(o,e),o=t.AdvBetType.rltB0;s=a.betAreaBeside0;new t.RltBetAreaSegmentHelper(s,o).setBetMgr(i),i.registerBetRecorder(o,new r(o)),e=new mo.NUM.Polygon(mo.p(a.x+s.x+n,a.y+s.y+4),mo.p(a.x+s.x+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width-10+n,a.y+s.y+s.height-4),mo.p(a.x+s.x+s.width-4+n,a.y+s.y+.5*s.height),mo.p(a.x+s.x+s.width-10+n,a.y+s.y+4)),i.registerBetArea(o,e)},o.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t.betAreaList=t.data.betAreaList,t.data.betMgr&&(t._initBetArea1st(),t._initAAA())},o}(mo.EUI.Comp);t.RltBetChartSide=o,__reflect(o.prototype,"G.RLT.RltBetChartSide")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.rtlNumRes,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var e=this,a={gridSize:20,showGrid:!0,isScroll:!0,maxCol:50,maxRow:6};a.res=r,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,a),e.anylyst=new t.LuzhuAnalyst},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var t=this,r=t.data.tableCtrl;t.label_roomName.text=r.name;var a=r.roundCtrl.currentDealerName();r.dealerNameTranslate&&r.dealerNameTranslate.hasOwnProperty(mo.PROJ.lang)&&""!=r.dealerNameTranslate[mo.PROJ.lang]&&(a=r.dealerNameTranslate[mo.PROJ.lang]),t.dealer.setData({dealerName:r.roundCtrl.currentDealerNameOther(a),dealerId:r.roundCtrl.dealerId,tableCode:r.code});var i=r.countMap||{},n=CONST.betType.roulette;t.label_red.text=i[n.red]||0,t.label_black.text=i[n.black]||0,t.label_double.text=i[n.even]||0,t.label_single.text=i[n.odd]||0,t.label_zero.text=i[n.direct+":0"]||0;for(var s,l=r.rangeList4Dis,c=0,p=0;p<l.length;p++){var _=l[p];s||(s=_[0]),s>_[0]&&(s=_[0]),c<_[1]&&(c=_[1])}t.label_roomLimit.visible=!r.isMultiRange,t.label_roomName.y=r.isMultiRange?12:4,1e3>s&&1e3>c?t.label_roomLimit.text=mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(s),e.UTIL.NUM.getSplitNumStr(c)):1e3>s&&c>=1e3?t.label_roomLimit.text=mo.STR.format("%s-%sK",e.UTIL.NUM.getSplitNumStr(s),e.UTIL.NUM.getSplitNumStr(c/1e3)):s>=1e3&&c>=1e3&&(t.label_roomLimit.text=mo.STR.format("%sK-%sK",e.UTIL.NUM.getSplitNumStr(s/1e3),e.UTIL.NUM.getSplitNumStr(c/1e3))),t._updateGameState();var u=t.anylyst;u.clearData(),u.setGameId(r.code),u.parseLuZhuList(r.luZhuList),t.zhuPanLuPainter.setZhuPanData(u.getZhuPanData())},a}(e.RoomListItem);t.RltRoomListItem=o,__reflect(o.prototype,"G.RLT.RltRoomListItem")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.rtlNumRes,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var a=this,i={gridSize:20,showGrid:!0,isScroll:!0,maxCol:50,maxRow:6};i.res=r,a.zhuPanLuPainter=new t.ZhuPanLuPainter(a.scr_zhupanLu,i),a.anylyst=new t.LuzhuAnalyst,a.scaleX=e.BASE.scaleXY_DG,a.scaleY=e.BASE.scaleXY_DG},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var t=this;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(t.label_red.size=24,t.label_black.size=24,t.label_double.size=24,t.label_single.size=24,t.label_zero.size=24);var r=t.data.tableCtrl;t.label_roomName.text=r.name,t.dealer.setData({dealerName:r.roundCtrl.dealerName,dealerId:r.roundCtrl.dealerId,tableCode:r.code,dealerNameTranslate:r.dealerNameTranslate});var a=r.countMap||{},i=CONST.betType.roulette;t.label_red.text=a[i.red]||0,t.label_black.text=a[i.black]||0,t.label_double.text=a[i.even]||0,t.label_single.text=a[i.odd]||0,t.label_zero.text=a[i.direct+":0"]||0;for(var n,s=r.rangeList4Dis,l=0,c=0;c<s.length;c++){var p=s[c];n||(n=p[0]),n>p[0]&&(n=p[0]),l<p[1]&&(l=p[1])}t.label_roomLimit.visible=!r.isMultiRange;var _=e.GW.mgr.isChangeDisplayDecimalMark?",":".",u=l>=1e3?""+e.UTIL.NUM.getSplitNumStr(l/1e3):""+l;u=-1!=u.indexOf(_)?u.substring(0,u.indexOf(_)+4):u,u=l>=1e3?u+"K":u;var h=n>=1e3?""+e.UTIL.NUM.getSplitNumStr(n/1e3):""+n;h=-1!=h.indexOf(_)?h.substring(0,h.indexOf(_)+4):h,h=n>=1e3?h+"K":h,t.label_roomLimit.text=mo.STR.format("%s-%s",h,u),t._updateGameState();var m=t.anylyst;m.clearData(),m.setGameId(r.code),m.parseLuZhuList(r.luZhuList),t.zhuPanLuPainter.setZhuPanData(m.getZhuPanData()),t.setMaintainMask()},a.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_roulette"),t.data.tableCtrl&&!e.GTS.mgr.isTableMaintain(t.data.tableCtrl.code)&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},a}(e.RoomListItem);t.RltRoomListItemNeon=o,__reflect(o.prototype,"G.RLT.RltRoomListItemNeon"),e.GC.gc.registerClass(o.__className,o)}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_room=t.RltRoomListItemNeon},o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.roulette),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n)}return t},o.prototype._click_list_room=function(e){var t=e.item.tableCtrl;this.gotoGame(t)},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomList);t.RltRoomList=r,__reflect(r.prototype,"G.RLT.RltRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.IBetMgrEvent,o=function(o){function a(){var e=o.apply(this,arguments)||this;return e.time=0,e}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var r=this;r.isFirstPlay=!1,r.rltBetMgr=new t.RltBetMgr,r.rltBetMgr.isPC=!0,r._initBetArea1st(),r._initBetArea2nd(),r.comp_chooser.setData({betMgr:r.rltBetMgr}),e.GW.mgr.disableChatRoom&&(r.chipBar.x=1025)},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var e=this;e.data.param&&(e.data.param,e.rltBetMgr.tableCtrl=e.tableCtrl,e.rltBottomBar.setData({tableCtrl:e.tableCtrl,rltBetMgr:e.rltBetMgr}))},a.prototype.onEnter=function(){var t=this;o.prototype.onEnter.call(this),t.onEmitter(t.rltBetMgr,r.ON_BET_AMOUNT_CHG,t._betNumChanged),t.chipBar.tableCtrl=t.tableCtrl,t.chipBar.btn_chipSetting.visible=!1,e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,t.onEmitter(e.VideoMgr,"networkStatus",(function(t){null!=t&&(e.COMM.layerMgr.baseTopBar.img_wifi.source="ico_wifi_"+t)})),mo.PROJ.isSkipVideoLoading||(t.onEmitter(mo.emitter,"videoLoading",(function(){t.image_rect.visible=!0,t.image_rect.alpha=.9,t.img_video_loading.visible=!0,t.videoLoading.visible=!0,setInterval((function(){t.videoLoading.loading.play(0)}),800)})),t.onEmitter(mo.emitter,"videoLoadingHide",(function(){t.videoLoading.loading.stop(),t.image_rect.visible=!1,t.videoLoading.visible=!1,t.img_video_loading.visible=!1}))),t.rltBetMgr.recoverBetInfo(),t._gameStateChange(t.tableCtrl.gameState),t._refreshBetPlan(),t.chat.tableCtrl=t.tableCtrl,e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t)},a.prototype._refreshBetPlan=function(){var e=this;e.tableCtrl.getBetStrategy((function(){for(var t=e.tableCtrl.betPlans||{},r=0;6>r;r++){var o=e["btn_plan"+r];o&&(o.enabled=!mo.OBJ.isEmpty(t[r]))}}))},a.prototype._tap_btn_plan0=function(){this._use_plan(0)},a.prototype._tap_btn_plan1=function(){this._use_plan(1)},a.prototype._tap_btn_plan2=function(){this._use_plan(2)},a.prototype._tap_btn_plan3=function(){this._use_plan(3)},a.prototype._tap_btn_plan4=function(){this._use_plan(4)},a.prototype._tap_btn_plan5=function(){this._use_plan(5)},a.prototype._use_plan=function(e){var t=this;if(0==t.time){t.time=1;var r=(t.tableCtrl.betPlans||{})[e];if(r)for(var o in r)t.rltBetMgr.bet(o,r[o],!1);setTimeout((function(){t.time=0}),200)}},a.prototype._tap_btn_edit=function(){var r=this;return e.RCD.mgr.recordState(e.RCD.RcdState.RLT_EDIT),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):void t.RltBetPlan.show({tableCtrl:r.tableCtrl}).onClose((function(){mouse.setMouseMoveEnabled(!0),r.addEventListener(mouse.MouseEvent.MOUSE_MOVE,r.onMouseMove,r),r._refreshBetPlan()}))},a.prototype._betNumChanged=function(){},a.prototype.onChipDrop=function(e,t){var r=this,o=r.getTablePoint(e,t);r.rltBetMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)},a.prototype.onChipMove=function(e,t){var r=this.getTablePoint(e,t);this.rltBetMgr.chipMoveCheck(r.x,r.y)},a.prototype.onChipChoose=function(){},a.prototype.getTablePoint=function(e,t){return new egret.Point(e,t)},a.prototype._gameStateChange=function(e){var t=this;switch(e){case CONST.gameState.betting:t.stopBet(!1);break;case CONST.gameState.shuffle:case CONST.gameState.stopBet:t.stopBet(!0);break;case CONST.gameState.payout:t.betAreaSettlement()}},a.prototype.stopBet=function(e){this.rltBetMgr.stopBet(e)},a.prototype.betFinalConfirm=function(){this.rltBetMgr.betFinalConfirm(),this._betNumChanged()},a.prototype.betAreaSettlement=function(){this.rltBetMgr.betAreaSettlement()},a.prototype._initBetArea1st=function(){var e=this;e.comp_betChart1st.setData({betMgr:e.rltBetMgr,has2nd:!0}),e.comp_betChart1st.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_betChart1st.x+t.localX,e.comp_betChart1st.y+t.localY)}),e),e.comp_betChart1st.addEventListener(egret.TouchEvent.TOUCH_END,(function(t){0==e.time&&(e.time=1,e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.onBetAreaTap(e.comp_betChart1st.x+t.localX,e.comp_betChart1st.y+t.localY,e.chipBar.chipValue),setTimeout((function(){e.time=0}),200))}),e),e.comp_betChart1st.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_betChart1st.x+t.localX,e.comp_betChart1st.y+t.localY)}),e)},a.prototype._initBetArea2nd=function(){var e=this;e.comp_sideChart.setData({betMgr:e.rltBetMgr,betAreaList:e.comp_betChart1st.betAreaList}),e.comp_sideChart.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_sideChart.x+t.localX,e.comp_sideChart.y+t.localY)}),e),e.comp_sideChart.addEventListener(egret.TouchEvent.TOUCH_END,(function(t){0==e.time&&(e.time=1,e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.onBetAreaTap(e.comp_sideChart.x+t.localX,e.comp_sideChart.y+t.localY,e.chipBar.chipValue),setTimeout((function(){e.time=0}),200))}),e),e.comp_sideChart.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_sideChart.x+t.localX,e.comp_sideChart.y+t.localY)}),e)},a.prototype._tap_btn_back=function(){this._onKickFromTable()},a.prototype.onExit=function(){o.prototype.onExit.call(this);var t=this;t.rltBetMgr.reset(),t.rltBetMgr.unAll(),t.rltBetMgr.doDtor(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!1,e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t),e.COMM.BONUS.leaveBonusDlg()},a.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},a}(e.BASE.BaseTableLayer);t.RltTable=o,__reflect(o.prototype,"G.RLT.RltTable"),e.GC.gc.registerClass(o.__className,o)}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.Payout,o=e.COMM.IBetMgrEvent,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.maxSumShowNum=15,e.noBetRoundCount=0,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);var e=this;e.initKeepResult(),e._Item_list_history=t.RltStatHistoryItem,e.anylyst=new t.LuzhuAnalyst,e._historyData=[]},i.prototype.initKeepResult=function(){var e=this;e.keepResult=[],e.keepResult_Small=37,e.keepResult_Even=38,e.keepResult_Red=39,e.keepResult_Black=40,e.keepResult_Odd=41,e.keepResult_Big=42;for(var t=0;t<=e.keepResult_Big;t++)e.keepResult.push(0)},i.prototype.addKeepResult=function(e){var t=this;t.justEnterGame||e>t.keepResult_Big||0>e||(t.keepResult[e]++,t.resetKeepResultOnlyOppose(e))},i.prototype.resetKeepResultOnlyNumber=function(){for(var e=0;e<this.keepResult_Small;e++)this.keepResult[e]=0},i.prototype.resetKeepResultOnlyOppose=function(e){var t=this;switch(e){case t.keepResult_Small:t.resetKeepResultByTarget(t.keepResult_Big);break;case t.keepResult_Big:t.resetKeepResultByTarget(t.keepResult_Small);break;case t.keepResult_Odd:t.resetKeepResultByTarget(t.keepResult_Even);break;case t.keepResult_Even:t.resetKeepResultByTarget(t.keepResult_Odd);break;case t.keepResult_Red:t.resetKeepResultByTarget(t.keepResult_Black);break;case t.keepResult_Black:t.resetKeepResultByTarget(t.keepResult_Red);break;default:t.resetKeepResultNumberBeside(e)}},i.prototype.resetKeepResultNumberBeside=function(e){for(var t=0;t<this.keepResult_Small;t++)t!=e&&(this.keepResult[t]=0)},i.prototype.resetKeepResultByTarget=function(e){e>this.keepResult_Big||0>e||(this.keepResult[e]=0)},i.prototype.getKeepResultBigThan=function(e){for(var t=0;t<=this.keepResult_Big;t++)if(this.keepResult[t]>=e)return t;return-1},i.prototype.checkandPlayResultSound=function(){var e=this,t=e.getKeepResultBigThan(2);if(-1!=t){if(t<e.keepResult_Small)return egret.Tween.get(e.scr_zhupanLu).wait(4e3).call((function(){e.tableCtrl&&e.tableCtrl.playAudio("r_samex2")})),void e.resetKeepResultOnlyNumber();if((t=e.getKeepResultBigThan(3))==e.keepResult_Small||t==e.keepResult_Big||t==e.keepResult_Odd||t==e.keepResult_Even||t==e.keepResult_Red||t==e.keepResult_Black){var r="";switch(t){case e.keepResult_Small:r="r_smallx3";break;case e.keepResult_Big:r="r_bigx3";break;case e.keepResult_Odd:r="r_oddx3";break;case e.keepResult_Even:r="r_evenx3";break;case e.keepResult_Red:r="r_redx3";break;case e.keepResult_Black:r="r_blackx3"}if(""!=r)egret.Tween.get(e.scr_zhupanLu).wait(4e3).call((function(){e.tableCtrl&&e.tableCtrl.playAudio(r)}));e.resetKeepResultByTarget(t)}}},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var e=this;e.historyScroller=e.viewStack.getChildAt(1),e._setupLuzuPainter(),e.compTimerState.audioEnabled=!0},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);var t=this,r=t.tableCtrl;t.compTimerState.tableCtrl=r,t._refreshLuzhu(),t.BetSettingLayer=new e.COMM.BetSetting,t.BetSettingLayer.tableCtrl=t.tableCtrl,t.BetSettingLayer.grp_bet_setting.right=e.GW.mgr.ifGameSingle()?130:190,t.BetSettingLayer.grp_bet_setting.bottom=170,t.grp_bet_setting.addChild(t.BetSettingLayer),t.onEmitter(mo.emitter,"onRoomShortcutExpand",t.onRoomShortcutExpand),"ta_in"==mo.PROJ.lang&&(t.label_result_col.scaleX=.35)},i.prototype.onRoomShortcutExpand=function(e){var t=this,r=e?190:100;egret.Tween.get(t.grp_result_show).to({left:r},300).call((function(){egret.Tween.removeTweens(t.grp_result_show)})),r=e?230:140,egret.Tween.get(t.compTimerState).to({left:r},300).call((function(){egret.Tween.removeTweens(t.compTimerState)}))},i.prototype.dataChanged=function(){var t=this;a.prototype.dataChanged.call(this),t.justEnterGame=!0;var r=t.tableCtrl=t.data.tableCtrl;t.rltBetMgr=t.data.rltBetMgr,t.rltBetMgr.on(o.ON_BET_AMOUNT_CHG,t._betNumChanged,t),t.onEmitter(r,CONST.BBT_table.shuffle,t._shuffle),t.onEmitter(r,CONST.BBT_table.openRound,t._openRound),t.onEmitter(r,CONST.BBT_table.payout,t._payout),t.onEmitter(r,CONST.BBT_table.betStop,t._betStop),t.onEmitter(r,e.GTS.TableCtrl.ON_REFRESH_INFO,t._onRefreshInfo),t.onEmitter(r,"betStopAfterAFK",t._betStopAfterAFK),t._refreshRoomInfo(),t._refreshRoundState(),t._refreshLuzhu(),t._refreshOpBtns(),t._gameStateChange(r.gameState)},i.prototype._betStopAfterAFK=function(){this.rltBetMgr.betFinalConfirm()},i.prototype._onRefreshInfo=function(){var e=this;e.rltBetMgr.recoverBetInfo(),e._refreshRoomInfo(),e._refreshRoundState(),e._refreshLuzhu(),e._refreshOpBtns(),e._gameStateChange(e.tableCtrl.gameState)},i.prototype._shuffle=function(){var e=this;e.justEnterGame=!1,e.rltBetMgr.clear(),e._refreshRoomInfo(),e._gameStateChange(CONST.gameState.shuffle)},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.betAreaReset(),e._refreshRoomInfo(),e._gameStateChange(CONST.gameState.betting),e.noBetRoundCount++,e.setNoBetHint(e.noBetRoundCount)},i.prototype._payout=function(){var e=this;e.rltBetMgr.clear(),t.log("显示派彩界面"),e.justEnterGame=!1,e._gameStateChange(CONST.gameState.payout)},i.prototype._betStop=function(){mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),t.log("停止下注"),this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet)},i.prototype._click_tab_luzhu=function(e){t.log("-----dd",e.item,e.itemIndex)},i.prototype._data_list_history=function(){var e=this,t=mo.OBJ.clone(e._historyData);if(t.length<e.maxSumShowNum)for(var r=0,o=e.maxSumShowNum-t.length;o>r;r++)t.push(null);else t.push(null);return t},i.prototype.stopBet=function(e){this.rltBetMgr.stopBet(e)},i.prototype._gameStateChange=function(t){var o=this;o.showBetMoney(),o.switchResultPanel(),o.curGameState=t;var a=o.tableCtrl;switch(e.BASE.TimerStateSmallLottery.State,t){case CONST.gameState.betting:var i=parseInt((6*Math.random()+1).toString());a.playAudio("p_start_bet_"+i),o.checkandPlayResultSound(),o.tableCtrl.roundCount<=1&&o._refreshLuzhu(),o.stopBet(!1),o.btn_again.enabled=o.rltBetMgr.hasPreRoundBetHistory(),o.btn_again.visible=o.btn_again.enabled,o.btn_again.enabled&&o.checkIsBet()&&(o.btn_again.enabled=!1,o.btn_again.visible=!1,o.btn_double.enabled=!0);var n=a.getBetStopTime();if(n){var s=n.getTime()-mo.DATE.now()-1e3*a.betSec;0>s&&(s=0),mo.TM.setTimeout((function(){o.compTimerState.stateBetting(),o.compTimerState.refreshTime(a.betSec,n)}),s)}else o.compTimerState.stateClearing();break;case CONST.gameState.shuffle:o.stopBet(!0),o._refreshLuzhu(),o.compTimerState.stateShuffle();break;case CONST.gameState.stopBet:o.stopBet(!0),o.openCloseBtns(),o.betFinalConfirm(),o.compTimerState.stateClearing(),o.justEnterGame||a.playAudio("time_out_notice");break;case CONST.gameState.payout:var l=e.UTIL.calPayout(o.tableCtrl.roundCtrl,o.tableCtrl.betCtrl).payoutDetail,c=!mo.OBJ.isEmpty(l);!o.justEnterGame&&c?(r.show({tableCtrl:o.tableCtrl}),a.playAudio("coins_drop")):(e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3)),o.stopBet(!0),o.rltBetMgr.betAreaSettlement(),o.compTimerState.stateClearing(),o._refreshLuzhu()}},i.prototype.refreshStatRatio=function(e){this.rltStatRatio.setData({tableCtrl:e})},i.prototype.betAreaReset=function(){this.rltBetMgr.clear()},i.prototype.betFinalConfirm=function(){this.rltBetMgr.betFinalConfirm(),this._betNumChanged()},i.prototype._refreshLuzhu=function(){var e=this;e.anylyst.setGameId(e.tableCtrl.code),e.anylyst.clearData(),e.anylyst.parseLuZhuList(e.tableCtrl.luZhuList),e.zhuPanLuPainter.setZhuPanData(e.anylyst.getZhuPanData()),e._historyData=e.anylyst.getZhuPanData(),e.refreshList("list_history"),e.historyScroller.validateNow(),e.historyScroller.width<e.historyScroller.viewport.contentWidth&&(e.historyScroller.viewport.scrollH=e.historyScroller.viewport.contentWidth-e.historyScroller.width),e.rltStatHot.setData({anylyst:e.anylyst}),e.refreshStatRatio(e.tableCtrl)},i.prototype._refreshRoomInfo=function(){this.tableInfo.setData({tableCtrl:this.tableCtrl})},i.prototype._refreshRoundState=function(){var e=this;e.showBetMoney();var t=e.tableCtrl.gameState;e._gameStateChange(t)},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this;t.rltBetMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.rltBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):(t.btn_again.enabled=t.rltBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0))},i.prototype.checkIsBet=function(){var e=this.rltBetMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},i.prototype._setupLuzuPainter=function(){var r=this,o={gridSize:17,showGrid:!0,isScroll:!0,maxCol:51,maxRow:6};o.res=CONST.rtlNumRes,e.GW.mgr.disableChatRoom&&(r.viewStack.x=1038,r.tab_luzhu.x=1340,r.scr_zhupanLu.width=600),r.zhuPanLuPainter=new t.ZhuPanLuPainter(r.scr_zhupanLu,o)},i.prototype._betNumChanged=function(){this._refreshOpBtns(),this.showBetMoney()},i.prototype.showBetMoney=function(){var t=this;t.tableInfo.setData({tableCtrl:t.tableCtrl});var r=t.tableCtrl.betCtrl.betDetail4Dis,o=0;if(r)for(var a in r)o+=r[a];t.label_betNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(o)},i.prototype._refreshOpBtns=function(){var e=this;e.tableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.rltBetMgr.hasUnConfirmedBet())},i.prototype.switchResultPanel=function(){var e=this;if(e.tableCtrl.gameState==CONST.gameState.payout){var t=e.tableCtrl.roundCtrl,r=t.srcResults,o=t.results;if(o){e.label_waitResult.visible=!1,e.grp_finish.visible=!0;var a=r[0];e.addKeepResult(a),e.ico_resultNum.source=CONST.rtlResultNumRes[a];var i=0==a;if(e.label_result_bs.visible=!i,e.label_result_col.visible=!i,e.label_result_da.visible=!i,e.label_result_rb.visible=!i,e.ico_resultNum.visible=!0,i)return;var n=CONST.langCode.betType,s=void 0,l=void 0;-1!=o.indexOf(CONST.betType.roulette.big)?(s=n[CONST.betType.roulette.big],e.addKeepResult(e.keepResult_Big)):(s=n[CONST.betType.roulette.small],e.addKeepResult(e.keepResult_Small)),e.label_result_bs.text=mo.D.langCodeToTxt(s),e.label_result_bs.width>e.label_result_bs.wantWidth&&(e.label_result_bs.scaleX=e.label_result_bs.wantWidth/e.label_result_bs.width/2),-1!=o.indexOf(CONST.betType.roulette.red)?(l=n[CONST.betType.roulette.red],e.addKeepResult(e.keepResult_Red)):(l=n[CONST.betType.roulette.black],e.addKeepResult(e.keepResult_Black)),e.addKeepResult(-1!=o.indexOf(CONST.betType.roulette.odd)?e.keepResult_Odd:e.keepResult_Even),e.label_result_rb.text=mo.D.langCodeToTxt(l),e.label_result_rb.width>e.label_result_rb.wantWidth&&(e.label_result_rb.scaleX=e.label_result_rb.wantWidth/e.label_result_rb.width/2);for(var c=0;3>c;c++){var p=CONST.betType.roulette.dozen+":"+c,_=CONST.betType.roulette.column+":"+c;o.indexOf(p)>=0&&(e.label_result_da.text=mo.D.langCodeToTxt(n[p]),e.label_result_da.width>e.label_result_da.wantWidth&&(e.label_result_da.scaleX=e.label_result_da.wantWidth/e.label_result_da.width/2)),o.indexOf(_)>=0&&(e.label_result_col.text=mo.D.langCodeToTxt(n[_]))}}}else e.label_waitResult.visible=!0,e.ico_resultNum.source="",e.ico_resultNum.visible=!1,e.grp_finish.visible=!1},i.prototype._tap_btn_limit=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_ROOM_LIMIT),e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_confirm=function(){var r=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),r.rltBetMgr.startBet();var o=(r.rltBetMgr.unBetInvalidTypes(),r.rltBetMgr.packUnConfirmedBet());mo.OBJ.isEmpty(o)?(r._betNumChanged(),r.rltBetMgr.finishBet()):r.tableCtrl.bet(o,(function(){r.tableCtrl.playAudio("p_bet_success"),t.log("下注成功"),mo.MSG.show(e.id_c_msgCode.bacc_bet_success),r.rltBetMgr.confirmBet(),r._betNumChanged(),r.rltBetMgr.finishBet(),r.noBetRoundCount=0}),(function(){r.rltBetMgr.undo(),r.rltBetMgr.betFinalConfirm(),r._betNumChanged(),r.rltBetMgr.finishBet()}))},i.prototype._tap_btn_again=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),this.rltBetMgr.redoBet(),this._betNumChanged()},i.prototype._tap_btn_double=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),this.rltBetMgr.doubleBet(),this._betNumChanged(),e.RCD.log_mgr.sendEvent_ClientButton("game.double")},i.prototype._tap_btn_undo=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),this.rltBetMgr.undo(),this._betNumChanged()},i.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},i.prototype.setNoBetHint=function(){},i}(mo.EUI.Layer);t.RltBottomBar=a,__reflect(a.prototype,"G.RLT.RltBottomBar")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.IBetMgrEvent,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype._initProp=function(){o.prototype._initProp.call(this);this.betMgr=new t.RltPlanBetMgr,this.betPlanMgr=new t.RltBetPlanMgr},a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this)},a.prototype.onEnter=function(){var t=this;if(o.prototype.onEnter.call(this),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!0),t.addEventListener(mouse.MouseEvent.MOUSE_MOVE,t.onMouseMove,t)),t.chipBar){var r=t.chipBar.emitter;t.onEmitter(r,e.BASE.ChipBar2.ON_CHIP_MOVE,t.onChipMove),t.onEmitter(r,e.BASE.ChipBar2.ON_CHIP_DROP,t.onChipDrop),t.onEmitter(r,e.BASE.ChipBar2.ON_CHIP_CHOOSE,t.onChipChoose)}t._miniBet=new e.BASE.MiniBet,t._miniBet.scaleX=.5,t._miniBet.scaleY=.5,t._miniBet.anchorOffsetX=0,t._miniBet.visible=!1,t._miniBet.bg_img_forRlt.visible=!0,t.addChild(t._miniBet),t.onEmitter(t.betMgr,"clearAllHedgeBetEvent",t.clearAllHedgeInBetArea),t.onEmitter(t.betMgr,"checkHedgeAndDisableArea",t.disableMultiHedgeArea),t.betMgr.clearAllHedgeInBetArea(),t.betMgr.checkAllBetsAndLockHedge(),mo.emitter.on("dynamicConfirmForBetplan",t.showDynamicConfirmGroup,t)},a.prototype.clearAllHedgeInBetArea=function(){this.comp_betChart1st.clearAllHedgeInBetArea()},a.prototype.disableMultiHedgeArea=function(e){this.comp_betChart1st.disableMultiHedgeArea(e)},a.prototype.showDynamicConfirmGroup=function(e){this._miniBet.x=325+e.x,this._miniBet.y=200+e.y},a.prototype.onMouseMove=function(e){this.onChipMove(e.stageX,e.stageY)},a.prototype.onChipDrop=function(e,t){var r=this,o=r.betMgr,a=r.comp_betChart1st.hitTestPoint(e,t);o.isFirstPlay=a;var i=a?r.comp_betChart1st.globalToLocal(e,t):r.comp_sideChart.globalToLocal(e,t);o.chipDropCheck(i.x,i.y,r.chipBar.chipValue)},a.prototype.onChipMove=function(e,t){var r=this,o=r.betMgr,a=r.comp_betChart1st.hitTestPoint(e,t);o.isFirstPlay=a;var i=a?r.comp_betChart1st.globalToLocal(e,t):r.comp_sideChart.globalToLocal(e,t);o.chipMoveCheck(i.x,i.y)},a.prototype.onChipChoose=function(){},a.prototype.onBetAreaBet=function(t,r){var o=this;if(o.betPlanMgr.bet(t,r),o._miniBet){var a=(o.betMgr.betRecoders,e.UTIL.getRange(o.data.tableCtrl.type,o.data.tableCtrl.rangeList,t)[0]),i=o.betMgr.getUnConfirmedBet(t)+o.betMgr.getConfirmedBet(t);o._miniBet.visible=!1,o._miniBet.label_limitValue.text=e.UTIL.NUM.getSplitNumStr(a),a>i&&(o.changeMiniBetPosition(t+""),o._miniBet.visible=!0)}},a.prototype.changeMiniBetPosition=function(e){var t=this;if(-1!=e.indexOf("200")&&(-1!=e.indexOf(":0")?(t._miniBet.x-=35,t._miniBet.y-=70):(t._miniBet.y-=115,t._miniBet.x-=25)),-1!=e.indexOf("202")&&(t._miniBet.x-=35,t._miniBet.y-=135),-1!=e.indexOf("206")&&(t._miniBet.x-=45,t._miniBet.y-=135),-1!=e.indexOf("203")&&(t._miniBet.x-=45,t._miniBet.y-=140),-1!=e.indexOf("207")&&(t._miniBet.y-=95,t._miniBet.x-=25),-1!=e.indexOf("208")&&(t._miniBet.y-=105,t._miniBet.x+=40),(-1!=e.indexOf("214")||-1!=e.indexOf("212")||-1!=e.indexOf("209")||-1!=e.indexOf("210")||-1!=e.indexOf("211")||-1!=e.indexOf("213"))&&(t._miniBet.y-=105,t._miniBet.x-=5),-1!=e.indexOf("201"))if(-1!=e.indexOf(":0"))t._miniBet.y-=125,t._miniBet.x-=40;else{var r=Number(e.substring(e.indexOf(":")+1,e.indexOf(",")));Number(e.substring(e.indexOf(",")+1))-r==3?(t._miniBet.y-=125,t._miniBet.x-=45):(t._miniBet.y-=140,t._miniBet.x-=35)}-1!=e.indexOf("204")&&(t._miniBet.y-=135,t._miniBet.x-=45),-1!=e.indexOf("205")&&(t._miniBet.y-=135,t._miniBet.x-=40)},a.prototype.onBetComplete=function(){this.betPlanMgr.pushStep(),this.refreshBtns()},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var e=this;e.selectedIndex=0,e.tab_planBar.selectedIndex=0;var t=e.data.tableCtrl;e.chipBar.setUseOldChipsPlan(!0),e.chipBar.tableCtrl=t;var a=e.betMgr,i=0;a.tableCtrl=t,a.stopBet(!1),e.comp_chooser.setData({betMgr:a}),e.comp_betChart1st.setData({betMgr:a,has2nd:!0}),e.grp_betArea1st.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(e){a.isFirstPlay=!0,a.chipMoveCheck(e.localX,e.localY)}),e),e.grp_betArea1st.addEventListener(egret.TouchEvent.TOUCH_END,(function(t){0==i&&(i=1,a.isFirstPlay=!0,a.onBetAreaTap(t.localX,t.localY,e.chipBar.chipValue,!0),a.clearAllHedgeInBetArea(),a.checkAllBetsAndLockHedge(),setTimeout((function(){i=0}),200))}),e),e.grp_betArea1st.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(e){a.isFirstPlay=!0,a.chipMoveCheck(e.localX,e.localY)}),e),e.grp_betArea2nd.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(e){a.isFirstPlay=!1,a.chipMoveCheck(e.localX,e.localY)}),e),e.grp_betArea2nd.addEventListener(egret.TouchEvent.TOUCH_END,(function(t){0==i&&(i=1,a.isFirstPlay=!1,a.onBetAreaTap(t.localX,t.localY,e.chipBar.chipValue),setTimeout((function(){i=0}),200))}),e),e.grp_betArea2nd.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(e){a.isFirstPlay=!1,a.chipMoveCheck(e.localX,e.localY)}),e),e.comp_sideChart.setData({betMgr:a}),a.on(r.ON_BET_AREA_BET,e.onBetAreaBet,e),a.on(r.ON_BET_AMOUNT_CHG,e.onBetComplete,e),e.betPlanMgr.setBetPlanDict(t.betPlans),e._switchPlan(e.selectedIndex)},a.prototype._tap_tab_planBar=function(){var t=this;t.selectedIndex!=t.tab_planBar.selectedIndex&&(t.betPlanMgr.isUnSaved()?mo.MSG.show(e.id_c_msgCode.g_bet_plan_change,(function(){t._switchPlan(t.tab_planBar.selectedIndex)}),(function(){t.tab_planBar.selectedIndex=t.selectedIndex})):t._switchPlan(t.tab_planBar.selectedIndex))},a.prototype._switchPlan=function(){var e=this;e.selectedIndex=e.tab_planBar.selectedIndex,e.betPlanMgr.selectPlanByIdx(e.selectedIndex),e.betMgr.recoverBetInfo(e.betPlanMgr.getPlanByIndex(e.selectedIndex)),e.refreshBtns(),e._miniBet&&(e._miniBet.visible=!1)},a.prototype.refreshBtns=function(){var e=this;e.btn_undo.enabled=e.betPlanMgr.canUndo(),e.btn_clear.enabled=!e.betPlanMgr.isEmptyPlan(e.selectedIndex),e.btn_save.enabled=e.betPlanMgr.isUnSaved(),e.betMgr.clearAllHedgeInBetArea(),e.betMgr.checkAllBetsAndLockHedge()},a.prototype._tap_btn_undo=function(){var e=this,t=e.betPlanMgr.undo();for(var r in t)e.betMgr.popBet(r);e.refreshBtns(),e._miniBet.visible=!1},a.prototype._tap_btn_clear=function(){var e=this;e.betMgr.clear(),e.betPlanMgr.clear(),e.refreshBtns(),e._miniBet.visible=!1},a.prototype._tap_btn_save=function(){var t=this;t.betMgr.confirmBet();var r=t.data.tableCtrl;t.betPlanMgr.isUnSaved()&&r.modifyBetStrategy(t.betPlanMgr.getAllPlan(),(function(){mo.MSG.show(e.id_c_msgCode.g_bet_plan_save_complete),t.betPlanMgr.saveComplete(),t.refreshBtns()}))},a.prototype._tap_btn_closepanel=function(){var t=this;t.betPlanMgr.isUnSaved()?mo.MSG.show(e.id_c_msgCode.g_bet_plan_change,(function(){t.close()})):t.close()},a.prototype.onExit=function(){o.prototype.onExit.call(this);var e=this;mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!1),e.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,e.onMouseMove,e)),e.unEmitter(),mo.emitter.unAll("dynamicConfirmForBetplan")},a}(mo.EUI.Dlg);t.RltBetPlan=o,__reflect(o.prototype,"G.RLT.RltBetPlan")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(e,r,o){var a=t.call(this,e,r)||this;a.betNumComp_horizontalCenter=0;var i=a;return i.ascBetAreas=o,i.reset(),a}return __extends(r,t),r.prototype.setBetNumCompHorizontalCenter=function(e){this.betNumComp_horizontalCenter=e},r.prototype.onBetAreaSettlement=function(e){var t=e.indexOf(this.betType)>=0;this.inTheSettlement(t)},r.prototype.reset=function(){t.prototype.reset.call(this),this.setBetNum()},r.prototype.setBetAreaFocus=function(e){e!=this._focus&&(this._focus=e),this.betNumComp&&(this.betNumComp.focus=e)},r.prototype.setBetNum=function(){var t=this,r=t.betRecoder.totalBet4Dis;if(r){if(t.flyChip||(this.flyChip=new e.BASE.ChipAnimComp,this.flyChip.horizontalCenter=0,this.flyChip.y=.5*t.betArea.height+1-t.flyChip.height,t.betArea.addChild(this.flyChip)),!t.betNumComp){var o=t.betNumComp=new e.BASE.BetNumRlt;o.horizontalCenter=t.betNumComp_horizontalCenter,o.y=t.flyChip.y+.5*t.flyChip.height-o.height,t.betArea.addChild(o)}t.betNumComp.visible=!0,t.betNumComp.setData({num:r})}else t.betNumComp&&(t.betNumComp.visible=!1)},r.prototype.haveBet=function(){this.setBetNum()},r.prototype.haveNoBet=function(){var e=this;e.setBetAreaFocus(!1);for(var t=0;t<e.ascBetAreas.length;t++){e.ascBetAreas[t].highlight=!1}e.setBetNum(),e.flyChip&&e.flyChip.reset()},r.prototype.noLight=function(){this.betArea.light=!1},r.prototype.hangover=function(e){var t=this;t.setBetAreaFocus(e);for(var r=0;r<t.ascBetAreas.length;r++){t.ascBetAreas[r].highlight=e}},r.prototype.betConfirm=function(){var e=this;t.prototype.betConfirm.call(this),e.setBetAreaFocus(!1);for(var r=0;r<e.ascBetAreas.length;r++){e.ascBetAreas[r].highlight=!1}},r.prototype.inTheSettlement=function(e){this.betArea.focus=e,this.betArea.light=e},r.prototype.bet=function(e){var r=this;t.prototype.bet.call(this,e),r.setBetAreaFocus(!0),r.flyChip&&(r.flyChip.chipValue=e);for(var o=0;o<r.ascBetAreas.length;o++){r.ascBetAreas[o].highlight=!0}},r.prototype.initConfirmedV=function(e){t.prototype.initConfirmedV.call(this,e);var r=this;r.flyChip&&r.flyChip.setData({chipList:r.getBetList()})},r.prototype.unBet=function(){t.prototype.unBet.call(this);var e=this;e.flyChip&&e.flyChip.setData({chipList:e.getBetList()})},r.prototype.onBetAreaPopbet=function(e){t.prototype.onBetAreaPopbet.call(this,e);var r=this;r.betType==e&&r.flyChip&&r.flyChip.setData({chipList:r.getBetList()})},r}(e.COMM.BaseBetAreaHelper);t.RltBetAreaCrossHelper=r,__reflect(r.prototype,"G.RLT.RltBetAreaCrossHelper")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function t(t,r,o){var a=e.call(this,t,r)||this,i=a;return i.ascBetAreas=o,i.reset(),a}return __extends(t,e),t.prototype.onBetAreaSettlement=function(e){var t=e.indexOf(this.betType)>=0;this.inTheSettlement(t)},t.prototype.reset=function(){this.betArea.betNum=0},t.prototype.haveBet=function(){this.betArea.betNum=this.betRecoder.totalBet4Dis},t.prototype.haveNoBet=function(){var e=this;e.betArea.focus=!1;for(var t=0;t<e.ascBetAreas.length;t++){e.ascBetAreas[t].highlight=!1}e.betArea.betNum=0,e.betArea.resetChip()},t.prototype.noLight=function(){this.betArea.light=!1},t.prototype.inTheSettlement=function(t){e.prototype.inTheSettlement.call(this,t);this.betArea.focus=t,this.betArea.light=t},t.prototype.hangover=function(e){var t=this;t.betArea.focus=e;for(var r=0;r<t.ascBetAreas.length;r++){t.ascBetAreas[r].highlight=e}},t.prototype.betConfirm=function(){var t=this;e.prototype.betConfirm.call(this),t.betArea.focus=!1;for(var r=0;r<t.ascBetAreas.length;r++){t.ascBetAreas[r].highlight=!1}},t.prototype.bet=function(t){var r=this;e.prototype.bet.call(this,t),r.betArea.focus=!0,r.betArea.betChip(t);for(var o=0;o<r.ascBetAreas.length;o++){r.ascBetAreas[o].highlight=!0}},t.prototype.initConfirmedV=function(t){e.prototype.initConfirmedV.call(this,t);this.betArea.initChip(this.getBetList())},t.prototype.unBet=function(){e.prototype.unBet.call(this);this.betArea.initChip(this.getBetList())},t.prototype.onBetAreaPopbet=function(t){e.prototype.onBetAreaPopbet.call(this,t);var r=this;r.betType==t&&r.betArea.initChip(r.getBetList())},t}(e.COMM.BaseBetAreaHelper);t.RltBetAreaBatchHelper=r,__reflect(r.prototype,"G.RLT.RltBetAreaBatchHelper")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function r(t,r){var o=e.call(this,t,r)||this,a=o;return a.betNumber=parseInt(r.split(":")[1]),a.reset(),o}return __extends(r,e),r.prototype.onChipHangover=function(e,r){var o=this;(e+="").indexOf(t.AdvBetType.side)>=0||e.indexOf(t.AdvBetType.rltB0)>=0||e.indexOf(t.AdvBetType.rltDC)>=0||e.indexOf(t.AdvBetType.rltOrphan)>=0||e.indexOf(t.AdvBetType.rltTC)>=0?r&&r.indexOf(o.betNumber)>=0&&o.hangover(!0):e==o.betType&&o.hangover(!0)},r.prototype.onChipHangout=function(e,r){var o=this;(e+="").indexOf(t.AdvBetType.side)>=0||e.indexOf(t.AdvBetType.rltB0)>=0||e.indexOf(t.AdvBetType.rltDC)>=0||e.indexOf(t.AdvBetType.rltOrphan)>=0||e.indexOf(t.AdvBetType.rltTC)>=0?r&&r.indexOf(o.betNumber)>=0&&o.hangover(!1):e==o.betType&&o.hangover(!1)},r.prototype.onBetAreaSettlement=function(e){var t=e.indexOf(this.betType)>=0;this.inTheSettlement(t)},r.prototype.reset=function(){this.betArea.betNum=0},r.prototype.haveBet=function(){this.betArea.betNum=this.betRecoder.totalBet4Dis},r.prototype.haveNoBet=function(){var e=this;e.betArea.focus=!1,e.betArea.betNum=0,e.betArea.resetChip()},r.prototype.noLight=function(){this.betArea.light=!1},r.prototype.hangover=function(e){this.betArea.focus=e},r.prototype.betConfirm=function(){e.prototype.betConfirm.call(this),this.betArea.focus=!1},r.prototype.inTheSettlement=function(t){e.prototype.inTheSettlement.call(this,t);this.betArea.focus=t,this.betArea.light=t},r.prototype.bet=function(t){e.prototype.bet.call(this,t),this.betArea.focus=!0,this.betArea.betChip(t)},r.prototype.initConfirmedV=function(t){e.prototype.initConfirmedV.call(this,t);this.betArea.initChip(this.getBetList())},r.prototype.unBet=function(){e.prototype.unBet.call(this);this.betArea.initChip(this.getBetList())},r.prototype.onBetAreaPopbet=function(t){e.prototype.onBetAreaPopbet.call(this,t);var r=this;r.betType==t&&r.betArea.initChip(r.getBetList())},r}(e.COMM.BaseBetAreaHelper);t.RltBetAreaHelper=r,__reflect(r.prototype,"G.RLT.RltBetAreaHelper")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.reset(),o}return __extends(t,e),t.prototype.hangover=function(e){this.betArea.highlight=e},t}(e.COMM.BaseBetAreaHelper);t.RltBetAreaSegmentHelper=r,__reflect(r.prototype,"G.RLT.RltBetAreaSegmentHelper")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function r(t,r){var o=e.call(this,t,r)||this,a=o;return"string"==typeof r&&(a.betNumber=parseInt(r.split(":")[1])),a.reset(),o}return __extends(r,e),r.prototype.onChipHangover=function(e,r){var o=this;(e==o.betType||t.hasAdvBetType(e)&&r.indexOf(o.betNumber)>=0)&&o.hangover(!0)},r.prototype.onChipHangout=function(e,r){var o=this;(e==o.betType||t.hasAdvBetType(e)&&r.indexOf(o.betNumber)>=0)&&o.hangover(!1)},r.prototype.onBetAreaSettlement=function(e){var t=e.indexOf(this.betType)>=0;this.inTheSettlement(t)},r.prototype.hangover=function(e){this.betArea.highlight=e},r.prototype.betConfirm=function(){e.prototype.betConfirm.call(this),this.betArea.highlight=!1},r}(e.COMM.BaseBetAreaHelper);t.RltBetAreaSideHelper=r,__reflect(r.prototype,"G.RLT.RltBetAreaSideHelper")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var t=r.apply(this,arguments)||this;return t.trybet_itFunction=function(r,o,a,i,n,s){var l=t;if(o.contains(a,i)){if(e.GW.mgr.channel){var c=e.GW.mgr.channel.shouldBlockHedge||!1;if(s&&c)if(l.checkWhetherBetIsHedge(r))return!0}return l.currentHitBetType=r,l._doBet(r,n),e.playAudio("add_chips"),!0}return!1},t}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._isPC=!1,e._isFirstPlay=!0;var o=CONST.betType.roulette;e.sortedKeys=[,o.street.toString(),o.line.toString(),o.corner.toString(),o.three.toString(),o.split.toString(),o.four.toString(),o.column.toString(),o.dozen.toString(),o.red.toString(),o.black.toString(),o.odd.toString(),o.even.toString(),o.big.toString(),o.small.toString(),o.direct.toString()],e.sortedKeys2=[t.AdvBetType.rltDC,t.AdvBetType.rltTC,t.AdvBetType.rltB0,t.AdvBetType.rltOrphan,t.AdvBetType.side],e.sideNum=2,e.lastSideNum=2},Object.defineProperty(o.prototype,"isPC",{set:function(e){this._isPC=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isFirstPlay",{get:function(){return this._isFirstPlay},set:function(e){this._isFirstPlay=e},enumerable:!0,configurable:!0}),o.prototype.getBetRecorder=function(e){var r,o,a=this,i=[];if("string"==typeof e){if(t.hasAdvBetType(e)){for(var n=a.getArgs(e),s=0;s<n.length;s++)r=n[s],o=a.betRecoders[mo.STR.format("%s:%s",CONST.betType.roulette.direct,r)],i.push(o);return i}return a.betRecoders[e]}return a.betRecoders[e]},o.prototype.registerBetArea=function(e,t){var o=this,a=(e+"").split(":")[0];o.betAreasByKind[a]||(o.betAreasByKind[a]={}),o.betAreasByKind[a][e]=t,r.prototype.registerBetArea.call(this,e,t)},o.prototype.getCurrentHitBetAreaShape=function(){var e=this;if(e.currentHitBetType){if(e.betAreas.hasOwnProperty(e.currentHitBetType)){var t=e.betAreas[e.currentHitBetType].edgePoints.slice();return{type:e.currentHitBetType,poly:t}}if(e.currentHitBetType.includes("plan_")){var r=e.currentHitBetType+"",o=parseInt(r.split("_")[1]),a=1033+2*o+38*o,i=305,n=new mo.NUM.Polygon(mo.p(a,i),mo.p(a,333.5),mo.p(a+38,333.5),mo.p(a+38,i));return{type:e.currentHitBetType,poly:n.edgePoints}}return null}return null},o.prototype.getArgs=function(e){var r;if(e+="")if(e.indexOf(t.AdvBetType.side)>=0){var o=t.parseBetType(e)[1];r=t.getSideBetAscNums(o,this.sideNum)}else e.indexOf(t.AdvBetType.rltDC)>=0?r=t.rltDCNums:e.indexOf(t.AdvBetType.rltB0)>=0?r=t.rltB0Nums:e.indexOf(t.AdvBetType.rltOrphan)>=0?r=t.rltOrphanNums:e.indexOf(t.AdvBetType.rltTC)>=0&&(r=t.rltTCNums);return r},o.prototype.getArgsOld=function(e){var r;if(e+="")if(e.indexOf(t.AdvBetType.side)>=0){var o=t.parseBetType(e)[1];r=t.getSideBetAscNums(o,this.lastSideNum)}else e.indexOf(t.AdvBetType.rltDC)>=0?r=t.rltDCNums:e.indexOf(t.AdvBetType.rltB0)>=0?r=t.rltB0Nums:e.indexOf(t.AdvBetType.rltOrphan)>=0?r=t.rltOrphanNums:e.indexOf(t.AdvBetType.rltTC)>=0&&(r=t.rltTCNums);return r},o.prototype.iterateBetArea=function(e){var t,r=this,o=r.betAreasByKind;t=r._isPC?r.sortedKeys.concat(r.sortedKeys2):r.isFirstPlay?r.sortedKeys:r.sortedKeys2;for(var a=0;a<t.length;a++){var i=o[t[a]]||{};for(var n in i)if(e(n,i[n]))return}},o.prototype.undo=function(){r.prototype.undo.call(this);this.currentHitBetType=null},o.prototype.stopBet=function(e){r.prototype.stopBet.call(this,e);this.currentHitBetType=null},o}(t.BaseBetMgr);t.RltBetMgr=r,__reflect(r.prototype,"G.RLT.RltBetMgr")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.IBetMgrEvent,o=function(e){function t(){var t=e.apply(this,arguments)||this;return t.isPlan=!0,t}return __extends(t,e),t.prototype.bet=function(e,t,o){void 0===o&&(o=!0);var a=this;if(a._stopBet)return null;a.lastBetType&&a.emit(r.ON_CHIP_HANG_OUT,a.lastBetType,a.getArgs(a.lastBetType));for(var i,n=[].concat(a.getBetRecorder(e)),s=0,l=n.length;l>s;s++)(i=n[s]).bet(t),a.emit(r.ON_BET_AREA_BET,i.betType,t);return a.emit(r.ON_BET_AMOUNT_CHG,a),{isAllPass:!0,isGoldNotEnough:!1,isSelfPass:!0,isOtherPass:!0,otherInvlidTypes:[]}},t}(t.RltBetMgr);t.RltPlanBetMgr=o,__reflect(o.prototype,"G.RLT.RltPlanBetMgr")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r};!function(e){!function(t){var r=e.COMM.BaseBetRecorder,o=function(){function t(){this._betRecorders={}}return t.prototype.initRecorder=function(t){var r=this;for(var o in r._totalBet=0,r._betRecorders={},r.curSteps=[],r._needSave=!1,t)t[o]&&(r._betRecorders[o]||(r._betRecorders[o]=new e.COMM.BaseBetRecorder(o,0)),r._betRecorders[o].initBet(t[o]));r.calcTotalBet()},t.prototype.undo=function(){var e,t=this;if(t.curSteps.length){e=t.curSteps.pop();for(var r in e)t._betRecorders[r].popBet()}return t._needSave=t.curSteps.length>0,t.calcTotalBet(),e},t.prototype.bet=function(e,t){var o=this;o.curBetDetail||(o.curBetDetail={}),o.curBetDetail[e]=(o.curBetDetail[e]||0)+t,o._betRecorders[e]||(o._betRecorders[e]=new r(e,0)),o._betRecorders[e].bet(t),o.calcTotalBet()},t.prototype.pushStep=function(){var e=this;mo.OBJ.isEmpty(e.curBetDetail)||(e.curSteps.push(e.curBetDetail),e.curBetDetail={},e._needSave=!0)},t.prototype.calcTotalBet=function(){var e=this;for(var t in e._totalBet=0,e._betRecorders)e._totalBet+=e._betRecorders[t].totalBet},t.prototype.getDetail=function(){var e=this,t={};for(var r in e._betRecorders)t[r]=t[r]||0,t[r]+=e._betRecorders[r].totalBet;for(var o in t)0==t[o]&&delete t[o];return e._needSave=!1,t},t.prototype.clear=function(){var e=this;e._betRecorders={},e.calcTotalBet(),e._needSave=!0,e.curSteps.length=0},Object.defineProperty(t.prototype,"needSave",{get:function(){return this._needSave},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canUndo",{get:function(){return this.curSteps.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this._totalBet},enumerable:!0,configurable:!0}),t}();t.PlanRecorder=o,__reflect(o.prototype,"G.RLT.PlanRecorder");var a=function(){function t(){var t=this;t.planDict={},t.planDict[0]={},t.planDict[1]={},t.planDict[2]={},t.planDict[3]={},t.planDict[4]={},t.planDict[5]={},t.planRecorder=new e.RLT.PlanRecorder}return t.prototype.setBetPlanDict=function(e){var t=this;if(t.planDict={},t.planDict[0]={},t.planDict[1]={},t.planDict[2]={},t.planDict[3]={},t.planDict[4]={},t.planDict[5]={},!mo.OBJ.isEmpty(e))for(var r in e)t.planDict[r]=e[r];t.curSelectedIdx=0,t.planRecorder.initRecorder(t.planDict[t.curSelectedIdx])},t.prototype.selectPlanByIdx=function(e){var t=this;t.curSelectedIdx!=e&&(t.curSelectedIdx=e),t.planRecorder.initRecorder(t.planDict[t.curSelectedIdx])},t.prototype.undo=function(){return this.planRecorder.undo()},t.prototype.bet=function(e,t){this.planRecorder.bet(e,t)},t.prototype.pushStep=function(){this.planRecorder.pushStep()},t.prototype.getAllPlan=function(){var e=this,t={};for(var r in e.planDict)parseInt(r)!=e.curSelectedIdx?mo.OBJ.isEmpty(e.planDict[r])||(t[r]=e.planDict[r]):t[r]=e.planRecorder.getDetail();return t},t.prototype.saveComplete=function(){var e=this;e.planDict[e.curSelectedIdx]=e.planRecorder.getDetail(),e.planRecorder.initRecorder(e.planDict[e.curSelectedIdx])},t.prototype.getPlanByIndex=function(e){return this.planDict[e]},t.prototype.clear=function(){this.planRecorder.clear()},t.prototype.canUndo=function(){return this.planRecorder.canUndo},t.prototype.isEmptyPlan=function(){return this.planRecorder.isEmpty},t.prototype.isUnSaved=function(){return this.planRecorder.needSave},t}();t.RltBetPlanMgr=a,__reflect(a.prototype,"G.RLT.RltBetPlanMgr")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;if(r.data){r.grp_label.removeChildren();for(var o,a,i,n=r.data.anylyst.calcHot(),s=0,l=0,c=0,p=n.length;p>c;c++)0!=(o=n[c]).winResult&&((i=new mo.EUI.Label).width=28,i.height=92,i.size=24,i.scaleX=.5,i.scaleY=.5,i.bold=!0,("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(i.size=26),i.textAlign="center",i.verticalAlign="middle",i.text=o.winResult,-1==(a=e.UTIL.getRouletteColor(o.winResult))?(i.x=17*s,i.y=3.5,s++):1==a&&(i.x=17*l,i.y=54,l++),r.grp_label.addChild(i))}},r}(mo.EUI.Comp);t.RltStatHotPC35=r,__reflect(r.prototype,"G.RLT.RltStatHotPC35")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.rtlNumRes,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var e=this,a={gridSize:18,showGrid:!0,isScroll:!0,maxCol:50,maxRow:6};a.res=r,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,a),e.anylyst=new t.LuzhuAnalyst},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var t=this;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(t.label_red.size=24,t.label_black.size=24,t.label_double.size=24,t.label_single.size=24,t.label_zero.size=24),"ko_kr"==mo.PROJ.lang||"ja_jp"==mo.PROJ.lang||"vi_vn"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"en_us"==mo.PROJ.lang||"zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?(t.label_red_title.text="${{roulette_red}}",t.label_black_title.text="${{roulette_black}}",t.label_double_title.text="${{g_even}}",t.label_single_title.text="${{g_odd}}",t.label_zero_title.text="${{g_zero}}"):(t.label_red_title.text="Red",t.label_black_title.text="Black",t.label_double_title.text="Even",t.label_single_title.text="Odd",t.label_zero_title.text="Zero");var r=t.data.tableCtrl;t.label_roomName.text=r.name;var a={dealerName:r.roundCtrl.dealerName,dealerId:r.roundCtrl.dealerId,tableCode:r.code,dealerNameTranslate:r.dealerNameTranslate,is3rdParty:r.is3rdParty};t.dealer.setData(a);var i=r.countMap||{},n=CONST.betType.roulette;t.label_red.text=i[n.red]||0,t.label_black.text=i[n.black]||0,t.label_double.text=i[n.even]||0,t.label_single.text=i[n.odd]||0,t.label_zero.text=i[n.direct+":0"]||0;for(var s,l=r.rangeList4Dis,c=0,p=0;p<l.length;p++){var _=l[p];s||(s=_[0]),s>_[0]&&(s=_[0]),c<_[1]&&(c=_[1])}t.label_roomLimit.visible=!r.isMultiRange;var u=e.GW.mgr.isChangeDisplayDecimalMark?",":".",h=e.UTIL.NUM.getRoomLimitDisplay(c,u),m=e.UTIL.NUM.getRoomLimitDisplay(s,u);t.label_roomLimit.text=mo.STR.format("%s-%s",m,h),t._updateGameState();var d=t.anylyst;d.clearData(),d.setGameId(r.code),d.parseLuZhuList(r.luZhuList),t.zhuPanLuPainter.setZhuPanData(d.getZhuPanData()),t.setMaintainMask()},a.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_roulette"),t.data.tableCtrl&&!t.data.tableCtrl.isMaintain&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},a}(e.RoomListItem);t.RltRoomListItemPC35=o,__reflect(o.prototype,"G.RLT.RltRoomListItemPC35"),e.GC.gc.registerClass(t.RltRoomListItemNeon.__className,t.RltRoomListItemNeon)}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_room=t.RltRoomListItemPC35},o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.roulette),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n)}return t},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomListPC35);t.RltRoomListPC35=r,__reflect(r.prototype,"G.RLT.RltRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.IBetMgrEvent,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var e=this;e.isFirstPlay=!1,e.rltBetMgr=new t.RltBetMgr,e.rltBetMgr.isPC=!0,e._initBetArea1st(),e._initBetArea2nd(),e.comp_chooser.setData({betMgr:e.rltBetMgr})},a.prototype.dataChanged=function(){o.prototype.dataChanged.call(this);var e=this;e.data.param&&(e.data.param,e.rltBetMgr.tableCtrl=e.tableCtrl,e.rltBottomBar.setData({tableCtrl:e.tableCtrl,rltBetMgr:e.rltBetMgr}))},a.prototype.onEnter=function(){var t=this;o.prototype.onEnter.call(this),t.onEmitter(t.rltBetMgr,r.ON_BET_AMOUNT_CHG,t._betNumChanged),t.chipBar.tableCtrl=t.tableCtrl,t.chipBar.btn_chipSetting.visible=!1,e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!0,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!0,t.onEmitter(e.VideoMgr,"networkStatus",(function(t){null!=t&&(e.COMM.layerMgr.baseTopBar.img_wifi.source="ico_wifi_"+t)})),t.onEmitter(t.rltBetMgr,"clearAllHedgeBetEvent",t.clearAllHedgeInBetArea),t.onEmitter(t.rltBetMgr,"checkHedgeAndDisableArea",t.disableMultiHedgeArea),mo.PROJ.isSkipVideoLoading||(t.onEmitter(mo.emitter,"videoLoading",(function(){t.image_rect.visible=!0,t.image_rect.alpha=.9,t.img_video_loading.visible=!0,t.videoLoading.visible=!0,setInterval((function(){t.videoLoading.loading.play(0)}),800)})),t.onEmitter(mo.emitter,"videoLoadingHide",(function(){t.videoLoading.loading.stop(),t.image_rect.visible=!1,t.videoLoading.visible=!1,t.img_video_loading.visible=!1}))),t.rltBetMgr.recoverBetInfo(),t._gameStateChange(t.tableCtrl.gameState),t._refreshBetPlan(),t.chat.tableCtrl=t.tableCtrl,t.chat.visible=!0,t.chat.rect_disible_mask.visible=e.GW.mgr.disableChatRoom,e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t);var a=new eui.TileLayout;a.orientation="columns",a.horizontalGap=3,a.columnWidth=50,a.paddingTop=10,a.paddingLeft=5,a.verticalGap=1,a.rowHeight=48,a.requestedColumnCount=3,a.requestedRowCount=2,t.chipBar.grp_chips.layout=a,t.chipBar.scr_chips.width=165,t.chipBar.scr_chips.x=25,t.chipBar.btn_pre.x=7,t.chipBar.btn_next.x=205,t.chipBar.x=620,t.rltBetMgr.checkConfirmedBetsAndLockHedge()},a.prototype.clearAllHedgeInBetArea=function(){this.comp_betChart1st.clearAllHedgeInBetArea()},a.prototype.disableMultiHedgeArea=function(e){this.comp_betChart1st.disableMultiHedgeArea(e)},a.prototype.resetGamePage=function(){var e=this;e._refreshBetPlan(),e.rltBetMgr.recoverBetInfo();var t=e.tableCtrl.gameState;e._gameStateChange(t)},a.prototype._refreshBetPlan=function(){var e=this;e.tableCtrl.getBetStrategy((function(){for(var t=e.tableCtrl.betPlans||{},r=0;6>r;r++){var o=e["btn_plan"+r];o&&(o.enabled=!mo.OBJ.isEmpty(t[r]))}}))},a.prototype._tap_btn_plan0=function(){this._use_plan(0)},a.prototype._tap_btn_plan1=function(){this._use_plan(1)},a.prototype._tap_btn_plan2=function(){this._use_plan(2)},a.prototype._tap_btn_plan3=function(){this._use_plan(3)},a.prototype._tap_btn_plan4=function(){this._use_plan(4)},a.prototype._tap_btn_plan5=function(){this._use_plan(5)},a.prototype._use_plan=function(t){var r=this,o=(r["btn_plan"+t],r.tableCtrl.betPlans||{})[t];if(o){if(e.GW.mgr.channel)if(e.GW.mgr.channel.shouldBlockHedge||!1){for(var a in o){if(r.rltBetMgr.checkWhetherBetIsHedge(a))return}if(r.doesPlanHaveHedge(o))return}for(var a in r.rltBetMgr.setCurrentHitBetType("plan_"+t),o)r.rltBetMgr.bet(a,o[a],!1);r.rltBetMgr.clearAllHedgeInBetArea(),r.rltBetMgr.checkAllBetsAndLockHedge()}},a.prototype.doesPlanHaveHedge=function(e){for(var t=CONST.betType,r=[[t.roulette.red,t.roulette.black],[t.roulette.odd,t.roulette.even],[t.roulette.big,t.roulette.small]],o=0,a=0;a<r.length;a++){for(var i=0;i<r[a].length;i++)e[r[a][i]]&&o++;if(o>=2)return!0;o=0}return!1},a.prototype._tap_btn_edit=function(){var r=this;return e.RCD.mgr.recordState(e.RCD.RcdState.RLT_EDIT),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):void t.RltBetPlan.show({tableCtrl:r.tableCtrl}).onClose((function(){mouse.setMouseMoveEnabled(!0),r.addEventListener(mouse.MouseEvent.MOUSE_MOVE,r.onMouseMove,r),r._refreshBetPlan()}))},a.prototype._betNumChanged=function(){},a.prototype.onChipDrop=function(e,t){var r=this,o=r.getTablePoint(e,t);r.rltBetMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)},a.prototype.onChipMove=function(e,t){var r=this.getTablePoint(e,t);this.rltBetMgr.chipMoveCheck(r.x,r.y)},a.prototype.onChipChoose=function(){},a.prototype.getTablePoint=function(e,t){return new egret.Point(e,t)},a.prototype._gameStateChange=function(e){var t=this;switch(e){case CONST.gameState.betting:var r=mo.DATE.now(),o=t.tableCtrl.notifyMs-(r-t.tableCtrl.roundCtrl.startTime.getTime());o>0?(t.stopBet(!0),setTimeout((function(){t.stopBet(!1)}),o)):t.stopBet(!1),t.rltBetMgr&&(t.rltBetMgr.clearAllHedgeInBetArea(),t.rltBetMgr.checkConfirmedBetsAndLockHedge());break;case CONST.gameState.shuffle:t.stopBet(!0);break;case CONST.gameState.stopBet:t.stopBet(!0),t.rltBetMgr.clearAllHedgeInBetArea(),t.rltBetMgr.checkConfirmedBetsAndLockHedge();break;case CONST.gameState.payout:t.betAreaSettlement(),t.rltBetMgr.clearAllHedgeInBetArea()}},a.prototype.stopBet=function(e){this.rltBetMgr.stopBet(e)},a.prototype.betFinalConfirm=function(){this.rltBetMgr.betFinalConfirm(),this._betNumChanged()},a.prototype.betAreaSettlement=function(){this.rltBetMgr.betAreaSettlement()},a.prototype._initBetArea1st=function(){var e=this;e.comp_betChart1st.setData({betMgr:e.rltBetMgr,has2nd:!0}),e.comp_betChart1st.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_betChart1st.x+t.localX,e.comp_betChart1st.y+t.localY)}),e),e.comp_betChart1st.addEventListener(egret.TouchEvent.TOUCH_END,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.onBetAreaTap(e.comp_betChart1st.x+t.localX,e.comp_betChart1st.y+t.localY,e.chipBar.chipValue,!0),e.rltBetMgr.clearAllHedgeInBetArea(),e.rltBetMgr.checkAllBetsAndLockHedge()}),e),e.comp_betChart1st.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_betChart1st.x+t.localX,e.comp_betChart1st.y+t.localY)}),e)},a.prototype._initBetArea2nd=function(){var e=this;e.comp_sideChart.setData({betMgr:e.rltBetMgr,betAreaList:e.comp_betChart1st.betAreaList}),e.comp_sideChart.addEventListener(egret.TouchEvent.TOUCH_BEGIN,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_sideChart.x+t.localX,e.comp_sideChart.y+t.localY)}),e),e.comp_sideChart.addEventListener(egret.TouchEvent.TOUCH_END,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.onBetAreaTap(e.comp_sideChart.x+t.localX,e.comp_sideChart.y+t.localY,e.chipBar.chipValue)}),e),e.comp_sideChart.addEventListener(egret.TouchEvent.TOUCH_MOVE,(function(t){e.rltBetMgr.isFirstPlay=!1,e.rltBetMgr.chipMoveCheck(e.comp_sideChart.x+t.localX,e.comp_sideChart.y+t.localY)}),e)},a.prototype.onExit=function(){o.prototype.onExit.call(this);var t=this;t.rltBetMgr.reset(),t.rltBetMgr.unAll(),t.rltBetMgr.doDtor(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!1,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!1,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!1,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!1,e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t),e.COMM.BONUS.leaveBonusDlg(),mo.emitter.emit("closedlg")},a.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},a}(e.BASE.BaseTableLayer);t.RltTablePC35=o,__reflect(o.prototype,"G.RLT.RltTablePC35"),e.GC.gc.registerClass(o.__className,o)}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.Payout,o=e.COMM.IBetMgrEvent,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.animationIndex=1,e.animationMaxIndex=8,e.maxSumShowNum=12,e.noBetRoundCount=0,e.lastGrp_btn_undo_confirmIndex=[-1,-1],e.doubleBet=!1,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);var e=this;e.initKeepResult(),e._Item_list_history=t.RltStatHistoryItemPC35,e.anylyst=new t.LuzhuAnalyst,e._historyData=[]},i.prototype.initKeepResult=function(){var e=this;e.keepResult=[],e.keepResult_Small=37,e.keepResult_Even=38,e.keepResult_Red=39,e.keepResult_Black=40,e.keepResult_Odd=41,e.keepResult_Big=42;for(var t=0;t<=e.keepResult_Big;t++)e.keepResult.push(0)},i.prototype.addKeepResult=function(e){var t=this;t.justEnterGame||e>t.keepResult_Big||0>e||(t.keepResult[e]++,t.resetKeepResultOnlyOppose(e))},i.prototype.resetKeepResultOnlyNumber=function(){for(var e=0;e<this.keepResult_Small;e++)this.keepResult[e]=0},i.prototype.resetKeepResultOnlyOppose=function(e){var t=this;switch(e){case t.keepResult_Small:t.resetKeepResultByTarget(t.keepResult_Big);break;case t.keepResult_Big:t.resetKeepResultByTarget(t.keepResult_Small);break;case t.keepResult_Odd:t.resetKeepResultByTarget(t.keepResult_Even);break;case t.keepResult_Even:t.resetKeepResultByTarget(t.keepResult_Odd);break;case t.keepResult_Red:t.resetKeepResultByTarget(t.keepResult_Black);break;case t.keepResult_Black:t.resetKeepResultByTarget(t.keepResult_Red);break;default:t.resetKeepResultNumberBeside(e)}},i.prototype.resetKeepResultNumberBeside=function(e){for(var t=0;t<this.keepResult_Small;t++)t!=e&&(this.keepResult[t]=0)},i.prototype.resetKeepResultByTarget=function(e){e>this.keepResult_Big||0>e||(this.keepResult[e]=0)},i.prototype.getKeepResultBigThan=function(e){for(var t=0;t<=this.keepResult_Big;t++)if(this.keepResult[t]>=e)return t;return-1},i.prototype.checkandPlayResultSound=function(){var e=this,t=e.getKeepResultBigThan(2);if(-1!=t){if(t<e.keepResult_Small)return egret.Tween.get(e.scr_zhupanLu).wait(4e3).call((function(){e.tableCtrl&&e.tableCtrl.playAudio("r_samex2")})),void e.resetKeepResultOnlyNumber();if((t=e.getKeepResultBigThan(3))==e.keepResult_Small||t==e.keepResult_Big||t==e.keepResult_Odd||t==e.keepResult_Even||t==e.keepResult_Red||t==e.keepResult_Black){var r="";switch(t){case e.keepResult_Small:r="r_smallx3";break;case e.keepResult_Big:r="r_bigx3";break;case e.keepResult_Odd:r="r_oddx3";break;case e.keepResult_Even:r="r_evenx3";break;case e.keepResult_Red:r="r_redx3";break;case e.keepResult_Black:r="r_blackx3"}if(""!=r)egret.Tween.get(e.scr_zhupanLu).wait(4e3).call((function(){e.tableCtrl&&e.tableCtrl.playAudio(r)}));e.resetKeepResultByTarget(t)}}},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var e=this;e.historyScroller=e.viewStack.getChildAt(1),e._setupLuzuPainter(),e.compTimerState.audioEnabled=!0},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);var t=this,r=t.tableCtrl;t.compTimerState.tableCtrl=r,t._refreshLuzhu(),t.grp_btn_undo_confirm.visible=!1,t.BetSettingLayer=new e.COMM.BetSetting,t.BetSettingLayer.tableCtrl=t.tableCtrl,t.grp_bet_setting.addChild(t.BetSettingLayer),t.onEmitter(mo.emitter,"onRoomShortcutExpand",t.onRoomShortcutExpand),"ta_in"==mo.PROJ.lang&&(t.label_result_col.scaleX=.35),mo.emitter.on("showDynamicConfirm",t.showDynamicConfirmGroup,t),mo.emitter.on("hideDynamicConfirm",t.hideDynamicConfirmGroup,t),t.showAnimation(),t._miniBet=new e.BASE.MiniBet,t._miniBet.scaleX=.5,t._miniBet.scaleY=.5,t._miniBet.visible=!1,t._miniBet.bg_img_forRlt.visible=!0,t.addChild(t._miniBet)},i.prototype.onExit=function(){a.prototype.onExit.call(this),mo.emitter.unAll("showDynamicConfirm"),mo.emitter.unAll("hideDynamicConfirm")},i.prototype.showDynamicConfirmGroup=function(t,r){var o=this;if(o.grp_btn_undo_confirm){var a,i;a=.7*o.grp_btn_undo_confirm.width,i=.7*o.grp_btn_undo_confirm.height,o.grp_btn_undo_confirm.visible=!0;var n=o.rltBetMgr.getCurrentHitBetAreaShape(),s=0,l=0,c=0,p=r.width;r.height;if(n){var _=n.poly.sort((function(e,t){return e.x==t.x?e.y-t.y:e.x-t.x}));p=Math.abs(_[0].x-_[_.length-1].x),c=_[0].x;var u=n.poly.sort((function(e,t){return e.y==t.y?e.x-t.x:e.y-t.y}));Math.abs(u[0].y-u[u.length-1].y);var h=u[u.length-1].y;s=c+2+8-a/2,l=h+5,("rltDC"==n.type||"rltTC"==n.type||"rltB0"==n.type||"rltOrphan"==n.type)&&(s=c+p/2-a/2,"rltDC"==n.type&&(s-=25),"rltOrphan"==n.type&&(s+=30)),n.type.includes("plan_")&&(s=c+p/2-a/2,l+=5,"plan_0"==n.type&&(s+=10)),("214"==n.type||"212"==n.type||"209"==n.type||"210"==n.type||"211"==n.type||"213"==n.type)&&(l=h-3-22-5-i)}else s=820,l=610;155>s?s=160:s+a>1280&&(s=1280-a-5),l+i>664&&(s=c+2+16+5,l=664-i-5),o.doubleBet?(o.grp_btn_undo_confirm.x=o.lastGrp_btn_undo_confirmIndex[0],o.grp_btn_undo_confirm.y=o.lastGrp_btn_undo_confirmIndex[1]):(o.grp_btn_undo_confirm.x=s,o.grp_btn_undo_confirm.y=l);var m=o.rltBetMgr.betRecoders;for(var d in m){var b=e.UTIL.getRange(o.tableCtrl.type,o.tableCtrl.rangeList,d)[0];m[d].unconfirmedBet>0&&r.type==d&&b<=m[d].totalBet&&(o.lastGrp_btn_undo_confirmIndex[0]=o.grp_btn_undo_confirm.x,o.lastGrp_btn_undo_confirmIndex[1]=o.grp_btn_undo_confirm.y)}}o._miniBet&&o.showMiniBet(t,r.type)},i.prototype.changeMiniBetPosition=function(e,t){var r=this;if(r._miniBet.anchorOffsetX=0,r._miniBet.x=e.x,r._miniBet.y=e.y,-1!=t.indexOf("200")&&(-1!=t.indexOf(":0")?r._miniBet.y+=20:(r._miniBet.y-=25,r._miniBet.x-=25)),-1!=t.indexOf("202")&&(r._miniBet.x-=35,r._miniBet.y-=45),-1!=t.indexOf("206")&&(r._miniBet.x-=45,r._miniBet.y-=45),-1!=t.indexOf("203")&&(r._miniBet.x-=45,r._miniBet.y-=50),-1!=t.indexOf("207")&&(r._miniBet.y-=5,r._miniBet.x-=25),-1!=t.indexOf("208")&&(r._miniBet.y-=15,r._miniBet.x+=45),(-1!=t.indexOf("214")||-1!=t.indexOf("212")||-1!=t.indexOf("209")||-1!=t.indexOf("210")||-1!=t.indexOf("211")||-1!=t.indexOf("213"))&&(r._miniBet.y+=30),-1!=t.indexOf("201"))if(-1!=t.indexOf(":0"))r._miniBet.y-=40,r._miniBet.x-=25;else{var o=Number(t.substring(t.indexOf(":")+1,t.indexOf(",")));Number(t.substring(t.indexOf(",")+1))-o==3?(r._miniBet.y-=40,r._miniBet.x-=45):(r._miniBet.y-=52,r._miniBet.x-=35)}-1!=t.indexOf("204")&&(r._miniBet.y-=45,r._miniBet.x-=25),-1!=t.indexOf("205")&&(r._miniBet.y-=45,r._miniBet.x-=15);-1!=["200:0","200:1","200:2","200:3","201:0,3","201:0,2","201:0,1","204:0,1,2","204:0,2,3","205"].indexOf(t)&&(r._miniBet.x+=13)},i.prototype.showMiniBet=function(t,r){var o=this,a=o.rltBetMgr.betRecoders;for(var i in a){var n=e.UTIL.getRange(o.tableCtrl.type,o.tableCtrl.rangeList,i)[0];a[i].unconfirmedBet>0&&r==i&&(o.changeMiniBetPosition(t,i),o._miniBet.label_limitValue.text=e.UTIL.NUM.getSplitNumStr(n),o._miniBet.visible=n>a[i].totalBet)}},i.prototype.hideDynamicConfirmGroup=function(){var t=this;if(t.grp_btn_undo_confirm){var r=e.stageUtil.getHome();(t.tableCtrl.gameState!=CONST.gameState.betting||0==r.tray_dlg.numChildren)&&(t.tableCtrl.gameState==CONST.gameState.betting?(t.grp_btn_undo_confirm.visible=t.rltBetMgr.hasUnConfirmedBet(),t.grp_btn_undo_confirm.x=t.lastGrp_btn_undo_confirmIndex[0],t.grp_btn_undo_confirm.y=t.lastGrp_btn_undo_confirmIndex[1]):t.grp_btn_undo_confirm.visible=!1,t._miniBet.visible=!1)}},i.prototype.onRoomShortcutExpand=function(e){var t=this,r=e?190:100;egret.Tween.get(t.grp_result_show).to({left:r},300).call((function(){egret.Tween.removeTweens(t.grp_result_show)})),r=e?230:140,egret.Tween.get(t.compTimerState).to({left:r},300).call((function(){egret.Tween.removeTweens(t.compTimerState)}))},i.prototype.dataChanged=function(){var t=this;a.prototype.dataChanged.call(this),t.justEnterGame=!0;var r=t.tableCtrl=t.data.tableCtrl;t.rltBetMgr=t.data.rltBetMgr,t.rltBetMgr.on(o.ON_BET_AMOUNT_CHG,t._betNumChanged,t),t.onEmitter(r,CONST.BBT_table.shuffle,t._shuffle),t.onEmitter(r,CONST.BBT_table.openRound,t._openRound),t.onEmitter(r,CONST.BBT_table.payout,t._payout),t.onEmitter(r,CONST.BBT_table.betStop,t._betStop),t.onEmitter(r,e.GTS.TableCtrl.ON_REFRESH_INFO,t._onRefreshInfo),t.onEmitter(r,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,t.resetGamePage),t.onEmitter(r,"betStopAfterAFK",t._betStopAfterAFK),t.onEmitter(mo.emitter,"deactivate",t._handleDeactivate),t._refreshRoomInfo(),t._refreshLuzhu(),t._refreshOpBtns(),t._gameStateChange(r.gameState)},i.prototype.resetGamePage=function(){var e=this;e._refreshOpBtns(),e._refreshLuzhu(),e._refreshRoomInfo(),e.rltBetMgr.recoverBetInfo(),e.hideDynamicConfirmGroup();var t=e.tableCtrl.gameState;e._gameStateChange(t)},i.prototype._handleDeactivate=function(){},i.prototype._betStopAfterAFK=function(){this.rltBetMgr.betFinalConfirm()},i.prototype._onRefreshInfo=function(){var e=this;e.rltBetMgr.recoverBetInfo(),e._refreshRoomInfo(),e._refreshLuzhu(),e._refreshOpBtns(),e._gameStateChange(e.tableCtrl.gameState)},i.prototype._shuffle=function(){var e=this;e.justEnterGame=!1,e.rltBetMgr.clear(),e._refreshRoomInfo(),e._gameStateChange(CONST.gameState.shuffle)},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.betAreaReset(),e._refreshRoomInfo();var t=parseInt((6*Math.random()+1).toString());e.tableCtrl.playAudio("p_start_bet_"+t),e.noBetRoundCount++,e.setNoBetHint(e.noBetRoundCount),e._gameStateChange(CONST.gameState.betting)},i.prototype._payout=function(){var o=this;o.rltBetMgr.clear(),t.log("显示派彩界面"),o.justEnterGame=!1;var a=e.UTIL.calPayout(o.tableCtrl.roundCtrl,o.tableCtrl.betCtrl).payoutDetail;!mo.OBJ.isEmpty(a)?(r.show({tableCtrl:o.tableCtrl}),o.tableCtrl.playAudio("coins_drop")):(e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3)),o._gameStateChange(CONST.gameState.payout)},i.prototype._betStop=function(){var r=this;mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),t.log("停止下注"),r.justEnterGame=!1,r._gameStateChange(CONST.gameState.stopBet),r.lastGrp_btn_undo_confirmIndex[0]=-1,r.lastGrp_btn_undo_confirmIndex[1]=-1},i.prototype._click_tab_luzhu=function(e){t.log("-----dd",e.item,e.itemIndex)},i.prototype._data_list_history=function(){var e=this,t=mo.OBJ.clone(e._historyData);if(t.length<e.maxSumShowNum)for(var r=0,o=e.maxSumShowNum-t.length;o>r;r++)t.push(null);else t.push(null);return t},i.prototype.stopBet=function(e){this.rltBetMgr.stopBet(e)},i.prototype._gameStateChange=function(t){var r=this;r.showBetMoney(),r.switchResultPanel(),r.curGameState=t;var o=r.tableCtrl;switch(e.BASE.TimerStateSmallLottery.State,t){case CONST.gameState.betting:r.checkandPlayResultSound(),r.tableCtrl.roundCount<=1&&r._refreshLuzhu(),r.stopBet(!1),r.btn_again.enabled=r.rltBetMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_again.enabled=!1,r.btn_again.visible=!1,r.btn_double.enabled=!0);var a=o.getBetStopTime();if(a){var i=a.getTime()-mo.DATE.now()-1e3*o.betSec;0>i&&(i=0),setTimeout((function(){r.compTimerState.stateBetting(),r.compTimerState.refreshTime(o.betSec,a)}),i)}else r.compTimerState.stateClearing();break;case CONST.gameState.shuffle:r.stopBet(!0),r._refreshLuzhu(),r.compTimerState.stateShuffle();break;case CONST.gameState.stopBet:r.stopBet(!0),r.openCloseBtns(),r.betFinalConfirm(),r.compTimerState.stateClearing(),r.justEnterGame||o.playAudio("time_out_notice");break;case CONST.gameState.payout:r.stopBet(!0),r.rltBetMgr.betAreaSettlement(),r.compTimerState.stateClearing(),r._refreshLuzhu()}},i.prototype.refreshStatRatio=function(e){this.rltStatRatio.setData({tableCtrl:e})},i.prototype.betAreaReset=function(){this.rltBetMgr.clear()},i.prototype.betFinalConfirm=function(){this.rltBetMgr.betFinalConfirm(),this._betNumChanged()},i.prototype._refreshLuzhu=function(){var e=this;e.anylyst.setGameId(e.tableCtrl.code),e.anylyst.clearData(),e.anylyst.parseLuZhuList(e.tableCtrl.luZhuList),e.zhuPanLuPainter.setZhuPanData(e.anylyst.getZhuPanData()),e._historyData=e.anylyst.getZhuPanData(),e.refreshList("list_history"),e.historyScroller.validateNow(),e.historyScroller.width<e.historyScroller.viewport.contentWidth&&(e.historyScroller.viewport.scrollH=e.historyScroller.viewport.contentWidth-e.historyScroller.width),e.rltStatHot.setData({anylyst:e.anylyst}),e.rltStatHot.grp_label.width>e.viewStack.width&&(e.grp_hot.scrollH=e.rltStatHot.grp_label.width-e.viewStack.width),e.refreshStatRatio(e.tableCtrl)},i.prototype._refreshRoomInfo=function(){this.tableInfo.setData({tableCtrl:this.tableCtrl})},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this;t.rltBetMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.rltBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):(t.btn_again.enabled=t.rltBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0))},i.prototype.checkIsBet=function(){var e=this.rltBetMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},i.prototype._setupLuzuPainter=function(){var e={gridSize:17,showGrid:!0,isScroll:!0,maxCol:51,maxRow:6};e.res=CONST.rtlNumRes,this.zhuPanLuPainter=new t.ZhuPanLuPainter(this.scr_zhupanLu,e)},i.prototype._betNumChanged=function(){this._refreshOpBtns(),this.showBetMoney()},i.prototype.showBetMoney=function(){var t=this;t.tableInfo.setData({tableCtrl:t.tableCtrl});var r=t.tableCtrl.betCtrl.betDetail4Dis,o=0;if(r)for(var a in r)o+=r[a];t.label_betNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(o)},i.prototype._refreshOpBtns=function(){var e=this;e.tableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.rltBetMgr.hasUnConfirmedBet())},i.prototype.switchResultPanel=function(){var e=this;if(e.tableCtrl.gameState==CONST.gameState.payout){var t=e.tableCtrl.roundCtrl,r=t.srcResults,o=t.results;if(o){e.label_waitResult.visible=!1,e.grp_finish.visible=!0;var a=r[0];e.addKeepResult(a),e.ico_resultNum.source=CONST.rtlResultNumRes[a];var i=0==a;if(e.label_result_bs.visible=!i,e.label_result_col.visible=!i,e.label_result_da.visible=!i,e.label_result_rb.visible=!i,e.ico_resultNum.visible=!0,i)return;var n=CONST.langCode.betType,s=void 0,l=void 0;-1!=o.indexOf(CONST.betType.roulette.big)?(s=n[CONST.betType.roulette.big],e.addKeepResult(e.keepResult_Big)):(s=n[CONST.betType.roulette.small],e.addKeepResult(e.keepResult_Small)),e.label_result_bs.text=mo.D.langCodeToTxt(s),e.label_result_bs.width>e.label_result_bs.wantWidth&&(e.label_result_bs.scaleX=e.label_result_bs.wantWidth/e.label_result_bs.width/2),-1!=o.indexOf(CONST.betType.roulette.red)?(l=n[CONST.betType.roulette.red],e.addKeepResult(e.keepResult_Red)):(l=n[CONST.betType.roulette.black],e.addKeepResult(e.keepResult_Black)),e.addKeepResult(-1!=o.indexOf(CONST.betType.roulette.odd)?e.keepResult_Odd:e.keepResult_Even),e.label_result_rb.text=mo.D.langCodeToTxt(l),e.label_result_rb.width>e.label_result_rb.wantWidth&&(e.label_result_rb.scaleX=e.label_result_rb.wantWidth/e.label_result_rb.width/2);for(var c=0;3>c;c++){var p=CONST.betType.roulette.dozen+":"+c,_=CONST.betType.roulette.column+":"+c;o.indexOf(p)>=0&&(e.label_result_da.text=mo.D.langCodeToTxt(n[p]),e.label_result_da.width>e.label_result_da.wantWidth&&(e.label_result_da.scaleX=e.label_result_da.wantWidth/e.label_result_da.width/2)),o.indexOf(_)>=0&&(e.label_result_col.text=mo.D.langCodeToTxt(n[_]))}}}else e.label_waitResult.visible=!0,e.ico_resultNum.source="",e.ico_resultNum.visible=!1,e.grp_finish.visible=!1},i.prototype._tap_btn_limit=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_ROOM_LIMIT),e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_confirm=function(){var r=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),r.rltBetMgr.startBet();var o=(r.rltBetMgr.unBetInvalidTypes(),r.rltBetMgr.packUnConfirmedBet());mo.OBJ.isEmpty(o)?(r._betNumChanged(),r.rltBetMgr.finishBet(),r.rltBetMgr.clearAllHedgeInBetArea(),r.rltBetMgr.checkConfirmedBetsAndLockHedge()):r.tableCtrl.bet(o,(function(){r.tableCtrl.playAudio("p_bet_success"),t.log("下注成功"),mo.MSG.show(e.id_c_msgCode.bacc_bet_success),r.rltBetMgr.confirmBet(),r._betNumChanged(),r.rltBetMgr.finishBet(),r.rltBetMgr.clearAllHedgeInBetArea(),r.rltBetMgr.checkConfirmedBetsAndLockHedge(),r.noBetRoundCount=0}),(function(){r.rltBetMgr.undo(),r.rltBetMgr.betFinalConfirm(),r._betNumChanged(),r.rltBetMgr.finishBet(),r.rltBetMgr.clearAllHedgeInBetArea(),r.rltBetMgr.checkConfirmedBetsAndLockHedge()}))},i.prototype._tap_btn_again=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),t.rltBetMgr.redoBet(),t._betNumChanged(),t.rltBetMgr.clearAllHedgeInBetArea(),t.rltBetMgr.checkAllBetsAndLockHedge()},i.prototype._tap_btn_double=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),t.doubleBet=!0,t.rltBetMgr.doubleBet(),t._betNumChanged(),t.doubleBet=!1,e.RCD.log_mgr.sendEvent_ClientButton("game.double")},i.prototype._tap_btn_undo=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),t.rltBetMgr.undo(),t._betNumChanged(),t.rltBetMgr.clearAllHedgeInBetArea(),t.rltBetMgr.checkConfirmedBetsAndLockHedge()},i.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},i.prototype.showAnimation=function(){var e=this;if(e.confirm_animation){e.animationTimerId&&(clearInterval(e.animationTimerId),e.animationTimerId=null),e.confirm_animation.visible=!0;e.animationTimerId=setInterval((function(){e.animationIndex++,e.animationIndex>e.animationMaxIndex&&(e.animationIndex=1);e.confirm_animation.source="dg_confirm_btn_eff_"+e.animationIndex}),100)}},i.prototype.setNoBetHint=function(){},i}(mo.EUI.Layer);t.RltBottomBarPC35=a,__reflect(a.prototype,"G.RLT.RltBottomBarPC35")}(e.RLT||(e.RLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=mo.D.Queue,o=function(t){function o(r,o,a,i,n,s,l,c){var p=t.call(this,r,o)||this;p.inArea=!1,p._betCallback=null,p._unbetCallback=null,p.isInSettlement=!1;var _=p;if(_._betCallback=s,_._unbetCallback=l,i&&(_.img_betType=i),a&&(_.img_shadow=a),_.img_confirm=r.getChildByName("img_confirm"),_.grp_betNum=r.getChildByName("grp_betNum"),i&&(_.orgSource=_.img_betType.source),_.chipArea=n,_.tableCtrl=c,c)for(var u=c.virtualInfoList||[],h=0;h<u.length;h++){var m=u[h];m&&m.isSelf&&(_.curDeskNum=h)}return r&&r.parent&&(_.baseImgDisable=r.parent.getChildByName("base_img_disable_"+o),_.baseIsDisable=!1),_.betType==CONST.betType.baccarat.banker&&(e.GTS.mgr.on("brokerageRequiredChange",_.changeOrgSource,_),_.changeOrgSource()),_.chipList=[],_.reset(),p}return __extends(o,t),o.prototype.toggleDisableImage=function(e){var t=this;t.baseIsDisable!=e&&(t.baseIsDisable=e,t.baseImgDisable&&(t.baseImgDisable.alpha=e?1:0))},o.prototype.setBetMgr=function(e){t.prototype.setBetMgr.call(this,e);this.initMiniBet()},o.prototype.initMiniBet=function(){var t=this;if(!t._miniBet&&(t._miniBet=new e.BASE.MiniBet,t._miniBet.visible=!1,t.grp_betNum&&(t._miniBet.scaleX=t.grp_betNum.scaleX,t._miniBet.scaleY=t.grp_betNum.scaleY),t.betArea.addChild(t._miniBet),t._miniBet&&t.mgr&&t.tableCtrl)){var r=t.betType,o=t.mgr.getRangeListByBetType(r,t.tableCtrl.type);if(o&&2==o.length){var a=o[0],i=o[1],n=i>a?a:i;t._miniBet.initMiniBet(t.betType,n)}}},o.prototype.changeOrgSource=function(){var t=this;t.orgSource=e.GTS.mgr.isBrokerageRequired()?"blk_bcr_banker":"blk_bcr_banker1",t.tableCtrl.isMatch&&(t.orgSource=t.tableCtrl.brokerageRequired?"blk_bcr_banker":"blk_bcr_banker1")},o.prototype.reset=function(){var e=this;e.img_confirm&&(e.img_confirm.visible=!1),e.img_betType&&(e.img_betType.source=this.orgSource),e.img_shadow&&(e.img_shadow.visible=!1),e.grp_betNum&&(e.grp_betNum.reset(),e.grp_betNum.visible=!1),e.inArea=!1,e.removeAllChips(),e._miniBet&&(e._miniBet.visible=!1),t.prototype.reset.call(this)},o.prototype.removeAllChips=function(){for(var e=this,t=0,r=e.chipList.length;r>t;t++){var o=e.chipList[t];mo.EUI.helper.rm(o)}e.chipList.length=0},o.prototype.haveBet=function(){var e=this;e.grp_betNum.setData({num:e.betRecoder.totalBet4Dis}),e.img_betType&&(e.img_betType.source=this.orgSource.replace("_0","_1")),1==e.inArea&&e.img_shadow&&(e.img_shadow.visible=!0),e.grp_betNum.visible=!0,e.grp_betNum.betUnConfirm(),e._miniBet&&e._miniBet.checkIfShow(e.betRecoder.totalBet4Dis)},o.prototype.haveNoBet=function(){var e=this;e.img_betType&&(e.img_betType.source=this.orgSource),e.img_shadow&&(e.img_shadow.visible=!1),e.grp_betNum&&(e.grp_betNum.reset(),e.grp_betNum.visible=!1),e._miniBet&&(e._miniBet.visible=!1)},o.prototype.hangover=function(e){var t=this;t.inArea=e,t.img_shadow&&(t.img_shadow.visible=e)},o.prototype.betFinalConfirm=function(){var e=this;t.prototype.betFinalConfirm.call(this);var r=e.betRecoder.beted;e.img_confirm&&(e.img_confirm.visible=!1),e.img_shadow&&(e.img_shadow.visible=!1),r&&e.grp_betNum.betConfirm()},o.prototype.betConfirm=function(){var e=this;t.prototype.betConfirm.call(this);var r=e.betRecoder.beted;e.img_confirm&&(e.img_confirm.visible=!1),e.img_shadow&&(e.img_shadow.visible=!1),r&&e.grp_betNum&&e.grp_betNum.betConfirm(),e.grp_betNum&&(e.curBetNumObjY=e.grp_betNum.y)},o.prototype.inTheSettlement=function(e){var t=this;if(!t.isInSettlement){var r,o=t.betRecoder.confirmedBetHistory,a=(r=CONST.chipData.initpos[t.curDeskNum])[0]-t.betArea.x,i=r[1]-t.betArea.y;if(t.haveNoBet(),t.setResultsShow(e),e){var n=0,s=0;t.grp_betNum&&t.grp_betNum.emitter.emit("over",t);for(var l=0;l<o.length;l++)for(var c=o[l],p=0;p<c.length;p++){if(h=c[p].chip)t.isInSettlement=!0,n+=1,t.rmTweens(h),t.getTween(h,{loop:!1}).wait(100+50*n).to({x:a,y:i},500).call((function(){n==(s+=1)&&(t.isInSettlement=!1,t.grp_betNum&&t.grp_betNum.emitter.emit("over",t),t.deleteChip())}))}}else if(t.betType==CONST.betType.baccarat.banker||t.betType==CONST.betType.baccarat.player)if(t.tableCtrl.roundCtrl.results.indexOf(CONST.betType.baccarat.draw)>=0){var _=0,u=0;for(l=0;l<o.length;l++)for(c=o[l],p=0;p<c.length;p++){var h;if(h=c[p].chip)t.isInSettlement=!0,_+=1,t.rmTweens(h),t.getTween(h,{loop:!1}).wait(100+50*_).to({x:a,y:i},500).call((function(){_==(u+=1)&&(t.isInSettlement=!1,t.grp_betNum&&t.grp_betNum.emitter.emit("over",t),t.deleteChip())}))}}else t.lostGame();else t.lostGame()}},o.prototype.lostGame=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0,o=0,a=0;a<t.length;a++)for(var i=t[a],n=0;n<i.length;n++){var s=i[n].chip;if(s)e.isInSettlement=!0,r+=1,e.rmTweens(s),e.getTween(s,{loop:!1}).wait(100+50*r).to({x:746-e.betArea.x,y:350-e.betArea.y},500).call((function(){r==(o+=1)&&(e.isInSettlement=!1,e.deleteChip())}))}},o.prototype.deleteChip=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length;a++){var i=o[a].chip;i&&(-1!=e.betArea.getChildIndex(i)&&(mo.EUI.helper.rm(i),e.betedChipQ.enqueue(i)),e.rmTweens(i))}},o.prototype.setResultsShow=function(e){var t=this;t.img_shadow&&(t.img_confirm.visible=e,t.img_confirm.visible)&&(t.rmTweens(t.img_confirm),t.getTween(t.img_confirm,{loop:!0}).to({alpha:0},500).to({alpha:0},500).to({alpha:0},500).to({alpha:1},500).to({alpha:0},500).to({alpha:1},500).to({alpha:0},500).to({alpha:1},500).call((function(){t.rmTweens(t.img_confirm)})))},o.prototype.bet=function(e){var t=this,r=t._flyChips(e);t.betRecoder.bet(e).chip=r,t._betNumChanged(),t._betCallback&&t._betCallback(t)},o.prototype.initConfirmedV=function(t){var r=this;r.reset();var o=e.UTIL.NUM.breakUpChipV(t);if(o.length){for(var a=0;a<o.length;a++){var i=o[a],n=r.betRecoder.bet(i);r.betRecoder.confirm();var s=r._flyChips(i,a+1);n.chip=s}r.betConfirm()}r._betNumChanged()},o.prototype.unBet=function(){var e=this,r=e.betRecoder.curBetHistory;if(r.length)for(var o=0;o<r.length;o++){var a=r[o].chip;a&&mo.EUI.helper.rm(a)}e.grp_betNum&&(e.grp_betNum.y=e.curBetNumObjY),t.prototype.unBet.call(this),e._unbetCallback&&e._unbetCallback(e)},o.prototype._flyChips=function(e,t){var r=this,o=r.betRecoder.confirmedBetHistory,a=0;if(o.length>0)for(var i in o)a+=o[i].length;if(!(r.betRecoder.curBetHistory.length+a>=6)){var n,s=r._productChip(e),l=(n=CONST.chipData.initpos[r.curDeskNum])[0]-r.betArea.x,c=n[1]-r.betArea.y;s.x=l,s.y=c,r.betArea.addChild(s),r.chipList.push(s);var p=r._getValidDropPosition();if(r.grp_betNum.anchorOffsetX=.6*(r.grp_betNum.width>>1|0),r.grp_betNum.x=p.x,r.grp_betNum.y=p.y-20,t){var _=CONST.chipData.pos[r.betType][r.curDeskNum][1]-r.betArea.y-5*t;r.grp_betNum.y=_-20}else r.grp_betNum.y=p.y-20;return r.grp_betNum.setCbAfterWidthChange((function(){if(r._miniBet&&r.grp_betNum){var e=r.grp_betNum.x-r.grp_betNum.anchorOffsetX+r.grp_betNum.width/2;r._miniBet.x=e,r._miniBet.y=r.grp_betNum.y-25}})),r.rmTweens(s),r.getTween(s).wait(100).to({x:p.x,y:p.y},500).call((function(){r.rmTweens(s)})),s}},o.prototype._productChip=function(t){var o=this;o.betedChipQ||(o.betedChipQ=new r);var a=o.betedChipQ.dequeue();return a||(a=new eui.Image),a.source=e.BASE.resHelper.getBetChipRes(t),a.touchEnabled=!1,a},o.prototype._getValidDropPosition=function(e){var t,r=this;t=CONST.chipData.pos[r.betType];var o=r.betRecoder.confirmedBetHistory,a=0;if(o.length>0)for(var i in o)a+=o[i].length;var n=t[r.curDeskNum][0]-r.betArea.x,s=t[r.curDeskNum][1]-r.betArea.y,l=e?s:s-(5*r.betRecoder.curBetHistory.length+5*a);return mo.p(n,l)},o.prototype.onBetAreaClear=function(){t.prototype.onBetAreaClear.call(this);this.img_confirm.visible=!1},o}(e.COMM.BaseBetAreaHelper);t.BaccBetAreaHelper=o,__reflect(o.prototype,"G.BACC.BaccBetAreaHelper")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=mo.D.Queue,o=function(t){function o(r,o,a,i,n,s,l){var c=t.call(this,r,a)||this;c.inArea=!1,c._noShowShadow=!1,c._needToShowShadowWhenHangover=!1,c._betCallback=null,c._unbetCallback=null,c.availableBetSize=0,c.index=null,c.isInSettlement=!1;var p=c;if(p._betCallback=i,p._unbetCallback=n,p.img_shadow=r.getChildByName("img_bet_"+o),p.img_confirm=r.getChildByName("img_bet_flash_"+o),p.img_disable=r.getChildByName("img_bet_disable_"+o),p.grp_betNum=r.getChildByName("betNum_"+o),p.isDisable=!1,p.isHedge=!1,p.index=o,p.tableCtrl=s,p.baccMgr=l,s)for(var _=s.virtualInfoList||[],u=0;u<_.length;u++){var h=_[u];h&&h.isSelf&&(p.curDeskNum=u)}return e.GTS.mgr.curTableCtrl&&e.GTS.mgr.curTableCtrl.isAnchorRoom()&&(p.curDeskNum=0),p.initMiniBet(),p.chipList=[],p.reset(),c}return __extends(o,t),o.prototype.setAvailableBetSize=function(e){this.availableBetSize=e},o.prototype.setBetType=function(e){var t=this;if(t.betType!=e&&(t.betType=e,t.updateMiniBetContent(),t.betRecoder)){t.betRecoder.setBetType(e);var r=t.tableCtrl.gameState;-1==t.betType?t.reset():r!=CONST.gameState.payout&&t.reloadChips()}},o.prototype.initMiniBet=function(){var t=this;t._miniBet||(t._miniBet=new e.BASE.MiniBet,t._miniBet.visible=!1,t.grp_betNum&&(t._miniBet.scaleX=t.grp_betNum.scaleX,t._miniBet.scaleY=t.grp_betNum.scaleY),t.betArea.addChild(t._miniBet),t.updateMiniBetContent())},o.prototype.updateMiniBetContent=function(){var e=this;if(e._miniBet&&e.baccMgr&&e.tableCtrl){var t=e.betType,r=e.baccMgr.getRangeListByBetType(t,e.tableCtrl.type);if(r&&2==r.length){var o=r[0],a=r[1],i=a>o?o:a;e._miniBet.initMiniBet(e.betType,i)}}},o.prototype.setDisable=function(e){var t=this;t.isDisable!=e&&(t.isDisable=e,t.img_disable.alpha=t.isDisable?1:0)},o.prototype.checkIsHedge=function(){return this.isHedge||!1},o.prototype.setHedgeAndDisable=function(e){this.isHedge=e,this.setDisable(e)},o.prototype.noShowShadow=function(){this._noShowShadow=!0},o.prototype.forceToShowShadowWhenHangover=function(){var e=this;e._needToShowShadowWhenHangover=!0,e.baccMgr.getUnConfirmedBet(e.betType)>0&&(e.img_shadow.alpha=1)},o.prototype.reset=function(){var e=this;e.img_confirm&&(e.img_confirm.visible=!1),e.img_shadow&&(e.img_shadow.alpha=0),e.grp_betNum&&(e.grp_betNum.reset(),e.grp_betNum.visible=!1),e._miniBet&&(e._miniBet.visible=!1),e.inArea=!1,e.removeAllChips(),t.prototype.reset.call(this)},o.prototype.removeAllChips=function(){for(var e=this,t=0,r=e.chipList.length;r>t;t++){var o=e.chipList[t];mo.EUI.helper.rm(o)}e.chipList.length=0},o.prototype.haveBet=function(){var e=this;e.grp_betNum.setData({num:e.betRecoder.totalBet4Dis}),1==e.inArea&&e.img_shadow&&(e.img_shadow.alpha=1,e._noShowShadow&&(e.img_shadow.alpha=0)),e.grp_betNum.visible=!0,e.grp_betNum.betUnConfirm(),e._miniBet&&e._miniBet.checkIfShow(e.betRecoder.totalBet4Dis),e._noShowShadow=!1},o.prototype.haveNoBet=function(){var e=this;e.img_shadow&&(e.img_shadow.alpha=0),e.grp_betNum&&(e.grp_betNum.reset(),e.grp_betNum.visible=!1),e._miniBet&&(e._miniBet.visible=!1)},o.prototype.refreshBetNum=function(e){var t=this;t.grp_betNum.setData({num:t.betRecoder.totalBet4Dis}),1==t.inArea&&t.img_shadow&&(t.img_shadow.alpha=1),t.grp_betNum.visible=!0,e?t.grp_betNum.betConfirm():t.grp_betNum.betUnConfirm(),t._miniBet&&t._miniBet.checkIfShow(t.betRecoder.totalBet4Dis)},o.prototype.hangover=function(e){var t=this;t.inArea=!0,t.img_shadow&&(t.img_shadow.alpha=e?1:0,t._needToShowShadowWhenHangover=!1)},o.prototype.betFinalConfirm=function(){var e=this;t.prototype.betFinalConfirm.call(this);var r=e.betRecoder.beted;e.img_confirm&&(e.img_confirm.visible=!1),e.img_shadow&&(e.img_shadow.alpha=0),r&&e.grp_betNum.betConfirm()},o.prototype.betConfirm=function(){var e=this;t.prototype.betConfirm.call(this);var r=e.betRecoder.beted;e.img_confirm&&(e.img_confirm.visible=!1),e.img_shadow&&(e.img_shadow.alpha=0),r&&e.grp_betNum&&e.grp_betNum.betConfirm(),e.grp_betNum&&(e.curBetNumObjY=e.grp_betNum.y)},o.prototype.inTheSettlement=function(e){var t=this;if(!t.isInSettlement){var r,o=t.betRecoder.confirmedBetHistory,a=(r=CONST.chipData.initpos[t.curDeskNum])[0]-t.betArea.x,i=r[1]-t.betArea.y;if(t.haveNoBet(),t.setResultsShow(e),e){var n=0,s=0;t.grp_betNum&&t.grp_betNum.emitter.emit("over",t);for(var l=0;l<o.length;l++)for(var c=o[l],p=0;p<c.length;p++){if(h=c[p].chip)t.isInSettlement=!0,n+=1,t.rmTweens(h),t.getTween(h,{loop:!1}).wait(100+50*n).to({x:a,y:i},500).call((function(){n==(s+=1)&&(t.isInSettlement=!1,t.deleteChip())}))}}else if(t.betType==CONST.betType.baccarat.banker||t.betType==CONST.betType.baccarat.player){if(t.tableCtrl.roundCtrl.results.indexOf(CONST.betType.baccarat.draw)>=0){var _=0,u=0;for(l=0;l<o.length;l++)for(c=o[l],p=0;p<c.length;p++){var h;if(h=c[p].chip)t.isInSettlement=!0,_+=1,t.rmTweens(h),t.getTween(h,{loop:!1}).wait(100+50*_).to({x:a,y:i},500).call((function(){_==(u+=1)&&(t.isInSettlement=!1,t.deleteChip())}))}}else t.lostGame();t.grp_betNum.emitter.emit("over",t)}else t.lostGame();t.grp_betNum.emitter.emit("over",t)}},o.prototype.updateResultsShow=function(){var e=this;if(e.tableCtrl&&e.tableCtrl.gameState==CONST.gameState.payout){var t=e.tableCtrl;if(t.luZhuList.length>0){var r=t.luZhuList[t.luZhuList.length-1].results;t.luZhuList.length>1&&(r=r||t.luZhuList[t.luZhuList.length-2].results);var o=r.indexOf(e.betType)>=0;e.setResultsShow(o)}}},o.prototype.lostGame=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0,o=0,a=0;a<t.length;a++)for(var i=t[a],n=0;n<i.length;n++){var s=i[n].chip;if(s){e.isInSettlement=!0,r+=1,e.rmTweens(s);var l=518-e.betArea.x-30,c=-e.betArea.y-60;e.getTween(s,{loop:!1}).wait(100+50*r).to({x:l,y:c},500).call((function(){r==(o+=1)&&(e.isInSettlement=!1,e.deleteChip())}))}}},o.prototype.deleteChip=function(){for(var e=this,t=0,r=e.chipList.length;r>t;t++){var o=e.chipList[t];o&&(-1!=e.betArea.getChildIndex(o)&&(mo.EUI.helper.rm(o),e.betedChipQ.enqueue(o)),e.rmTweens(o))}},o.prototype.setResultsShow=function(e){var t=this;if(t.img_shadow){if(mo.emitter.emit("customeResetBetArea",t.betType),t.isDisable)return void(t.img_confirm.alpha=0);if(t.img_confirm.visible=e,t.img_confirm.visible)t.rmTweens(t.img_confirm),t.getTween(t.img_confirm,{loop:!0}).to({alpha:0},500).to({alpha:0},500).to({alpha:0},500).to({alpha:1},500).to({alpha:0},500).to({alpha:1},500).to({alpha:0},500).to({alpha:1},500).call((function(){t.rmTweens(t.img_confirm)}))}},o.prototype.bet=function(e){var t=this,r=t._flyChips(e,!0);t.betRecoder.bet(e).chip=r,t._betNumChanged(),t._betCallback&&t._betCallback(t)},o.prototype.initConfirmedV=function(t){var r=this;r.reset();var o=e.UTIL.NUM.breakUpChipV(t);if(o.length){for(var a=0;a<o.length;a++){var i=o[a],n=r.betRecoder.bet(i);r.betRecoder.confirm();var s=r._flyChips(i,!0);n.chip=s}r.betConfirm(),mo.emitter.emit("customerBetNumChange",r.betType)}r._betNumChanged()},o.prototype.reloadChips=function(){var t=this;t.reset();var r=t.baccMgr.getConfirmedBet(t.betType),o=t.baccMgr.getUnConfirmedBet(t.betType);if(0!=r||0!=o){var a=!1,i=e.UTIL.NUM.breakUpChipV(r);if(i.length){for(var n=0;n<i.length;n++){var s=i[n],l=t.betRecoder.bet(s);t.betRecoder.confirm();var c=t._flyChips(s,!1);l.chip=c}a=!0}var p=e.UTIL.NUM.breakUpChipV(o);if(p.length){for(n=0;n<p.length;n++){s=p[n],l=t.betRecoder.bet(s),c=t._flyChips(s,!1);l.chip=c}a=!1}t.refreshBetNum(a)}},o.prototype.unBet=function(){var e=this,r=e.betRecoder.curBetHistory;if(r.length)for(var o=0;o<r.length;o++){var a=r[o].chip;a&&mo.EUI.helper.rm(a)}e.grp_betNum&&(e.grp_betNum.y=e.curBetNumObjY),t.prototype.unBet.call(this),e._unbetCallback&&e._unbetCallback(e)},o.prototype._flyChips=function(e,t){var r=this,o=r.betRecoder.confirmedBetHistory,a=0;if(o.length>0)for(var i in o)a+=o[i].length;if(!(r.betRecoder.curBetHistory.length+a>=6)){var n=r._productChip(e),s=CONST.chipData.initpos[r.curDeskNum],l=s[0]-r.betArea.x,c=s[1]-r.betArea.y;n.x=l,n.y=c,r.betArea.addChild(n),r.chipList.push(n);var p=r._getValidDropPosition();if(r.grp_betNum.x=p.x,r.grp_betNum.y=p.y-20,r._miniBet.setAnchorOffsetX(0),r._miniBet.x=r.grp_betNum.x,r._miniBet.y=r.grp_betNum.y-25,t)r.rmTweens(n),r.getTween(n).wait(100).to({x:p.x,y:p.y},500).call((function(){r.rmTweens(n)}));else n.x=p.x,n.y=p.y;return n}},o.prototype.getOffsetForBetArea=function(){var e=this.index;switch(this.availableBetSize){case 5:if(3==e)return 30;break;case 6:if(1==e||14==e)return 35;break;case 7:if(1==e||12==e)return 35;break;case 8:if(1==e||9==e)return 35;break;case 9:if(1==e||5==e)return 35}return 0},o.prototype._productChip=function(t){var o=this;o.betedChipQ||(o.betedChipQ=new r);var a=o.betedChipQ.dequeue();return a||(a=new eui.Image),a.source=e.BASE.resHelper.getBetChipRes(t),a.touchEnabled=!1,a},o.prototype._getValidDropPosition=function(e){var t=this.betRecoder.confirmedBetHistory,r=0;if(t.length>0)for(var o in t)r+=t[o].length;var a=e?0:0-(5*this.betRecoder.curBetHistory.length+5*r);return mo.p(10,a)},o.prototype.onBetAreaClear=function(){t.prototype.onBetAreaClear.call(this);var e=this;e.img_confirm.visible=!1,e.checkIsHedge()&&e.setHedgeAndDisable(!1)},o}(e.COMM.BaseBetAreaHelper);t.CustomerBetAreaHelper=o,__reflect(o.prototype,"G.BACC.CustomerBetAreaHelper")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e._playerScore=0,e._bankerScore=0,e._tieScore=0,e}return __extends(r,t),r.prototype.setScore=function(e,t,r){this._playerScore=e,this._bankerScore=r,this._tieScore=t,this._updateScore()},r.prototype.setRound=function(e){this.label_round&&(this.label_round.text=e)},r.prototype._updateScore=function(){var t=this;t.label_PlayerScore.text=String(t._playerScore),t.label_BankerScore.text=String(t._bankerScore),t.label_TieScore.text=String(t._tieScore);var r,o,a,i=e.UTIL.NUM.calcPercent(t._tieScore,t._playerScore,t._bankerScore);a=i[0],r=i[1],o=i[2],t.label_PlayerPercent.text=r+"%",t.label_BankerPercent.text=o+"%",t.label_TiePercent.text=a+"%",0==t._playerScore&&0==t._bankerScore&&0==t._tieScore&&(t.label_PlayerPercent.text=t.label_BankerPercent.text=t.label_TiePercent.text="0%");var n=0;"0%"!=t.label_PlayerPercent.text&&n++,"0%"!=t.label_BankerPercent.text&&n++,"0%"!=t.label_TiePercent.text&&n++;var s=t.groupProgress.width-6;1==n?s=t.groupProgress.width:2==n?s=t.groupProgress.width-3:3==n&&(s=t.groupProgress.width-6);var l=!t._tieScore&&!t._playerScore&&!t._bankerScore;t.rectBanker.width=l?0:s*o/100,t.rectPlayer.width=l?0:s*r/100,t.rectTie.width=l?0:s*a/100},r}(mo.EUI.Comp);t.DtScoreInfo=r,__reflect(r.prototype,"G.BACC.DtScoreInfo")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e._playerScore=0,e._bankerScore=0,e._tieScore=0,e}return __extends(r,t),r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.setScore=function(e,t,r){this._playerScore=e,this._bankerScore=r,this._tieScore=t,this._updateScore()},r.prototype._updateScore=function(){this.label_PlayerScore.text=mo.D.langCodeToTxt("baccarat_player")+":"+String(this._playerScore),this.label_BankerScore.text=mo.D.langCodeToTxt("baccarat_banker")+":"+String(this._bankerScore),this.label_TieScore.text=mo.D.langCodeToTxt("g_tie_simple")+":"+String(this._tieScore);var t,r,o,a=e.UTIL.NUM.calcPercent(this._tieScore,this._playerScore,this._bankerScore);o=a[0],t=a[1],r=a[2],this.label_PlayerPercent.text=t+"%",this.label_BankerPercent.text=r+"%",this.label_TiePercent.text=o+"%";var i=0;"0%"==this.label_PlayerPercent.text?(this.label_PlayerPercent.visible=!1,this.rectPlayer.visible=!1):(this.label_PlayerPercent.visible=!0,this.rectPlayer.visible=!0,i+=1),"0%"==this.label_BankerPercent.text?(this.label_BankerPercent.visible=!1,this.rectBanker.visible=!1):(this.label_BankerPercent.visible=!0,this.rectBanker.visible=!0,i+=1),"0%"==this.label_TiePercent.text?(this.label_TiePercent.visible=!1,this.rectTie.visible=!1):(this.label_TiePercent.visible=!0,this.rectTie.visible=!0,i+=1);var n=this.groupProgress.width-6;if(1==i?n=this.groupProgress.width:2==i?n=this.groupProgress.width-3:3==i&&(n=this.groupProgress.width-6),this.rectBanker.width=n*r/100,this.rectPlayer.width=n*t/100,this.rectTie.width=n*o/100,this.rectTie.width>0){this.label_TiePercent.x=this.rectPlayer.width+3+this.rectTie.width/2,this.label_TiePercent.anchorOffsetX=this.label_TiePercent.width/4;var s=this.label_TiePercent.x+this.label_TiePercent.width/2+3,l=this.width-this.label_BankerPercent.width/2;s>=l&&this.label_BankerPercent.visible&&(this.label_TiePercent.x=this.label_TiePercent.x-(s-l-3))}this.rectBanker.includeInLayout=this.rectBanker.visible,this.rectPlayer.includeInLayout=this.rectPlayer.visible,this.rectTie.includeInLayout=this.rectTie.visible},r}(mo.EUI.Comp);t.BaccScoreInfo=r,__reflect(r.prototype,"G.BACC.BaccScoreInfo")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e._playerScore=0,e._bankerScore=0,e._tieScore=0,e}return __extends(r,t),r.prototype.setScore=function(e,t,r){var o=this;o._playerScore=e,o._bankerScore=r,o._tieScore=t,o._updateScore()},r.prototype.setRound=function(e){this.label_round&&(this.label_round.text=e)},r.prototype._updateScore=function(){var t=this;t.label_PlayerScore.text=String(t._playerScore),t.label_BankerScore.text=String(t._bankerScore),t.label_TieScore.text=String(t._tieScore);var r,o,a,i=e.UTIL.NUM.calcPercent(t._tieScore,t._playerScore,t._bankerScore);a=i[0],r=i[1],o=i[2],t.label_PlayerPercent.text=r+"%",t.label_BankerPercent.text=o+"%",t.label_TiePercent.text=a+"%",0==t._playerScore&&0==t._bankerScore&&0==t._tieScore&&(t.label_PlayerPercent.text=t.label_BankerPercent.text=t.label_TiePercent.text="0%");var n=0;"0%"!=t.label_PlayerPercent.text&&n++,"0%"!=t.label_BankerPercent.text&&n++,"0%"!=t.label_TiePercent.text&&n++;var s=t.groupProgress.width-6;1==n?s=t.groupProgress.width:2==n?s=t.groupProgress.width-3:3==n&&(s=t.groupProgress.width-6);var l=!t._tieScore&&!t._playerScore&&!t._bankerScore;t.rectBanker.width=l?0:s*o/100,t.rectPlayer.width=l?0:s*r/100,t.rectTie.width=l?0:s*a/100},r}(mo.EUI.Comp);t.BaccScoreInfo_tinyPoker=r,__reflect(r.prototype,"G.BACC.BaccScoreInfo_tinyPoker")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this._totalWidth=223},r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.restBetInfo=function(){var e=this;e.label_tableLimit.text="0",e.label_bNum.text="0",e.label_bRest.text="0",e.label_pNum.text="0",e.label_pRest.text="0"},r.prototype.setBetInfo=function(t,r,o,a,i){var n=this;n.label_tableLimit.text=e.UTIL.NUM.getSplitNumStr(t)+"",n.label_bNum.text=o+"",n.label_pNum.text=i+"";var s=t+a-r;s=parseFloat(s.toFixed(2)),n.label_bRest.text=e.UTIL.NUM.getSplitNumStr(s)+"";var l=t+r-a;l=parseFloat(l.toFixed(2)),n.label_pRest.text=e.UTIL.NUM.getSplitNumStr(l)+""},r}(mo.EUI.Comp);t.BaccTableLimit=r,__reflect(r.prototype,"G.BACC.BaccTableLimit")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.data},r.prototype.restMiInfo=function(){var e=this;e.label_pMaster.text=mo.D.langCodeToTxt("bacc_mi_wait_owner"),e.label_pBet.text="0",e.label_bBet.text="0",e.label_bMaster.text=mo.D.langCodeToTxt("bacc_mi_wait_owner")},r.prototype.setMiInfo=function(t,r,o,a){var i=this;i.label_pMaster.text=e.GTS.mgr.verifyEmoji(o)||mo.D.langCodeToTxt("bacc_mi_wait_owner"),i.label_pBet.text=a?e.UTIL.NUM.getSplitNumStr(a):0,i.label_bBet.text=r?e.UTIL.NUM.getSplitNumStr(r):0,i.label_pBet.text=Number(a)>1?e.UTIL.NUM.getSplitNumStr(Math.floor(Number(a)))+"":Number(a)>0?"1":"0",i.label_bBet.text=Number(r)>1?e.UTIL.NUM.getSplitNumStr(Math.floor(Number(r)))+"":Number(r)>0?"1":"0",i.label_bMaster.text=e.GTS.mgr.verifyEmoji(t)||mo.D.langCodeToTxt("bacc_mi_wait_owner")},r.prototype.pMasterOut=function(){},r.prototype.bMasterOut=function(){},r}(mo.EUI.Comp);t.BaccJMInfo=r,__reflect(r.prototype,"G.BACC.BaccJMInfo")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.BaccBetMgr,o=e.COMM.IBetMgrEvent,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.zhuPanBlink=!1,e.time=0,e.isClick=0,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);this.betMgr=new r},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var t=this;t._setupLuzuPainter(),t.grp_msg.visible=!1,t.grp_shuffle.visible=!1,t.grp_nofee.visible=!1,t.payout.visible=!1,t.tableTimer=new e.TableTimer,t.label_pp.text="0",t.label_bp.text="0"},i.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var r=this;if(r.data&&(r.justEnterGame=!0,r.tableCtrl=r.data[1],r.chipBar=r.data[2],r.tableCtrl)){if(r.changeRequiredForGLI(),r.changeBrokerageRequiredImage(),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_MOVE,r.onChipMove,r),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_DROP,r.onChipDrop,r),r.grp_container.addEventListener(egret.TouchEvent.TOUCH_TAP,r._onGrpContainerTap,r),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!0),r.addEventListener(mouse.MouseEvent.MOUSE_MOVE,r.onMouseMove,r)),r.tableCtrl!=r.oldTableCtrl){r.unEmitter(),r.betMgr.un(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.isFirst=!1,r.onEmitter(r.tableTimer,e.TableTimer.ON_TICK,r._onTick),r.onEmitter(r.tableTimer,e.TableTimer.ON_END,r._onEnd),r.onEmitter(r.tableCtrl,CONST.BBT_table.openRound,r._openRound),r.onEmitter(r.tableCtrl,CONST.BBT_table.scanCard,r._scanCard),r.onEmitter(r.tableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.tableCtrl,CONST.BBT_table.betStop,r._betStop),r.onEmitter(r.tableCtrl,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(r.tableCtrl,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(r.tableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(e.GTS.mgr,"brokerageRequiredChange",r.changeBrokerageRequiredImage);for(var i=0;3>i;i++){var n=r["card_b"+i],s=r["card_p"+i];n&&(n.setBlockTurnOvered(!0),r.onEmitter(n.emitter,"over",r._changeNumShow_banker)),s&&(s.setBlockTurnOvered(!0),r.onEmitter(s.emitter,"over",r._changeNumShow_player))}r.betMgr.reset(),r.betMgr.tableCtrl=r.tableCtrl,r._initBetArea(),r.resetTweens(),r.betMgr.on(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.oldTableCtrl=r.tableCtrl}r.analyst||(r.analyst=new t.LuzhuAnalyst(1)),r.betMgr.recoverBetInfo(),r._gameStateChange(r.tableCtrl.gameState)}},i.prototype.changeRequiredForGLI=function(){var e=this,t=":";if("zh_cn"==mo.PROJ.lang?t="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t="賠"),"en_us"==mo.PROJ.lang)(r=e.grp_betTie.getChildByName("img_betType_ratio")).text="8:1",(r=e.grp_betBD.getChildByName("img_betType_ratio")).text="11:1",(r=e.grp_betPD.getChildByName("img_betType_ratio")).text="11:1";else if("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang){var r;-1!=(r=e.grp_betP.getChildByName("img_betType_ratio")).text.indexOf(":")&&(r.text=r.text.substring(0,r.text.indexOf(":"))+t+r.text.substring(r.text.indexOf(":")+1),(r=e.grp_betTie.getChildByName("img_betType_ratio")).text=r.text.substring(0,r.text.indexOf(":"))+t+r.text.substring(r.text.indexOf(":")+1),(r=e.grp_betB.getChildByName("img_betType_ratio")).text=r.text.substring(0,r.text.indexOf(":"))+t+r.text.substring(r.text.indexOf(":")+1),(r=e.grp_betPD.getChildByName("img_betType_ratio")).text=r.text.substring(0,r.text.indexOf(":"))+t+r.text.substring(r.text.indexOf(":")+1),(r=e.grp_betBD.getChildByName("img_betType_ratio")).text=r.text.substring(0,r.text.indexOf(":"))+t+r.text.substring(r.text.indexOf(":")+1))}},i.prototype.changeBrokerageRequiredImage=function(){var t=!e.GTS.mgr.isBrokerageRequired();this.grp_nofee.visible=t,this.grp_betB.getChildByName("img_betType_ratio").text=t?"zh_cn"==mo.PROJ.lang?"1赔1":"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?"1賠1":"1:1":"en_us"==mo.PROJ.lang?"0.95:1":"zh_cn"==mo.PROJ.lang?"1赔0.95":"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang?"1賠0.95":"1:0.95"},i.prototype._changeNumShow_player=function(){this._setBPPoint(!0)},i.prototype._changeNumShow_banker=function(){this._setBPPoint(!1)},i.prototype._onRefreshInfo=function(){for(var e=this,t=0;t<e.helpList.length;t++){e.helpList[t].reset()}e.resetTweens(),e.betMgr.recoverBetInfo(),e._showCard(!1),e._gameStateChange(e.tableCtrl.gameState)},i.prototype.onMouseMove=function(e){var t=mo.EUI.uiScene.globalToLocal(e.stageX,e.stageY);this.onChipMove(t.x,t.y)},i.prototype.setBtnAgain=function(){var e=this;e.btn_again.enabled=e.betMgr.hasPreRoundBetHistory(mo.PROJ.openCustomerBet),e.btn_again.visible=e.btn_again.enabled,e.btn_again.enabled&&e.checkIsBet()&&(e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!0)},i.prototype.checkIsBet=function(){var e=this.betMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},i.prototype._gameStateChange=function(t){var r=this;switch(r.curGameState=t,r.grp_shuffle.visible=!1,t){case CONST.gameState.betting:r.stopBet(!1),r._showCard(!1),r.setBtnAgain();var o=r.tableCtrl.getBetStopTime(),a=r.tableCtrl.roundCtrl;o?r.refreshTime(a.betSec,o):r._onEnd();break;case CONST.gameState.shuffle:r.grp_shuffle.visible=!0,r.label_state.textColor=CONST.StateColor.blue,r.label_state.text=mo.D.langCodeToTxt("g_shuffling"),r.label_state.size=28,r.label_state.y=22,r.betMgr.clear(),r._showCard(!1);break;case CONST.gameState.stopBet:r._showCard(!0),r.stopBet(!0),r.stop(),r.openCloseBtns(),r.betFinalConfirm();break;case CONST.gameState.payout:var i,n;r._showCard(!0);try{n=e.UTIL.calPayout(r.tableCtrl.roundCtrl,r.tableCtrl.betCtrl).payoutDetail}catch(e){console.log(e),i=!1}i=!mo.OBJ.isEmpty(n),!r.justEnterGame&&i&&(r.payout.setData({tableCtrl:r.tableCtrl}),e.playAudio("coins_drop")),r.stopBet(!0),r.betAreaSettlement()}r._updateUI()},i.prototype._applyOvertime=function(){this._gameStateChange(this.tableCtrl.gameState)},i.prototype.resetTweens=function(){var e=this;e.grp_msg&&(egret.Tween.removeTweens(e.grp_msg),e.grp_msg.visible=!1),e.hideCards()},i.prototype.onExit=function(){var e=this;e.stop(),a.prototype.onExit.call(this),e.betMgr.reset(),e.betMgr.unAll(),e.betMgr.doDtor(),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!1),e.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,e.onMouseMove,e))},i.prototype._refreshRoomInfo=function(){var t=this,r=t.tableCtrl.roundCtrl;t.label_roomName.text=t.tableCtrl.name;var o=t.tableCtrl.countMap||{};if(r){var a=o[CONST.betType.baccarat.player]||0,i=o[CONST.betType.baccarat.banker]||0,n=o[CONST.betType.baccarat.draw]||0;this.label_PlayerScore.text=a,this.label_BankerScore.text=i,this.label_TieScore.text=n,this.label_roundNo.text=r.code||"";var s=e.UTIL.NUM.calcPercent(n,a,i),l=s[0],c=s[1],p=s[2],_=this.groupProgress.height-6;this.rectBanker.height=_*p/100,this.rectPlayer.height=_*c/100,this.rectTie.height=_*l/100}},i.prototype._onTick=function(e,t,r){var o=this;if(o.justEnterGame=!1,o.isFirst||r){var a=o.getColor4Label(t);o.label_state.textColor=a,o.label_state.text=0==t?"":t+"",o.label_state.size=45,o.label_state.y=22}o.isFirst=!1},i.prototype._onEnd=function(){var e=this;e.stop(),e.justEnterGame=!1,e._gameStateChange(CONST.gameState.stopBet)},i.prototype.getColor4Label=function(e){return e>18||e>10?CONST.StateColor.green:CONST.StateColor.red},i.prototype.refreshTime=function(e,t){this.isFirst=!0,this.tableTimer.start(1e3*e,t)},i.prototype.stop=function(){this.tableTimer.stop()},i.prototype._updateUI=function(){var e=this;e._refreshLuzhu(),e._refreshRoomInfo(),e._refreshOpBtns()},i.prototype.onChipDrop=function(e,t){var r=this;if(!(r.curGameState!=CONST.gameState.betting)){var o=r.grp_container.globalToLocal(e,t);r.betMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)}},i.prototype.onChipMove=function(e,t){var r=this.grp_container.globalToLocal(e,t);this.betMgr.chipMoveCheck(r.x,r.y)},i.prototype._scanCard=function(){this.justEnterGame=!1,this._showCard(!0,!0)},i.prototype._showCard=function(e,t){void 0===t&&(t=!1);var r=this;r.grp_showCard.visible=e,e?r._fillCards(t):r.hideCards()},i.prototype.hideCards=function(){for(var e=this,t=0;3>t;t++){var r=e["card_p"+t];r&&(r.visible=!1,r.reset()),(r=e["card_b"+t])&&(r.visible=!1,r.reset())}e.label_pp.text="0",e.label_bp.text="0"},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.zhuPanBlink=!0,e.payout.visible&&(e.payout.visible=!1),e.betMgr.clear(),e._gameStateChange(CONST.gameState.betting)},i.prototype.msgShow=function(e){var t=this;e==i.msgState.openRound?(t.label_msg.text=mo.D.langCodeToTxt("bacc_place_your_bet"),t.label_msg.style="txt_default_white"):e==i.msgState.successBet&&(t.label_msg.text=mo.D.langCodeToTxt("bacc_bet_success"),t.label_msg.style="txt_color_4"),t.grp_msg.visible=!0,egret.Tween.removeTweens(t.grp_msg);var r=egret.Tween.get(t.grp_msg);t.grp_msg.alpha=1,r.wait(2e3).to({alpha:0},2e3).call((function(){t.grp_msg.visible=!1,egret.Tween.removeTweens(t.grp_msg)}))},i.prototype._betStop=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet)},i.prototype._payout=function(){this.justEnterGame=!1,t.log("显示派彩界面"),this._gameStateChange(CONST.gameState.payout)},i.prototype._shuffle=function(){this._gameStateChange(CONST.gameState.shuffle)},i.prototype._fillCards=function(e){for(var t=this,r=t.tableCtrl.roundCtrl.srcResults||[],o=[],a=0;6>a;a++){var i=3>a?CONST.betType.baccarat.player:CONST.betType.baccarat.banker;if(t.setCard(i,a%3,r[a],e),a<r.length&&r[a]){var n=(i==CONST.betType.baccarat.player?"card_p":"card_b")+a%3;o.push(n)}}var s=o.map((function(e){return t[e].getTurnOvered()}));s.length>0&&-1==s.indexOf(!1)&&(t._setBPPoint(!0),t._setBPPoint(!1))},i.prototype.setCard=function(e,t,r,o){var a=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];a&&(a.visible=null!=r,a.setData({id:r}),null!=r&&a.turnOver(o))},i.prototype._setBPPoint=function(t){var r=this,o=r.tableCtrl.roundCtrl.srcResults||[],a=r.tableCtrl.getOpenedIndexList()||[];t?r.label_pp.text=""+e.UTIL.calBaccarat(a.indexOf(0)>=0?o[0]:null,a.indexOf(1)>=0?o[1]:null,a.indexOf(2)>=0?o[2]:null):r.label_bp.text=""+e.UTIL.calBaccarat(a.indexOf(3)>=0?o[3]:null,a.indexOf(4)>=0?o[4]:null,a.indexOf(5)>=0?o[5]:null)},i.prototype.betFinalConfirm=function(){this.betMgr.betFinalConfirm(),this._betNumChanged()},i.prototype._tap_btn_zoom=function(){t.BaccLuzhu.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_undo=function(){var e=this;0==e.isClick&&(e.betMgr.undo(),e._betNumChanged())},i.prototype._tap_btn_confirm=function(){var t=this;if(0==t.isClick){t.isClick=1,t.betMgr.startBet();var r=(t.betMgr.unBetInvalidTypes(),t.betMgr.packUnConfirmedBet());if(mo.OBJ.isEmpty(r))t._betNumChanged(),t.isClick=0,t.betMgr.finishBet();else{var o=[r,!0];t.tableCtrl.bet(o,(function(){e.playAudio("p_bet_success"),t.msgShow(i.msgState.successBet),t.betMgr.confirmBet(),t._betNumChanged(),t.isClick=0,t.betMgr.finishBet();var r=t.tableCtrl.code,o=t.tableCtrl.roundCode,a=e.GTS.mgr.isBrokerageRequired();e.GTS.mgr.setCommissionStateByRound(r,o,a),e.GTS.mgr.setCommissionStateByRoom(r,a)}),(function(){t.betMgr.undo(),t._betNumChanged(),t.isClick=0,t.betMgr.finishBet()}))}}},i.prototype._tap_btnRoomLimit=function(){e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("game.betlimit")},i.prototype._tap_btn_bankerAsk=function(){this.askLuZhu(CONST.betType.baccarat.banker),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},i.prototype._tap_btn_playerAsk=function(){this.askLuZhu(CONST.betType.baccarat.player),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},i.prototype._tap_btn_again=function(){var e=this;0==e.isClick&&(e.betMgr.redoBet(),e._betNumChanged())},i.prototype._tap_btn_double=function(){var t=this;0==t.time&&0==t.isClick&&(t.time=1,t.betMgr.doubleBet(),t._betNumChanged(),setTimeout((function(){t.time=0}),200),e.RCD.log_mgr.sendEvent_ClientButton("game.double"))},i.prototype.askLuZhu=function(e){var t=this,r=t.analyst.queryLuZhu(e);r&&(r.zhupan&&t.zhuPanLuPainter.showQueryZhu(r.zhupan),r.dalu&&t.daluPainter.showQueryZhu(r.dalu),r.dayan&&t.dayanLuPainter.showQueryZhu(r.dayan),r.xiaolu&&t.xiaoLuPainter.showQueryZhu(r.xiaolu),r.yueyou&&t.yueyouLuPainter.showQueryZhu(r.yueyou))},i.prototype._refreshLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList,r=e.analyst;if(r.clearData(),!t||0===t.length)return e.zhuPanLuPainter.setZhuPanData([]),e.daluPainter.setDaLuData([]),e.dayanLuPainter.setAnalysisData([]),e.xiaoLuPainter.setAnalysisData([]),e.yueyouLuPainter.setAnalysisData([]),e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),void e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker);for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});e.zhuPanLuPainter.setZhuPanData(r.getZhuPanData(),e.zhuPanBlink),e.daluPainter.setDaLuData(r.getDaLuData(),e.zhuPanBlink),e.dayanLuPainter.setAnalysisData(r.getDaYanLuData(),e.zhuPanBlink),e.xiaoLuPainter.setAnalysisData(r.getXiaoLuData(),e.zhuPanBlink),e.yueyouLuPainter.setAnalysisData(r.getYueYouLuData(),e.zhuPanBlink),e.zhuPanBlink=!1,e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker)},i.prototype.showQueryLuZhu=function(e,t){var r=this.analyst.queryLuZhu(t);if(r){var o=[];r.dayan&&(o[0]=r.dayan),r.xiaolu&&(o[1]=r.xiaolu),r.yueyou&&(o[2]=r.yueyou),e.setData({luZhuList:o})}else e.setData({luZhuList:[null,null,null]})},i.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:17,maxRow:6,maxCol:65,showGrid:!0,isScroll:!1};r.res=t.LZMTORes,r.lineColor=CONST.LuzhuColor.lineColor,r.fillColor=16777215,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:8,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};o.res=t.LZMTORes,o.lineColor=CONST.LuzhuColor.lineColor,o.fillColor=16777215,e.daluPainter=new t.DaluPainter(e.scr_dalu,o);var a={gridSize:8,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};a.res=t.LZMTORes,a.lineColor=CONST.LuzhuColor.lineColor,a.fillColor=16777215,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:8,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};i.res=t.LZMTORes,i.lineColor=CONST.LuzhuColor.lineColor,i.fillColor=16777215,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:8,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};n.res=t.LZMTORes,n.lineColor=CONST.LuzhuColor.lineColor,n.fillColor=16777215,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},i.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState,o=t.betMgr.betRecoders;if(t.btn_again.enabled=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.btn_double.enabled=e,e){if(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(mo.PROJ.openCustomerBet),t.btn_again.enabled)for(var a in o)if(o[a].confirmedBetHistory.length>0||o[a].curBetHistory.length>0)return void(t.btn_again.enabled=!1)}else if(r==CONST.gameState.betting)for(var a in t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(mo.PROJ.openCustomerBet),o)if(o[a].confirmedBetHistory.length>0||o[a].curBetHistory.length>0)return t.btn_again.enabled=!1,void(t.btn_double.enabled=!0)},i.prototype._betNumChanged=function(){this._refreshOpBtns()},i.prototype._refreshOpBtns=function(){var e=this;e.curGameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.betMgr.hasUnConfirmedBet())},i.prototype.stopBet=function(e){var t=this;t.betMgr.stopBet(e),e&&(t.label_state.textColor=CONST.StateColor.yellow,t.label_state.text=mo.D.langCodeToTxt("g_wait_payout"),t.label_state.size=28,t.label_state.y=22)},i.prototype._onGrpContainerTap=function(e){var t=this;if(0==t.time){t.time=1;var r=t.betMgr,o=t.grp_container.globalToLocal(e.stageX,e.stageY);r.onBetAreaTap(o.x,o.y,t.chipBar.chipValue),setTimeout((function(){t.time=0}),200)}},i.prototype._initBetArea=function(){var r,o,a=this,i=(CONST.betType.baccarat,2);a.helpList=[],(r=new t.MTOBetAreaHelper(a.grp_betPD,CONST.betType.baccarat.playerPair)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betPD.x+i,a.grp_betPD.y+i),mo.p(a.grp_betPD.x+i,a.grp_betPD.y+a.grp_betPD.height-2*i),mo.p(a.grp_betPD.x+a.grp_betPD.width-2*i,a.grp_betPD.y+a.grp_betPD.height-2*i),mo.p(a.grp_betPD.x+a.grp_betPD.width-2*i,a.grp_betPD.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.playerPair,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.playerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerPair,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betP,CONST.betType.baccarat.player)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betP.x+i,a.grp_betP.y+i),mo.p(a.grp_betP.x+i,a.grp_betP.y+a.grp_betP.height-2*i),mo.p(a.grp_betP.x+a.grp_betP.width-2*i,a.grp_betP.y+a.grp_betP.height-2*i),mo.p(a.grp_betP.x+a.grp_betP.width-2*i,a.grp_betP.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.player,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.player,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.player,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betTie,CONST.betType.baccarat.draw)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betTie.x+i,a.grp_betTie.y+i),mo.p(a.grp_betTie.x+i,a.grp_betTie.y+a.grp_betTie.height-2*i),mo.p(a.grp_betTie.x+a.grp_betTie.width-2*i,a.grp_betTie.y+a.grp_betTie.height-2*i),mo.p(a.grp_betTie.x+a.grp_betTie.width-2*i,a.grp_betTie.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.draw,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.draw,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.draw,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betB,CONST.betType.baccarat.banker)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betB.x+i,a.grp_betB.y+i),mo.p(a.grp_betB.x+i,a.grp_betB.y+a.grp_betB.height-2*i),mo.p(a.grp_betB.x+a.grp_betB.width-2*i,a.grp_betB.y+a.grp_betB.height-2*i),mo.p(a.grp_betB.x+a.grp_betB.width-2*i,a.grp_betB.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.banker,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.banker,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.banker,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betBD,CONST.betType.baccarat.bankerPair)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betBD.x+i,a.grp_betBD.y+i),mo.p(a.grp_betBD.x+i,a.grp_betBD.y+a.grp_betBD.height),mo.p(a.grp_betBD.x+a.grp_betBD.width-2*i,a.grp_betBD.y+a.grp_betBD.height),mo.p(a.grp_betBD.x+a.grp_betBD.width-2*i,a.grp_betBD.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.bankerPair,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.bankerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerPair,0)),a.helpList.push(r)},i}(mo.EUI.ItemRenderer);a.msgState={openRound:0,successBet:1},t.BaccMTOTable=a,__reflect(a.prototype,"G.BACC.BaccMTOTable")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.BaccBetMgr,o=e.COMM.IBetMgrEvent,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.zhuPanBlink=!1,e.time=0,e.isClick=0,e.isFirstEnter=!1,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);this.betMgr=new r},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var t=this;t._setupLuzuPainter(),t.grp_msg.visible=!1,t.grp_shuffle.visible=!1,t.grp_nofee.visible=!1,t.payout.visible=!1,t.tableTimer=new e.TableTimer,t.label_pp.text="0",t.label_bp.text="0"},i.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var r=this;if(r.data&&(r.justEnterGame=!0,r.tableCtrl=r.data[1],r.chipBar=r.data[2],r.tableCtrl)){if(r.changeBrokerageRequiredImage(),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_MOVE,r.onChipMove,r),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_DROP,r.onChipDrop,r),r.grp_container.addEventListener(egret.TouchEvent.TOUCH_TAP,r._onGrpContainerTap,r),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!0),r.addEventListener(mouse.MouseEvent.MOUSE_MOVE,r.onMouseMove,r)),r.tableCtrl!=r.oldTableCtrl){r.unEmitter(),r.betMgr.un(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.isFirst=!1,r.onEmitter(r.tableTimer,e.TableTimer.ON_TICK,r._onTick),r.onEmitter(r.tableTimer,e.TableTimer.ON_END,r._onEnd),r.onEmitter(r.tableCtrl,CONST.BBT_table.openRound,r._openRound),r.onEmitter(r.tableCtrl,CONST.BBT_table.scanCard,r._scanCard),r.onEmitter(r.tableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.tableCtrl,CONST.BBT_table.betStop,r._betStop),r.onEmitter(r.tableCtrl,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(r.tableCtrl,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(r.tableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(e.GTS.mgr,"brokerageRequiredChange",r.changeBrokerageRequiredImage),r.onEmitter(r.tableCtrl,CONST.BBT_table.anchorGetControl,r.anchorChangeTextColor),r.onEmitter(r.tableCtrl,CONST.BBT_table.anchorReleaseControl,r.anchorChangeTextColor);for(var i=0;3>i;i++){var n=r["card_b"+i],s=r["card_p"+i];n&&(n.setBlockTurnOvered(!0),r.onEmitter(n.emitter,"over",r._changeNumShow_banker)),s&&(s.setBlockTurnOvered(!0),r.onEmitter(s.emitter,"over",r._changeNumShow_player))}r.betMgr.reset(),r.betMgr.tableCtrl=r.tableCtrl,r._initBetArea(),r.resetTweens(),r.betMgr.on(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.oldTableCtrl=r.tableCtrl}r.analyst||(r.analyst=new t.LuzhuAnalyst(1)),r.betMgr.recoverBetInfo(),r._gameStateChange(r.tableCtrl.gameState);for(var l,c,p=r.tableCtrl.rangeList4Dis,_=0,u=(i=0,p.length);u>i;i++)c=p[i],0==i?(l=c[0],_=c[1]):(l>c[0]&&(l=c[0]),_<c[1]&&(_=c[1]));r.label_roomLimit.visible=!r.tableCtrl.isMultiRange,1e3>l&&1e3>_?r.label_roomLimit.text=mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(l),e.UTIL.NUM.getSplitNumStr(_)):1e3>l&&_>=1e3?r.label_roomLimit.text=mo.STR.format("%s-%sK",e.UTIL.NUM.getSplitNumStr(l),e.UTIL.NUM.getSplitNumStr(_/1e3)):l>=1e3&&_>=1e3&&(r.label_roomLimit.text=mo.STR.format("%sK-%sK",e.UTIL.NUM.getSplitNumStr(l/1e3),e.UTIL.NUM.getSplitNumStr(_/1e3))),r.label_roomLimit.scaleX=r.label_roomLimit.width>280?140/r.label_roomLimit.width:.5,r.updateRound(),r.anchorChangeTextColor()}},i.prototype.updateRound=function(){var e=this.tableCtrl.countMap||{},t=CONST.betType.baccarat,r=(e[t.banker]||0)+(e[t.player]||0)+(e[t.draw]||0);this.label_round.text=mo.D.langCodeToTxt("g_round")+":"+r},i.prototype.changeBrokerageRequiredImage=function(){var t=this,r=!e.GTS.mgr.isBrokerageRequired();t.grp_nofee.visible=r,t.grp_nofee.x=t.label_roomName.width*t.label_roomName.scaleX+10,t.grp_nofee.verticalCenter=t.label_roomName.verticalCenter-2,t.grp_betB.getChildByName("img_betType_ratio").text=r?"1:1":"1:0.95"},i.prototype._changeNumShow_player=function(){this._setBPPoint(!0)},i.prototype._changeNumShow_banker=function(){this._setBPPoint(!1)},i.prototype._onRefreshInfo=function(){for(var e=this,t=0;t<e.helpList.length;t++){e.helpList[t].reset()}e.resetTweens(),e.betMgr.recoverBetInfo(),e._showCard(!1),e._gameStateChange(e.tableCtrl.gameState)},i.prototype.onMouseMove=function(e){var t=mo.EUI.uiScene.globalToLocal(e.stageX,e.stageY);this.onChipMove(t.x,t.y)},i.prototype._gameStateChange=function(t){var r=this;switch(r.curGameState=t,r.grp_shuffle.visible=!1,t){case CONST.gameState.betting:r.stopBet(!1),r._showCard(!1);var o=r.tableCtrl.getBetStopTime();o?r.refreshTime(r.tableCtrl.betSec,o):r._onEnd(),r.updateRound();break;case CONST.gameState.shuffle:r.grp_shuffle.visible=!0,r.label_state.textColor=CONST.StateColor.blue,r.label_state.text=mo.D.langCodeToTxt("g_shuffling"),r.label_state.size=28,r.label_state.y=22,r.betMgr.clear(),r._showCard(!1),r.updateRound();break;case CONST.gameState.stopBet:r._showCard(!0),r.stopBet(!0),r.stop(),r.openCloseBtns(),r.betFinalConfirm();break;case CONST.gameState.payout:var a,i;r._showCard(!0);try{a=e.UTIL.calPayout(r.tableCtrl.roundCtrl,r.tableCtrl.betCtrl).payoutDetail}catch(e){console.log(e),i=!1}i=!mo.OBJ.isEmpty(a),!r.justEnterGame&&i&&(r.payout.setData({tableCtrl:r.tableCtrl}),e.playAudio("coins_drop")),r.stopBet(!0),r.betAreaSettlement(),r.updateRound()}r._updateUI(),r._updateGameState(t)},i.prototype._applyOvertime=function(){this._gameStateChange(this.tableCtrl.gameState)},i.prototype.resetTweens=function(){var e=this;e.grp_msg&&(egret.Tween.removeTweens(e.grp_msg),e.grp_msg.visible=!1),e.hideCards()},i.prototype.onExit=function(){var e=this;e.stop(),a.prototype.onExit.call(this),e.betMgr.reset(),e.betMgr.unAll(),e.betMgr.doDtor(),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!1),e.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,e.onMouseMove,e))},i.prototype._refreshRoomInfo=function(){var t=this,r=t.tableCtrl.roundCtrl;t.label_roomName.text=t.tableCtrl.name,t.grp_nofee.x=t.label_roomName.width*t.label_roomName.scaleX+10,t.grp_nofee.verticalCenter=t.label_roomName.verticalCenter-2;var o=t.tableCtrl.countMap||{};if(r){var a=o[CONST.betType.baccarat.player]||0,i=o[CONST.betType.baccarat.banker]||0,n=o[CONST.betType.baccarat.draw]||0;this.label_PlayerScore.text=a,this.label_BankerScore.text=i,this.label_TieScore.text=n,this.label_roundNo.text=r.code||"";var s=e.UTIL.NUM.calcPercent(n,a,i),l=s[0],c=s[1],p=s[2],_=this.groupProgress.height-6;this.rectBanker.height=_*p/100,this.rectPlayer.height=_*c/100,this.rectTie.height=_*l/100,t.setBPTBar(i,a,n)}},i.prototype.setBPTBar=function(e,t,r){var o=this,a=e+t+r;a>0?(o.bar_b.width=e/a*282,o.bar_p.width=t/a*282):o.setBPTBar(1,1,1)},i.prototype._onTick=function(e,t,r){var o=this;if(o.justEnterGame=!1,o.isFirst||r){var a=o.getColor4Label(t);o.label_state.textColor=a,o.label_state.text=0==t?"":t+"",o.label_state.size=45,o.label_state.y=22}o.isFirst=!1},i.prototype._onEnd=function(){var e=this;e.stop(),e.justEnterGame=!1,e._gameStateChange(CONST.gameState.stopBet)},i.prototype.getColor4Label=function(e){return e>18||e>10?CONST.StateColor.green:CONST.StateColor.red},i.prototype.anchorChangeTextColor=function(){var e=this;e.compTimerState.isAnchor=!(!e.tableCtrl.anchorControl||!e.tableCtrl.anchorControl.main)},i.prototype.refreshTime=function(e,t){this.isFirst=!0,this.tableTimer.start(1e3*e,t)},i.prototype.stop=function(){this.tableTimer.stop()},i.prototype._updateUI=function(){var e=this;e._refreshLuzhu(),e._refreshRoomInfo(),e._refreshOpBtns()},i.prototype.onChipDrop=function(e,t){var r=this;if(!(r.curGameState!=CONST.gameState.betting)){var o=r.grp_container.globalToLocal(e,t);r.betMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)}},i.prototype.onChipMove=function(e,t){var r=this.grp_container.globalToLocal(e,t);this.betMgr.chipMoveCheck(r.x,r.y)},i.prototype._scanCard=function(){this.justEnterGame=!1,this._showCard(!0,!0)},i.prototype._showCard=function(e,t){void 0===t&&(t=!1);var r=this;r.grp_showCard.visible=e,e?r._fillCards(t):r.hideCards()},i.prototype.hideCards=function(){for(var e=this,t=0;3>t;t++){var r=e["card_p"+t];r&&(r.visible=!1,r.reset()),(r=e["card_b"+t])&&(r.visible=!1,r.reset())}e.label_pp.text="0",e.label_bp.text="0"},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.zhuPanBlink=!0,e.payout.visible&&(e.payout.visible=!1),e.betMgr.clear(),e._gameStateChange(CONST.gameState.betting)},i.prototype.msgShow=function(e){var r=this;e==t.BaccMTOTable.msgState.openRound?(r.label_msg.text=mo.D.langCodeToTxt("bacc_place_your_bet"),r.label_msg.style="txt_default_white"):e==t.BaccMTOTable.msgState.successBet&&(r.label_msg.text=mo.D.langCodeToTxt("bacc_bet_success"),r.label_msg.style="txt_color_4"),r.grp_msg.visible=!0,egret.Tween.removeTweens(r.grp_msg);var o=egret.Tween.get(r.grp_msg);r.grp_msg.alpha=1,o.wait(2e3).to({alpha:0},2e3).call((function(){r.grp_msg.visible=!1,egret.Tween.removeTweens(r.grp_msg)}))},i.prototype._betStop=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet)},i.prototype._payout=function(){this.justEnterGame=!1,t.log("显示派彩界面"),this._gameStateChange(CONST.gameState.payout)},i.prototype._shuffle=function(){this._gameStateChange(CONST.gameState.shuffle)},i.prototype._fillCards=function(e){for(var t=this,r=t.tableCtrl.roundCtrl.srcResults||[],o=[],a=0;6>a;a++){var i=3>a?CONST.betType.baccarat.player:CONST.betType.baccarat.banker;if(t.setCard(i,a%3,r[a],e),a<r.length&&r[a]){var n=(i==CONST.betType.baccarat.player?"card_p":"card_b")+a%3;o.push(n)}}var s=o.map((function(e){return t[e].getTurnOvered()}));s.length>0&&-1==s.indexOf(!1)&&(t._setBPPoint(!0),t._setBPPoint(!1))},i.prototype.setCard=function(e,t,r,o){var a=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];a&&(a.visible=null!=r,a.setData({id:r}),null!=r&&a.turnOver(o))},i.prototype._setBPPoint=function(t){var r=this,o=r.tableCtrl.roundCtrl.srcResults||[],a=r.tableCtrl.getOpenedIndexList()||[];t?r.label_pp.text=""+e.UTIL.calBaccarat(a.indexOf(0)>=0?o[0]:null,a.indexOf(1)>=0?o[1]:null,a.indexOf(2)>=0?o[2]:null):r.label_bp.text=""+e.UTIL.calBaccarat(a.indexOf(3)>=0?o[3]:null,a.indexOf(4)>=0?o[4]:null,a.indexOf(5)>=0?o[5]:null)},i.prototype.betFinalConfirm=function(){this.betMgr.betFinalConfirm(),this._betNumChanged()},i.prototype._tap_btn_zoom=function(){t.BaccLuzhu.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_undo=function(){var e=this;0==e.isClick&&(e.betMgr.undo(),e._betNumChanged())},i.prototype._tap_btn_confirm=function(){var r=this;if(0==r.isClick){r.isClick=1,r.betMgr.startBet();var o=(r.betMgr.unBetInvalidTypes(),r.betMgr.packUnConfirmedBet());if(mo.OBJ.isEmpty(o))r._betNumChanged(),r.isClick=0,r.betMgr.finishBet();else{var a=[o,!0];r.tableCtrl.bet(a,(function(){e.playAudio("p_bet_success"),r.msgShow(t.BaccMTOTable.msgState.successBet),r.betMgr.confirmBet(),r._betNumChanged(),r.isClick=0,r.betMgr.finishBet();var o=r.tableCtrl.code,a=r.tableCtrl.roundCode,i=e.GTS.mgr.isBrokerageRequired();e.GTS.mgr.setCommissionStateByRound(o,a,i),e.GTS.mgr.setCommissionStateByRoom(o,i)}),(function(){r.betMgr.undo(),r._betNumChanged(),r.isClick=0,r.betMgr.finishBet()}))}}},i.prototype._tap_btnRoomLimit=function(){e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("game.betlimit")},i.prototype._tap_label_roomLimit=function(){this._tap_btnRoomLimit()},i.prototype._tap_btn_bankerAsk=function(){this.askLuZhu(CONST.betType.baccarat.banker),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},i.prototype._tap_btn_playerAsk=function(){this.askLuZhu(CONST.betType.baccarat.player),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},i.prototype._tap_btn_again=function(){var e=this;0==e.isClick&&(e.betMgr.redoBet(),e._betNumChanged())},i.prototype._tap_btn_double=function(){var t=this;0==t.time&&0==t.isClick&&(t.time=1,t.betMgr.doubleBet(),t._betNumChanged(),setTimeout((function(){t.time=0}),200),e.RCD.log_mgr.sendEvent_ClientButton("game.double"))},i.prototype.askLuZhu=function(e){var t=this,r=t.analyst.queryLuZhu(e);r&&(r.zhupan&&t.zhuPanLuPainter.showQueryZhu(r.zhupan),r.dalu&&t.daluPainter.showQueryZhu(r.dalu),r.dayan&&t.dayanLuPainter.showQueryZhu(r.dayan),r.xiaolu&&t.xiaoLuPainter.showQueryZhu(r.xiaolu),r.yueyou&&t.yueyouLuPainter.showQueryZhu(r.yueyou))},i.prototype._refreshLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList,r=e.analyst;if(r.clearData(),!t||0===t.length)return e.zhuPanLuPainter.setZhuPanData([]),e.daluPainter.setDaLuData([]),e.dayanLuPainter.setAnalysisData([]),e.xiaoLuPainter.setAnalysisData([]),e.yueyouLuPainter.setAnalysisData([]),e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),void e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker);for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});e.zhuPanLuPainter.setZhuPanData(r.getZhuPanData(),e.zhuPanBlink),e.daluPainter.setDaLuData(r.getDaLuData(),e.zhuPanBlink),e.dayanLuPainter.setAnalysisData(r.getDaYanLuData(),e.zhuPanBlink),e.xiaoLuPainter.setAnalysisData(r.getXiaoLuData(),e.zhuPanBlink),e.yueyouLuPainter.setAnalysisData(r.getYueYouLuData(),e.zhuPanBlink),e.zhuPanBlink=!1,e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker)},i.prototype.showQueryLuZhu=function(e,t){var r=this.analyst.queryLuZhu(t);if(r){var o=[];r.dayan&&(o[0]=r.dayan),r.xiaolu&&(o[1]=r.xiaolu),r.yueyou&&(o[2]=r.yueyou),e.setData({luZhuList:o})}else e.setData({luZhuList:[null,null,null]})},i.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:19,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};r.res=t.LZMTORes,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:9,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};o.res=t.LZMTORes,e.daluPainter=new t.DaluPainter(e.scr_dalu,o);var a={gridSize:9,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};a.res=t.LZMTORes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:9,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};i.res=t.LZMTORes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:9,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};n.res=t.LZMTORes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},i.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState,o=t.betMgr.betRecoders;if(t.btn_again.enabled=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.btn_double.enabled=e,e){if(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(mo.PROJ.openCustomerBet),t.btn_again.enabled)for(var a in o)if(o[a].confirmedBetHistory.length>0||o[a].curBetHistory.length>0)return void(t.btn_again.enabled=!1)}else if(r==CONST.gameState.betting)for(var a in t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(mo.PROJ.openCustomerBet),o)if(o[a].confirmedBetHistory.length>0||o[a].curBetHistory.length>0)return t.btn_again.enabled=!1,void(t.btn_double.enabled=!0)},i.prototype._betNumChanged=function(){this._refreshOpBtns()},i.prototype._refreshOpBtns=function(){var e=this;e.curGameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.betMgr.hasUnConfirmedBet())},i.prototype.stopBet=function(e){var t=this;t.betMgr.stopBet(e),e&&(t.label_state.textColor=CONST.StateColor.yellow,t.label_state.text=mo.D.langCodeToTxt("g_wait_payout"),t.label_state.size=28,t.label_state.y=22)},i.prototype._onGrpContainerTap=function(e){var t=this;if(0==t.time){t.time=1;var r=t.betMgr,o=t.grp_container.globalToLocal(e.stageX,e.stageY);r.onBetAreaTap(o.x,o.y,t.chipBar.chipValue),setTimeout((function(){t.time=0}),200)}},i.prototype._initBetArea=function(){var r,o,a=this,i=(CONST.betType.baccarat,2);a.helpList=[],(r=new t.MTOBetAreaHelper(a.grp_betPD,CONST.betType.baccarat.playerPair)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betPD.x+i,a.grp_betPD.y+i),mo.p(a.grp_betPD.x+i,a.grp_betPD.y+a.grp_betPD.height-2*i),mo.p(a.grp_betPD.x+a.grp_betPD.width-2*i,a.grp_betPD.y+a.grp_betPD.height-2*i),mo.p(a.grp_betPD.x+a.grp_betPD.width-2*i,a.grp_betPD.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.playerPair,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.playerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerPair,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betP,CONST.betType.baccarat.player)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betP.x+i,a.grp_betP.y+i),mo.p(a.grp_betP.x+i,a.grp_betP.y+a.grp_betP.height-2*i),mo.p(a.grp_betP.x+a.grp_betP.width-2*i,a.grp_betP.y+a.grp_betP.height-2*i),mo.p(a.grp_betP.x+a.grp_betP.width-2*i,a.grp_betP.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.player,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.player,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.player,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betTie,CONST.betType.baccarat.draw)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betTie.x+i,a.grp_betTie.y+i),mo.p(a.grp_betTie.x+i,a.grp_betTie.y+a.grp_betTie.height-2*i),mo.p(a.grp_betTie.x+a.grp_betTie.width-2*i,a.grp_betTie.y+a.grp_betTie.height-2*i),mo.p(a.grp_betTie.x+a.grp_betTie.width-2*i,a.grp_betTie.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.draw,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.draw,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.draw,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betB,CONST.betType.baccarat.banker)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betB.x+i,a.grp_betB.y+i),mo.p(a.grp_betB.x+i,a.grp_betB.y+a.grp_betB.height-2*i),mo.p(a.grp_betB.x+a.grp_betB.width-2*i,a.grp_betB.y+a.grp_betB.height-2*i),mo.p(a.grp_betB.x+a.grp_betB.width-2*i,a.grp_betB.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.banker,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.banker,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.banker,0)),a.helpList.push(r),(r=new t.MTOBetAreaHelper(a.grp_betBD,CONST.betType.baccarat.bankerPair)).setBetMgr(a.betMgr),o=new mo.NUM.Polygon(mo.p(a.grp_betBD.x+i,a.grp_betBD.y+i),mo.p(a.grp_betBD.x+i,a.grp_betBD.y+a.grp_betBD.height),mo.p(a.grp_betBD.x+a.grp_betBD.width-2*i,a.grp_betBD.y+a.grp_betBD.height),mo.p(a.grp_betBD.x+a.grp_betBD.width-2*i,a.grp_betBD.y+i)),a.betMgr.registerBetArea(CONST.betType.baccarat.bankerPair,o),a.betMgr.registerBetRecorder(CONST.betType.baccarat.bankerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerPair,0)),a.helpList.push(r)},i.prototype._handleState_betting=function(){var e=this,t=e.tableCtrl.getBetStopTime();t?(e.compTimerState.stateBetting(),e.compTimerState.refreshTime(e.tableCtrl.betSec,t)):e.compTimerState.stateClearing()},i.prototype._handleState_shuffle=function(){this.compTimerState.stateShuffle()},i.prototype._handleState_payout=function(){this.compTimerState.stateClearing()},i.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},i.prototype._updateGameState=function(e){var t=this;if(t.data)switch(e){case CONST.gameState.betting:t._handleState_betting();break;case CONST.gameState.shuffle:t._handleState_shuffle();break;case CONST.gameState.payout:t._handleState_payout();break;case CONST.gameState.stopBet:t._handleState_stopBet()}},i}(mo.EUI.ItemRenderer);a.msgState={openRound:0,successBet:1},t.BaccMTOTableNeon=a,__reflect(a.prototype,"G.BACC.BaccMTOTableNeon")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.BaccBetMgr,o=e.COMM.IBetMgrEvent,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.zhuPanBlink=!1,e.time=0,e.isClick=0,e.isFirstEnter=!1,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);this.betMgr=new r},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var t=this;t._setupLuzuPainter(),t.grp_msg.visible=!1,t.grp_shuffle.visible=!1,t.grp_nofee.visible=!1,t.payout.visible=!1,t.tableTimer=new e.TableTimer,t.label_pp.text="0",t.label_bp.text="0"},i.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var r=this;if(r.data&&(r.justEnterGame=!0,r.tableCtrl=r.data[1],r.chipBar=r.data[2],r.tableCtrl)){if(r.changeRequiredForGLI(),r.changeBrokerageRequiredImage(),r.setTableMaintain(),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_MOVE,r.onChipMove,r),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_DROP,r.onChipDrop,r),r.grp_container.addEventListener(egret.TouchEvent.TOUCH_TAP,r._onGrpContainerTap,r),r.tableCtrl!=r.oldTableCtrl){r.unEmitter(),r.betMgr.un(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.isFirst=!1,r.onEmitter(r.tableTimer,e.TableTimer.ON_TICK,r._onTick),r.onEmitter(r.tableTimer,e.TableTimer.ON_END,r._onEnd),r.onEmitter(r.tableCtrl,CONST.BBT_table.openRound,r._openRound),r.onEmitter(r.tableCtrl,CONST.BBT_table.scanCard,r._scanCard),r.onEmitter(r.tableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.tableCtrl,CONST.BBT_table.betStop,r._betStop),r.onEmitter(r.tableCtrl,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(r.tableCtrl,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(r.tableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(e.GTS.mgr,"brokerageRequiredChange",r.changeBrokerageRequiredImage),r.onEmitter(r.tableCtrl,CONST.BBT_table.anchorGetControl,r.anchorChangeTextColor),r.onEmitter(r.tableCtrl,CONST.BBT_table.anchorReleaseControl,r.anchorChangeTextColor),r.onEmitter(r.tableCtrl,CONST.bstBizType.tableMaintain,r.setTableMaintain);for(var i=0;3>i;i++){var n=r["card_b"+i],s=r["card_p"+i];n&&(n.setBlockTurnOvered(!0),r.onEmitter(n.emitter,"over",r._changeNumShow_banker)),s&&(s.setBlockTurnOvered(!0),r.onEmitter(s.emitter,"over",r._changeNumShow_player))}r.betMgr.reset(),r.betMgr.tableCtrl=r.tableCtrl,r._initBetArea(),r.resetTweens(),r.betMgr.on(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.oldTableCtrl=r.tableCtrl}r.analyst||(r.analyst=new t.LuzhuAnalyst(1)),r.betMgr.recoverBetInfo(),r._gameStateChange(r.tableCtrl.gameState);for(var l,c,p=r.tableCtrl.rangeList4Dis,_=0,u=(i=0,p.length);u>i;i++)c=p[i],0==i?(l=c[0],_=c[1]):(l>c[0]&&(l=c[0]),_<c[1]&&(_=c[1]));r.updateRound(),r.anchorChangeTextColor()}},i.prototype.setTableMaintain=function(){var t=this,r=t.tableCtrl;t.grp_maintain&&(t.grp_maintain.visible=!!e.GTS.mgr.isTableMaintain(r.code))},i.prototype.updateRound=function(){var e=this.tableCtrl.countMap||{},t=CONST.betType.baccarat,r=(e[t.banker]||0)+(e[t.player]||0)+(e[t.draw]||0);this.label_round.text=r+""},i.prototype.changeBrokerageRequiredImage=function(){var t=!e.GTS.mgr.isBrokerageRequired();this.grp_nofee.visible=t,this.betB_ratio.text=t?"1:1":"en_us"==mo.PROJ.lang?"0.95:1":"1:0.95"},i.prototype._changeNumShow_player=function(){this._setBPPoint(!0)},i.prototype._changeNumShow_banker=function(){this._setBPPoint(!1)},i.prototype._onRefreshInfo=function(){for(var e=this,t=0;t<e.helpList.length;t++){e.helpList[t].reset()}e.resetTweens(),e.betMgr.recoverBetInfo(),e._showCard(!1),e._gameStateChange(e.tableCtrl.gameState)},i.prototype.onMouseMove=function(e){var t=mo.EUI.uiScene.globalToLocal(e.stageX,e.stageY);this.onChipMove(t.x,t.y)},i.prototype._gameStateChange=function(t){var r=this;switch(r.curGameState=t,r.grp_shuffle.visible=!1,t){case CONST.gameState.betting:var o=r.tableCtrl.getBetStopTime();if(o){var a=o.getTime()-mo.DATE.now()-1e3*r.tableCtrl.betSec;0>a&&(a=0),r._showCard(!0),mo.TM.setTimeout((function(){r.stopBet(!1),r.setBtnAgain(),r._showCard(!1),r.compTimerState.stateBetting(),r.compTimerState.refreshTime(r.tableCtrl.betSec,o)}),a)}else r._onEnd();r.updateRound();break;case CONST.gameState.shuffle:r.grp_shuffle.visible=!0,r.label_state.textColor=CONST.StateColor.blue,r.label_state.text=mo.D.langCodeToTxt("g_shuffling"),r.label_state.size=28,r.label_state.y=22,r.betMgr.clear(),r._showCard(!1),r.updateRound();break;case CONST.gameState.stopBet:r._showCard(!0),r.stopBet(!0),r.stop(),r.openCloseBtns(),r.betFinalConfirm();break;case CONST.gameState.payout:var i,n;r._showCard(!0);try{i=e.UTIL.calPayout(r.tableCtrl.roundCtrl,r.tableCtrl.betCtrl).payoutDetail}catch(e){console.log(e),n=!1}n=!mo.OBJ.isEmpty(i),!r.justEnterGame&&n&&(r.payout.setData({tableCtrl:r.tableCtrl}),e.playAudio("coins_drop")),r.stopBet(!0),r.betAreaSettlement(),r.updateRound()}r._updateUI(),r._updateGameState(t)},i.prototype.setBtnAgain=function(){var e=this;e.btn_again.enabled=e.betMgr.hasPreRoundBetHistory(),e.btn_again.visible=e.btn_again.enabled,e.btn_again.enabled&&e.checkIsBet()&&(e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!0)},i.prototype.checkIsBet=function(){var e=this;e.tableCtrl.subType==CONST.baccaratSubType.mi&&(e.btn_again.visible=!0);var t=e.betMgr.betRecoders;for(var r in t)if(t[r].confirmedBetHistory.length>0||t[r].curBetHistory.length>0)return!0;return!1},i.prototype.checkPreRoundBetInCustomerBetSetting=function(){return!e.GTS.mgr.checkIfUseCustomer(this.tableCtrl)||this.betMgr.checkPreRoundBetsInCustomerBets()},i.prototype._applyOvertime=function(){this._gameStateChange(this.tableCtrl.gameState)},i.prototype.resetTweens=function(){var e=this;e.grp_msg&&(egret.Tween.removeTweens(e.grp_msg),e.grp_msg.visible=!1),e.hideCards()},i.prototype.onExit=function(){var e=this;e.stop(),a.prototype.onExit.call(this),e.betMgr.reset(),e.betMgr.unAll(),e.betMgr.doDtor(),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!1),e.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,e.onMouseMove,e))},i.prototype._refreshRoomInfo=function(){var t=this,r=t.tableCtrl.roundCtrl;t.label_roomName.text=t.tableCtrl.name;var o=t.tableCtrl.countMap||{};if(r){var a=o[CONST.betType.baccarat.player]||0,i=o[CONST.betType.baccarat.banker]||0,n=o[CONST.betType.baccarat.draw]||0;this.label_PlayerScore.text=a,this.label_BankerScore.text=i,this.label_TieScore.text=n,this.label_roundNo.text=r.code||"";var s=e.UTIL.NUM.calcPercent(n,a,i),l=s[0],c=s[1],p=s[2],_=this.groupProgress.height-6;this.rectBanker.height=_*p/100,this.rectPlayer.height=_*c/100,this.rectTie.height=_*l/100,t.setBPTBar(i,a,n)}},i.prototype.setBPTBar=function(e,t,r){var o=this;o.createBPTBar(),o.grp_bp_bar.scaleX=.6;var a=e+t+r;a>0?(o.cmp_MaskedImage_b.changeImageHeight(e/a*80),o.cmp_MaskedImage_p.changeImageHeight(t/a*80)):o.setBPTBar(33,33,33)},i.prototype.createBPTBar=function(){var t=this;t.cmp_MaskedImage_b||(t.cmp_MaskedImage_b=new e.BASE.MaskedImage,t.cmp_MaskedImage_b.initImage("bet_bar_r",0,0,8,80,80/3,!0),t.grp_bp_bar.addChild(t.cmp_MaskedImage_b.grp_image)),t.cmp_MaskedImage_p||(t.cmp_MaskedImage_p=new e.BASE.MaskedImage,t.cmp_MaskedImage_p.initImage("bet_bar_b",0,0,8,80,80/3,!1),t.grp_bp_bar.addChild(t.cmp_MaskedImage_p.grp_image))},i.prototype._onTick=function(e,t,r){var o=this;if(o.justEnterGame=!1,o.isFirst||r){var a=o.getColor4Label(t);o.label_state.textColor=a,o.label_state.text=0==t?"":t+"",o.label_state.size=45,o.label_state.y=22}o.isFirst=!1},i.prototype._onEnd=function(){var e=this;e.stop(),e.justEnterGame=!1,e._gameStateChange(CONST.gameState.stopBet)},i.prototype.getColor4Label=function(e){return e>18||e>10?CONST.StateColor.green:CONST.StateColor.red},i.prototype.anchorChangeTextColor=function(){var e=this;e.compTimerState.isAnchor=!(!e.tableCtrl.anchorControl||!e.tableCtrl.anchorControl.main)},i.prototype.refreshTime=function(e,t){this.isFirst=!0,this.tableTimer.start(1e3*e,t)},i.prototype.stop=function(){this.tableTimer.stop()},i.prototype._updateUI=function(){var e=this;e._refreshLuzhu(),e._refreshRoomInfo(),e._refreshOpBtns()},i.prototype.onChipDrop=function(e,t){var r=this;if(!(r.curGameState!=CONST.gameState.betting)){var o=r.grp_container.globalToLocal(e,t);r.betMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)}},i.prototype.onChipMove=function(e,t){var r=this.grp_container.globalToLocal(e,t);this.betMgr.chipMoveCheck(r.x,r.y)},i.prototype._scanCard=function(){this.justEnterGame=!1,this._showCard(!0,!0)},i.prototype._showCard=function(e,t){void 0===t&&(t=!1);var r=this;r.grp_showCard.visible=e,e?r._fillCards(t):r.hideCards()},i.prototype.hideCards=function(){for(var e=this,t=0;3>t;t++){var r=e["card_p"+t];r&&(r.visible=!1,r.reset()),(r=e["card_b"+t])&&(r.visible=!1,r.reset())}e.label_pp.text="0",e.label_bp.text="0"},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.zhuPanBlink=!0,e.payout.visible&&(e.payout.visible=!1),e.betMgr.clear(),e._gameStateChange(CONST.gameState.betting)},i.prototype.msgShow=function(e){var r=this;e==t.BaccMTOTable.msgState.openRound?(r.label_msg.text=mo.D.langCodeToTxt("bacc_place_your_bet"),r.label_msg.style="txt_default_white"):e==t.BaccMTOTable.msgState.successBet&&(r.label_msg.text=mo.D.langCodeToTxt("bacc_bet_success"),r.label_msg.style="txt_color_4"),r.grp_msg.visible=!0,egret.Tween.removeTweens(r.grp_msg);var o=egret.Tween.get(r.grp_msg);r.grp_msg.alpha=1,o.wait(2e3).to({alpha:0},2e3).call((function(){r.grp_msg.visible=!1,egret.Tween.removeTweens(r.grp_msg)}))},i.prototype._betStop=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet)},i.prototype._payout=function(){this.justEnterGame=!1,t.log("显示派彩界面"),this._gameStateChange(CONST.gameState.payout)},i.prototype._shuffle=function(){this._gameStateChange(CONST.gameState.shuffle)},i.prototype._fillCards=function(e){for(var t=this,r=t.tableCtrl.roundCtrl.srcResults||[],o=[],a=0;6>a;a++){var i=3>a?CONST.betType.baccarat.player:CONST.betType.baccarat.banker;if(t.setCard(i,a%3,r[a],e),a<r.length&&r[a]){var n=(i==CONST.betType.baccarat.player?"card_p":"card_b")+a%3;o.push(n)}}o.map((function(e){return t[e].getTurnOvered()})),t._setBPPoint(!0),t._setBPPoint(!1)},i.prototype.setCard=function(e,t,r,o){var a=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];a&&(a.visible=null!=r,a.setData({id:r}),null!=r&&a.turnOver(o))},i.prototype._setBPPoint=function(t){var r=this,o=r.tableCtrl.roundCtrl.srcResults||[],a=r.tableCtrl.getOpenedIndexList()||[];t?r.label_pp.text=""+e.UTIL.calBaccarat(a.indexOf(0)>=0?o[0]:null,a.indexOf(1)>=0?o[1]:null,a.indexOf(2)>=0?o[2]:null):r.label_bp.text=""+e.UTIL.calBaccarat(a.indexOf(3)>=0?o[3]:null,a.indexOf(4)>=0?o[4]:null,a.indexOf(5)>=0?o[5]:null)},i.prototype.betFinalConfirm=function(){this.betMgr.betFinalConfirm(),this._betNumChanged()},i.prototype._tap_btn_zoom=function(){t.BaccLuzhu.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_undo=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_undo"),0==t.isClick&&(t.betMgr.undo(),t._betNumChanged())},i.prototype._tap_btn_confirm=function(){var r=this;if(0==r.isClick){e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_confirm"),r.isClick=1,r.betMgr.startBet();var o=(r.betMgr.unBetInvalidTypes(),r.betMgr.packUnConfirmedBet());if(mo.OBJ.isEmpty(o))r._betNumChanged(),r.isClick=0,r.betMgr.finishBet();else{var a=[o,!0];r.tableCtrl.bet(a,(function(){e.playAudio("p_bet_success"),r.msgShow(t.BaccMTOTable.msgState.successBet),r.betMgr.confirmBet(),r._betNumChanged(),r.isClick=0,r.betMgr.finishBet();var o=r.tableCtrl.code,a=r.tableCtrl.roundCode,i=e.GTS.mgr.isBrokerageRequired();e.GTS.mgr.setCommissionStateByRound(o,a,i),e.GTS.mgr.setCommissionStateByRoom(o,i)}),(function(){r.betMgr.undo(),r._betNumChanged(),r.isClick=0,r.betMgr.finishBet()}))}}},i.prototype._tap_btnRoomLimit=function(){e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btnRoomLimit"),e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("multi.betlimit")},i.prototype._tap_btn_bankerAsk=function(){this.askLuZhu(CONST.betType.baccarat.banker),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},i.prototype._tap_btn_playerAsk=function(){this.askLuZhu(CONST.betType.baccarat.player),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},i.prototype._tap_btn_again=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_again"),0==t.isClick&&(t.betMgr.redoBet(),t._betNumChanged())},i.prototype._tap_btn_double=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_double"),0==t.time&&0==t.isClick&&(t.time=1,t.betMgr.doubleBet(),t._betNumChanged(),setTimeout((function(){t.time=0}),200),e.RCD.log_mgr.sendEvent_ClientButton("game.double"))},i.prototype.askLuZhu=function(e){var t=this,r=t.analyst.queryLuZhu(e);r&&(r.zhupan&&t.zhuPanLuPainter.showQueryZhu(r.zhupan),r.dalu&&t.daluPainter.showQueryZhu(r.dalu),r.dayan&&t.dayanLuPainter.showQueryZhu(r.dayan),r.xiaolu&&t.xiaoLuPainter.showQueryZhu(r.xiaolu),r.yueyou&&t.yueyouLuPainter.showQueryZhu(r.yueyou))},i.prototype._refreshLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList,r=e.analyst;if(r.clearData(),!t||0===t.length)return e.zhuPanLuPainter.setZhuPanData([]),e.daluPainter.setDaLuData([]),e.dayanLuPainter.setAnalysisData([]),e.xiaoLuPainter.setAnalysisData([]),e.yueyouLuPainter.setAnalysisData([]),e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),void e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker);for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});e.zhuPanLuPainter.setZhuPanData(r.getZhuPanData(),e.zhuPanBlink),e.daluPainter.setDaLuData(r.getDaLuData(),e.zhuPanBlink),e.dayanLuPainter.setAnalysisData(r.getDaYanLuData(),e.zhuPanBlink),e.xiaoLuPainter.setAnalysisData(r.getXiaoLuData(),e.zhuPanBlink),e.yueyouLuPainter.setAnalysisData(r.getYueYouLuData(),e.zhuPanBlink),e.zhuPanBlink=!1,e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker)},i.prototype.showQueryLuZhu=function(e,t){var r=this.analyst.queryLuZhu(t);if(r){var o=[];r.dayan&&(o[0]=r.dayan),r.xiaolu&&(o[1]=r.xiaolu),r.yueyou&&(o[2]=r.yueyou),e.setData({luZhuList:o})}else e.setData({luZhuList:[null,null,null]})},i.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:17,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};r.res=t.LZMTORes,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:8.2,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};o.res=t.LZMTORes,e.daluPainter=new t.DaluPainter(e.scr_dalu,o);var a={gridSize:8.2,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};a.res=t.LZMTORes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:8.2,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};i.res=t.LZMTORes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:8.2,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};n.res=t.LZMTORes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},i.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState;t.betMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&(t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1),t.checkPreRoundBetInCustomerBetSetting()||(t.btn_again.enabled=!1,t.btn_again.visible=!1))):r==CONST.gameState.betting&&(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0),t.checkPreRoundBetInCustomerBetSetting()||(t.btn_again.enabled=!1,t.btn_again.visible=!1)),t.tableCtrl.subType==CONST.baccaratSubType.mi&&(t.btn_again.visible=!0)},i.prototype._betNumChanged=function(){this._refreshOpBtns()},i.prototype._refreshOpBtns=function(){var e=this;e.curGameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.betMgr.hasUnConfirmedBet())},i.prototype.stopBet=function(e){var t=this;t.betMgr.stopBet(e),e&&(t.label_state.textColor=CONST.StateColor.yellow,t.label_state.text=mo.D.langCodeToTxt("g_wait_payout"),t.label_state.size=28,t.label_state.y=22)},i.prototype._onGrpContainerTap=function(e){var t=this;if(0==t.time){t.time=1;var r=t.betMgr,o=t.grp_container.globalToLocal(e.stageX,e.stageY);r.onBetAreaTap(o.x,o.y,t.chipBar.chipValue),setTimeout((function(){t.time=0}),200)}},i.prototype._initBetArea=function(){var r,o=this,a=(CONST.betType.baccarat,2);o.helpList=[],(r=new t.MTOBetAreaHelper(o.grp_betPD,CONST.betType.baccarat.playerPair)).setBetMgr(o.betMgr);var i=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betPD.x+a,o.grp_betArea.y+o.grp_betPD.y+a),mo.p(o.grp_betArea.x+o.grp_betPD.x+a,o.grp_betArea.y+o.grp_betPD.y+o.grp_betPD.height-2*a),mo.p(o.grp_betArea.x+o.grp_betPD.x+o.grp_betPD.width-2*a,o.grp_betArea.y+o.grp_betPD.y+o.grp_betPD.height-2*a),mo.p(o.grp_betArea.x+o.grp_betPD.x+o.grp_betPD.width-2*a,o.grp_betArea.y+o.grp_betPD.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.playerPair,i),o.betMgr.registerBetRecorder(CONST.betType.baccarat.playerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerPair,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betP,CONST.betType.baccarat.player)).setBetMgr(o.betMgr);var n=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betP.x+a,o.grp_betArea.y+o.grp_betP.y+a),mo.p(o.grp_betArea.x+o.grp_betP.x+a,o.grp_betArea.y+o.grp_betP.y+o.grp_betP.height-2*a),mo.p(o.grp_betArea.x+o.grp_betP.x+o.grp_betP.width-2*a,o.grp_betArea.y+o.grp_betP.y+o.grp_betP.height-2*a),mo.p(o.grp_betArea.x+o.grp_betP.x+o.grp_betP.width-2*a,o.grp_betArea.y+o.grp_betP.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.player,n),o.betMgr.registerBetRecorder(CONST.betType.baccarat.player,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.player,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betTie,CONST.betType.baccarat.draw)).setBetMgr(o.betMgr);var s=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betTie.x+a,o.grp_betArea.y+o.grp_betTie.y+a),mo.p(o.grp_betArea.x+o.grp_betTie.x+a,o.grp_betArea.y+o.grp_betTie.y+o.grp_betTie.height-2*a),mo.p(o.grp_betArea.x+o.grp_betTie.x+o.grp_betTie.width-2*a,o.grp_betArea.y+o.grp_betTie.y+o.grp_betTie.height-2*a),mo.p(o.grp_betArea.x+o.grp_betTie.x+o.grp_betTie.width-2*a,o.grp_betArea.y+o.grp_betTie.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.draw,s),o.betMgr.registerBetRecorder(CONST.betType.baccarat.draw,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.draw,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betB,CONST.betType.baccarat.banker)).setBetMgr(o.betMgr);var l=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betB.x+a,o.grp_betArea.y+o.grp_betB.y+a),mo.p(o.grp_betArea.x+o.grp_betB.x+a,o.grp_betArea.y+o.grp_betB.y+o.grp_betB.height-2*a),mo.p(o.grp_betArea.x+o.grp_betB.x+o.grp_betB.width-2*a,o.grp_betArea.y+o.grp_betB.y+o.grp_betB.height-2*a),mo.p(o.grp_betArea.x+o.grp_betB.x+o.grp_betB.width-2*a,o.grp_betArea.y+o.grp_betB.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.banker,l),o.betMgr.registerBetRecorder(CONST.betType.baccarat.banker,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.banker,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betBD,CONST.betType.baccarat.bankerPair)).setBetMgr(o.betMgr);var c=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betBD.x+a,o.grp_betArea.y+o.grp_betBD.y+a),mo.p(o.grp_betArea.x+o.grp_betBD.x+a,o.grp_betArea.y+o.grp_betBD.y+o.grp_betBD.height),mo.p(o.grp_betArea.x+o.grp_betBD.x+o.grp_betBD.width-2*a,o.grp_betArea.y+o.grp_betBD.y+o.grp_betBD.height),mo.p(o.grp_betArea.x+o.grp_betBD.x+o.grp_betBD.width-2*a,o.grp_betArea.y+o.grp_betBD.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.bankerPair,c),o.betMgr.registerBetRecorder(CONST.betType.baccarat.bankerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerPair,0)),o.helpList.push(r)},i.prototype._handleState_betting=function(){var e=this,t=e.tableCtrl.getBetStopTime();if(t){var r=t.getTime()-mo.DATE.now()-1e3*e.tableCtrl.betSec;0>r&&(r=0),mo.TM.setTimeout((function(){e.compTimerState.stateBetting(),e.compTimerState.refreshTime(e.tableCtrl.betSec,t)}),r)}else e.compTimerState.stateClearing()},i.prototype._handleState_shuffle=function(){this.compTimerState.stateShuffle()},i.prototype._handleState_payout=function(){this.compTimerState.stateClearing()},i.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},i.prototype._updateGameState=function(e){var t=this;if(t.data)switch(e){case CONST.gameState.betting:t._handleState_betting();break;case CONST.gameState.shuffle:t._handleState_shuffle();break;case CONST.gameState.payout:t._handleState_payout();break;case CONST.gameState.stopBet:t._handleState_stopBet()}},i.prototype.changeRequiredForGLI=function(){var e=this,t=":";"zh_cn"==mo.PROJ.lang?t="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t="賠"),"en_us"==mo.PROJ.lang?(e.betTie_ratio.text="8:1",e.betBD_ratio.text="11:1",e.betPD_ratio.text="11:1","1:0.95"==e.betB_ratio.text&&(e.betB_ratio.text="0.95:1")):("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&-1!=e.betP_ratio.text.indexOf(":")&&(e.betP_ratio.text=e.betP_ratio.text.substring(0,e.betP_ratio.text.indexOf(":"))+t+e.betP_ratio.text.substring(e.betP_ratio.text.indexOf(":")+1),e.betTie_ratio.text=e.betTie_ratio.text.substring(0,e.betTie_ratio.text.indexOf(":"))+t+e.betTie_ratio.text.substring(e.betTie_ratio.text.indexOf(":")+1),e.betB_ratio.text=e.betB_ratio.text.substring(0,e.betB_ratio.text.indexOf(":"))+t+e.betB_ratio.text.substring(e.betB_ratio.text.indexOf(":")+1),e.betPD_ratio.text=e.betPD_ratio.text.substring(0,e.betPD_ratio.text.indexOf(":"))+t+e.betPD_ratio.text.substring(e.betPD_ratio.text.indexOf(":")+1),e.betBD_ratio.text=e.betBD_ratio.text.substring(0,e.betBD_ratio.text.indexOf(":"))+t+e.betBD_ratio.text.substring(e.betBD_ratio.text.indexOf(":")+1))},i}(mo.EUI.ItemRenderer);a.msgState={openRound:0,successBet:1},t.BaccMTOTableNeonEx=a,__reflect(a.prototype,"G.BACC.BaccMTOTableNeonEx")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;e.GTS.mgr.isMi()&&(r.label_isMiorNot.text="${{Interactive_Baccarat}}"),r.data.tableCtrl.type==CONST.tableType.dragonTiger&&(r.label_isMiorNot.text="${{g_dragon_tiger}}")},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,r=e.data.tableCtrl;if(r.gameState==CONST.gameState.shuffle)e.setRoomInfo(0,r.name,r.roundCtrl.currentDealerName(),"");else{if(r.roundCount>0){var o=r.luZhuList;o[o.length-1]&&(o[o.length-1].results?r.roundCount:r.roundCount-1)}else 0;var a=r.roundCtrl;if(a){r.dealerNameTranslate=r.dealerNameTranslate||{};var i=r.dealerNameTranslate[mo.PROJ.lang]?r.dealerNameTranslate[mo.PROJ.lang]:r.roundCtrl.currentDealerName();e.setRoomInfo(r.roundCtrl.index,r.name,r.roundCtrl.currentDealerNameOther(i),a.code||"")}}},r.prototype.setRoomInfo=function(e,t,r,o){this.label_rounds.text=e?e+"":"",this.label_roomNum.text=t||"",this.label_dealer.text=r||"",this.label_handNum.text=o||""},r}(mo.EUI.Comp);t.BaccTableInfo=r,__reflect(r.prototype,"G.BACC.BaccTableInfo")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=e.GTS.mgr.isMi(),a=e.GTS.mgr.isInMatch(),i=r.data.tableCtrl.type==CONST.tableType.dragonTiger;r.grp_table_type&&(r.grp_table_type.visible=!a,r.grp_table_type.includeInLayout=!a),r.label_tableType&&(r.label_tableType.text=i?"${{g_dragon_tiger}}":o?"${{Interactive_Baccarat}}":"${{g_baccarat}}")},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,r=e.data.tableCtrl;if(r.gameState==CONST.gameState.shuffle)e.setRoomInfo(0,r.name,r.roundCtrl.currentDealerName(),"");else{if(r.roundCount>0){var o=r.luZhuList;o[o.length-1]&&(o[o.length-1].results?r.roundCount:r.roundCount-1)}else 0;var a=r.roundCtrl;if(a){r.dealerNameTranslate=r.dealerNameTranslate||{};var i=r.dealerNameTranslate[mo.PROJ.lang]?r.dealerNameTranslate[mo.PROJ.lang]:r.roundCtrl.currentDealerName();e.setRoomInfo(r.roundCtrl.index,r.name,r.roundCtrl.currentDealerNameOther(i),a.code||"")}}},r.prototype.setRoomInfo=function(e,t,r,o){this.label_roomNum.text=t||"",this.label_dealer.text=r||"",this.label_handNum.text=o||""},r}(mo.EUI.Comp);t.BaccTableInfo_tinyPoker=r,__reflect(r.prototype,"G.BACC.BaccTableInfo_tinyPoker")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r,o,a=e.BASE.MatrixTextType;!function(e){e[e.bet=1]="bet",e[e.setting=2]="setting"}(r=t.CustomerType||(t.CustomerType={})),function(e){e[e.down=0]="down",e[e.leftDown=1]="leftDown",e[e.leftDownMiddle=2]="leftDownMiddle",e[e.rightDownMiddle=3]="rightDownMiddle",e[e.rightDown=4]="rightDown",e[e.leftUp_4=5]="leftUp_4",e[e.leftUpMiddle_4=6]="leftUpMiddle_4",e[e.rightUpMiddle_4=7]="rightUpMiddle_4",e[e.rightUp_4=8]="rightUp_4",e[e.leftUp_3=9]="leftUp_3",e[e.upMiddle_3=10]="upMiddle_3",e[e.rightUp_3=11]="rightUp_3",e[e.leftUp_2=12]="leftUp_2",e[e.rightUp_2=13]="rightUp_2",e[e.up_1=14]="up_1",e[e.maxNum=15]="maxNum"}(o=t.BetAreaIndexLocation||(t.BetAreaIndexLocation={}));var i=function(i){function n(){return i.apply(this,arguments)||this}return __extends(n,i),n.prototype._initProp=function(){i.prototype._initProp.call(this)},n.prototype.initForBet=function(t,o,a,i,n,s){var l=this;l.customerType=r.bet,l.baccBetMgr=t,l.chipBar=o,l.tableCtrl=a,l.callbackWhenTouchArea=null,l.payoutCB=i,l.betCB=n,l.unbetCB=s,l.createBetArea(),l.registerCustomerBetRecorder(),l.onEmitter(e.GTS.mgr,"brokerageRequiredChange",l.updateBetTypesByGTS.bind(l)),l.onEmitter(mo.emitter,"customerBetNumChange",l.updateBetAreaLimmitEnable.bind(l)),l.onEmitter(mo.emitter,"customeResetBetArea",l.resetBetAreaFromDisable.bind(l)),l.baccBetMgr&&(l.onEmitter(l.baccBetMgr,"clearAllHedgeBetEvent",l.clearAllHedgeBet.bind(l)),l.onEmitter(l.baccBetMgr,"checkHedgeAndDisableArea",l.compareBetListAndSetHedge.bind(l)))},n.prototype.initForSetting=function(e,t){var o=this;o.baccBetMgr=e,o.tableCtrl=t,o.customerType=r.setting,o.callbackWhenTouchArea=null,o.createBetArea()},n.prototype.onEnter=function(){i.prototype.onEnter.call(this)},n.prototype.onExit=function(){i.prototype.onExit.call(this);this.unregisterTouchEvent(),this.unEmitter(),mo.emitter.unAll("customerBetNumChange"),mo.emitter.unAll("customeResetBetArea")},n.prototype.createBetArea=function(){var e=this;e.betAreaArray=[];for(var a=0;a<o.maxNum;a++){var i={betType:-1};i.index=a,i.label=null,i.betAreaHelper=null,e.betAreaArray.push(i);var n=e.group_selectArea.getChildByName("grp_bet_area_"+a);if(n){var s=n.getChildByName("img_bet_"+a);s&&s.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetAreaTouched.bind(e,a),e);var l=e.createMatrixLabel(a,n.width,n.height);if(a==o.up_1&&l.setVerticalCenter(1),i.label=l,i.label){var c=new eui.Group;c.name="grp_chip_for_other_"+a,c.width=n.width,c.height=n.height,c.touchChildren=!1,c.touchEnabled=!1,n.addChild(c),n.addChild(i.label);var p=n.getChildByName("betNum_"+a);if(-1!=n.getChildIndex(p)){var _=n.getChildIndex(i.label),u=n.getChildIndex(c);n.setChildIndex(p,_),n.setChildIndex(i.label,u)}}if(e.customerType==r.bet)i.betAreaHelper=new t.CustomerBetAreaHelper(n,a,-1,e.customerBetCallback.bind(e),e.customerUnBetCallback.bind(e),e.tableCtrl,e.baccBetMgr),i.betAreaHelper.setBetMgr(e.baccBetMgr),(p=n.getChildByName("betNum_"+a))&&e.onEmitter(p.emitter,"over",e.payoutShow);e.grp_msg.visible=!1}}},n.prototype.registerCustomerBetRecorder=function(){var t=this;t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.playerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerPair,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.player,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.player,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.draw,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.draw,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.banker,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.banker,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.bankerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerPair,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.bankerLucky6,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerLucky6,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.bankerDragonBonus,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerDragonBonus,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.playerDragonBonus,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerDragonBonus,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.big,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.big,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.small,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.small,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.bankerOdd,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerOdd,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.bankerEven,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerEven,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.playerOdd,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerOdd,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.playerEven,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerEven,0))},n.prototype.createMatrixLabel=function(t,r,i){var n=null;if(t==o.leftDown||t==o.leftUp_4||t==o.leftUp_3||t==o.leftUp_2)n=new e.BASE.MatrixText("",a.LEFT);else if(t==o.rightDown||t==o.rightUp_4||t==o.rightUp_3||t==o.rightUp_2)n=new e.BASE.MatrixText("",a.RIGHT);else{if(t!=o.down&&t!=o.leftDownMiddle&&t!=o.rightDownMiddle&&t!=o.leftUpMiddle_4&&t!=o.rightUpMiddle_4&&t!=o.upMiddle_3&&t!=o.up_1)return null;n=new e.BASE.MatrixText("",a.CENTER)}return n.setTextWH(r,i),n.touchEnabled=!1,n},n.prototype.updateBetTypesByGTS=function(){var t=this;if(!t.tableCtrl||t.tableCtrl.type!=CONST.tableType.anchor){var r=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);t.updateBetTypes(r)}},n.prototype.updateBetTypes=function(e){var t=this;t.updateBaseBetArea(e),t.resetBetAreasType(e),t.updateThirtyDisableImages(e)},n.prototype.resetBetAreasType=function(e){for(var t=this,o=0;o<t.betAreaArray.length;o++){(i=t.betAreaArray[o])&&(i.betType=-1,t.customerType==r.bet&&i.betAreaHelper&&i.betAreaHelper.setBetType(-1))}var a=t.getAvailableBetAreaSize(e);for(o=0;o<e.length;o++){var i,n=e[o];if(-1!=n)(i=t.getBetAreaByLocation(a,o))&&(i.betType=n,t.customerType==r.bet&&i.betAreaHelper&&(i.betAreaHelper.setBetType(i.betType),i.betAreaHelper.setAvailableBetSize(a)))}},n.prototype.getBetAreaByLocation=function(e,t){var r=this;if(0>t||t>=r.betAreaArray.length)return null;if(4>=t)return r.betAreaArray[t];switch(e){case 6:if(5==t)return r.betAreaArray[o.up_1];break;case 7:if(5==t)return r.betAreaArray[o.leftUp_2];if(6==t)return r.betAreaArray[o.rightUp_2];break;case 8:if(5==t)return r.betAreaArray[o.leftUp_3];if(6==t)return r.betAreaArray[o.upMiddle_3];if(7==t)return r.betAreaArray[o.rightUp_3];break;case 9:if(5==t)return r.betAreaArray[o.leftUp_4];if(6==t)return r.betAreaArray[o.leftUpMiddle_4];if(7==t)return r.betAreaArray[o.rightUpMiddle_4];if(8==t)return r.betAreaArray[o.rightUp_4]}return null},n.prototype.updateBaseBetArea=function(t){var r=this,o=e.GTS.mgr.getCustomerBetSettingMinSize(),a=r.getAvailableBetAreaSize(t);a<=e.GTS.mgr.getCustomerBetSettingMaxSize(r.tableCtrl.type)&&a>=e.GTS.mgr.getCustomerBetSettingMinSize(r.tableCtrl.type)&&(o=a),r.changeBetDeskAndArea(o)},n.prototype.getAvailableBetAreaSize=function(e){if(!e)return 0;for(var t=0,r=0;r<e.length;r++)-1!=e[r]&&t++;return t},n.prototype.changeBetDeskAndArea=function(t){var r=this;switch(t<e.GTS.mgr.getCustomerBetSettingMinSize(r.tableCtrl.type)&&t>e.GTS.mgr.getCustomerBetSettingMaxSize(r.tableCtrl.type)&&(t=e.GTS.mgr.getCustomerBetSettingMinSize(r.tableCtrl.type)),t){case 5:r.betDesk.visible=!1,r.desk_only5.visible=!0,r.desk_up1.visible=!1,r.desk_up2.visible=!1,r.desk_up3.visible=!1,r.desk_up4.visible=!1,r.hideAllUpGroup(),r.changeBaseBetAreaContent(!0);break;case 6:r.betDesk.visible=!0,r.desk_only5.visible=!1,r.desk_up1.visible=!0,r.desk_up2.visible=!1,r.desk_up3.visible=!1,r.desk_up4.visible=!1,r.hideAllUpGroup(),r.setBetAreaVisible(o.up_1,!0),r.changeBaseBetAreaContent(!1);break;case 7:r.betDesk.visible=!0,r.desk_only5.visible=!1,r.desk_up1.visible=!1,r.desk_up2.visible=!0,r.desk_up3.visible=!1,r.desk_up4.visible=!1,r.hideAllUpGroup(),r.setBetAreaVisible(o.leftUp_2,!0),r.setBetAreaVisible(o.rightUp_2,!0),r.changeBaseBetAreaContent(!1);break;case 8:r.betDesk.visible=!0,r.desk_only5.visible=!1,r.desk_up1.visible=!1,r.desk_up2.visible=!1,r.desk_up3.visible=!0,r.desk_up4.visible=!1,r.hideAllUpGroup(),r.setBetAreaVisible(o.leftUp_3,!0),r.setBetAreaVisible(o.upMiddle_3,!0),r.setBetAreaVisible(o.rightUp_3,!0),r.changeBaseBetAreaContent(!1);break;case 9:r.betDesk.visible=!0,r.desk_only5.visible=!1,r.desk_up1.visible=!1,r.desk_up2.visible=!1,r.desk_up3.visible=!1,r.desk_up4.visible=!0,r.hideAllUpGroup(),r.setBetAreaVisible(o.leftUp_4,!0),r.setBetAreaVisible(o.leftUpMiddle_4,!0),r.setBetAreaVisible(o.rightUpMiddle_4,!0),r.setBetAreaVisible(o.rightUp_4,!0),r.changeBaseBetAreaContent(!1)}},n.prototype.changeBaseBetAreaContent=function(e){var t=this,r={};e?(t.updateBetAreaContent(0,!0),t.updateBetAreaContent(1,!0,259,40,0,-1,0,-1,0,-1,516,38,1,"ui_cb_area_only5_middle_down","ui_cb_area_flash_only5_middle_down","ui_cb_area_disable_only5_middle_down"),t.updateBetAreaContent(2,!0,273,1,-1,-1,-1,-1,-1,-1,490,38,1,"ui_cb_area_only5_middle_up","ui_cb_area_flash_only5_middle_up","ui_cb_area_disable_only5_middle_up"),t.updateBetAreaContent(3,!0,25,2.2,-21,-1,-21,-1,-21,-1,258,76,1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left"),t.updateBetAreaContent(4,!0,750,2.2,282,-1,282,-1,282,-1,278,76,-1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left"),r.grp_bet_area_1=o.rightDownMiddle,r.grp_bet_area_2=o.leftDownMiddle,r.grp_bet_area_3=o.leftDown,r.grp_bet_area_4=o.rightDown,t.betAreaArray[o.leftDown].label.changeTextType(a.CENTER),t.betAreaArray[o.rightDownMiddle].label.changeTextType(a.LEFT),t.betAreaArray[o.leftDown].label.verticalCenter=0,t.betAreaArray[o.rightDownMiddle].label.verticalCenter=0,t.betAreaArray[o.leftDown].label.horizontalCenter=0,t.betAreaArray[o.rightDownMiddle].label.horizontalCenter=0):(t.updateBetAreaContent(1,!0,.5,40,-1,t.img_bet_1.y,-1,t.img_bet_flash_1.y,-1,t.img_bet_disable_1.y,271,40,t.img_bet_1.scaleX,"ui_cb_area_left_down","ui_cb_area_flash_left_down","ui_cb_area_disable_left_down"),t.updateBetAreaContent(2,!0,262.5,40,t.img_bet_2.x,t.img_bet_2.y,t.img_bet_flash_2.x,t.img_bet_flash_2.y,t.img_bet_disable_2.x,t.img_bet_disable_2.y,254,37,t.img_bet_2.scaleX,"ui_cb_area_middle_down","ui_cb_area_flash_middle_down","ui_cb_area_disable_middle_down"),t.updateBetAreaContent(3,!0,520,40,254,t.img_bet_3.y,254,t.img_bet_flash_3.y,254,t.img_bet_disable_3.y,254,37,-1,"ui_cb_area_middle_down","ui_cb_area_flash_middle_down","ui_cb_area_disable_middle_down"),t.updateBetAreaContent(4,!0,775,40,261,t.img_bet_4.y,261,t.img_bet_flash_4.y,261,t.img_bet_disable_4.y,261,40,t.img_bet_4.scaleX,"ui_cb_area_left_down","ui_cb_area_flash_left_down","ui_cb_area_disable_left_down"),r.grp_bet_area_1=o.leftDown,r.grp_bet_area_2=o.leftDownMiddle,r.grp_bet_area_3=o.rightDownMiddle,r.grp_bet_area_4=o.rightDown,t.betAreaArray[o.leftDown].label.changeTextType(a.LEFT),t.betAreaArray[o.rightDownMiddle].label.changeTextType(a.CENTER)),t.resetLabelWH(r.grp_bet_area_1,t.grp_bet_area_1.width,t.grp_bet_area_1.height),t.resetLabelWH(r.grp_bet_area_2,t.grp_bet_area_2.width,t.grp_bet_area_2.height),t.resetLabelWH(r.grp_bet_area_3,t.grp_bet_area_3.width,t.grp_bet_area_3.height),t.resetLabelWH(r.grp_bet_area_4,t.grp_bet_area_4.width,t.grp_bet_area_4.height)},n.prototype.updateBetAreaContent=function(e,t,r,o,a,i,n,s,l,c,p,_,u,h,m,d,b){var g=this,y=g.group_selectArea.getChildByName("grp_bet_area_"+e);if(y){y.visible=t,null!=r&&-1!=r&&(y.x=r),null!=o&&-1!=o&&(y.y=o);var f=y.getChildByName("grp_chip_for_other_"+e);null!=p&&-1!=p&&(y.width=p,f&&(f.width=p)),null!=_&&-1!=_&&(y.height=_,f&&(f.height=_));var C=y.getChildByName("img_bet_"+e),T=y.getChildByName("img_bet_flash_"+e),v=y.getChildByName("img_bet_disable_"+e);C&&T&&v&&(null!=a&&-1!=a&&(C.x=a),null!=i&&-1!=i&&(C.y=i),null!=n&&-1!=n&&(T.x=n),null!=s&&-1!=s&&(T.y=s),null!=l&&-1!=l&&(v.x=l),null!=c&&-1!=c&&(v.y=c),null!=u&&(C.scaleX=u,T.scaleX=u,v.scaleX=u),null!=h&&(C.source=h),null!=m&&(T.source=m),null!=d&&(v.source=d),null!=b&&g.betAreaArray[e]&&g.betAreaArray[e].label&&(g.betAreaArray[e].label.changeTextType(b),g.betAreaArray[e].label.verticalCenter=0,g.betAreaArray[e].label.horizontalCenter=0))}},n.prototype.resetLabelWH=function(t,r,o){var a=this.getBetAreaByLocation(5,t);a&&a.label&&(1==t?5==this.getAvailableBetAreaSize(e.GTS.mgr.getCustomerBetSetting())?a.label.setTextWH(516,o):a.label.setTextWH(r,o):3!=t&&a.label.setTextWH(r,o))},n.prototype.setBetAreaVisible=function(e,t){var r=this.group_selectArea.getChildByName("grp_bet_area_"+e);r&&(r.visible=t)},n.prototype.hideAllUpGroup=function(){for(var e=o.leftUp_4;e<=o.up_1;e++){var t=this.group_selectArea.getChildByName("grp_bet_area_"+e);t&&(t.visible=!1)}},n.prototype.updateBetAreaLabel=function(t,r){if(r){var o="",a=46;switch(t){case-1:o="";break;case CONST.betType.baccarat.playerPair:o="en_us"==mo.PROJ.lang?"${{baccarat_player_pair}} 11:1":"${{baccarat_player_pair}} 1:11";break;case CONST.betType.baccarat.player:o="${{baccarat_player_side}} 1:1";break;case CONST.betType.baccarat.draw:o="en_us"==mo.PROJ.lang?"${{g_tie}} 8:1":"${{g_tie}} 1:8";break;case CONST.betType.baccarat.banker:var i=this.tableCtrl.isMatch?this.tableCtrl.brokerageRequired:e.GTS.mgr.isBrokerageRequired();o=i?"en_us"==mo.PROJ.lang?"${{baccarat_banker_side}} 0.95:1":"${{baccarat_banker_side}} 1:0.95":"${{baccarat_banker_side}} 1:1\n${{baccarat_super6}}",a=i?46:"my_mm"==mo.PROJ.lang?20:28;break;case CONST.betType.baccarat.bankerPair:o="en_us"==mo.PROJ.lang?"${{baccarat_banker_pair}} 11:1":"${{baccarat_banker_pair}} 1:11";break;case CONST.betType.baccarat.bankerLucky6:o="en_us"==mo.PROJ.lang?"${{baccarat_banker_lucky6}} 12:1 / 20:1":"${{baccarat_banker_lucky6}} 1:12 / 1:20";break;case CONST.betType.baccarat.bankerDragonBonus:o="en_us"==mo.PROJ.lang?"${{baccarat_bankerDragonBonus}} ${{baccarat_customerBet_lucky_maxBetRate}}30:1":"${{baccarat_bankerDragonBonus}} ${{baccarat_customerBet_lucky_maxBetRate}}1:30";break;case CONST.betType.baccarat.playerDragonBonus:o="en_us"==mo.PROJ.lang?"${{baccarat_playerDragonBonus}} ${{baccarat_customerBet_lucky_maxBetRate}}30:1":"${{baccarat_playerDragonBonus}} ${{baccarat_customerBet_lucky_maxBetRate}}1:30";break;case CONST.betType.baccarat.big:o="en_us"==mo.PROJ.lang?"${{baccarat_big}} 0.54:1":"${{baccarat_big}} 1:0.54";break;case CONST.betType.baccarat.small:o="en_us"==mo.PROJ.lang?"${{baccarat_small}} 1.50:1":"${{baccarat_small}} 1:1.50";break;case CONST.betType.baccarat.bankerOdd:o="en_us"==mo.PROJ.lang?"${{baccarat_bankerOdd}} 0.94:1":"${{baccarat_bankerOdd}} 1:0.94";break;case CONST.betType.baccarat.bankerEven:o="en_us"==mo.PROJ.lang?"${{baccarat_bankerEven}} 0.94:1":"${{baccarat_bankerEven}} 1:0.94";break;case CONST.betType.baccarat.playerOdd:o="en_us"==mo.PROJ.lang?"${{baccarat_playerOdd}} 0.96:1":"${{baccarat_playerOdd}} 1:0.96";break;case CONST.betType.baccarat.playerEven:o="en_us"==mo.PROJ.lang?"${{baccarat_playerEven}} 0.90:1":"${{baccarat_playerEven}} 1:0.90"}var n=":";"zh_cn"==mo.PROJ.lang?n="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(n="賠"),o.length>0&&(o=o.substring(0,o.indexOf(":"))+n+o.substring(o.indexOf(":")+1),t==CONST.betType.baccarat.bankerLucky6&&(o=o.substring(0,o.indexOf(":"))+n+o.substring(o.indexOf(":")+1))),r.setColorByType(t),r.myText.size=a,r.setText(o)}},n.prototype.updateResultsShow=function(){for(var e=this,t=0;t<e.betAreaArray.length;t++){var o=e.betAreaArray[t];e.customerType==r.bet&&o.betAreaHelper&&o.betAreaHelper.updateResultsShow()}},n.prototype.unregisterTouchEvent=function(){for(var e=this,t=0;t<o.maxNum;t++){var r=e.group_selectArea.getChildByName("grp_bet_area_"+t);if(r){var a=r.getChildByName("img_bet_"+t);a&&a.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetAreaTouched.bind(e,t),e)}}},n.prototype.showBetAreaImage=function(e,t){var r=this.group_selectArea.getChildByName("grp_bet_area_"+e);if(r){var o=r.getChildByName("img_bet_"+e);o&&(o.alpha=t?1:0)}},n.prototype.hideAllBetAreaImage=function(){for(var e=0;e<o.maxNum;e++)this.showBetAreaImage(e,!1)},n.prototype.onBetAreaTouched=function(t){var o=this;if(o.customerType==r.bet){if(o.baccBetMgr.isStopBet)return;if(!o.baccBetMgr.isStopBet&&o.tableCtrl.isMatch&&!o.tableCtrl.hasEnrolled())return mo.MSG.show(o.tableCtrl.canEnrolled()?e.id_c_msgCode.g_watch_match:e.id_c_msgCode.g_watch_match_no_join);if(o.tableCtrl.subType==CONST.baccaratSubType.mi&&-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);var a=o.getBetTypeByIndex(t);if(-1==a)return;if(!o.baccBetMgr.checkCanBetForThirty(a,o.tableCtrl.type))return void(o.tableCtrl.type==CONST.tableType.baccarat?mo.MSG.show("${{baccarat_customerBet_over_thirty_cant_bet_1}}"):o.tableCtrl.type==CONST.tableType.dragonTiger&&mo.MSG.show("${{DT_customerBet_Description_3}}"));if(o.checkLimmitOutOfRange(a,!0))return o.clearAllHedgeBet(),void mo.MSG.show("${{baccarat_customerBet_BetLimit}}");if(e.GW.mgr.channel)if(e.GW.mgr.channel.shouldBlockHedge||!1){var i=o.getBetAreaByBetType(a);if(i&&i.betAreaHelper&&i.betAreaHelper.checkIsHedge())return;var n=e.UTIL.getHedgeBetMap();if(n[a]){var s=o.getBetAreaByBetType(n[a]);s&&s.betAreaHelper&&s.betAreaHelper.setHedgeAndDisable(!0)}}if(o.checkLimmitOutOfRangeWithBetNum(a,o.chipBar.chipValue,!0))return o.clearAllHedgeBet(),void mo.MSG.show("${{baccarat_customerBet_BetLimit}}");if(!o.baccBetMgr._tryBetByCustomer(a,o.chipBar.chipValue))return void o.clearAllHedgeBet();o.clearAllHedgeBet()}var l=!0;if(o.callbackWhenTouchArea){var c=o.getBetIndexByLocation(t);l=o.callbackWhenTouchArea(t,c)}l&&(o.hideAllBetAreaImage(),o.showBetAreaImage(t,!0))},n.prototype.clearAllHedgeBet=function(){for(var e=this,t=0;t<e.betAreaArray.length;t++){var r=e.betAreaArray[t];r&&r.betAreaHelper&&r.betAreaHelper.checkIsHedge()&&r.betAreaHelper.setHedgeAndDisable(!1)}e.baccBetMgr.checkAllBetsAndLockHedge()},n.prototype.compareBetListAndSetHedge=function(e){void 0===e&&(e=[]);for(var t=0;t<this.betAreaArray.length;t++){var r=this.betAreaArray[t];r&&r.betAreaHelper&&r.betAreaHelper.betType&&e.indexOf(r.betAreaHelper.betType)>=0&&r.betAreaHelper.setHedgeAndDisable(!0)}},n.prototype.getBetIndexByLocation=function(e){if(e<=o.rightDown)return e;switch(e){case o.leftUp_4:return 5;case o.leftUpMiddle_4:return 6;case o.rightUpMiddle_4:return 7;case o.rightUp_4:return 8;case o.leftUp_3:return 5;case o.upMiddle_3:return 6;case o.rightUp_3:return 7;case o.leftUp_2:return 5;case o.rightUp_2:return 6;case o.up_1:return 5}return e},n.prototype.getLocationByBetIndex=function(e,t){if(4>=t)return t;switch(e){case 6:if(5==t)return o.up_1;break;case 7:if(5==t)return o.leftUp_2;if(6==t)return o.rightUp_2;break;case 8:if(5==t)return o.leftUp_3;if(6==t)return o.upMiddle_3;if(7==t)return o.rightUp_3;break;case 9:if(5==t)return o.leftUp_4;if(6==t)return o.leftUpMiddle_4;if(7==t)return o.rightUpMiddle_4;if(8==t)return o.rightUp_4}return t},n.prototype.getBetTypeByIndex=function(e){return 0>e||e>=this.betAreaArray.length?-1:this.betAreaArray[e].betType},n.prototype.getBetAreaByBetType=function(e){if(-1==e)return null;for(var t=0;t<this.betAreaArray.length;t++){var r=this.betAreaArray[t];if(r.betType==e)return r}return null},n.prototype.getBetGroupByBetType=function(e){var t=this.getBetAreaByBetType(e);if(!t)return null;var r=t.betAreaHelper;return r?r.betArea:null},n.prototype.getBetHelperByBetType=function(e){var t=this.getBetAreaByBetType(e);if(!t)return null;var r=t.betAreaHelper;return r||null},n.prototype.registerCallbackWhenTouchArea=function(e){e&&(this.callbackWhenTouchArea=e)},n.prototype.betAreaFlashStart=function(e){for(var t=0;t<o.maxNum;t++)e&&e.length>0&&-1!=e.indexOf(t)||this.flashOutFinish(t)},n.prototype.flashOutFinish=function(e){var t=this,r=t.group_selectArea.getChildByName("grp_bet_area_"+e);if(r&&r.visible){var o=r.getChildByName("img_bet_flash_"+e);o&&egret.Tween.get(o).to({alpha:1},500).call(t.flashInFinish.bind(t,e),t)}},n.prototype.flashInFinish=function(e){var t=this,r=t.group_selectArea.getChildByName("grp_bet_area_"+e);if(r&&r.visible){var o=r.getChildByName("img_bet_flash_"+e);o&&egret.Tween.get(o).to({alpha:0},500).call(t.flashOutFinish.bind(t,e),t)}},n.prototype.betAreaFlashEnd=function(){for(var e=this,t=0;t<o.maxNum;t++){var r=e.group_selectArea.getChildByName("grp_bet_area_"+t);if(r){var a=r.getChildByName("img_bet_flash_"+t);a&&(e.rmTweens(a),a.alpha=0)}}e.hideAllBetAreaImage()},n.prototype.payoutShow=function(){this.payoutCB&&this.payoutCB()},n.prototype.updateThirtyDisableImages=function(){for(var e=this,t=0;t<e.betAreaArray.length;t++){var r=e.betAreaArray[t];if(-1!=r.betType){var o=e.baccBetMgr.checkCanBetForThirty(r.betType,e.tableCtrl.type),a=e.checkLimmitOutOfRange(r.betType,!1),i=!0;(!o||a)&&(i=!1),e.updateBetAreaLabel(r.betType,r.label,i),r.betAreaHelper&&r.betAreaHelper.setDisable(!i)}}},n.prototype.updateBetAreaLimmitEnable=function(e){var t=this,r=t.getBetAreaByBetType(e);if(r){var o=t.checkLimmitOutOfRange(r.betType,!1);t.updateBetAreaLabel(e,r.label,!o),r.betAreaHelper&&r.betAreaHelper.setDisable(o)}},n.prototype.resetBetAreaFromDisable=function(e){var t=this,r=t.getBetAreaByBetType(e);r&&(t.baccBetMgr.checkCanBetForThirty(r.betType,t.tableCtrl.type)&&(t.updateBetAreaLabel(e,r.label,!0),r.betAreaHelper&&r.betAreaHelper.setDisable(!1)))},n.prototype.checkLimmitOutOfRangeWithBetNum=function(e,t,o){var a=this;if(a.customerType!=r.bet)return!0;var i=a.baccBetMgr.getBetNum(e);return i+=t,a.checkNumOutOfLimmitRange(e,i,o)},n.prototype.checkLimmitOutOfRange=function(e,t){var o=this;if(o.customerType!=r.bet)return!0;var a=o.baccBetMgr.getBetNum(e);return o.checkNumOutOfLimmitRange(e,a,t)},n.prototype.checkNumOutOfLimmitRange=function(e,t,r){var o=this.baccBetMgr.getRangeListByBetType(e,this.tableCtrl.type);if(!o||2!=o.length)return!1;var a=o[0],i=o[1],n=0;if(a>i?(n=a,i):(n=i,a),r){if(t>n)return!0}else if(t>=n)return!0;return!1},n.prototype.lockBetArea=function(e,t){var r=this;r.group_base.alpha=e?.4:1,r.grp_msg.visible=e,r.grp_msg.touchEnabled=!0,r.grp_msg.touchThrough=!1,r.label_msg.text=e&&t?t:""},n.prototype.getGlobalPointByBetType=function(e){var t=this,r={x:0,y:0},o=t.getBetAreaByBetType(e);if(!o)return r;var a=o.index,i=t.group_selectArea.getChildByName("grp_bet_area_"+a);if(i){var n=i.x+i.width-60,s=i.y+i.height/2-35;r=t.group_selectArea.localToGlobal(n,s)}return r},n.prototype.customerBetCallback=function(e){this.betCB&&this.betCB(e)},n.prototype.customerUnBetCallback=function(e){this.unbetCB&&this.unbetCB(e)},n}(mo.EUI.Comp);t.BaccGameCustomerBet=i,__reflect(i.prototype,"G.BACC.BaccGameCustomerBet")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.initForSetting=function(){},r.prototype.updateBetTypesByGTS=function(){},r.prototype.registerCustomerBetRecorder=function(){var t=this;t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.playerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerPair,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.player,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.player,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.draw,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.draw,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.banker,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.banker,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.baccarat.bankerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerPair,0))},r.prototype.getBetAreaMaxNumber=function(){return 5},r.prototype.getBetAreaMinNumber=function(){return 5},r.prototype.createStrokeLabel=function(){var e=new mo.EUI.Label;return e.text="",e.bold=!0,e.textAlign="center",e.verticalAlign="middle",e.stroke=4,e.strokeColor=16777215,e.horizontalCenter=0,e.verticalCenter=2,e.lineSpacing=5,e.touchEnabled=!1,e.size=50,e.scaleX=.5,e.scaleY=.5,e},r}(e.BACC.BaccGameCustomerBet);t.BaccGameCustomerBet_mi=r,__reflect(r.prototype,"G.BACC.BaccGameCustomerBet_mi")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){var e=this;e.rewardEfc.addEventListener("complete",e.afterOver,e)},t.prototype.onExit=function(){var e=this;e.rewardEfc.removeEventListener("complete",e.afterOver,e)},t.prototype.afterOver=function(){var e=this;e.visible=!1,e.emitter.emit("close",e)},t.prototype._childrenCreated=function(){e.prototype._childrenCreated.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(mo.EUI.Comp);e.RewardEffect=t,__reflect(t.prototype,"G.BACC.RewardEffect")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){var e=this;e.playerEffect.addEventListener("complete",e.afterOver,e),e.bankerEffect.addEventListener("complete",e.afterOver,e)},t.prototype.onExit=function(){var e=this;e.playerEffect.removeEventListener("complete",e.afterOver,e),e.bankerEffect.addEventListener("complete",e.afterOver,e)},t.prototype.afterOver=function(){var e=this;e.visible=!1,e.emitter.emit("close",e)},t.prototype._childrenCreated=function(){e.prototype._childrenCreated.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(mo.EUI.Comp);e.MierEffect=t,__reflect(t.prototype,"G.BACC.MierEffect")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r,o=e.VideoMgr;!function(e){e[e.FST_VIDEO_IN=0]="FST_VIDEO_IN",e[e.SND_VIDEO_IN=1]="SND_VIDEO_IN"}(r||(r={}));var a=function(t){function a(){var r,o,a,i,n,s,l,c=t.apply(this,arguments)||this;return c.isAnchorOpen=e.GW.mgr.ifGameOpen(CONST.gameAPI.ANCHOR),c.existAnchorNum=0,c._tempAnimQ=[],c._isPlayAnim=!1,c.justEnterGame=!0,c.existAnchor={},c.grpUsage={grp1:!1,grp2:!1},c._grpPosition={main:0,sub:175},c._grpWidth=((r={})[e.videoCutType.oneAnchor]=350,r[e.videoCutType.twoAnchors]=175,r),c._rectColor=((o={})[CONST.betType.baccarat.player]=427519,o[CONST.betType.baccarat.banker]=13632027,o.null=12357954,o),c._borderResource=((a={})[CONST.betType.baccarat.player]=((i={})[e.videoCutType.oneAnchor]="border_player_single",i[e.videoCutType.twoAnchors]="border_player",i),a[CONST.betType.baccarat.banker]=((n={})[e.videoCutType.oneAnchor]="border_banker_single",n[e.videoCutType.twoAnchors]="border_banker",n),a.null=((s={})[e.videoCutType.oneAnchor]="border_gold_single",s[e.videoCutType.twoAnchors]="border_gold",s),a),c._betTypeText=((l={})[CONST.betType.baccarat.player]="zh_cn"==mo.PROJ.lang?"闲家":"zh_hk"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang?"閒家":"PLAYER",l[CONST.betType.baccarat.banker]="zh_cn"==mo.PROJ.lang?"庄家":"zh_hk"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang?"莊家":"BANKER",l.null=mo.D.langCodeToTxt("Rocket_Girls_room_NoBet"),l),c._animImgSettings={left:{win:{position:[[70,-20],[-60,75],[0,0]],scale:[[1,1],[1,1],[1,1]],rotation:[30,-30,0],waitTime:[0,0,360],duration:60},lose:{position:[[-30,-15],[45,-10]],scale:[[.7,.7],[.65,.65]],rotation:[0,0],waitTime:[0,160],duration:60}},right:{win:{position:[[245,-20],[115,75],[175,0]],scale:[[1,1],[1,1],[1,1]],rotation:[30,-30,0],waitTime:[0,0,360],duration:60},lose:{position:[[145,-15],[220,-10]],scale:[[.7,.7],[.65,.65]],rotation:[0,0],waitTime:[0,160],duration:60}},center:{win:{position:[[70,-20],[115,75],[90,-20],[100,40],[88,0]],scale:[[1,1],[1,1],[1,1],[1,1],[1,1]],rotation:[30,-30,15,-15,0],waitTime:[40,40,360,360,720],duration:60},lose:{position:[[0,-10],[185,-10],[100,10]],scale:[[.7,.7],[.7,.7],[.65,.65]],rotation:[0,0,0],waitTime:[0,160,400],duration:60}}},c._anchorVideo4Test=["ws://ws3.licainiao.com:8081/lobbyB/B15/15305176/0366d552433d0cb96ee4053e95c2856a","ws://ws4.jiasula.info:8081/lobbyB/B6/15305176/0366d552433d0cb96ee4053e95c2856a","ws://ws4.jiasula.info:8081/lobbyB/B12/15305176/0366d552433d0cb96ee4053e95c2856a","ws://ws4.jiasula.info:8081/lobbyB/B21/15305176/0366d552433d0cb96ee4053e95c2856a","ws://ws4.jiasula.info:8081/lobbyB/B18/15305176/933bbf6159fa7305beb8b3442d8b9d55","ws://ws1.jaguarlc.com:8081/lobbyB/B2/15305176/933bbf6159fa7305beb8b3442d8b9d55","ws://ws3.licainiao.com:8081/lobbyB/B21/15305176/933bbf6159fa7305beb8b3442d8b9d55","ws://ws3.licainiao.com:8081/lobbyB/B52/15305176/933bbf6159fa7305beb8b3442d8b9d55","ws://ws2.ekamao.com:8081/lobbyB/BCH103/15305176/933bbf6159fa7305beb8b3442d8b9d55"],c._anchorVideo4TestObj={96:c._anchorVideo4Test[1],98:c._anchorVideo4Test[0],100:c._anchorVideo4Test[2],104:c._anchorVideo4Test[3],528:c._anchorVideo4Test[4],198:c._anchorVideo4Test[5],210:c._anchorVideo4Test[6],220:c._anchorVideo4Test[7],526:c._anchorVideo4Test[8]},c}return __extends(a,t),a.prototype.initialAnchorVideo=function(e,t){var r=this;r.tableCtrl=e,r.emitFunc=t,r.grp1.visible=r.grp2.visible=!1,r.grp1.alpha=r.grp2.alpha=0,r.versus.visible=!1,r.grp_rate.visible=!1,r.grp_text.visible=!1,r.isAnchorOpen&&(r.onEmitter(r.tableCtrl,CONST.BBT_table.anchorBet,r.anchorBet),r.onEmitter(r.tableCtrl,CONST.BBT_table.anchorGetControl,r._handleAnchorVideo),r.onEmitter(r.tableCtrl,CONST.BBT_table.openRound,r.openRound),r.onEmitter(r.tableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.tableCtrl,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(r.tableCtrl,CONST.BBT_table.bet,r.refreshData),r._handleAnchorVideo())},a.prototype._handleAnchorVideo=function(){var t,r=this,o=r.tableCtrl,a=o.anchorControl,i={},n=a.main,s=a.sub;for(var l in r._setAnimType(a),n&&(t=s?e.videoCutType.twoAnchors:e.videoCutType.oneAnchor),a)if(null!=a[l]&&a[l].anchor){var c={name:a[l].anchor.name,url:o.getVideoToPlay(a[l].anchor.anchorVideoUrl),id:a[l].anchor.id,type:l,videoCutType:t,videoMgr:null,grp:null};i[a[l].anchor.id]=c,e.GTS.mgr.addOneAnchorTable(a[l])}for(var l in r.existAnchor)if(i[l])i[l].grp=r.existAnchor[l].grp,i[l].videoMgr=r.existAnchor[l].videoMgr;else{var p=r.existAnchor[l].id;r.clearAnchor(p)}r.existAnchor=i,r.drawVideo()},a.prototype.clearAnchor=function(t){var r=this,o=r.existAnchor[t].grp,a=(r.existAnchor[t].videoCutType,CONST.anchorCode.name+r.existAnchor[t].id);r.existAnchor[t].videoMgr&&(r.existAnchor[t].videoMgr.clear(),r.existAnchor[t].videoMgr=null),r[o].visible=!1,r[o].alpha=0,delete r.existAnchor[t],r._recordGrpUsage(o,!1),e.GTS.mgr.clearTableByCode(a)},a.prototype._recordGrpUsage=function(e,t){null!=this.grpUsage[e]&&(this.grpUsage[e]=t)},a.prototype._getGrpUsage=function(e){return null==this.grpUsage[e]||this.grpUsage[e]},a.prototype.drawVideo=function(){var t=this,r=Object.assign({},t.existAnchor);t.grp_text.visible=!mo.OBJ.isEmpty(r),t.setbetRateChart(),t.setGrp(r),t.setVersus();var a=function(a){t.setAnchorBet(r[a]),t.setBetInAnchorRoom(r[a]);var i=r[a].url,n=r[a].grp,s=t[n].getChildByName("grp"),l=e.videoCutType.origin;r[a].videoMgr?r[a].videoMgr.changeType(l):(r[a].videoMgr=new o,mo.TM.setTimeout4Tick((function(){r[a].videoMgr.playWithType(i,s,!1,l),r[a].videoMgr.setMute(!0)}),500))};for(var i in r)a(i);t.justEnterGame=!1},a.prototype.setGrp=function(e){var t=this,r=[];for(var o in e){var a=e[o];if(null==a.grp)for(var i=["grp1","grp2"],n=0;n<i.length;n++){var s=i[n];if(0==t._getGrpUsage(s)){a.grp=s,t._recordGrpUsage(s,!0);break}}if(!t[a.grp])return;r.push({animType:t.animType,animData:a})}0!=r.length&&t._saveAnimInQ(r),t._checkAnimToPlay()},a.prototype.setAnchorBet=function(e){var t=this,r=t.tableCtrl.roundCtrl,o=e.id,a=e.grp,i=e.videoCutType,n=t[a].getChildByName("img"),s=t[a].getChildByName("rect"),l=t[a].getChildByName("lbl_type"),c=r.getAnchorBetType(o)||null;t.tableCtrl.gameState==CONST.gameState.shuffle?(n.source=t._borderResource.null[i],s.fillColor=t._rectColor.null,l.text=t._betTypeText.null):(n.source=t._borderResource[c][i],s.fillColor=t._rectColor[c],l.text=t._betTypeText[c])},a.prototype.resetAnchorData=function(e){var t=this,r=(e.id,e.grp),o=e.videoCutType,a=t[r].getChildByName("img"),i=t[r].getChildByName("rect"),n=t[r].getChildByName("lbl_type"),s=t[r].getChildByName("lbl_money");a.source=t._borderResource.null[o],i.fillColor=t._rectColor.null,n.text=t._betTypeText.null,s.text="$ 0"},a.prototype.anchorBet=function(){this.refreshData()},a.prototype.openRound=function(){this.refreshData()},a.prototype.setBetInAnchorRoom=function(t){var r=this,o=r.tableCtrl.roundCtrl,a=t.id,i=r[t.grp].getChildByName("lbl_money"),n=o.getAnchorBetType(a),s=n?o.getBetMoneyAll(n):0;if(r.tableCtrl.gameState==CONST.gameState.shuffle)i.text="$ 0";else{var l=e.COMM.FX.calcMoneyByCurrency("CNY",s);i.text="$ "+e.UTIL.NUM.getSplitNumStr(l)}},a.prototype.goToAnchorRoom=function(t){var r=this;for(var o in r.existAnchor)if(r.existAnchor[o].grp==t){var a=CONST.anchorCode.name+r.existAnchor[o].id,i=e.GTS.mgr.getTableCtrl(a);i&&e.COMM.layerMgr.fastEnterGameRoom(i,CONST.tableType.anchor,!1,null)}},a.prototype._tap_trigger_1=function(){this.goToAnchorRoom("grp1")},a.prototype._tap_trigger_2=function(){this.goToAnchorRoom("grp2")},a.prototype.refreshData=function(){var e=this,t=e.existAnchor;for(var r in t){var o=t[r];e.setAnchorBet(o),e.setBetInAnchorRoom(o)}e.setbetRateChart()},a.prototype.setVersus=function(){var e=this;e.versus.verticalCenter=90,e.versus.visible=2==e.existAnchorNum},a.prototype.setbetRateChart=function(){var e=this;if(e.grp_rate.visible=2==e.existAnchorNum,e.grp_rate.visible){var t,r,o,a,i=e.existAnchor,n=e.tableCtrl.roundCtrl;for(var s in i){var l=i[s].type,c=i[s].id,p=n.getAnchorBetType(c)||null,_=p?n.getBetMoneyAll(p):0,u=e._rectColor[p];switch(l){case"main":r=_,a=u;break;case"sub":t=_,o=u}}e.tableCtrl.gameState==CONST.gameState.shuffle?e.bchtRateChart.setChartWithoutTxt([0,0],350,15,[12357954,12357954]):e.bchtRateChart.setChartWithoutTxt([t,r],350,15,[o,a])}},a.prototype.resetBchtRateChart=function(){this.bchtRateChart.setChartWithoutTxt([0,0],350,15,[12357954,12357954])},a.prototype._setAnimType=function(e){var t=this,o=t.existAnchorNum,a=t._calcAnchorNum(e);t.existAnchorNum=a,t.animType=0==o&&1==a?r.FST_VIDEO_IN:1==o&&2==a?r.SND_VIDEO_IN:null},a.prototype._playAnim=function(e){var t=this,o=e.length,a=0;this._isPlayAnim=!0;for(var i=function(i){var n=e[i].animData,s=e[i].animType,l=n.type,c=n.grp,p=t[c],_=n.videoCutType,u=egret.Ease.sineIn;switch(s){case r.FST_VIDEO_IN:p.right=150,p.width=350,p.visible=!0,t.rmTweens(p),t.getTween(p,{loop:!1}).to({alpha:0,right:150}).to({alpha:1,right:0},500,u).call((function(){t.rmTweens(p),++a==o&&(t._isPlayAnim=!1,t._checkAnimToPlay())}));break;case r.SND_VIDEO_IN:if("main"==l)t.rmTweens(p),t.getTween(p,{loop:!1}).to({alpha:0,width:p.width}).to({alpha:1,width:175},500,u).call((function(){t.rmTweens(p),++a==o&&(t._isPlayAnim=!1,t._checkAnimToPlay())}));else p.right=325,p.width=175,p.visible=!0,t.rmTweens(p),t.getTween(p,{loop:!1}).to({alpha:0,right:325}).to({alpha:1,right:175},500,u).call((function(){t.rmTweens(p),++a==o&&(t._isPlayAnim=!1,t._checkAnimToPlay())}));break;default:p.right=t._grpPosition[l],p.width=t._grpWidth[_],p.alpha=1,p.visible=!0,++a==o&&(t._isPlayAnim=!1,t._checkAnimToPlay())}},n=0;n<e.length;n++)i(n)},a.prototype.isPlayAnim=function(){return this._isPlayAnim},a.prototype._saveAnimInQ=function(e){this._tempAnimQ.push(e)},a.prototype._checkAnimToPlay=function(){var e=this;if(!e._isPlayAnim&&e._tempAnimQ.length){var t=this._tempAnimQ.shift();e._playAnim(t)}},a.prototype._calcAnchorNum=function(e){var t=0,r=e.main,o=e.sub;return r&&(t=o?2:1),t},a.prototype._shuffle=function(){var e=this,t=Object.assign({},e.existAnchor);for(var r in t)e.resetAnchorData(t[r]);e.resetBchtRateChart()},a.prototype._payout=function(){var t=this,r=t.tableCtrl.roundCtrl,o=Object.assign({},t.existAnchor),a=r.results,i=function(i){var n=void 0,s=o[i].type,l=o[i].videoCutType,c=o[i].id,p=t[o[i].grp].getChildByName("loser_img"),_=r.getAnchorBetType(c)||null,u=-1!=a.indexOf(CONST.betType.baccarat.draw),h=-1!=a.indexOf(_);if(null==_||u)return"continue";h||t._showLoserImage(p),l==e.videoCutType.twoAnchors?n="main"==s?h?t._animImgSettings.right.win:t._animImgSettings.right.lose:h?t._animImgSettings.left.win:t._animImgSettings.left.lose:l==e.videoCutType.oneAnchor&&(n=h?t._animImgSettings.center.win:t._animImgSettings.center.lose);t._playPayoutAnim(n,h,(function(){t._clearAnimImgs(),p.alpha=0}))};for(var n in o)i(n)},a.prototype._playPayoutAnim=function(e){for(var t=0;t<e.position.length;t++){var r=new eui.Image;r.x=e.position[t][0],r.y=e.position[t][1],r.scaleX=e.scale[t][0],r.scaleY=e.scale[t][1],r.rotation=e.rotation[t],e.duration,e.waitTime[t],this.grp_anim.addChild(r)}},a.prototype._showLoserImage=function(e){var t=this;t.rmTweens(e),t.getTween(e,{loop:!1}).to({alpha:0}).to({alpha:1}).call((function(){t.rmTweens(e)}))},a.prototype._clearAnimImgs=function(){this.grp_anim.removeChildren()},a.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter();var e=Object.assign({},this.existAnchor);for(var r in e)e[r].videoMgr&&(e[r].videoMgr.clear(),e[r].videoMgr=null)},a.prototype.a=function(){this._playPayoutAnim(this._animImgSettings.right.win,!0)},a.prototype.b=function(){this._playPayoutAnim(this._animImgSettings.right.lose,!1)},a.prototype.c=function(){this._playPayoutAnim(this._animImgSettings.left.win,!0)},a.prototype.d=function(){this._playPayoutAnim(this._animImgSettings.left.lose,!1)},a.prototype.e=function(){this._playPayoutAnim(this._animImgSettings.center.win,!0)},a.prototype.f=function(){this._playPayoutAnim(this._animImgSettings.center.lose,!1)},a}(mo.EUI.Comp);t.BaccAnchorVideo=a,__reflect(a.prototype,"G.BACC.BaccAnchorVideo")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.isMatchPointMode=!1,e.playStartAudio=!0,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.BetType=CONST.betType.baccarat},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.chk_room_info.addEventListener(eui.UIEvent.CHANGE,e._chk_change,e),e.chk_bet_info.addEventListener(eui.UIEvent.CHANGE,e._chk_change,e),e.chk_room_info.selected=!0,e._initOtherBetUI(),e._chk_change(),e.compTimerState.audioEnabled=!0},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.baccTableCtrl=this.data.tabelCtrl},r.prototype.getCurrentState=function(){return"bacc"},r.prototype._chk_change=function(){var t=this;t.chk_room_info.selected?(t.roomInfoGroup.visible=!0,t.roomInfoGroup.includeInLayout=!0,t.label_room.textColor="0xc6a153"):(t.roomInfoGroup.visible=!1,t.roomInfoGroup.includeInLayout=!1,t.label_room.textColor="0xc6a153"),t.chk_bet_info.selected?(t.betInfoGroup.visible=!0,t.betInfoGroup.includeInLayout=!0,t.label_bet.textColor="0xc6a153",e.RCD.log_mgr.sendEvent_ClientButton("game.bet.summary")):(t.betInfoGroup.visible=!1,t.betInfoGroup.includeInLayout=!1,t.label_bet.textColor="0xc6a153")},r.prototype._setLimitShow=function(){var t=this,r=t.baccTableCtrl.rangeList4Dis;if(r){var o,a=0,i=r[1];i&&(o||(o=i[0]),o>i[0]&&(o=i[0]),a<i[1]&&(a=i[1]),t.label_roomLimit.text=mo.D.langCodeToTxt("g_bet_limit")+"："+mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(o),e.UTIL.NUM.getSplitNumStr(a)),t.label_roomLimit.text=mo.D.langCodeToTxt("g_bet_limit"))}},r.prototype.showBetMoney=function(){var t=this,r=t.baccTableCtrl;if(r&&!r.isBetting){var o=t.baccTableCtrl.betCtrl.betDetail4Dis,a=0;if(o)for(var i in o)a+=o[i];t.label_myBetNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(a)}},r.prototype._initOtherBetUI=function(){var e=this,t=e.betInfoCards={},r=e.BetType;t[r.playerPair]=e.bicard_0,t[r.player]=e.bicard_1,t[r.draw]=e.bicard_2,t[r.banker]=e.bicard_3,t[r.bankerPair]=e.bicard_4},r.prototype._betInfoReset=function(){var e=this.betInfoCards,t=this.BetType;for(var r in t){var o=e[t[r]];o&&(o.bet=0,o.player=0)}},r.prototype.onExit=function(){t.prototype.onExit.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.justEnterGame=!0;var o=r.baccTableCtrl;r.compTimerState.tableCtrl=o,r.onEmitter(o,CONST.BBT_table.openRound,r._onRefreshInfo_openRound),r.onEmitter(o,CONST.BBT_table.shuffle,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.bet,r._bet),r.onEmitter(o,CONST.BBT_table.betStop,r._betStop),r.onEmitter(o,CONST.BBT_table.payout,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(o,e.GTS.TableCtrl.ON_AFTER_BET,r._onAfterBet),r.compTimerState.hasAddtionTime=o.subType==CONST.baccaratSubType.mi,r.compTimerState.emitter.on(e.BASE.TimerState.ON_COUNTDOWN_END,r._onTimerCountdownEnd,r),r._onEnterInitMatchUserInfo(),r._gameStateChange(o.gameState),r.showBetMoney(),r._setLimitShow(),"my_mm"==mo.PROJ.lang&&(r.label_roomLimit.size=28,r.label_room.size=14,r.label_bet.size=14)},r.prototype._onEnterInitMatchUserInfo=function(){var e=this,t=e.baccTableCtrl;t&&(t.isMatch&&e.matchUserInfo.setData({tableCtrl:t}),e._initMatchView(t.isMatch),e._refreshMatchUserInfo())},r.prototype._initMatchView=function(e){var t=this;t.baccTableCtrl.type==CONST.tableType.anchor?(t.matchUserInfo.visible=!1,t.grp_tableInfo.visible=!1):t.matchUserInfo.visible=e},r.prototype._onAfterBet=function(){this._refreshRoomInfo(),this._refeshBetInfo()},r.prototype._onTimerCountdownEnd=function(){this.compTimerState.stateClearing()},r.prototype._refreshMatchUserInfo=function(){var e=this;e.baccTableCtrl.isMatch&&e.matchUserInfo&&e.matchUserInfo.refreshInfo()},r.prototype._refreshRoomInfo=function(){var e=this;if(!e.baccTableCtrl.isBetting){if(e.tableInfo.setData({tableCtrl:e.baccTableCtrl}),e.baccTableCtrl.gameState==CONST.gameState.shuffle)e.setScore(0,0,0);else{if(e.baccTableCtrl.roundCount>0){var t=e.baccTableCtrl.luZhuList;t[t.length-1]&&(t[t.length-1].results?e.baccTableCtrl.roundCount:e.baccTableCtrl.roundCount-1)}else 0;var r=(e.baccTableCtrl.roundCtrl,e.baccTableCtrl.countMap||{}),o=e.BetType;e.setScore(r[o.player]||0,r[o.draw]||0,r[o.banker]||0)}e.showBetMoney()}},r.prototype._refeshBetInfo=function(){var t=this,r=t.baccTableCtrl;if(!r.isBetting){var o=t.baccTableCtrl.roundCtrl,a=t.baccTableCtrl.gameState==CONST.gameState.shuffle;t.isMatchPointMode=r.isMatch&&r.match&&r.match.mode==CONST.matchMode.point;var i=t.betInfoCards,n=t.BetType;for(var s in n){var l=n[s],c=i[l];if(c){if(t.isMatchPointMode){var p=a?0:o.getBetMoney4Dis(l);(null==c.bet||c.bet<p)&&(c.bet=p)}else{var _=a?0:o.getBetMoneyCNY(l);_=e.COMM.FX.calcMoneyByCurrency("CNY",_),(null==c.bet||c.bet<_)&&(c.bet=_)}var u=a?0:o.getBetCount(l);(null==c.player||c.player<u)&&(c.player=u)}}t.showBetMoney()}},r.prototype.setScore=function(e,t,r){var o=this;"bacc"==o.currentState?o.compScoreInfo.setScore(e,t,r):"dt"==o.currentState&&o.dtcompScoreInfo.setScore(e,t,r)},r.prototype._gameStateChange=function(e){var t=this;t.curGameState=e;var r=t.baccTableCtrl,o=t.baccTableCtrl.roundCtrl;switch(t.compTimerState.visible=!0,t.compTimerState.overtimeStatus=o.overtimeStatus,e){case CONST.gameState.betting:t._handleState_betting(r);break;case CONST.gameState.shuffle:t.compTimerState.stateShuffle();break;case CONST.gameState.payout:t.compTimerState.stateClearing();case CONST.gameState.stopBet:t.playStartAudio=!0,t._handleState_stopBet(r)}t._refreshRoomInfo(),t._refeshBetInfo(),t._refreshMatchUserInfo()},r.prototype._handleState_betting=function(e){var t=this,r=parseInt((6*Math.random()+1).toString());if(t.playStartAudio&&(e.playAudio("p_start_bet_"+r),t.playStartAudio=!1),!(e.roundCtrl,e.subType==CONST.baccaratSubType.mi)){var o=e.getBetStopTime();if(o){var a=o.getTime()-mo.DATE.now()-1e3*e.betSec;0>a&&(a=0),mo.TM.setTimeout((function(){t.compTimerState.stateBetting(),t.compTimerState.refreshTime(e.betSec,o)}),a)}else t.compTimerState.stateClearing()}},r.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},r.prototype._applyOvertime=function(){var e=this;e.baccTableCtrl.gameState==CONST.gameState.betting&&e._gameStateChange(e.curGameState)},r.prototype._bet=function(){this._refeshBetInfo()},r.prototype._betStop=function(){var t=this;t.justEnterGame=!1,mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),t._gameStateChange(t.baccTableCtrl.gameState)},r.prototype._tap_btnRoomLimit=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_ROOM_LIMIT),e.COMM.LimitInfo.show({tableCtrl:this.baccTableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("game.betlimit")},r.prototype._onRefreshInfo=function(){var e=this;e._onEnterInitMatchUserInfo(),e.justEnterGame=!1,e._gameStateChange(e.baccTableCtrl.gameState)},r.prototype._onRefreshInfo_openRound=function(){var e=this;e._betInfoReset(),e._onEnterInitMatchUserInfo(),e.justEnterGame=!1,e._gameStateChange(e.baccTableCtrl.gameState)},r.prototype._tap_icon_roomLimit=function(){this._tap_btnRoomLimit()},r}(mo.EUI.Comp);t.BaccRightSlider=r,__reflect(r.prototype,"G.BACC.BaccRightSlider")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.isMatchPointMode=!1,e._betArr=[0,0,0],e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.BetType=CONST.betType.baccarat},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this._initOtherBetUI(),this.compTimerState.audioEnabled=!0},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.baccTableCtrl=this.data.tabelCtrl},r.prototype.getCurrentState=function(){return"bacc"},r.prototype._setLimitShow=function(){var t=this,r=t.baccTableCtrl.rangeList4Dis;if(r){var o,a=0,i=r[1];i&&(o||(o=i[0]),o>i[0]&&(o=i[0]),a<i[1]&&(a=i[1]),t.label_roomLimit.text=mo.D.langCodeToTxt("g_bet_limit")+"："+mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(o),e.UTIL.NUM.getSplitNumStr(a)),t.label_roomLimit.text=mo.D.langCodeToTxt("g_bet_limit"))}},r.prototype.showBetMoney=function(){var t=this,r=t.baccTableCtrl;if(r&&!r.isBetting){var o=t.baccTableCtrl.betCtrl.betDetail4Dis,a=0;if(o)for(var i in o)a+=o[i];t.label_myBetNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(a)}},r.prototype._initOtherBetUI=function(){var e=this,t=e.betInfoCards={},r=e.BetType;t[r.player]=e.bicard_0,t[r.draw]=e.bicard_1,t[r.banker]=e.bicard_2},r.prototype._betInfoReset=function(){var e=this,t=e.betInfoCards,r=e.BetType;for(var o in r){var a=t[r[o]];a&&(a.bet=0,a.player=0)}e._betArr=[0,0,0],e.setPercent(e._betArr)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.justEnterGame=!0;var o=r.baccTableCtrl;r.compTimerState.tableCtrl=o,r.onEmitter(o,CONST.BBT_table.openRound,r._onRefreshInfo_openRound),r.onEmitter(o,CONST.BBT_table.shuffle,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.bet,r._bet),r.onEmitter(o,CONST.BBT_table.betStop,r._betStop),r.onEmitter(o,CONST.BBT_table.payout,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(o,e.GTS.TableCtrl.ON_AFTER_BET,r._onAfterBet),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,r.resetGamePage),r.onEmitter(mo.emitter,"deactivate",r._handleDeactivate),r.compTimerState.hasAddtionTime=o.subType==CONST.baccaratSubType.mi,r.compTimerState.emitter.on(e.BASE.TimerState.ON_COUNTDOWN_END,r._onTimerCountdownEnd,r),r._onEnterInitMatchUserInfo(),r._gameStateChange(o.gameState),r.showBetMoney(),r._setLimitShow(),"my_mm"==mo.PROJ.lang&&(r.label_roomLimit&&(r.label_roomLimit.size=28),r.label_room&&(r.label_room.size=14),r.label_bet&&(r.label_bet.size=14))},r.prototype.resetGamePage=function(){var e=this.baccTableCtrl.gameState;this._gameStateChange(e)},r.prototype._handleDeactivate=function(){},r.prototype._onEnterInitMatchUserInfo=function(){var e=this,t=e.baccTableCtrl;t&&(t.isMatch&&e.matchUserInfo.setData({tableCtrl:t}),e._initMatchView(t.isMatch),e._refreshMatchUserInfo())},r.prototype._initMatchView=function(e){this.matchUserInfo.visible=e,this.matchUserInfo.includeInLayout=e},r.prototype._onAfterBet=function(){this._refreshRoomInfo(),this._refeshBetInfo()},r.prototype._onTimerCountdownEnd=function(){this.compTimerState.stateClearing()},r.prototype._refreshMatchUserInfo=function(){var e=this;e.baccTableCtrl.isMatch&&e.matchUserInfo&&e.matchUserInfo.refreshInfo()},r.prototype._refreshRoomInfo=function(){var e=this;if(!e.baccTableCtrl.isBetting){if(e.tableInfo.setData({tableCtrl:e.baccTableCtrl}),e.baccTableCtrl.gameState==CONST.gameState.shuffle)e.setScore(0,0,0);else{if(e.baccTableCtrl.roundCount>0){var t=e.baccTableCtrl.luZhuList;t[t.length-1]&&(t[t.length-1].results?e.baccTableCtrl.roundCount:e.baccTableCtrl.roundCount-1)}else 0;var r=(e.baccTableCtrl.roundCtrl,e.baccTableCtrl.countMap||{}),o=e.BetType;e.setScore(r[o.player]||0,r[o.draw]||0,r[o.banker]||0)}e.showBetMoney()}},r.prototype._refeshBetInfo=function(){var t=this,r=t.baccTableCtrl;if(!r.isBetting){var o=t.baccTableCtrl.roundCtrl,a=t.baccTableCtrl.gameState==CONST.gameState.shuffle;t.isMatchPointMode=r.isMatch&&r.match&&r.match.mode==CONST.matchMode.point;var i=t.betInfoCards,n=t.BetType;for(var s in n){((l=n[s])==CONST.betType.baccarat.banker||l==CONST.betType.baccarat.player||l==CONST.betType.baccarat.draw||l==CONST.betType.dragonTiger.dragon||l==CONST.betType.dragonTiger.tiger||l==CONST.betType.dragonTiger.draw)&&(a?0:t.isMatchPointMode?o.getBetMoney4Dis(l):e.COMM.FX.calcMoneyByCurrencyForChipShow("CNY",o.getBetMoneyCNY(l)))}for(var s in n){var l,c=i[l=n[s]];if(c){var p=t.baccTableCtrl.type==CONST.tableType.baccarat;c.setBackGroundColor(l,p);var _=a?0:t.isMatchPointMode?o.getBetMoney4Dis(l):e.COMM.FX.calcMoneyByCurrencyForChipShow("CNY",o.getBetMoneyCNY(l));(null==c.bet||c.bet<_)&&(c.bet=_,t.setBetArr(l,_)),t.setPercent(t._betArr);var u=a?0:o.getBetCount(l);(null==c.player||c.player<u)&&(c.player=u)}}t.showBetMoney()}},r.prototype.setBetArr=function(e,t){var r=this;(e==CONST.betType.baccarat.player||e==CONST.betType.dragonTiger.tiger)&&(r._betArr[0]=t),(e==CONST.betType.baccarat.draw||e==CONST.betType.dragonTiger.draw)&&(r._betArr[1]=t),(e==CONST.betType.baccarat.banker||e==CONST.betType.dragonTiger.dragon)&&(r._betArr[2]=t)},r.prototype.setPercent=function(e){var t=this;if(3==e.length){for(var r=0;r<e.length;r++)0<e[r]&&1>e[r]&&(e[r]=1);var o=0==e[0]&&0==e[1]&&0==e[2]?[0,0,0]:t.calcPercent(e[0],e[1],e[2]),a=t.BetType;t.betInfoCards[a.player].setPercentAndBar(o[0]),t.betInfoCards[a.draw].setPercentAndBar(o[1]),t.betInfoCards[a.banker].setPercentAndBar(o[2])}},r.prototype.calcPercent=function(e,t,r){var o=this,a=(e=e||0)+(t=t||0)+(r=r||0),i=null;if(0==a)33,34,33;else{for(var n=null,s=[e,t,r],l=0;l<s.length;l++)(null==n||s[n]<s[l])&&(n=l);i=[o.toFixed(e/a*100,2),o.toFixed(t/a*100,2),o.toFixed(r/a*100,2)]}return i},r.prototype.toFixed=function(e,t){var r=new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?");return e.toString().match(r)[0]},r.prototype.setScore=function(e,t,r){var o=this,a=o.baccTableCtrl.roundCtrl;"bacc"==o.currentState?(o.compScoreInfo.setScore(e,t,r),a&&o.compScoreInfo.setRound(a.index||0)):"dt"==o.currentState&&(o.dtcompScoreInfo.setScore(e,t,r),a&&o.dtcompScoreInfo.setRound(a.index||0))},r.prototype._gameStateChange=function(e){var t=this;t.curGameState=e;var r=t.baccTableCtrl,o=t.baccTableCtrl.roundCtrl;switch(t.compTimerState.visible=!0,t.compTimerState.overtimeStatus=o.overtimeStatus,e){case CONST.gameState.betting:t._handleState_betting(r);break;case CONST.gameState.shuffle:t.compTimerState.stateShuffle(),t.setScore(0,0,0),t._betInfoReset();break;case CONST.gameState.payout:t.compTimerState.stateClearing();case CONST.gameState.stopBet:t._handleState_stopBet(r)}t._refreshRoomInfo(),t._refeshBetInfo(),t._refreshMatchUserInfo()},r.prototype._handleState_betting=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi)){var r=e.getBetStopTime();if(r){var o=r.getTime()-mo.DATE.now()-1e3*e.betSec;0>o&&(o=0),mo.TM.setTimeout((function(){t.compTimerState.stateBetting(),t.compTimerState.refreshTime(e.betSec,r)}),o)}else t.compTimerState.stateClearing()}},r.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},r.prototype._applyOvertime=function(){var e=this;e.baccTableCtrl.gameState==CONST.gameState.betting&&e._gameStateChange(e.curGameState)},r.prototype._bet=function(){this._refeshBetInfo()},r.prototype._betStop=function(){var t=this;t.justEnterGame=!1,mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),t._gameStateChange(t.baccTableCtrl.gameState)},r.prototype._tap_btnRoomLimit=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_ROOM_LIMIT),e.COMM.LimitInfo.show({tableCtrl:this.baccTableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("game.betlimit")},r.prototype._onRefreshInfo=function(){var e=this;e._onEnterInitMatchUserInfo(),e.justEnterGame=!1,e._gameStateChange(e.baccTableCtrl.gameState)},r.prototype._onRefreshInfo_openRound=function(){var e=this,t=parseInt((6*Math.random()+1).toString());e.baccTableCtrl.playAudio("p_start_bet_"+t),e._betInfoReset(),e._onEnterInitMatchUserInfo(),e.justEnterGame=!1,e._gameStateChange(e.baccTableCtrl.gameState)},r.prototype._tap_icon_roomLimit=function(){this._tap_btnRoomLimit()},r}(mo.EUI.Comp);t.BaccRightSlider_tinyPoker=r,__reflect(r.prototype,"G.BACC.BaccRightSlider_tinyPoker")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this,o={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};o.res=t.LZllRes,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,o);var a={gridSize:12,showGrid:!0,isScroll:!0,maxCol:75,maxRow:6};a.res=t.LZllRes,e.daluPainter=new t.DaluPainter(e.scr_dalu,a);var i={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};i.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,i);var n={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};n.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,n);var s={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};s.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,s)},o.prototype._handleState_betting=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi))return r.prototype._handleState_betting.call(this,e);if(null!=e.roundCtrl.miZhuTime){var o=e.getBetStopTime();if(o){var a=o.getTime()-mo.DATE.now()-1e3*e.betSec;0>a&&(a=0),mo.TM.setTimeout((function(){t.compTimerState.stateBetting(),t.compTimerState.refreshTime(e.betSec,o)}),a)}else t.compTimerState.stateWaiting()}else t.compTimerState.statePreBet()},o.prototype._handleState_stopBet=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi))return r.prototype._handleState_stopBet.call(this,e);var o=e.getMiState();if(o==CONST.miState.noMi)t.compTimerState.stateWaiting();else if(o==CONST.miState.miEnd)t.compTimerState.stateClearing();else{var a=e.getMiEndTime();if(a){t.compTimerState.statePeek();var i=e.getMiSec();t.compTimerState.refreshTime(i,a)}else t.compTimerState.stateClearing()}},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var o=this,a=o.data.tableCtrl;o.label_roomName.text=a.name,a.isMatch?a.canEnrolled()?(o.joinMatchNeed.text=e.UTIL.NUM.getSplitNumStr(a.match.entryFee),o.joinMatchNeed.visible=!0,o.joinMatchNeed.width>50&&(o.joinMatchNeed.scaleX=50/o.joinMatchNeed.width),o.joinMatchNeed.text=o.joinMatchNeed.text,0==a.match.entryFee?(o.lockOrMoney.visible=!1,o.joinMatchNeed.visible=!1):(o.joinMatchNeed.visible=!0,o.lockOrMoney.visible=!0)):(o.lockOrMoney.source="lockOrMoney_l",o.lockOrMoney.visible=!0,o.joinMatchNeed.visible=!1):(o.lockOrMoney.visible=!1,o.joinMatchNeed.visible=!1);var i=a.roundCtrl.currentDealerName();a.dealerNameTranslate&&a.dealerNameTranslate.hasOwnProperty(mo.PROJ.lang)&&""!=a.dealerNameTranslate[mo.PROJ.lang]&&(i=a.dealerNameTranslate[mo.PROJ.lang]),o.dealer.setData({dealerName:a.roundCtrl.currentDealerNameOther(i),dealerId:a.roundCtrl.dealerId,tableCode:a.code});var n=a.subType==CONST.baccaratSubType.mi;o.img_miCard.visible=n,o.img_miCard.includeInLayout=n,o.label_miCard.includeInLayout=o.label_miCard.visible=o.img_miCard.visible;var s=!e.GTS.mgr.getCommissionStateInRoomList(a.code);o.img_noLoad.visible=s,o.img_noLoad.includeInLayout=s,o.label_noLoad.includeInLayout=o.label_noLoad.visible=o.img_noLoad.visible;var l=a.countMap||{},c=CONST.betType.baccarat;o.label_round.text=(l[c.banker]||0)+(l[c.player]||0)+(l[c.draw]||0),o.label_banker.text=l[c.banker]||0,o.label_player.text=l[c.player]||0,o.label_tie.text=l[c.draw]||0;for(var p,_,u=a.rangeList4Dis,h=0,m=0,d=u.length;d>m;m++)_=u[m],0==m?(p=_[0],h=_[1]):(p>_[0]&&(p=_[0]),h<_[1]&&(h=_[1]));o.label_roomLimit.visible=!a.isMultiRange,o.label_roomName.y=a.isMultiRange?12:4,1e3>p&&1e3>h?o.label_roomLimit.text=mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(p),e.UTIL.NUM.getSplitNumStr(h)):1e3>p&&h>=1e3?o.label_roomLimit.text=mo.STR.format("%s-%sK",e.UTIL.NUM.getSplitNumStr(p),e.UTIL.NUM.getSplitNumStr(h/1e3)):p>=1e3&&h>=1e3&&(o.label_roomLimit.text=mo.STR.format("%sK-%sK",e.UTIL.NUM.getSplitNumStr(p/1e3),e.UTIL.NUM.getSplitNumStr(h/1e3))),o._updateGameState();var b=function(e){var r=new t.LuzhuAnalyst(1);if(!e||0===e.length)return r;for(var o=0,a=e.length;a>o;o++)e[o].results&&r.receiveHistoryMsg({results:e[o].results,roundNo:e[o].code,cards:[]});return r}(a.luZhuList);o.zhuPanLuPainter.setZhuPanData(b.getZhuPanData()),o.daluPainter.setDaLuData(b.getDaLuData()),o.dayanLuPainter.setAnalysisData(b.getDaYanLuData()),o.xiaoLuPainter.setAnalysisData(b.getXiaoLuData()),o.yueyouLuPainter.setAnalysisData(b.getYueYouLuData()),o.queryLuZhu=function(e){var t=b.queryLuZhu(e);t&&(t.zhupan&&o.zhuPanLuPainter.showQueryZhu(t.zhupan),t.dalu&&o.daluPainter.showQueryZhu(t.dalu),t.dayan&&o.dayanLuPainter.showQueryZhu(t.dayan),t.xiaolu&&o.xiaoLuPainter.showQueryZhu(t.xiaolu),t.yueyou&&o.yueyouLuPainter.showQueryZhu(t.yueyou))},window.testPanel=this},o}(e.RoomListItem);t.BaccRoomListItem=r,__reflect(r.prototype,"G.BACC.BaccRoomListItem")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype.createBPTBar=function(){var t=this;t.cmp_MaskedImage_b||(t.cmp_MaskedImage_b=new e.BASE.MaskedImage,t.cmp_MaskedImage_b.initImage("bet_bar_r",0,0,8,80,80/3,!1),t.grp_bp_bar.addChild(t.cmp_MaskedImage_b.grp_image)),t.cmp_MaskedImage_p||(t.cmp_MaskedImage_p=new e.BASE.MaskedImage,t.cmp_MaskedImage_p.initImage("bet_bar_b",0,0,8,80,80/3,!0),t.grp_bp_bar.addChild(t.cmp_MaskedImage_p.grp_image))},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var o=this,a={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};a.res=t.LZllRes,o.zhuPanLuPainter=new t.ZhuPanLuPainter(o.scr_zhupanLu,a);var i={gridSize:12,showGrid:!0,isScroll:!0,maxCol:75,maxRow:6};i.res=t.LZllRes,o.daluPainter=new t.DaluPainter(o.scr_dalu,i);var n={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};n.res=t.LZllRes,o.dayanLuPainter=new t.AnalysisLuPainter(o.scr_dayanLu,t.AnalysisLuType.DAYAN,n);var s={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};s.res=t.LZllRes,o.xiaoLuPainter=new t.AnalysisLuPainter(o.scr_xiaolu,t.AnalysisLuType.XIAOLU,s);var l={gridSize:8,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};l.res=t.LZllRes,o.yueyouLuPainter=new t.AnalysisLuPainter(o.scr_yueyouLu,t.AnalysisLuType.YUEYOU,l),o.scaleX=e.BASE.scaleXY_DG,o.scaleY=e.BASE.scaleXY_DG},o.prototype._handleState_betting=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi))return r.prototype._handleState_betting.call(this,e);if(null!=e.roundCtrl.miZhuTime){var o=e.getBetStopTime();if(o){var a=o.getTime()-mo.DATE.now()-1e3*e.betSec;0>a&&(a=0),mo.TM.setTimeout((function(){t.compTimerState.stateBetting(),t.compTimerState.refreshTime(e.betSec,o)}),a)}else t.compTimerState.stateWaiting()}else t.compTimerState.statePreBet()},o.prototype._handleState_stopBet=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi))return r.prototype._handleState_stopBet.call(this,e);var o=e.getMiState();if(o==CONST.miState.noMi)t.compTimerState.stateWaiting();else if(o==CONST.miState.miEnd)t.compTimerState.stateClearing();else{var a=e.getMiEndTime();if(a){t.compTimerState.statePeek();var i=e.getMiSec();t.compTimerState.refreshTime(i,a)}else t.compTimerState.stateClearing()}},o.prototype.setBPTBar=function(e,t,r){var o=this;o.createBPTBar();var a=e+t+r;a>0?(o.cmp_MaskedImage_b.changeImageHeight(e/a*80),o.cmp_MaskedImage_p.changeImageHeight(t/a*80)):o.setBPTBar(33,33,33)},o.prototype.dataChanged=function(){var r=this;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(r.label_banker.size=24,r.label_player.size=24,r.label_tie.size=24);var o=r.data.tableCtrl;r.label_roomName.text=o.name,o.isMatch?o.canEnrolled()?(r.joinMatchNeed.text=e.UTIL.NUM.getSplitNumStr(o.match.entryFee),r.joinMatchNeed.visible=!0,r.joinMatchNeed.width>50&&(r.joinMatchNeed.scaleX=50/r.joinMatchNeed.width),r.joinMatchNeed.text=r.joinMatchNeed.text,0==o.match.entryFee?(r.lockOrMoney.visible=!1,r.joinMatchNeed.visible=!1,r.registeryFeeBase.visible=!1):(r.joinMatchNeed.visible=!0,r.lockOrMoney.visible=!0,r.registeryFeeBase.visible=!0)):(r.lockOrMoney.source="lockOrMoney_l",r.lockOrMoney.visible=!0,r.joinMatchNeed.visible=!1,r.registeryFeeBase.visible=!1):(r.lockOrMoney.visible=!1,r.joinMatchNeed.visible=!1,r.registeryFeeBase.visible=!1),r.dealer.setData({dealerName:o.roundCtrl.dealerName,dealerId:o.roundCtrl.dealerId,tableCode:o.code,dealerNameTranslate:o.dealerNameTranslate});var a=o.subType==CONST.baccaratSubType.mi;r.grp_miCard.visible=a;var i=!e.GTS.mgr.getCommissionStateInRoomList(o.code);r.img_noLoad.visible=i,r.img_noLoad.includeInLayout=i,r.label_noLoad.includeInLayout=r.label_noLoad.visible=r.img_noLoad.visible;var n=o.countMap||{},s=CONST.betType.baccarat;r.label_round.text=(n[s.banker]||0)+(n[s.player]||0)+(n[s.draw]||0),r.label_banker.text=n[s.banker]||0,r.label_player.text=n[s.player]||0,r.label_tie.text=n[s.draw]||0,r.setBPTBar(n[s.banker]||0,n[s.player]||0,n[s.draw]||0);for(var l,c,p=o.rangeList4Dis,_=0,u=0,h=p.length;h>u;u++)c=p[u],0==u?(l=c[0],_=c[1]):(l>c[0]&&(l=c[0]),_<c[1]&&(_=c[1]));r.label_roomLimit.visible=!o.isMultiRange;var m=e.GW.mgr.isChangeDisplayDecimalMark?",":".",d=_>=1e3?""+e.UTIL.NUM.getSplitNumStr(_/1e3):""+_;d=-1!=d.indexOf(m)?d.substring(0,d.indexOf(m)+4):d,d=_>=1e3?d+"K":d;var b=l>=1e3?""+e.UTIL.NUM.getSplitNumStr(l/1e3):""+l;b=-1!=b.indexOf(m)?b.substring(0,b.indexOf(m)+4):b,b=l>=1e3?b+"K":b,r.label_roomLimit.text=mo.STR.format("%s-%s",b,d),r._updateGameState();var g=function(e){var r=new t.LuzhuAnalyst(1);if(!e||0===e.length)return r;for(var o=0,a=e.length;a>o;o++)e[o].results&&r.receiveHistoryMsg({results:e[o].results,roundNo:e[o].code,cards:[]});return r}(o.luZhuList);r.zhuPanLuPainter.setZhuPanData(g.getZhuPanData()),r.daluPainter.setDaLuData(g.getDaLuData()),r.dayanLuPainter.setAnalysisData(g.getDaYanLuData()),r.xiaoLuPainter.setAnalysisData(g.getXiaoLuData()),r.yueyouLuPainter.setAnalysisData(g.getYueYouLuData()),r.queryLuZhu=function(e){var t=g.queryLuZhu(e);t&&(t.zhupan&&r.zhuPanLuPainter.showQueryZhu(t.zhupan),t.dalu&&r.daluPainter.showQueryZhu(t.dalu),t.dayan&&r.dayanLuPainter.showQueryZhu(t.dayan),t.xiaolu&&r.xiaoLuPainter.showQueryZhu(t.xiaolu),t.yueyou&&r.yueyouLuPainter.showQueryZhu(t.yueyou))},r.setMaintainMask(),window.testPanel=this},o.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_baccarat"),t.data.tableCtrl&&!e.GTS.mgr.isTableMaintain(t.data.tableCtrl.code)&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},o}(e.RoomListItem);t.BaccRoomListItemNeon=r,__reflect(r.prototype,"G.BACC.BaccRoomListItemNeon"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var e=this;mo.emitter.emit("enterBaccList"),mo.emitter.on("enterMatchFromeADForPC",(function(t){console.log("enterMatchFromeADForPC",t.tableCtrl),e.gotoGame(t.tableCtrl)}))},o.prototype.onExit=function(){r.prototype.onExit.call(this);this.unEmitter()},o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_room=t.BaccRoomListItemNeon},o.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n),i.subType==CONST.baccaratSubType.mi&&e.GTS.mgr.setCommissionStateByRoom(i.code,!0)}return t},o.prototype._click_list_room=function(e){var t=e.item.tableCtrl;t.isAccessible?this.gotoGame(t):mo.MSG.show(mo.D.langCodeToTxt("g_watch_match_cannot_join"))},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomList);t.BaccRoomList=r,__reflect(r.prototype,"G.BACC.BaccRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.GTS.BaccCtrl,o=e.BACC.BaccBetAreaHelper,a=e.COMM.Payout,i=e.COMM.IBetMgrEvent,n=e.COMM.BaseBetRecorder,s=egret.Tween,l=e.BASE.MsgFloatLayer,c=function(c){function p(){var e=c.apply(this,arguments)||this;return e.isClick=0,e.isMatchPointMode=!1,e.recordBetMoneyCNY=[],e.noBetRoundCount=0,e}return __extends(p,c),p.prototype._initProp=function(){c.prototype._initProp.call(this);var e=this;e.BetType=CONST.betType.baccarat,e.isConfirm=!1,e.keepWinsNum=0,e.keepLosesNum=0,e.keepBetDragon=0,e.keepBetTiger=0,e.sortChipsArray=[],e.chipList=[]},p.prototype._childrenCreated=function(){c.prototype._childrenCreated.call(this);var t=this;t._setupLuzuPainter(),t.baccBetMgr=new e.BACC.BaccBetMgr,t.grp_bacc&&(t.grp_bacc.visible=!1),t.baccShowCard&&(t.baccShowCard.visible=!1),t.grp_jm&&(t.grp_jm.visible=!1),t.baccShowCardJM&&(t.baccShowCardJM.visible=!1)},p.prototype.luzhuMouseOvered=function(e,t,r,o){var a=this;if(a.baccShowHistory)if(-1!=e){var i=a.tableCtrl.luZhuList;if((i=i.filter((function(e){return e&&e.results})))[e]&&i[e].srcResults){var n=a.globalToLocal(t,r);n.x+=o/2+10;var s=a.baccShowHistory.height*a.baccShowHistory.scaleY;n.y+s>a.height&&(n.y=a.height-s);var l=i[e].srcResults;a.baccShowHistory.showContent(!0,n.x,n.y,l)}}else a.baccShowHistory.showContent(!1)},p.prototype.luzhuMouseOut=function(){this.baccShowHistory.showContent(!1)},p.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:25,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};r.res=t.LZllRes,r.useForShowHistory=!0,r.mouseMoveInCallback=e.luzhuMouseOvered.bind(e),r.mouseMoveOutCallback=e.luzhuMouseOut.bind(e),e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:80,maxRow:6};o.res=t.LZllRes,e.daluPainter=new t.DaluPainter(e.scr_dalu,o);var a={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};a.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};i.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};n.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},p.prototype.dataChanged=function(){c.prototype.dataChanged.call(this);var e=this;e.data.param&&(e.baccBetMgr.tableCtrl=e.tableCtrl);var t=e.tableCtrl.subType==CONST.baccaratSubType.mi;e.grp_bacc&&(e.grp_bacc.visible=!t),e.baccShowCard&&(e.baccShowCard.visible=!t),e.grp_jm&&(e.grp_jm.visible=t),e.baccShowCardJM&&(e.baccShowCardJM.visible=t,e.baccShowCardJM.setData({tabelCtrl:e.tableCtrl}),e.baccShowCardJM.scaleX=.93,e.baccShowCardJM.scaleY=.93,e.baccShowCardJM.x=15,e.baccShowCardJM.y=50),e.baccRightSlider&&e.baccRightSlider.setData({tabelCtrl:e.tableCtrl}),e.baccRightSliderJM&&e.baccRightSliderJM.setData({tabelCtrl:e.tableCtrl}),e.baccShowCard&&e.baccShowCard.setData({tabelCtrl:e.tableCtrl}),e.themeGameTablePart&&e.themeGameTablePart.setData({tableCtrl:e.tableCtrl})},p.prototype.onEnter=function(){var o=this,a=o.tableCtrl.subType==CONST.baccaratSubType.mi;o.isMatchPointMode=o.tableCtrl.isMatch&&o.tableCtrl.match&&o.tableCtrl.match.mode==CONST.matchMode.point,o.tableCtrl.isMatch&&mo.emitter.emit("go_in_match_room"),a&&(e.muteMusic(!0),e.soundCtrl.stopBGM()),c.prototype.onEnter.call(this),o.justEnterGame=!0,o.isHavePayoutLayer=!1,o.chipBar.tableCtrl=o.tableCtrl,o.chipBar.btn_chipSetting.visible=!1,o.BetSettingLayer=new e.COMM.BetSetting,o.BetSettingLayer.tableCtrl=o.tableCtrl,o.BetSettingLayer.grp_bet_setting.right=10,o.BetSettingLayer.grp_bet_setting.bottom=170,o.grp_bet_setting.addChild(o.BetSettingLayer),o.ifUseCustomerBet=e.GTS.mgr.checkIfUseCustomer(o.tableCtrl),o.setBetArea(o.ifUseCustomerBet),o.setDeskMsgBetShow(o.ifUseCustomerBet),o.setDeskMsgColorPosition(o.ifUseCustomerBet),o.handleOtherCompanyStuff(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!0,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!0,o.onEmitter(e.VideoMgr,"networkStatus",(function(t){null!=t&&(e.COMM.layerMgr.baseTopBar.img_wifi.source="ico_wifi_"+t)})),o.onEmitter(o.baccBetMgr,i.ON_BET_AMOUNT_CHG,o._betNumChanged),o.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_MONEY_CHANGED,o._setDeskUpdate),o.onEmitter(o.tableCtrl,CONST.BBT_table.scanCard,o._scanCard),o.onEmitter(o.tableCtrl,CONST.BBT_table.bet,o._setDeskUpdate),o.onEmitter(o.tableCtrl,r.ON_VIRTUAL_ENTER,o._setCurMyDesk),o.onEmitter(o.tableCtrl,r.ON_VIRTUAL_EXIT,o._setCurMyDesk),o.onEmitter(o.tableCtrl,r.ON_VIRTUAL_BET,o._otherPlayerBetChange),o.onEmitter(o.tableCtrl,CONST.BBT_table.bet,o._otherDeskPlayerBetChange),o.onEmitter(o.tableCtrl,r.ON_VIRTUAL_REFRESH,o._onRefreshVirtual),o.baccBetMgr&&(o.onEmitter(o.baccBetMgr,"clearAllHedgeBetEvent",o.clearAllHedgeInBetArea),o.onEmitter(o.baccBetMgr,"checkHedgeAndDisableArea",o.disableMultiHedgeArea)),e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,o.showBonus,o),mo.PROJ.isSkipVideoLoading||(o.grp_bg.visible=!1,o.onEmitter(mo.emitter,"videoLoading",(function(){o.image_rect.visible=!0,o.image_rect.alpha=.9,o.img_video_loading.visible=!0,o.videoLoading.visible=!0,setInterval((function(){o.videoLoading.loading.play(0)}),800)})),o.onEmitter(mo.emitter,"videoLoadingHide",(function(){o.videoLoading.loading.stop(),o.image_rect.visible=!1,o.videoLoading.visible=!1,o.img_video_loading.visible=!1}))),o.tableCtrl.type!=CONST.tableType.baccarat||o.tableCtrl.isMatch||o.onEmitter(e.GTS.mgr,"brokerageRequiredChange",o.changeBrokerageRequiredImage),a?(o.chat.visible=!0,o.chat.tableCtrl=o.tableCtrl,o.btn_double.visible=!1):(o.chat.visible=!0,o.chat.tableCtrl=o.tableCtrl,o.btn_double.visible=!0),o.sortChips(),o.rewardEff&&(o.isPlayRewardEff=!0,o.rewardEff.visible=!1,o.onEmitter(o.rewardEff.emitter,"close",o.rewardClose),o.baccRightSliderJM&&o.onEmitter(o.baccRightSliderJM.emitter,"over",o.rewardShow)),o._refreshOpBtns(),o.analyst=new t.LuzhuAnalyst(o.tableCtrl.code),o.oldCode=o.tableCtrl.code,o._refreshLuzhu(),o._setCurMyDesk();var n=o.tableCtrl.gameState,s=[1,2,3,5,6,7,8];o.tableCtrl.virtualSeat&&setTimeout((function(){mo.MSG.show(e.id_c_msgCode.g_seat_tip,s[Number(o.tableCtrl.virtualSeat)])}),500),n!=CONST.gameState.payout?o._otherPlayerBetInit():o._initChipObj(),o._gameStateChange(n);for(var l=0;7>l;l++)o["deskComp_"+l].setDeskMsgHoverEffect();o.tableCtrl.isMatch&&o.tableCtrl.match&&o.tableCtrl.match.mode==CONST.matchMode.point&&(o.isMatchPointMode=!0),o.btn_playerAsk.addEventListener(mouse.MouseEvent.MOUSE_OVER,o.onMouseIn_playerAsk,o),o.btn_bankerAsk.addEventListener(mouse.MouseEvent.MOUSE_OVER,o.onMouseIn_bankerAsk,o)},p.prototype.resetGamePage=function(){var e=this;e.isHavePayoutLayer=!1,e._refreshOpBtns(),e._refreshLuzhu(),e._recoverBetInfo(),e.dynamicConfirm&&e.dynamicConfirm.showBtns(!1);var t=e.tableCtrl.gameState;e._gameStateChange(t)},p.prototype.disableMultiHedgeArea=function(e){for(var t=0;t<this.betAreaHelpers.length;t++){var r=this.betAreaHelpers[t];r&&r.betType&&e.indexOf(r.betType)>=0&&r.toggleDisableImage(!0)}},p.prototype.clearAllHedgeInBetArea=function(){for(var e=0;e<this.betAreaHelpers.length;e++){var t=this.betAreaHelpers[e];t&&t.toggleDisableImage(!1)}},p.prototype.handleOtherCompanyStuff=function(){this.tableCtrl&&(this.tableCtrl.type,CONST.tableType.baccarat)},p.prototype.drawSelf=function(e,t,r,o){var a=r,i=r,n=o,s=o,l=new mo.NUM.Polygon(mo.p(0,0),mo.p(a,0),mo.p(i,n),mo.p(0,s));l.x=156+e,l.y=t,l.scaleX=1.6,l.scaleY=1.6,l.drawSelf(),this.grp_video.addChild(l)},p.prototype.changeBrokerageRequiredImage=function(){var t=this;t.grp_betB&&(t.betType_B.source=e.GTS.mgr.isBrokerageRequired()?"blk_bcr_banker":"blk_bcr_banker1"),t.tableCtrl.isMatch&&(t.betType_B.source=t.tableCtrl.brokerageRequired?"blk_bcr_banker":"blk_bcr_banker1")},p.prototype.testInform=function(){console.log("房間內的資訊顯示->",this.tableCtrl)},p.prototype._setInterval=function(e,t){return egret.setInterval(e,this,t)},p.prototype._clearInterval=function(e){egret.clearInterval(e)},p.prototype.sortChips=function(){for(var e=this,t=0;t<e.grp_betArea.numChildren;t++){var r=e.grp_betArea.getChildAt(t);if(r){var o=r.name;"grp_betTie"==o&&e.sortChipsArray.push(t),"grp_betB"==o&&e.sortChipsArray.push(t),"grp_betP"==o&&e.sortChipsArray.push(t),"grp_betBD"==o&&e.sortChipsArray.push(t),"grp_betPD"==o&&e.sortChipsArray.push(t),"grp_showChip"==o&&e.sortChipsArray.push(t)}}e.sortChipsArray.length>=6&&(e.grp_betArea.setChildIndex(e.grp_showChip,e.sortChipsArray[0]),e.grp_betArea.setChildIndex(e.grp_betTie,e.sortChipsArray[1]),e.grp_betArea.setChildIndex(e.grp_betBD,e.sortChipsArray[2]),e.grp_betArea.setChildIndex(e.grp_betPD,e.sortChipsArray[3]),e.grp_betArea.setChildIndex(e.grp_betB,e.sortChipsArray[4]),e.grp_betArea.setChildIndex(e.grp_betP,e.sortChipsArray[5]))},p.prototype._onRefreshInfo=function(){var e=this;e.baccBetMgr.recoverBetInfo(),c.prototype._onRefreshInfo.call(this),e.tableCtrl.gameState!=CONST.gameState.payout&&(e.hideLastChip(),e._otherPlayerBetInit())},p.prototype.rewardShow=function(){var t=this,r=e.GW.mgr.channel.fee;t.isPlayRewardEff&&(t.rewardEff&&(t.rewardEff.label_chip.text=r,t.rewardEff.visible=!0,t.rewardEff.rewardEfc.play(0)),t.isPlayRewardEff=!1)},p.prototype.rewardClose=function(){this.isPlayRewardEff=!0},p.prototype._refreshLuzhu_force=function(){var e=this;e.analyst&&(e.analyst.clearData(),e._refreshLuzhu())},p.prototype._refreshLuzhu=function(){var e=this;c.prototype._refreshLuzhu.call(this);var t=e.tableCtrl.luZhuList||[],r=e.analyst;0===t.length&&e.analyst.clearData();for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});e.zhuPanLuPainter.setZhuPanData(r.getZhuPanData(),!e.justEnterGame),e.daluPainter.setDaLuData(r.getDaLuData(),!e.justEnterGame),e.dayanLuPainter.setAnalysisData(r.getDaYanLuData(),!e.justEnterGame),e.xiaoLuPainter.setAnalysisData(r.getXiaoLuData(),!e.justEnterGame),e.yueyouLuPainter.setAnalysisData(r.getYueYouLuData(),!e.justEnterGame),e.refreshQueryLuZhu()},p.prototype.refreshQueryLuZhu=function(){var e=this;e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker)},p.prototype.showQueryLuZhu=function(e,t){var r=this.analyst.queryLuZhu(t);if(r){var o=[];r.dayan&&(o[0]=r.dayan),r.xiaolu&&(o[1]=r.xiaolu),r.yueyou&&(o[2]=r.yueyou),e.setData({luZhuList:o})}else e.setData({luZhuList:[null,null,null]})},p.prototype.stopBet=function(e){this.baccBetMgr.stopBet(e)},p.prototype.needPlayKeepBetDragon=function(){return this.tableCtrl.type==CONST.tableType.dragonTiger&&!(this.keepBetDragon<2)},p.prototype.checkKeepBetDragon=function(){var e=this;if(e.justEnterGame)return!1;if(e.tableCtrl.type!=CONST.tableType.dragonTiger)return!1;var t=e.baccBetMgr,r=CONST.betType.dragonTiger;return!!t.beted(r.dragon)},p.prototype.addKeepBetDragon=function(){var e=this;if(e.justEnterGame)return!1;e.tableCtrl.type==CONST.tableType.dragonTiger&&e.keepBetDragon++},p.prototype.needPlayKeepBetTiger=function(){return this.tableCtrl.type==CONST.tableType.dragonTiger&&!(this.keepBetTiger<2)},p.prototype.checkKeepBetTiger=function(){var e=this;if(e.justEnterGame)return!1;if(e.tableCtrl.type!=CONST.tableType.dragonTiger)return!1;var t=e.baccBetMgr,r=CONST.betType.dragonTiger;return!!t.beted(r.tiger)},p.prototype.addKeepBetTiger=function(){var e=this;if(e.justEnterGame)return!1;e.tableCtrl.type==CONST.tableType.dragonTiger&&e.keepBetTiger++},p.prototype._initChipObj=function(){var e=this;e.chipObj={},e.chipObj[CONST.betType.baccarat.banker]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.player]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.playerPair]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.draw]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.bankerPair]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.bankerLucky6]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.bankerDragonBonus]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.playerDragonBonus]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.big]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.small]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.bankerOdd]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.bankerEven]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.playerOdd]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.baccarat.playerEven]=[[],[],[],[],[],[],[]],e.chipObj_P={},e.chipObj_P[CONST.betType.baccarat.banker]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.player]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.playerPair]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.draw]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.bankerPair]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.bankerLucky6]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.bankerDragonBonus]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.playerDragonBonus]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.big]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.small]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.bankerOdd]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.bankerEven]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.playerOdd]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.baccarat.playerEven]=[[],[],[],[],[],[],[]]},p.prototype._otherPlayerBetInit=function(){var e=this;e._initChipObj();var t=e.tableCtrl;if(t)for(var r=t.virtualInfoList||[],o=0;7>o;o++){var a=r[o];a&&(a.isSelf||e._otherPlayerAllBetChange(o,a))}},p.prototype._otherPlayerAllBetChange=function(t,r){var o=this;for(var a in o.showChipObj={},o.showChipObj[t]={},r.bet)if(o.showChipObj[t][a]={},!r.isSelf){var i=r.currency,n=e.COMM.FX.calcMoneyByCurrencyForChipShow(i,r.bet[a],o.isMatchPointMode);o._getBetChipGrp(n,a,t)}},p.prototype._otherPlayerBetChange=function(t,r){var o=this;for(var a in o.showChipObj={},o.showChipObj[t]={},r.bet_delta)if(o.showChipObj[t][a]={},!r.isSelf){var i=r.currency,n=e.COMM.FX.calcMoneyByCurrencyForChipShow(i,r.bet_delta[a]);n>0&&o._getBetChipGrp(n,a,t)}if(o.ifUseCustomerBet&&o.tableCtrl.gameState==CONST.gameState.betting&&!r.isSelf&&r.total&&(o.popUpDeskMsgBet(t,r),r.userId&&r.userId!=e.GTS.userCtrl.id&&o.flyChipHelper)){o.recordBetMoneyCNY[r.userId]||(o.recordBetMoneyCNY[r.userId]=[]);var s=o.tableCtrl.subType==CONST.baccaratSubType.mi?t:99;for(var l in r.bet){var c=r.bet[l],p=o.recordBetMoneyCNY[r.userId][l];if(null==p)c=o.flyChipHelper.currencyTranslate(r.currency,c),o.flyChipHelper.doFlyChip(s,r.userId,l,c);else if(c>p){var _=c-p;_=o.flyChipHelper.currencyTranslate(r.currency,_),o.flyChipHelper.doFlyChip(s,r.userId,l,_)}}o.recordBetMoneyCNY[r.userId]=r.bet}},p.prototype._otherDeskPlayerBetChange=function(t){var r=this;if(t&&r.tableCtrl.gameState==CONST.gameState.betting&&t.user&&t.user.id&&t.user.id!=e.GTS.userCtrl.id){if(!t.otherBet||!t.otherBet.betDetail)return;if(r.recordBetMoneyCNY[t.user.id]||(r.recordBetMoneyCNY[t.user.id]=[]),r.flyChipHelper){for(var o in t.otherBet.betDetail){var a=t.otherBet.betDetail[o],i=r.recordBetMoneyCNY[t.user.id][o];if(null==i)a=r.flyChipHelper.currencyTranslate(t.otherBet.currency,a),r.flyChipHelper.doFlyChip(99,-1,o,a);else if(a>i){var n=a-i;n=r.flyChipHelper.currencyTranslate(t.otherBet.currency,n),r.flyChipHelper.doFlyChip(99,-1,o,n)}}r.recordBetMoneyCNY[t.user.id]=t.otherBet.betDetail}}},p.prototype._getBetChipGrp=function(e,t,r){var o=this,a=CONST.chipV.sort((function(e,t){return t-e})),i=a[a.length-1];if(0>=e)o._otherPlayerBetShow(t,r);else{if(i>e)return e=0,o.showChipObj[r][t][i]=o.showChipObj[r][t][i]?o.showChipObj[r][t][i]+1:1,void o._otherPlayerBetShow(t,r);for(var n=0;n<a.length;n++)if(e>=a[n])return e-=a[n],o.showChipObj[r][t][a[n]]=o.showChipObj[r][t][a[n]]?o.showChipObj[r][t][a[n]]+1:1,void o._getBetChipGrp(e,t,r)}},p.prototype._otherPlayerBetShow=function(t,r){var o=this;if(!o.ifUseCustomerBet){var a=o.showChipObj[r],i=r,n=a[t],s=0;for(var l in n)for(var c=function(r){if(!o.chipObj[t])return"continue";var a=o.chipObj[t][i];if(!a)return"continue";var n=new eui.Image,c=e.BASE.resHelper.getBetChipRes(l);n.source=c;var p=CONST.chipData.initpos[i],_=p[0],u=p[1];n.x=_,n.y=u,n.name=t+"_"+i+"_"+l+"_"+r,o.grp_showChip.addChild(n),o.chipList.push(n),egret.Tween.removeTweens(n),a.push(n);var h=egret.Tween.get(n),m=CONST.chipData.pos[t],d=m[i][0],b=m[i][1]-5*(o.chipObj[t][i].length-1);h.wait(100+50*s).to({x:d,y:b},500).call((function(){if(!o._hasDtored){var r,a=o.chipObj[t][i].length,s=n.name.split("_"),l=o.grp_showChip.getChildByName(s[0]+"_"+s[1]+"_num"),c=null,p=o.tableCtrl,_=null;if(p&&p.virtualInfoList){if(!(c=p.virtualInfoList[Number(s[1])]))return;var u=c.currency,h=c.bet[s[0]];_=e.COMM.FX.calcMoneyByCurrencyForChipShow(u,h,o.isMatchPointMode)}if(a>6){var d=o.chipObj[t][i].pop();Number(d.name.split("_")[2])>Number(o.chipObj[t][i][5].name.split("_")[2])&&(o.chipObj[t][i][5].source=e.BASE.resHelper.getBetChipRes(Number(d.name.split("_")[2]))),mo.EUI.helper.rm(d),r=m[i][1]-25}else r=m[i][1]-5*(a-2);var b=e.UTIL.NUM.getSplitNumStr(_);if(l)l.y=r-35,l.setData({num:b});else{var g=new e.BASE.ChipNum;g.name=s[0]+"_"+s[1]+"_num",g.x=n.x-28,g.y=r-35,o.grp_showChip.addChild(g),g.setData({num:b})}for(var y=0;y<o.grp_showChip.numChildren;y++){var f=o.grp_showChip.getChildAt(y);if(f)-1!=f.name.indexOf("num")&&o.grp_showChip.setChildIndex(f,o.grp_showChip.numChildren+y)}}})),s+=1},p=0;p<Math.min(n[l],6);p++)c(p)}},p.prototype._setCurMyDesk=function(){var e=this;if(e.tableCtrl)for(var t=e.tableCtrl.virtualInfoList||[],r=0;7>r;r++){var o=t[r];o&&o.isSelf&&o.isIn&&e._onDesk(r),e["deskComp_"+r].setData({data:o,tableType:e.tableCtrl.type}),e.updateFlyChipOwner(r,o)}},p.prototype._onDesk=function(e){var t=this;t.onEmitter(t["deskComp_"+e].emitter,"over",(function(){t["playerD_num_"+e]&&(t["playerD_num_"+e].visible=!0),t["bankerD_num_"+e]&&(t["bankerD_num_"+e].visible=!0),s.removeTweens(t["desk_"+e]),s.removeTweens(t["mynum_"+e]),t["desk_"+e].visible=!0,t["mynum_"+e].visible=!0,s.get(t["desk_"+e],{loop:!1}).to({alpha:0},1e3).to({alpha:1},1e3).to({alpha:0},1e3).to({alpha:1},1e3).call((function(){s.removeTweens(t["desk_"+e])})),s.get(t["mynum_"+e],{loop:!1}).to({alpha:0},1e3).to({alpha:1},1e3).to({alpha:0},1e3).to({alpha:1},1e3).call((function(){s.removeTweens(t["mynum_"+e])}))}))},p.prototype._setDeskUpdate=function(){var e=this;if(e.tableCtrl&&!e.tableCtrl.isBetting)for(var t=e.tableCtrl.virtualInfoList||[],r=0;7>r;r++)e["deskComp_"+r].setData({data:t[r],tableType:e.tableCtrl.type}),t[r]||(e["desk_"+r].visible=!1,e["mynum_"+r].visible=!1)},p.prototype._onRefreshVirtual=function(){var e=this;if(e.tableCtrl)for(var t=e.tableCtrl.virtualInfoList||[],r=0;7>r;r++)e["deskComp_"+r].setData({data:t[r],tableType:e.tableCtrl.type})},p.prototype._removeChip=function(){for(var e=this,t=0,r=0,o=!0,a=e.tableCtrl.roundCtrl.results,i=0;i<e.grp_showChip.numChildren;i++){var n=e.grp_showChip.getChildAt(i);if(-1!=n.name.indexOf("num"))return mo.EUI.helper.rm(n),void e._removeChip()}for(var l in e.chipObj)if(a&&-1==a.indexOf(Number(l)))for(i=0;i<e.chipObj[l].length;i++)if(e.chipObj[l][i].length>0){o=!1;for(var c=0;c<e.chipObj[l][i].length;c++){var p=e.chipObj[l][i][c];t+=1;var _=s.get(p,{loop:!1}),u={x:746,y:350};if(-1!=a.indexOf(Number(CONST.betType.baccarat.draw))&&(Number(l)==CONST.betType.baccarat.player||Number(l)==CONST.betType.baccarat.banker)){var h=e.grp_desk.getChildByName("desk_"+i);u.x=e.grp_desk.x+h.x+h.width/2-20,u.y=e.grp_desk.y+h.y+h.height/2-20}_.wait(100+50*c).to({x:u.x,y:u.y},500).call((function(){e._hasDtored||t==(r+=1)&&(e._deleteChildren(),e._payoutChip())}))}}o&&(e.justEnterGame||e._payoutChip())},p.prototype._deleteChildren=function(){var e=this,t=e.tableCtrl;if(t){var r=t.roundCtrl;if(r){for(var o=r.results,a=0;a<e.grp_showChip.numChildren;a++){var i=e.grp_showChip.getChildAt(a);s.removeTweens(i);var n=i.name.split("_");if(-1!=i.name.indexOf("num"))return mo.EUI.helper.rm(i),void e._deleteChildren();if(o&&-1==o.indexOf(Number(n[0])))return mo.EUI.helper.rm(i),void e._deleteChildren()}if(o)for(var l=0;l<o.length;l++)e.chipObj[o[l]]=[]}}},p.prototype._payoutChip=function(){var e=this;if(e.tableCtrl){var t=e.tableCtrl.virtualInfoList||[],r=e.tableCtrl.roundCtrl.results;e.payoutChipObj={},e.isPayoutChipOver=0,e.isPayoutChipOverBk=0;for(var o=0;7>o;o++){e.payoutChipObj[o]={};var a=t[o];if(a){var i=a.bet;for(var n in i)if(e.payoutChipObj[o][n]={},r&&-1!=r.indexOf(Number(n))){var s=i[n];e._getPayoutChipGrp(s,n,o)}}}}},p.prototype._getPayoutChipGrp=function(e,t,r){for(var o=CONST.chipV,a=0;a<o.length;a++){if(e>=o[a]){var i=Math.floor(e/o[a]);e-=o[a]*i,this.payoutChipObj[r][t][o[a]]=i}if(0>=e){this._otherPlayerPayoutShow(t,r);break}}},p.prototype._otherPlayerPayoutShow=function(t,r){var o=this;if(!o.ifUseCustomerBet){var a=o.payoutChipObj[r],i=r;for(var n in a){var s=a[n],l=0;for(var c in s)for(var p=function(r){var a=new eui.Image,n=e.BASE.resHelper.getBetChipRes(c);a.source=n,a.x=746,a.y=350,a.name=t+"_"+i+"_"+c+"_"+r+"_payout",o.grp_showChip.addChild(a),o.chipList.push(a),egret.Tween.removeTweens(a),o.chipObj_P[t][i].push(a);var s=egret.Tween.get(a),p=CONST.chipData.pos[t],_=p[i][0]+30,u=p[i][1]-5*(o.chipObj_P[t][i].length-1);o.isPayoutChipOver=o.isPayoutChipOver+1,s.wait(100+50*l).to({x:_,y:u},500).call((function(){if(!o._hasDtored){var r=o.chipObj_P[t][i].length,n=a.name.split("_");if(o.grp_showChip.getChildByName(n[0]+"_"+n[1]+"_num"),r>6){var s=o.chipObj_P[t][i].pop();Number(s.name.split("_")[2])>Number(o.chipObj_P[t][i][5].name.split("_")[2])&&(o.chipObj_P[t][i][5].source=e.BASE.resHelper.getBetChipRes(Number(s.name.split("_")[2]))),mo.EUI.helper.rm(s)}o.isPayoutChipOverBk=o.isPayoutChipOverBk+1,o.isPayoutChipOver==o.isPayoutChipOverBk&&o._payoutGiftPlayer()}})),l+=1},_=0;_<Math.min(s[c],6);_++)p(_)}}},p.prototype._payoutGiftPlayer=function(){for(var e=this,t=0,r=0,o=0;o<e.grp_showChip.numChildren;o++){var a=e.grp_showChip.getChildAt(o);if(s.removeTweens(a),-1!=a.name.indexOf("num"))return mo.EUI.helper.rm(a),void e._payoutGiftPlayer();var i=Number(a.name.split("_")[1]),n=CONST.chipData.initpos[i],l=n[0],c=n[1],p=egret.Tween.get(a);t+=1,p.wait(100+50*o).to({x:l,y:c},500).call((function(){e._hasDtored||t==(r+=1)&&(e.grp_showChip.removeChildren(),e._initChipObj())}))}},p.prototype._hintThree=function(){var t=!0;this.tableCtrl.subType==CONST.baccaratSubType.mi&&e.GTS.userCtrl.type==CONST.userType.tourist&&(t=!1),t&&mo.MSG.show(e.id_c_msgCode.need_bet_for_no_out)},p.prototype._gameStateChange=function(t){var r=this,o=r.tableCtrl;if(r.isConfirm)r.isConfirm=!1;else{if(r.curGameState=t,r.justEnterGame)switch(t){case CONST.gameState.shuffle:break;default:r._recoverBetInfo()}switch(t){case CONST.gameState.betting:var a=mo.DATE.now(),i=r.tableCtrl.notifyMs-(a-r.tableCtrl.roundCtrl.startTime.getTime());if(i>0?(r.stopBet(!0),setTimeout((function(){r.stopBet(!1)}),i)):r.stopBet(!1),r.setBtnAgain(),r.ifUseCustomerBet&&r.customerBetArea){var n=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateThirtyDisableImages(n),r.baccBetMgr.checkConfirmedBetsAndLockHedge(),r.btn_again.enabled&&(r.checkPreRoundBetInCustomerBetSetting()||(r.btn_again.enabled=!1,r.btn_again.visible=!1))}r.clearAllHedgeInBetArea(),r.baccBetMgr.checkConfirmedBetsAndLockHedge();break;case CONST.gameState.shuffle:if(r.stopBet(!0),r._refreshLuzhu(),r.ifUseCustomerBet&&r.customerBetArea){n=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateThirtyDisableImages(n),r.flyChipHelper&&r.flyChipHelper.removeAllChipFromParent()}break;case CONST.gameState.stopBet:r.stopBet(!0),r.openCloseBtns(),r.betFinalConfirm(),r.justEnterGame&&(o.isMatch&&o.isMatchOver||setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500)),r.checkKeepBetDragon()?(r.addKeepBetDragon(),r.keepBetTiger=0):r.checkKeepBetTiger()&&(r.addKeepBetTiger(),r.keepBetDragon=0),r.tableCtrl.subType==CONST.baccaratSubType.mi&&(r.baccShowCardJM&&(r.baccShowCardJM.visible=!0),r.baccShowCard&&(r.baccShowCard.visible=!1));break;case CONST.gameState.payout:var s=e.UTIL.calPayout(r.tableCtrl.roundCtrl,r.tableCtrl.betCtrl).payoutDetail;mo.OBJ.isEmpty(s),r._removeChip(),r.justEnterGame&&(o.isMatch&&o.isMatchOver||setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500)),r.stopBet(!0),r.betAreaSettlement(),r._refreshLuzhu(),mo.emitter.emit("set_brokerage_lock",!1),r.flyChipPayout(),r.tableCtrl.subType==CONST.baccaratSubType.mi&&(r.baccShowCardJM&&(r.baccShowCardJM.visible=!1),r.baccShowCard&&(r.baccShowCard.visible=!0))}r._setDeskUpdate(),r.tableCtrl.subType==CONST.baccaratSubType.mi&&(r.btn_again.visible=!0),r.changeBrokerageRequiredImage()}},p.prototype.setBtnAgain=function(){var e=this;e.btn_again.enabled=e.baccBetMgr.hasPreRoundBetHistory(),e.btn_again.visible=e.btn_again.enabled,e.btn_again.enabled&&e.checkIsBet()&&(e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!0)},p.prototype.initialDeskMsgBet=function(){for(var e=0;7>e;e++)this["deskComp_"+e].clearBet()},p.prototype.setDeskMsgBetShow=function(e){for(var t=0;7>t;t++)this["deskComp_"+t].setIsShowBetDetail(e)},p.prototype.setDeskMsgColorPosition=function(e){this.grp_deskMsg.bottom=e?133:137;for(var t=0;7>t;t++){var r=this["deskComp_"+t];switch(t){case 0:r.bottom=e?63:77;break;case 1:r.bottom=43;break;case 2:r.bottom=26;break;case 3:r.bottom=e?20:22;break;case 4:r.bottom=26;break;case 5:r.bottom=43;break;case 6:r.bottom=e?63:77}r.label_name.size=r.label_money.size=e?24:20}},p.prototype.popUpDeskMsgBet=function(e,t){this["deskComp_"+e].popUpBet(t)},p.prototype.showMatchFinishMsg=function(){var e=new l,t=mo.D.langCodeToTxt("g_match_finish");e.msgText=t,e.durationTime=5e3,e.show()},p.prototype.clearMyChip=function(){this.betAreaReset()},p.prototype._onAfterBet=function(){this.betFinalConfirm(),this._setDeskUpdate()},p.prototype.updateKeepWinorLose=function(e){var t=this;e?(t.keepWinsNum++,t.keepLosesNum=0):(t.keepLosesNum++,t.keepWinsNum=0)},p.prototype.hideLastChip=function(){var e=this,t=e.grp_betP,r=e.grp_betB,o=e.grp_betPD,a=e.grp_betTie,i=e.grp_betBD;e.grp_showChip.removeChildren(),e.deleteLastChip(t),e.deleteLastChip(o),e.deleteLastChip(a),e.deleteLastChip(i),e.deleteLastChip(r),e.removeTweens(t),e.removeTweens(o),e.removeTweens(a),e.removeTweens(i),e.removeTweens(r),e._initChipObj()},p.prototype.removeTweens=function(e){egret.Tween.removeTweens(e.getChildByName("img_confirm"))},p.prototype.deleteLastChip=function(e){for(var t=0;t<e.numChildren;t++){var r=e.getChildAt(t);if("chip"==r.name&&(r.visible=!1,-1!=e.getChildIndex(r)))return mo.EUI.helper.rm(r),void this.deleteLastChip(e)}},p.prototype.betAreaSettlement=function(){this.baccBetMgr.betAreaSettlement()},p.prototype.betAreaReset=function(){var e=this;e.baccBetMgr.clear();for(var t=0,r=e.chipList.length;r>t;t++){var o=e.chipList[t];o&&(egret.Tween.removeTweens(o),mo.EUI.helper.rm(o),o=null)}e.chipList.length=0},p.prototype._onTimeStateChanged=function(){},p.prototype._onSettlement=function(){},p.prototype._openRound=function(){var t=this;t.oldCode=t.tableCtrl.code,t.justEnterGame=!1,t.isHavePayoutLayer=!1,t.betAreaReset(),t.hideLastChip(),t.clearMyChip(),t.initialDeskMsgBet(),t.noBetRoundCount++,t.setNoBetHint(t.noBetRoundCount),t.tableCtrl.isKailu()||mo.MSG.show(e.id_c_msgCode.bacc_place_your_bet),t.refreshMatchUserInfo(),t._gameStateChange(t.tableCtrl.gameState)},p.prototype.setNoBetHint=function(){},p.prototype._betStop=function(){var e=this;e.justEnterGame=!1,e.tableCtrl.playAudio("time_out_notice"),e._gameStateChange(e.tableCtrl.gameState)},p.prototype._payout=function(){var t=this;if(t.justEnterGame=!1,t._onPayout_audio(),t.tableCtrl){var r=t.tableCtrl.isMatch&&t.tableCtrl.isMatchOver,o=t.tableCtrl.gameState;if(!t.isHavePayoutLayer&&o!=CONST.gameState.betting){var i=t.tableCtrl.roundCtrl;if(i.results&&0!=i.results.length){var n=e.UTIL.calPayout(t.tableCtrl.roundCtrl,t.tableCtrl.betCtrl).payoutDetail;if(!mo.OBJ.isEmpty(n))t.isHavePayoutLayer=!0,a.show({tableCtrl:t.tableCtrl}).onClose((function(){})),t.tableCtrl.playAudio("coins_drop"),r&&setTimeout((function(){t.showMatchFinishMsg()}),4500);else e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3),r&&(mo.emitter.emit(CONST.matchEvent.matchEndShowRank,t.tableCtrl),t.showMatchFinishMsg());t._gameStateChange(t.tableCtrl.gameState)}}}},p.prototype._scanCard=function(){this.justEnterGame=!1;var e=this.tableCtrl.roundCtrl.srcResults;t.log("_scanCard",e)},p.prototype._shuffle=function(){this.justEnterGame=!1,this.betAreaReset(),c.prototype._shuffle.call(this)},p.prototype.onChipDrop=function(e,t){var r=new egret.Point(e,t);this.baccBetMgr.chipDropCheck(r.x,r.y,this.chipBar.chipValue)},p.prototype.onChipMove=function(e,t){var r=new egret.Point(e,t);this.baccBetMgr.chipMoveCheck(r.x,r.y)},p.prototype.onChipChoose=function(){},p.prototype.askLuZhu=function(e){var t=this,r=t.analyst.queryLuZhu(e);r&&(r.zhupan&&t.zhuPanLuPainter.showQueryZhu(r.zhupan),r.dalu&&t.daluPainter.showQueryZhu(r.dalu),r.dayan&&t.dayanLuPainter.showQueryZhu(r.dayan),r.xiaolu&&t.xiaoLuPainter.showQueryZhu(r.xiaolu),r.yueyou&&t.yueyouLuPainter.showQueryZhu(r.yueyou))},p.prototype._tap_btn_bankerAsk=function(){e.RCD.mgr.recordState(e.RCD.RcdState.BACC_B_ROAD),this.askLuZhu(this.BetType.banker),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},p.prototype._tap_btn_playerAsk=function(){e.RCD.mgr.recordState(e.RCD.RcdState.BACC_P_ROAD),this.askLuZhu(this.BetType.player),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},p.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},p.prototype._tap_btn_again=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),0==t.isClick&&(t.baccBetMgr.redoBet(),t._betNumChanged(),t.baccBetMgr.checkAllBetsAndLockHedge())},p.prototype._tap_btn_double=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),0==t.isClick&&(t.baccBetMgr.doubleBet(),t._betNumChanged(),e.RCD.log_mgr.sendEvent_ClientButton("game.double"))},p.prototype._tap_btn_undo=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),0==t.isClick&&(t.baccBetMgr.undo(),t._betNumChanged(),t.ifUseCustomerBet&&t.customerBetArea?t.customerBetArea.clearAllHedgeBet():(t.clearAllHedgeInBetArea(),t.baccBetMgr.checkConfirmedBetsAndLockHedge()))},p.prototype._betNumChanged=function(){this._refreshOpBtns()},p.prototype._tap_btn_back=function(){this._onKickFromTable()},p.prototype._onKickFromTable=function(){var e=this;c.prototype._onKickFromTable.call(this),e.ifUseCustomerBet&&e.customerBetSettingDlg&&e.customerBetSettingDlg.close()},p.prototype._refreshOpBtns=function(){var e=this;e.tableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():(e.baccBetMgr.hasUnConfirmedBet(),e.openOpBtns(e.baccBetMgr.hasUnConfirmedBet()))},p.prototype.betFinalConfirm=function(){var e=this;e.tableCtrl.isBetting||(e.baccBetMgr.betFinalConfirm(),e._betNumChanged())},p.prototype._tap_btn_confirm=function(){var r=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),r.baccBetMgr.startBet();var o=(r.baccBetMgr.unBetInvalidTypes(),r.baccBetMgr.packUnConfirmedBet());mo.OBJ.isEmpty(o)?(r._betNumChanged(),r.baccBetMgr.finishBet(),r.resetHedgeAndLock()):(r.isConfirm=!0,r.tableCtrl.bet(o,(function(){if(r.tableCtrl.playAudio("p_bet_success"),t.log("下注成功"),r.baccBetMgr.confirmBet(),r.isConfirm||r._gameStateChange(r.tableCtrl.gameState),r.isConfirm=!1,mo.MSG.show(e.id_c_msgCode.bacc_bet_success),r._betNumChanged(),r.checkKeepBetDragon()?r.needPlayKeepBetDragon()&&(r._setTimeout((function(){r.tableCtrl.playAudio("d_dragonx3")}),2e3),r.keepBetDragon=0):r.checkKeepBetTiger()&&r.needPlayKeepBetTiger()&&(r._setTimeout((function(){r.tableCtrl.playAudio("d_tigerx3")}),2e3),r.keepBetTiger=0),r.baccBetMgr.finishBet(),r.noBetRoundCount=0,r.ifUseCustomerBet&&r.customerBetArea){var o=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateThirtyDisableImages(o)}r.resetHedgeAndLock();var a=r.tableCtrl.code,i=r.tableCtrl.roundCode,n=e.GTS.mgr.isBrokerageRequired();r.tableCtrl.subType==CONST.baccaratSubType.mi||(e.GTS.mgr.setCommissionStateByRound(a,i,n),mo.emitter.emit("set_brokerage_lock",!0))}),(function(){r.isConfirm||r._gameStateChange(r.tableCtrl.gameState),r.isConfirm=!1,r.baccBetMgr.undo(),r.baccBetMgr.betFinalConfirm(),r._betNumChanged(),r.resetHedgeAndLock(),r.baccBetMgr.finishBet()})))},p.prototype.resetHedgeAndLock=function(){var e=this;e.clearAllHedgeInBetArea(),e.customerBetArea&&e.customerBetArea.clearAllHedgeBet(),e.baccBetMgr.checkConfirmedBetsAndLockHedge()},p.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1,e.dynamicConfirm&&e.dynamicConfirm.showBtns(!1)},p.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState;t.baccBetMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.dynamicConfirm&&t.dynamicConfirm.showBtns(e),t.btn_double.enabled=e,e?(t.btn_again.enabled=t.baccBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&(t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1),t.checkPreRoundBetInCustomerBetSetting()||(t.btn_again.enabled=!1,t.btn_again.visible=!1))):r==CONST.gameState.betting&&(t.btn_again.enabled=t.baccBetMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0),t.checkPreRoundBetInCustomerBetSetting()||(t.btn_again.enabled=!1,t.btn_again.visible=!1)),t.tableCtrl.subType==CONST.baccaratSubType.mi&&(t.btn_again.visible=!0)},p.prototype.checkIsBet=function(){var e=this;e.tableCtrl.subType==CONST.baccaratSubType.mi&&(e.btn_again.visible=!0);var t=e.baccBetMgr.betRecoders;for(var r in t)if(t[r].confirmedBetHistory.length>0||t[r].curBetHistory.length>0)return!0;return!1},p.prototype.checkPreRoundBetInCustomerBetSetting=function(){return!e.GTS.mgr.checkIfUseCustomer(this.tableCtrl)||this.baccBetMgr.checkPreRoundBetsInCustomerBets()},p.prototype._tap_btn_luzhu=function(){t.BaccLuzhu.show({tableCtrl:this.tableCtrl})},p.prototype.onExit=function(){var t=this;c.prototype.onExit.call(this),t.unEmitter(),t.ifUseCustomerBet&&(mo.emitter.unAll("customerSettingFinish"),mo.emitter.unAll("customerBetUndo"),mo.emitter.unAll(CONST.customerBetEvent.customerBetUiShow)),t.baccBetMgr.reset(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!1,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!1,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!1,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!1;for(var r=0;7>r;r++)egret.Tween.removeTweens(t["desk_"+r]),egret.Tween.removeTweens(t["mynum_"+r]);t._deleteChildren();var o=t.chipObj;for(var a in o){var i=o[a];if(i){r=0;for(var n=i.length;n>r;r++){var s=i[r];if(s)for(var l=0,p=s.length;p>l;l++){var _=s[l];_&&egret.Tween.removeTweens(_)}}}}e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,t.showBonus,t),e.GW.mgr.setCurrentThemeWithTableCtrl(null),e.COMM.BONUS.leaveBonusDlg(),t.ifUseCustomerBet&&t.customerBetSettingDlg&&t.customerBetSettingDlg.close(),t.btn_playerAsk.removeEventListener(mouse.MouseEvent.MOUSE_OVER,t.onMouseIn_playerAsk,t),t.btn_bankerAsk.removeEventListener(mouse.MouseEvent.MOUSE_OVER,t.onMouseIn_bankerAsk,t)},p.prototype._recoverBetInfo=function(){this.baccBetMgr.recoverBetInfo()},p.prototype.setBetArea=function(e){var t=this;e?(t._initFlyChipHelper(),t._initCustomerBetArea()):(t._initBetArea(),t.changeBrokerageRequiredImage())},p.prototype.onBetAreaTouched=function(t){var r=this;if(!r.baccBetMgr.isStopBet&&r.tableCtrl.isMatch&&!r.tableCtrl.hasEnrolled())return mo.MSG.show(r.tableCtrl.canEnrolled()?e.id_c_msgCode.g_watch_match:e.id_c_msgCode.g_watch_match_no_join);if(r.tableCtrl.subType==CONST.baccaratSubType.mi&&-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);if(!r.baccBetMgr.isStopBet&&r.baccBetMgr.checkWhetherBetIsHedge(t))return;r.baccBetMgr._doBet(t,r.chipBar.chipValue),r.clearAllHedgeInBetArea(),r.baccBetMgr.checkAllBetsAndLockHedge()},p.prototype.onBetAreaCheck=function(e){var t=this,r=t.BetType;if(t.grp_betArea&&e)for(var o=["BD","B","Tie","P","PD"],a=[r.bankerPair,r.banker,r.draw,r.player,r.playerPair],i=0;5>i;i++){var n=t["touch_area_"+o[i]];if(n)if(n.hitTestPoint(e.stageX,e.stageY,!0)){var s=a[i];t.onBetAreaTouched(s);break}}},p.prototype._initBetArea=function(){var t,r=this,a=r.BetType;r.betAreaHelpers=[],r.grp_betArea.visible=!0,r.grp_customer_bet_area&&(r.grp_customer_bet_area.visible=!1),r.customerBetArea&&(r.customerBetArea.visible=!1),r.grp_betArea.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(e){r.onBetAreaCheck(e)}),r);var i=new mo.NUM.Polygon(mo.p(230.24,474.96),mo.p(191.52,454.08+86),mo.p(381.6,454.08+86),mo.p(405.36,474.96));(t=new o(r.grp_betP,a.player,r.shadow_P,r.betType_P,i,r.doBetCallback.bind(r),r.unBetCallback.bind(r),r.tableCtrl)).setBetMgr(r.baccBetMgr),r.betAreaHelpers.push(t);var s=r.grp_betP.getChildByName("grp_betNum");r.onEmitter(s.emitter,"over",r._payoutShow);var l=new mo.NUM.Polygon(mo.p(382.48,540.96),mo.p(496.88,575.28),mo.p(587.52,580.56),mo.p(694.88,493.68+86),mo.p(788.16,574.4),mo.p(860.32,561.2),mo.p(896.4,454.08+86));(t=new o(r.grp_betPD,a.playerPair,r.shadow_PD,r.betType_PD,l,r.doBetCallback.bind(r),r.unBetCallback.bind(r),r.tableCtrl)).setBetMgr(r.baccBetMgr),r.betAreaHelpers.push(t);var c=r.grp_betPD.getChildByName("grp_betNum");r.onEmitter(c.emitter,"over",r._payoutShow);var p=new mo.NUM.Polygon(mo.p(406.24,474.96),mo.p(394.8,508.4),mo.p(887.6,508.4),mo.p(875.28,474.96));(t=new o(r.grp_betTie,a.draw,r.shadow_Tie,r.betType_Tie,p,r.doBetCallback.bind(r),r.unBetCallback.bind(r),r.tableCtrl)).setBetMgr(r.baccBetMgr),r.betAreaHelpers.push(t);var _=r.grp_betTie.getChildByName("grp_betNum");r.onEmitter(_.emitter,"over",r._payoutShow);var u=new mo.NUM.Polygon(mo.p(395.68,508.4),mo.p(382.48,454.08+86),mo.p(895.52,454.08+86),mo.p(886.72,508.4));(t=new o(r.grp_betBD,a.bankerPair,r.shadow_BD,r.betType_BD,u,r.doBetCallback.bind(r),r.unBetCallback.bind(r),r.tableCtrl)).setBetMgr(r.baccBetMgr),r.betAreaHelpers.push(t);var h=r.grp_betBD.getChildByName("grp_betNum");r.onEmitter(h.emitter,"over",r._payoutShow);var m=new mo.NUM.Polygon(mo.p(876.16,474.96),mo.p(888.48,454.08+86),mo.p(1090,454.08+86),mo.p(1049.52,474.96));(t=new o(r.grp_betB,a.banker,r.shadow_B,r.betType_B,m,r.doBetCallback.bind(r),r.unBetCallback.bind(r),r.tableCtrl)).setBetMgr(r.baccBetMgr),r.betAreaHelpers.push(t);var d=r.grp_betB.getChildByName("grp_betNum");r.onEmitter(d.emitter,"over",r._payoutShow);var b=new mo.NUM.Polygon(mo.p(236.4,482),mo.p(196.8,534.8),mo.p(368.4,534.8),mo.p(394.8,464.4));r.baccBetMgr.registerBetArea(a.player,b),r.baccBetMgr.registerBetRecorder(a.player,new n(a.player,0));var g=new mo.NUM.Polygon(mo.p(382.48,540.96),mo.p(496.88,575.28),mo.p(587.52,580.56),mo.p(694.88,493.68+86),mo.p(788.16,574.4),mo.p(860.32,561.2),mo.p(896.4,454.08+86));r.baccBetMgr.registerBetArea(a.playerPair,g),r.baccBetMgr.registerBetRecorder(a.playerPair,new n(a.playerPair,0));var y=new mo.NUM.Polygon(mo.p(406.24,474.96),mo.p(394.8,508.4),mo.p(887.6,508.4),mo.p(875.28,474.96));r.baccBetMgr.registerBetArea(a.draw,y),r.baccBetMgr.registerBetRecorder(a.draw,new n(a.draw,0));var f=new mo.NUM.Polygon(mo.p(395.68,508.4),mo.p(382.48,454.08+86),mo.p(895.52,454.08+86),mo.p(886.72,508.4));r.baccBetMgr.registerBetArea(a.bankerPair,f),r.baccBetMgr.registerBetRecorder(a.bankerPair,new n(a.bankerPair,0));var C=new mo.NUM.Polygon(mo.p(876.16,474.96),mo.p(888.48,454.08+86),mo.p(1090,454.08+86),mo.p(1049.52,474.96));r.baccBetMgr.registerBetArea(a.banker,C),r.baccBetMgr.registerBetRecorder(a.banker,new n(a.banker,0));var T=r.getBetTypeText(a.banker),v=new e.BASE.MatrixText(T,e.BASE.MatrixTextType.RIGHT,12456466);v.x=1015,v.y=441,v.height=75,v.width=235,r.grp_betArea.addChildAt(v,11),r.modifyFontSizeByType(a.banker,v),r.tableCtrl.brokerageRequired||("hi_in"==mo.PROJ.lang&&(v.myText.scaleX=.47),"ta_in"==mo.PROJ.lang?v.myText.scaleX=.45:"fr_fr"==mo.PROJ.lang||"th_th"==mo.PROJ.lang?v.myText.scaleX=.36:"in_id"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"de_de"==mo.PROJ.lang||"pt_pt"==mo.PROJ.lang?v.myText.scaleX=.3:"en_us"==mo.PROJ.lang||"es_es"==mo.PROJ.lang?v.myText.scaleX=.28:"tr_tr"==mo.PROJ.lang?v.myText.scaleX=.26:"vi_vn"==mo.PROJ.lang?v.myText.scaleX=.24:"ja_jp"==mo.PROJ.lang?v.myText.scaleX=.22:("ko_kr"==mo.PROJ.lang||"ms_my"==mo.PROJ.lang)&&(v.myText.scaleX=.2));var B=r.getBetTypeText(a.player),S=new e.BASE.MatrixText(B,e.BASE.MatrixTextType.LEFT,3696090);S.x=238,S.y=441,S.height=75,S.width=235,"en_us"==mo.PROJ.lang||"ms_my"==mo.PROJ.lang||"es_es"==mo.PROJ.lang||"ja_jp"==mo.PROJ.lang?S.txtSize=46:("ta_in"==mo.PROJ.lang||"pt_pt"==mo.PROJ.lang)&&(S.txtSize=40),r.grp_betArea.addChildAt(S,12),"fr_fr"==mo.PROJ.lang?(v.myText.size=40,S.myText.size=40):"tr_tr"==mo.PROJ.lang&&(v.myText.size=45,S.myText.size=45),r.modifyFontSizeByType(a.player,S),"th_th"==mo.PROJ.lang?(r.txt_tie.y-=12,r.txt_bankerPair.y-=12,r.txt_playerPair.y-=12):"my_mm"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang?(r.txt_tie.y-=14,r.txt_bankerPair.y-=14,r.txt_playerPair.y-=14):"hi_in"==mo.PROJ.lang?(r.txt_tie.y-=12,r.txt_bankerPair.y-=12,r.txt_playerPair.y-=12):"ta_in"==mo.PROJ.lang&&(r.txt_tie.y-=13,r.txt_bankerPair.y-=13,r.txt_playerPair.y-=13),r.txt_tie.setText(r.getBetTypeText(a.draw)),r.txt_playerPair.setText(r.getBetTypeText(a.playerPair)),r.txt_bankerPair.setText(r.getBetTypeText(a.bankerPair)),r.modifyFontSizeByType(a.draw,r.txt_tie),r.modifyFontSizeByType(a.bankerPair,r.txt_bankerPair),r.modifyFontSizeByType(a.playerPair,r.txt_playerPair)},p.prototype.modifyFontSizeByType=function(e,t){if(t&&t.myText){var r=this.BetType;switch(mo.PROJ.lang){case"en_us":case"vi_vn":case"ko_kr":case"th_th":t.myText.size=60;break;case"zh_cn":case"zh_tw":case"zh_hk":t.myText.size=e==r.player||e==r.banker?70:60}}},p.prototype.getBetTypeText=function(e){var t=this,r="";switch(e){case t.BetType.banker:r=t.tableCtrl.brokerageRequired?"en_us"==mo.PROJ.lang?"${{baccarat_banker_side}} 0.95:1":"${{baccarat_banker_side}} 1:0.95":"${{baccarat_banker_side}} 1:1\n${{baccarat_super6}}";break;case t.BetType.player:r="${{baccarat_player_side}} 1 : 1";break;case t.BetType.bankerPair:case t.BetType.playerPair:var o="en_us"==mo.PROJ.lang?" 11 : 1":" 1 : 11";r=(e==t.BetType.bankerPair?"${{baccarat_banker_pair}}":"${{baccarat_player_pair}}")+o;break;case t.BetType.draw:r="en_us"==mo.PROJ.lang?"${{g_tie}} 8 : 1":"${{g_tie}} 1 : 8"}return r},p.prototype._initCustomerBetArea=function(){var r=this;r.betAreaHelpers=[],r.grp_betArea.visible=!1;var o=r.tableCtrl.isMatch,a=o?e.BACC.BaccGameCustomerBet_mi:e.BACC.BaccGameCustomerBet;r.customerBetArea=new a,r.grp_customer_bet_area.addChild(r.customerBetArea),r.customerBetArea.visible=!0,r.customerBetArea.initForBet(r.baccBetMgr,r.chipBar,r.tableCtrl,r._payoutShow.bind(r),r.doBetCallback.bind(r),r.unBetCallback.bind(r));var i=o?[CONST.betType.baccarat.draw,CONST.betType.baccarat.playerPair,CONST.betType.baccarat.player,CONST.betType.baccarat.banker,CONST.betType.baccarat.bankerPair]:e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateBetTypes(i),r.reSetFlyChipHelper(i),mo.emitter.on("customerSettingFinish",(function(){var t=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateBetTypes(t),r.customerBetArea.updateResultsShow(),r.reSetFlyChipHelper(t),r.customerBetArea&&r.customerBetArea.clearAllHedgeBet()}),r),mo.emitter.on(CONST.customerBetEvent.customerBetUiShow,(function(){r.customerBetSettingDlg=t.BaccGameCustomerSetting.show({betMgr:r.baccBetMgr,tableCtrl:r.tableCtrl})})),mo.emitter.on("customerBetUndo",(function(){r._tap_btn_undo()}),r)},p.prototype.doBetCallback=function(e){var t=this;if(e&&e.betArea&&t.dynamicConfirm){var r=e._getValidDropPosition(!0);if(t.tableCtrl.subType==CONST.baccaratSubType.mi){var o=e.grp_betNum.x-.7*t.dynamicConfirm.width*.88/2,a=r.y+30;t.dynamicConfirm.dynamicMoveTo(e.betArea,o,a,t._tap_btn_confirm.bind(t),t._tap_btn_undo.bind(t))}else t.dynamicConfirm.dynamicMoveTo(e.betArea,r.x-25,r.y+20,t._tap_btn_confirm.bind(t),t._tap_btn_undo.bind(t))}},p.prototype.unBetCallback=function(e){var t=this;if(t.tableCtrl.gameState==CONST.gameState.betting&&e&&e.betArea&&t.dynamicConfirm){var r=0,o=-1,a=t.baccBetMgr.betRecoders;for(var i in a){var n=a[i];n._unconfirmedBet>0&&0!=n._lastBetUpdateTimestamp&&n._lastBetUpdateTimestamp>r&&(r=n._lastBetUpdateTimestamp,o=n.betType)}if(-1==o)return void t.dynamicConfirm.showBtns(!1);var s=null;if(t.ifUseCustomerBet){if(!t.customerBetArea)return void t.dynamicConfirm.showBtns(!1);s=t.customerBetArea.getBetHelperByBetType(o)}else{if(!t.betAreaHelpers||0==t.betAreaHelpers.length)return void t.dynamicConfirm.showBtns(!1);for(var l=0;l<t.betAreaHelpers.length;l++){var c=t.betAreaHelpers[l];if(c.betType==o){s=c;break}}}if(!s)return void t.dynamicConfirm.showBtns(!1);t.dynamicConfirm.showBtns(!0);var p=s._getValidDropPosition(!0);if(t.tableCtrl.subType==CONST.baccaratSubType.mi){var _=e.grp_betNum.x-.7*t.dynamicConfirm.width*.88/2,u=p.y+30;t.dynamicConfirm.dynamicMoveTo(e.betArea,_,u,t._tap_btn_confirm.bind(t),t._tap_btn_undo.bind(t))}else t.dynamicConfirm.dynamicMoveTo(e.betArea,p.x-25,p.y+20,t._tap_btn_confirm.bind(t),t._tap_btn_undo.bind(t))}},p.prototype._initFlyChipHelper=function(){var t=this,r=t.tableCtrl.subType==CONST.baccaratSubType.mi;if(t.flyChipHelper=new e.FlyChipHelper,t.flyChipHelper.x=180,t.flyChipHelper.y=470,r||t.flyChipHelper.setCustomerDealerPosition(985,670),t.grp_fly_chip.addChild(t.flyChipHelper),t.tableCtrl){var o=t.flyChipHelper.parent.localToGlobal(t.flyChipHelper.x+16,t.flyChipHelper.y+12),a=mo.p(o.x,o.y);t.flyChipHelper.registerPlayer(99,a),r&&(o=t.flyChipHelper.parent.localToGlobal(310,530),t.flyChipHelper.registerPlayer(0,mo.p(o.x,o.y)),o=t.flyChipHelper.parent.localToGlobal(450,550),t.flyChipHelper.registerPlayer(1,mo.p(o.x,o.y)),o=t.flyChipHelper.parent.localToGlobal(590,560),t.flyChipHelper.registerPlayer(2,mo.p(o.x,o.y)),o=t.flyChipHelper.parent.localToGlobal(760,570),t.flyChipHelper.registerPlayer(3,mo.p(o.x,o.y)),o=t.flyChipHelper.parent.localToGlobal(920,560),t.flyChipHelper.registerPlayer(4,mo.p(o.x,o.y)),o=t.flyChipHelper.parent.localToGlobal(1080,540),t.flyChipHelper.registerPlayer(5,mo.p(o.x,o.y)),o=t.flyChipHelper.parent.localToGlobal(1170,520),t.flyChipHelper.registerPlayer(6,mo.p(o.x,o.y)))}},p.prototype.reSetFlyChipHelper=function(e){var t=this;if(t.customerBetArea&&t.flyChipHelper){t.flyChipHelper.clearAllChipLocation();for(var r=(t.tableCtrl.subType,CONST.baccaratSubType.mi,0);r<e.length;r++){var o=e[r];if(-1!=o){var a=t.customerBetArea.getBetAreaByBetType(o);if(a){var i=a.index,n=t.customerBetArea.getBetGroupByBetType(o);if(n){var s=n.getChildByName("grp_chip_for_other_"+i);s&&t.flyChipHelper.registerChipLocation(o,s)}}}}t.initDeskFlyChip()}},p.prototype.updateFlyChipOwner=function(e,t){if(this.flyChipHelper){var r=-1;t&&(r=t.userId),this.flyChipHelper.setPlayerWithUId(e,r)}},p.prototype.initDeskFlyChip=function(){var t=this;if(t.tableCtrl.gameState!=CONST.gameState.payout&&t.tableCtrl)for(var r=t.tableCtrl.virtualInfoList||[],o=0;7>o;o++){var a=r[o];a&&a.userId&&a.userId!=e.GTS.userCtrl.id&&t.playFlyChip(o,a)}},p.prototype.playFlyChip=function(e,t){var r=this;if(r.flyChipHelper)for(var o in t.bet){var a=t.bet[o];a=r.flyChipHelper.currencyTranslate(t.currency,a);var i=r.tableCtrl.subType==CONST.baccaratSubType.mi?e:99;r.flyChipHelper.doFlyChip(i,t.userId,o,a)}},p.prototype.flyChipPayout=function(){var e=this;if(e.flyChipHelper){if(e.tableCtrl.luZhuList.length>0){var t=e.tableCtrl.luZhuList[e.tableCtrl.luZhuList.length-1].results;e.tableCtrl.luZhuList.length>1&&(t=t||e.tableCtrl.luZhuList[e.tableCtrl.luZhuList.length-2].results),e.flyChipHelper.payoutResult(t)}e.recordBetMoneyCNY=[]}},p.prototype._payoutShow=function(){},p.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},p.prototype.onMouseIn_playerAsk=function(){this._tap_btn_playerAsk()},p.prototype.onMouseIn_bankerAsk=function(){this._tap_btn_bankerAsk()},p}(e.BASE.BaseTableLayer);t.BaseCardLayer=c,__reflect(c.prototype,"G.BACC.BaseCardLayer")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){var t=this;e.prototype.onEnter.call(this);var r="zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang||"zh_cn"==mo.PROJ.lang;t.label_bead_road.visible=!r,t.label_big_road.visible=!r,t.label_bigeye_road.visible=!r,t.label_small_road.visible=!r,t.label_cockroach_road.visible=!r,r&&(t.btn_playerAsk.label="",t.btn_bankerAsk.label=""),t.grp_roadmap_labels_for_chinese.visible=r},t}(t.BaseCardLayer);t.BaccGame=r,__reflect(r.prototype,"G.BACC.BaccGame"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.justEnterGameBk=!0,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.isRollin=!1},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.group.visible=!1},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.baccTableCtrl=this.data.tabelCtrl},r.prototype.onRoomShortcutExpand=function(e){var t=this,r=e?150:20,o=e?20:150;egret.Tween.removeTweens(t.group),t.group.left=o,egret.Tween.get(t.group).to({left:r},300).call((function(){egret.Tween.removeTweens(t.group)}))},r.prototype._scanCard=function(){var t=this;t.isRollin||t.curGameState!=CONST.gameState.stopBet||t.rollin(),t._fillCards(!0);var r=t.baccTableCtrl,o=t.baccTableCtrl.roundCtrl,a=t.baccTableCtrl.subType==CONST.baccaratSubType.mi,i=o.srcResults||[];if(0!=i.length)if(a){var n=t.baccTableCtrl.getMiState();n==CONST.miState.miBSupplement?r.playAudio("b_banker_drawcard"):n==CONST.miState.miPSupplement&&r.playAudio("b_player_drawcard")}else 2===e.UTIL.getNextCardIndex(i,!1)?r.playAudio("b_player_drawcard"):5===e.UTIL.getNextCardIndex(i,!1)&&r.playAudio("b_banker_drawcard")},r.prototype._fillCards=function(e){for(var t=this,r=t.baccTableCtrl.roundCtrl.srcResults||[],o=0;6>o;o++){var a=o>=3?CONST.betType.baccarat.banker:CONST.betType.baccarat.player,i=o%3;t.setCard(a,i,r[o]),null!=r[o]&&t._turnCheck(a,i)&&t.tunCard(a,i,e)}},r.prototype._turnCheck=function(){return!0},r.prototype._setBPPoint=function(){var t=this,r=t.baccTableCtrl.roundCtrl.srcResults||[],o=t.baccTableCtrl.getOpenedIndexList()||[];t.label_bp.visible=o.length>0,t.label_pp.visible=o.length>0,t.label_pp.text=""+e.UTIL.calBaccarat(o.indexOf(0)>=0?r[0]:null,o.indexOf(1)>=0?r[1]:null,o.indexOf(2)>=0?r[2]:null),t.label_bp.text=""+e.UTIL.calBaccarat(o.indexOf(3)>=0?r[3]:null,o.indexOf(4)>=0?r[4]:null,o.indexOf(5)>=0?r[5]:null)},r.prototype._changeNumShow=function(){this._setBPPoint()},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.hideCards(),r.justEnterGame=!0,r.justEnterGameBk=!0,r.openAni.addEventListener("complete",this.afterRollin,r),r.label_player&&r.label_banker&&(r.label_player.text="${{g_player_simple_forpc35roomlistitem}}",r.label_banker.text="${{g_banker_simple_forpc35roomlistitem}}"),r.justEnterGameBk&&(r.justEnterGameBk=!1,r.afterRollout()),r.onEmitter(r.baccTableCtrl,CONST.BBT_table.openRound,r._onRefreshInfo),r.onEmitter(r.baccTableCtrl,CONST.BBT_table.scanCard,r._scanCard),r.onEmitter(r.baccTableCtrl,CONST.BBT_table.payout,r._onRefreshInfo),r.onEmitter(r.baccTableCtrl,CONST.BBT_table.betStop,r._onRefreshInfo),r.onEmitter(r.baccTableCtrl,CONST.BBT_table.shuffle,r._onRefreshInfo),r.onEmitter(r.baccTableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo2),r.onEmitter(r.baccTableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,r.resetGamePage);for(var o=0;3>o;o++){var a=r["card_b"+o],i=r["card_p"+o];a&&r.onEmitter(a.emitter,"over",r._changeNumShow),i&&r.onEmitter(i.emitter,"over",r._changeNumShow)}r.onEmitter(mo.emitter,"onRoomShortcutExpand",r.onRoomShortcutExpand);var n=r.baccTableCtrl.gameState;r._gameStateChange(n,!1)},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype.resetGamePage=function(){var e=this;e.isRollin=!1,e.group.visible=!1,e.afterRollout();var t=e.baccTableCtrl.gameState;e._gameStateChange(t,!1)},r.prototype._beforeRollin=function(){this.hideCards()},r.prototype._updateUI=function(e){this._fillCards(e)},r.prototype._gameStateChange=function(e,t){void 0===t&&(t=!0);var r=this;switch(r.curGameState=e,r.baccTableCtrl.subType,CONST.baccaratSubType.mi,e){case CONST.gameState.betting:case CONST.gameState.shuffle:r.isRollin&&r.rollout();break;case CONST.gameState.stopBet:r.baccTableCtrl.isKailu()&&(t=!1,r.isRollin&&r.rollout());case CONST.gameState.payout:r.isRollin||(r._beforeRollin(),r.rollin()),r._updateUI(t)}},r.prototype.setCard=function(e,t,r){var o=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];o&&(o.visible=null!=r,null!=r&&o.setData({id:r}))},r.prototype.tunCard=function(e,t,r){var o=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];o&&(o.turnOver(r),this.baccTableCtrl.playAudio("cards_dealing"))},r.prototype.rollin=function(){var e=this;e.group.visible=!0,e.openAni.play(0),e.isRollin=!0},r.prototype.rollout=function(){this.afterRollout(),this.isRollin=!1},r.prototype.hideCards=function(){for(var e=this,t=0;3>t;t++){var r=e["card_p"+t];r&&(r.visible=!1,r.reset()),(r=e["card_b"+t])&&(r.visible=!1,r.reset())}e.label_pp.text="0",e.label_bp.text="0",e.label_pp.visible=!1,e.label_bp.visible=!1},r.prototype.afterRollout=function(){this.group.visible=!1,this.hideCards()},r.prototype.afterRollin=function(){},r.prototype._onRefreshInfo=function(){var e=this;e.justEnterGame=!1,e.hideCards(),e._gameStateChange(e.baccTableCtrl.gameState,!1)},r.prototype._onRefreshInfo2=function(){var e=this;e.justEnterGame=!1,e.hideCards(),e._gameStateChange(e.baccTableCtrl.gameState,!1)},r}(mo.EUI.Comp);t.BaccShowCard=r,__reflect(r.prototype,"G.BACC.BaccShowCard")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);mo.emitter.on("testtResult",this.testtResult,this)},r.prototype.testtResult=function(){this.showContent(!0,200,200,[51,45,null,51,46])},r.prototype.showContent=function(e,t,r,o){var a=this;e?o&&o.length>0&&(a.visible=!0,a.x=t,a.y=r,a.setBPPoint(o),a.setResult(o)):a.visible=!1},r.prototype.setResult=function(e){if(e||!(e.length<=0))for(var t=e,r=0;6>r;r++){var o=r>=3?CONST.betType.baccarat.banker:CONST.betType.baccarat.player,a=r%3;this.setCard(o,a,t[r])}},r.prototype.setCard=function(e,t,r){var o=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];o&&(o.visible=null!=r,null!=r&&(o.setData({id:r}),o.turnOver(!1)))},r.prototype.setBPPoint=function(t){if(t||!(t.length<=0)){var r=t;this.label_pp.text=""+e.UTIL.calBaccarat(null!=r[0]?r[0]:null,null!=r[1]?r[1]:null,null!=r[2]?r[2]:null),this.label_bp.text=""+e.UTIL.calBaccarat(null!=r[3]?r[3]:null,null!=r[4]?r[4]:null,null!=r[5]?r[5]:null)}},r}(mo.EUI.Comp);t.BaccShowHistory=r,__reflect(r.prototype,"G.BACC.BaccShowHistory")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.betTypeMax=14,e.tapBtnClose=!1,e}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.uiTypeTable=[],e.switchBetTypeMode=!1,e.initRecordArray(),e.customerBetArea.initForSetting(e.baccBetMgr,e.tableCtrl),e.customerBetArea.registerCallbackWhenTouchArea(e.onBetAreaTouched.bind(e)),e.initSwitchBetTypeModeRecorder(),e.initUITypeTable(),e.registerBetTypeTouchEvent(),e.updateUI()},r.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;e.unregisterBetTypeTouchEvent(),e.tapBtnClose||e.checkIfChange()&&(e.resetOriginData(),mo.emitter.emit("customerSettingFinish"))},r.prototype._handleActivityDelay=function(e){void 0===e&&(e=!1);this.close()},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.baccBetMgr=e.data.betMgr,e.tableCtrl=e.data.tableCtrl},r.prototype.initUITypeTable=function(){var e=this;e.uiTypeTable=[],e.uiTypeTable.push(CONST.betType.baccarat.playerPair),e.uiTypeTable.push(CONST.betType.baccarat.player),e.uiTypeTable.push(CONST.betType.baccarat.draw),e.uiTypeTable.push(CONST.betType.baccarat.banker),e.uiTypeTable.push(CONST.betType.baccarat.bankerPair),e.uiTypeTable.push(CONST.betType.baccarat.bankerLucky6),e.uiTypeTable.push(CONST.betType.baccarat.bankerDragonBonus),e.uiTypeTable.push(CONST.betType.baccarat.playerDragonBonus),e.uiTypeTable.push(CONST.betType.baccarat.big),e.uiTypeTable.push(CONST.betType.baccarat.small),e.uiTypeTable.push(CONST.betType.baccarat.bankerOdd),e.uiTypeTable.push(CONST.betType.baccarat.bankerEven),e.uiTypeTable.push(CONST.betType.baccarat.playerOdd),e.uiTypeTable.push(CONST.betType.baccarat.playerEven)},r.prototype.getBetTypeByIndex_btns=function(e){return 0>e||e>=this.uiTypeTable.length?-1:this.uiTypeTable[e]},r.prototype.getIndexByBetType_btns=function(e){return this.uiTypeTable.indexOf(e)},r.prototype.getBetTypeByIndex_areas=function(t){var r=e.GTS.mgr.getCustomerBetSetting(this.tableCtrl.type);return 0>t||t>=r.length?-1:r[t]},r.prototype.initSwitchBetTypeModeRecorder=function(){var e=this;e.switchBetTypeModeRecorder?(e.switchBetTypeModeRecorder.switchIndex1=-1,e.switchBetTypeModeRecorder.switchIndex2=-1,e.switchBetTypeModeRecorder.skipNextTouch=!1):(e.switchBetTypeModeRecorder={},e.switchBetTypeModeRecorder.switchIndex1=-1,e.switchBetTypeModeRecorder.switchIndex2=-1,e.switchBetTypeModeRecorder.skipNextTouch=!1)},r.prototype.initRecordArray=function(){var t=this;t.recordArray=[];for(var r=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type),o=0;o<r.length;o++){var a=r[o];t.recordArray.push(a)}},r.prototype.registerBetTypeTouchEvent=function(){for(var e=this,t=0;t<e.betTypeMax;t++){var r=e.getTargetImage(t);r&&r.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetTypeSelect.bind(e,t),e)}},r.prototype.unregisterBetTypeTouchEvent=function(){for(var e=this,t=0;t<e.betTypeMax;t++){var r=e.getTargetImage(t);r&&r.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetTypeSelect.bind(e,t),e)}},r.prototype.getTargetImage=function(e){var t=this.grp_base.getChildByName("grp_bet_"+e);return t?t.getChildByName("img_bet_"+e):null},r.prototype.getTargetColorRect=function(e){var t=this.grp_base.getChildByName("grp_bet_"+e);return t?t.getChildByName("rect_bet_"+e):null},r.prototype.getTargetLimitLabel=function(e){var t=this.grp_base.getChildByName("grp_bet_"+e);return t?t.getChildByName("label_limit_"+e):null},r.prototype.updateInfoLabel=function(){var t=this,r=e.GTS.mgr.getCustomerBetSettingSize(t.tableCtrl.type),o=e.GTS.mgr.getCustomerBetSettingMaxSize(t.tableCtrl.type),a=e.GTS.mgr.getCustomerBetSettingMinSize(t.tableCtrl.type);t.label_select_betArea_now.text=r.toString(),t.label_select_betArea_now.textColor=a>r?15597568:16777215,t.label_select_betArea_max.text=o.toString()},r.prototype.showBtnColorRect=function(e,t){var r=this.getTargetColorRect(e);r&&(r.visible=t)},r.prototype.onBetTypeSelect=function(t){var r=this,o=r.getTargetColorRect(t);if(o){var a=r.getBetTypeByIndex_btns(t);if(-1!=a){var i=!1;if(o.visible){if(r.checkIfBet(a))return mo.MSG.show("${{baccarat_customerBet_cant_move_area}}"),!1;e.GTS.mgr.unselectBetType(a,r.tableCtrl.type)&&(i=!0,r.recordBetTypeSelectOrNot(a,!1))}else e.GTS.mgr.selectBetType(a,!1,r.tableCtrl.type)&&(i=!0,r.recordBetTypeSelectOrNot(a,!0));i&&r.updateUI()}}},r.prototype.onBetAreaTouched=function(e,t){var r=this;if(!r.switchBetTypeMode){var o=r.getBetTypeByIndex_areas(t);if(r.checkIfBet(o))return mo.MSG.show("${{baccarat_customerBet_cant_move_area}}"),!1;r.enterSwitchBetTypeMode(e,t)}return r.addSwitchBetIndex(t),r.checkSwitchBetType()},r.prototype.addSwitchBetIndex=function(e){var t=this;t.switchBetTypeMode&&(t.switchBetTypeModeRecorder||t.initSwitchBetTypeModeRecorder(),-1==t.switchBetTypeModeRecorder.switchIndex1?(t.switchBetTypeModeRecorder.switchIndex1=e,t.switchBetTypeModeRecorder.skipNextTouch=!0):-1==t.switchBetTypeModeRecorder.switchIndex2&&(t.switchBetTypeModeRecorder.switchIndex2=e,t.switchBetTypeModeRecorder.skipNextTouch=!0))},r.prototype.checkSwitchBetType=function(){var t=this;if(!t.switchBetTypeMode)return!1;if(-1==t.switchBetTypeModeRecorder.switchIndex1||-1==t.switchBetTypeModeRecorder.switchIndex2)return!1;var r=t.getBetTypeByIndex_areas(t.switchBetTypeModeRecorder.switchIndex2);if(t.checkIfBet(r))return mo.MSG.show("${{baccarat_customerBet_cant_move_area}}"),t.switchBetTypeModeRecorder.switchIndex2=-1,t.switchBetTypeModeRecorder.skipNextTouch=!0,!1;if(t.switchBetTypeModeRecorder.switchIndex1!=t.switchBetTypeModeRecorder.switchIndex2){e.GTS.mgr.switchTwoBetType(t.switchBetTypeModeRecorder.switchIndex1,t.switchBetTypeModeRecorder.switchIndex2,!1,t.tableCtrl.type);var o=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);o&&t.customerBetArea.updateBetTypes(o)}return t.exitSwitchBetTypeMode()},r.prototype.updateSelectBtns=function(){var t=this,r=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);if(r&&0!=r.length)for(var o=0;o<t.betTypeMax;o++){var a=t.getBetTypeByIndex_btns(o);-1==a||-1==r.indexOf(a)?t.showBtnColorRect(o,!1):t.showBtnColorRect(o,!0)}},r.prototype.updateUI=function(){var t=this;t.updateInfoLabel(),t.updateSelectBtns(),t.updateBetRangeList();var r=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);r&&t.customerBetArea.updateBetTypes(r)},r.prototype.updateBetRangeList=function(){for(var t=this,r=0;r<t.betTypeMax;r++){var o=t.getTargetLimitLabel(r);if(o){var a=t.getBetTypeByIndex_btns(r),i=t.baccBetMgr.getRangeListByBetType(a,t.tableCtrl.type);if(i&&2==i.length){o.visible=!0;var n=i[0],s=i[1],l=mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(n),e.UTIL.NUM.getSplitNumStr(s));o.text=l,("my_mm"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(o.size=11)}else o.visible=!1}}},r.prototype.checkIfChange=function(){var t=this,r=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);if(!t.recordArray||!r)return!1;if(t.recordArray.length!=r.length)return!1;for(var o=0;o<r.length;o++){if(r[o]!=t.recordArray[o])return!0}return!1},r.prototype.checkSelectEnough=function(){return!(e.GTS.mgr.getCustomerBetSettingSize(this.tableCtrl.type)<e.GTS.mgr.getCustomerBetSettingMinSize(this.tableCtrl.type))},r.prototype.undoUnConfirmBetAfterChange=function(){var t=this,r=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);if(!t.recordArray||!r)return!1;for(var o=!1,a=0;a<t.recordArray.length;a++){var i=t.recordArray[a],n=r[a];if(i!=n){var s=-1==i?n:i;t.baccBetMgr.undoByBetType(s),o=!0}}return o},r.prototype.resetOriginData=function(){e.GTS.mgr.resetByArray(this.recordArray,this.tableCtrl.type)},r.prototype.enterSwitchBetTypeMode=function(e,t){var r=this;if(!r.switchBetTypeMode){r.switchBetTypeMode=!0;var o=r.collectBetedAreas(e,t);o.push(e),r.customerBetArea.betAreaFlashStart(o)}},r.prototype.exitSwitchBetTypeMode=function(){var e=this;e.switchBetTypeMode&&(e.switchBetTypeMode=!1,e.initSwitchBetTypeModeRecorder(),e.customerBetArea.betAreaFlashEnd())},r.prototype.checkIfExitSwitchBetTypeModeWhileTouch=function(){var e=this;return e.switchBetTypeMode&&e.switchBetTypeModeRecorder?e.switchBetTypeModeRecorder.skipNextTouch?void(e.switchBetTypeModeRecorder.skipNextTouch=!1):void e.exitSwitchBetTypeMode():void 0},r.prototype.checkIfBet=function(e){var t=this;return!t.baccBetMgr||!t.tableCtrl||0!=t.baccBetMgr.getConfirmedBet(e)&&t.tableCtrl.gameState!=CONST.gameState.payout},r.prototype.collectBetedAreas=function(t,r){var o=this,a=!0;-1==o.getBetTypeByIndex_areas(r)&&(a=!1);for(var i=(e.GTS.mgr.getCustomerBetSettingSize(),[]),n=0;n<o.betTypeMax;n++){var s=o.getBetTypeByIndex_areas(n);-1!=s?o.checkIfBet(s)&&i.push(n):a||i.push(n)}return i},r.prototype.recordBetTypeSelectOrNot=function(t,r){var o;switch(t){case CONST.betType.baccarat.playerPair:o=r?e.RCD.RcdState.SELECT_BETTYPE_PLAYERPAIR:e.RCD.RcdState.UNSELECT_BETTYPE_PLAYERPAIR;break;case CONST.betType.baccarat.player:o=r?e.RCD.RcdState.SELECT_BETTYPE_PLAYER:e.RCD.RcdState.UNSELECT_BETTYPE_PLAYER;break;case CONST.betType.baccarat.draw:o=r?e.RCD.RcdState.SELECT_BETTYPE_DRAW:e.RCD.RcdState.UNSELECT_BETTYPE_DRAW;break;case CONST.betType.baccarat.banker:o=r?e.RCD.RcdState.SELECT_BETTYPE_BANKER:e.RCD.RcdState.UNSELECT_BETTYPE_BANKER;break;case CONST.betType.baccarat.bankerPair:o=r?e.RCD.RcdState.SELECT_BETTYPE_BANKERPAIR:e.RCD.RcdState.UNSELECT_BETTYPE_BANKERPAIR;break;case CONST.betType.baccarat.bankerLucky6:o=r?e.RCD.RcdState.SELECT_BETTYPE_BANKERLUCKY6:e.RCD.RcdState.UNSELECT_BETTYPE_BANKERLUCKY6;break;case CONST.betType.baccarat.bankerDragonBonus:o=r?e.RCD.RcdState.SELECT_BETTYPE_BDBONUS:e.RCD.RcdState.UNSELECT_BETTYPE_BDBONUS;break;case CONST.betType.baccarat.playerDragonBonus:o=r?e.RCD.RcdState.SELECT_BETTYPE_PDBONUS:e.RCD.RcdState.UNSELECT_BETTYPE_PDBONUS;break;case CONST.betType.baccarat.big:o=r?e.RCD.RcdState.SELECT_BETTYPE_BIG:e.RCD.RcdState.UNSELECT_BETTYPE_BIG;break;case CONST.betType.baccarat.small:o=r?e.RCD.RcdState.SELECT_BETTYPE_SMALL:e.RCD.RcdState.UNSELECT_BETTYPE_SMALL;break;case CONST.betType.baccarat.bankerOdd:o=r?e.RCD.RcdState.SELECT_BETTYPE_BANKERODD:e.RCD.RcdState.UNSELECT_BETTYPE_BANKERODD;break;case CONST.betType.baccarat.bankerEven:o=r?e.RCD.RcdState.SELECT_BETTYPE_BANKEREVEN:e.RCD.RcdState.UNSELECT_BETTYPE_BANKEREVEN;break;case CONST.betType.baccarat.playerOdd:o=r?e.RCD.RcdState.SELECT_BETTYPE_PLAYERODD:e.RCD.RcdState.UNSELECT_BETTYPE_PLAYERODD;break;case CONST.betType.baccarat.playerEven:o=r?e.RCD.RcdState.SELECT_BETTYPE_PLAYEREVEN:e.RCD.RcdState.UNSELECT_BETTYPE_PLAYEREVEN;break;default:return}e.RCD.mgr.recordState(o)},r.prototype._tap_btn_close=function(){var t=this;t.tapBtnClose=!0,t.checkIfChange()&&(t.resetOriginData(),mo.emitter.emit("customerSettingFinish")),e.RCD.mgr.recordState(e.RCD.RcdState.CANCEL_CUSTOMERBET_UI),e.playAudio("btnclick")},r.prototype._tap_btn_customer_save=function(){var t=this;if(t.checkIfChange()){if(!t.checkSelectEnough()){var r=e.GTS.mgr.getCustomerBetSettingMinSize(t.tableCtrl.type),o=mo.D.langCodeToTxt("customerBet_message",[r]);return mo.MSG.show(o)}e.GTS.mgr.saveCustomerSetting(t.tableCtrl.type,(function(){e.RCD.mgr.recordState(e.RCD.RcdState.SAVE_CUSTOMERBET_UI),t.undoUnConfirmBetAfterChange()&&mo.emitter.emit("customerBetUndo",null),t.tapBtnClose=!0,mo.emitter.emit("customerSettingFinish"),t.close()}))}else t.close();e.playAudio("btnclick")},r.prototype._tap_btn_reset=function(){var t=this,r=e.GTS.mgr.getInitArray(t.tableCtrl.type),o=e.GTS.mgr.getCustomerBetSetting(t.tableCtrl.type);if(!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;if(null==e||null==t)return!1;for(var r=0;r<e.length;r++)if(t[r]!==e[r])return!1;return!0}(r,o)){for(var a=0;a<o.length;a++){var i=o[a];if(!!t.checkIfBet(i))return mo.MSG.show("${{baccarat_customerBet_cant_move_area}}")}for(a=0;a<o.length;a++){i=o[a];e.GTS.mgr.unselectBetType_h5(i,t.tableCtrl.type)}for(a=0;a<r.length;a++){i=r[a];e.GTS.mgr.selectBetType(i,!0,t.tableCtrl.type)}t.updateUI()}},r.prototype._tap_grp_base=function(){e.playAudio("btnclick");this.checkIfExitSwitchBetTypeModeWhileTouch()},r}(mo.EUI.Dlg);t.BaccGameCustomerSetting=r,__reflect(r.prototype,"G.BACC.BaccGameCustomerSetting")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);this._initOtherBetUI(),this.compTimerState.audioEnabled=!0},o.prototype._initOtherBetUI=function(){var e=this,t=e.betInfoCards={},r=e.BetType;t[r.player]=e.bicard_0,t[r.draw]=e.bicard_1,t[r.banker]=e.bicard_2},o.prototype._refeshBetInfo=function(){var t,r,o,a=this,i=a.baccTableCtrl.roundCtrl,n=a.baccTableCtrl.gameState==CONST.gameState.shuffle,s=a.BetType;n&&a.compTableLimit.restBetInfo(),a.isMatchPointModeJM=a.baccTableCtrl.isMatch&&a.baccTableCtrl.match&&a.baccTableCtrl.match.mode==CONST.matchMode.point,a.isMatchPointModeJM?(t=a.baccTableCtrl.tableLimit||0,r=i.getBetMoney4Dis(CONST.betType.baccarat.banker),o=i.getBetMoney4Dis(CONST.betType.baccarat.player)):(t=a.baccTableCtrl.tableLimit||0,t=e.COMM.FX.calcMoneyByCurrency("CNY",t),r=i.getBetMoneyCNY(CONST.betType.baccarat.banker),r=e.COMM.FX.calcMoneyByCurrency("CNY",r),o=i.getBetMoneyCNY(CONST.betType.baccarat.player),o=e.COMM.FX.calcMoneyByCurrency("CNY",o));var l=i.getBetCount(CONST.betType.baccarat.banker),c=i.getBetCount(CONST.betType.baccarat.player);a.compTableLimit.setBetInfo(t,r,l,o,c);var p=a.betInfoCards;for(var _ in s){var u=s[_],h=p[u];if(h){var m=a.baccTableCtrl.type==CONST.tableType.baccarat;if(h.setBackGroundColor(u,m),a.isMatchPointModeJM){var d=n?0:i.getBetMoney4Dis(u);(null==h.bet||h.bet<d)&&(h.bet=d,a.setBetArr(u,d))}else{var b=n?0:i.getBetMoneyCNY(u);b=e.COMM.FX.calcMoneyByCurrencyForChipShow("CNY",b),(null==h.bet||h.bet<b)&&(h.bet=b,a.setBetArr(u,b))}var g=n?0:i.getBetCount(u);(null==h.player||h.player<g)&&(h.player=g)}}a.setPercent(a._betArr)},o.prototype._gameStateChange=function(e){r.prototype._gameStateChange.call(this,e),this._refeshMiZuInfo()},o.prototype._refeshMiZuInfo=function(){var t=this,r=t.baccTableCtrl.roundCtrl,o=t.baccTableCtrl.gameState==CONST.gameState.shuffle;if(t.isMatchPointModeJM=t.baccTableCtrl.isMatch&&t.baccTableCtrl.match&&t.baccTableCtrl.match.mode==CONST.matchMode.point,o)t.compJMInfo.restMiInfo();else{var a=r.miZhuBanker4Dis,i=r.miZhuPlayer4Dis,n=a.name,s=e.COMM.FX.calcMoneyByCurrencyForChipShow(a.currency,a.bet,t.isMatchPointModeJM),l=i.name,c=e.COMM.FX.calcMoneyByCurrencyForChipShow(i.currency,i.bet,t.isMatchPointModeJM);t.compJMInfo.setMiInfo(n,s,l,c)}},o.prototype._setMenuSwitchTapper=function(){},o.prototype._unSetMenuSwitchTapper=function(){},o.prototype.setPercent=function(e){var t=this;if(3==e.length){for(var r=0;r<e.length;r++)0<e[r]&&1>e[r]&&(e[r]=1);var o=0==e[0]&&0==e[1]&&0==e[2]?[0,0,0]:t.calcPercent(e[0],e[1],e[2]),a=t.BetType;t.betInfoCards[a.player].setPercentAndBar(o[0]),t.betInfoCards[a.draw].setPercentAndBar(o[1]),t.betInfoCards[a.banker].setPercentAndBar(o[2])}},o.prototype.onEnter=function(){var t=this;r.prototype.onEnter.call(this);var o=t.baccTableCtrl;t.compTimerState.tableCtrl=o,t.onEmitter(o,CONST.BBT_table.miZhuChanged,t._miZhuChanged),t.onEmitter(o,CONST.BBT_table.scanCard,t._scanCard),t.onEmitter(o,CONST.BBT_table.openCard,t._openCard),t.onEmitter(o,CONST.BBT_table.miZhuLeave,t._miZhuLeave),t.updateBtn_reward(),t.mierEff&&(t.isPlayMierEff=!0,t.mierEff.visible=!1,t.onEmitter(t.mierEff.emitter,"close",t.mierClose)),t.compTimerState.emitter.on(e.BASE.TimerState.ON_REQUEST_ADDTIME,t._requestAddTime,t)},o.prototype.updateBtn_reward=function(){var t=this;t.baccTableCtrl&&t.baccTableCtrl.isMatch?t.btn_reward.visible=!1:e.GW.mgr.channel.fee&&e.GW.mgr.channel.fee>0&&e.GW.mgr.channelType==CONST.channelType.normal?(t.btn_reward.visible=!0,t.btn_reward.label=String(e.GW.mgr.channel.fee)):t.btn_reward.visible=!1},o.prototype.mierShow=function(e){var t=this;t.isPlayMierEff&&(t.mierEff&&(t.mierEff.visible=!0,e==CONST.betType.baccarat.banker?(t.mierEff.efc_l.y=435,t.mierEff.bankerEffect.play(0)):e==CONST.betType.baccarat.player&&(t.mierEff.efc_l.y=480,t.mierEff.playerEffect.play(0))),t.isPlayMierEff=!1)},o.prototype.mierClose=function(){this.isPlayMierEff=!0},o.prototype._tap_btn_reward=function(){var t=this;if(-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);var r=e.GW.mgr.channel.fee;return e.GTS.userCtrl.walletLive+e.GTS.userCtrl.walletGeneral>=r?void t.baccTableCtrl.giveFee((function(){t.emitter.emit("over",t),e.RCD.log_mgr.sendEvent_ClientButton("bacc.tip")})):mo.MSG.show(e.id_c_msgCode.g_gold_not_enough)},o.prototype._openCard=function(){this._gameStateChange(this.curGameState),t.log("--\x3eBaccRightSliderJM _openCard")},o.prototype._scanCard=function(){this._gameStateChange(this.curGameState)},o.prototype._requestAddTime=function(){var e=this.compTimerState.tableTimer.endTime;e&&e.getTime()>mo.DATE.now()&&this.baccTableCtrl.applyOvertime((function(){t.log("--\x3e我申请加时")}))},o.prototype._onTimerCountdownEnd=function(){var e=this;e.baccTableCtrl.getMiState()==CONST.miState.miEnd?e.compTimerState.stateClearing():e.compTimerState.stateWaiting()},o.prototype._miZhuChanged=function(){var e=this,r=e.baccTableCtrl.roundCtrl;t.log("_miZhuChanged, miZhuTime = ",r.miZhuTime);var o=r.miZhuBanker4Dis,a=r.miZhuPlayer4Dis,i=e.compJMInfo;e.baccTableCtrl.isMiBankerChanged()&&(i.bMasterOut(),o.name&&(e.mierShow(CONST.betType.baccarat.banker),e.baccTableCtrl.playAudio("mimaster_change"))),e.baccTableCtrl.isMiPalyerChanged()&&(i.pMasterOut(),a.name&&(e.mierShow(CONST.betType.baccarat.player),e.baccTableCtrl.playAudio("mimaster_change"))),e._gameStateChange(e.curGameState)},o.prototype.selfIsMier=function(e){var t=this,r=t.baccTableCtrl,o=r.myMiZhuType();e==CONST.betType.baccarat.banker?r.hasMiZhu(CONST.betType.baccarat.banker)&&(o==CONST.betType.baccarat.banker&&o==CONST.betType.baccarat.banker&&t.mierShow(CONST.betType.baccarat.banker)):e==CONST.betType.baccarat.player&&r.hasMiZhu(CONST.betType.baccarat.player)&&(o==CONST.betType.baccarat.player&&o==CONST.betType.baccarat.player&&t.mierShow(CONST.betType.baccarat.player))},o.prototype._miZhuLeave=function(){this._gameStateChange(this.curGameState)},o.prototype._applyOvertime=function(t){t.anchor||mo.MSG.show(e.id_c_msgCode.bacc_mi_someone_add_time,e.GTS.mgr.verifyEmoji(t.otherUser.nick)),this._gameStateChange(this.curGameState)},o.prototype._handleState_betting=function(e){var t=this,r=e.roundCtrl;if(null!=r.miZhuTime){var o=e.getBetStopTime();if(o>mo.DATE.date()){t.compTimerState.stateBetting();var a=e.betSec;t.compTimerState.refreshTime(a,o)}else{if(r.miZhuTime&&r.startTime&&r.miZhuTime.getTime()<r.startTime.getTime())return;t.compTimerState.stateWaiting()}}else t.compTimerState.statePreBet()},o.prototype._handleState_stopBet=function(e){var t=this,r=e.getMiState();if(r==CONST.miState.noMi)t.compTimerState.stateWaiting();else if(r==CONST.miState.miEnd)t.compTimerState.stateClearing();else{var o=e.getMiEndTime();if(o){t.compTimerState.statePeek();var a=e.getMiSec();t.compTimerState.refreshTime(a,o)}else t.compTimerState.stateClearing()}},o.prototype._onRefreshInfo_openRound=function(){var e=this;e._betInfoReset(),e._onEnterInitMatchUserInfo(),e.justEnterGame=!1,e._gameStateChange(e.baccTableCtrl.gameState)},o}(t.BaccRightSlider_tinyPoker);t.BaccRightSliderJM=r,__reflect(r.prototype,"G.BACC.BaccRightSliderJM")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.GTS.BaccCtrl,o=function(o){function a(){var e=o.apply(this,arguments)||this;return e.justEnterGameBk=!0,e}return __extends(a,o),a.prototype._initProp=function(){o.prototype._initProp.call(this);var e=this;e._jmCardMap={},e._tempPoint=new mo.Point,e.BandPcanMi=[0,0],e.BandPIdx=[[0,1,2],[0,1,2]]},a.prototype._childrenCreated=function(){o.prototype._childrenCreated.call(this);var e=this;e.no_touch.visible=!1,e.group.y=270,e.btn_bAllOpen.visible=!1,e.btn_pAllOpen.visible=!1},a.prototype.onEnter=function(){o.prototype.onEnter.call(this);var e=this,t=e.baccTableCtrl;e.onEmitter(t,r.ON_NEW_MICARD_OPEN,e._openCard),e.onEmitter(t,r.ON_MICARD_TIMEOUT,e._micardTimeout),e.onEmitter(t,CONST.BBT_table.miZhuChanged,e._miZhuChanged),e.onEmitter(t,CONST.BBT_table.miZhuLeave,e._miZhuLeave),e.openAni.addEventListener("complete",this.afterRollin,e),e.closeAni.addEventListener("complete",this.afterRollout,e),e.justEnterGameBk&&(e.justEnterGameBk=!1,e.closeOver()),e.onEmitter(t,CONST.BBT_table.miCard,e.miCardShow);var a=e.rect_touch_p,i=e.rect_touch_b;a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),a.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.onTouchMove,e),a.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),a.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.onTouchEnd,e),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),i.addEventListener(egret.TouchEvent.TOUCH_MOVE,e.onTouchMove,e),i.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),i.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.onTouchEnd,e),mo.tick(e._onTick,e)},a.prototype.onRoomShortcutExpand=function(){},a.prototype.onExit=function(){o.prototype.onExit.call(this);mo.clearTick(this._onTick,this)},a.prototype.getCurJmCard=function(e){var t=this;if(t._curJmCard)return t._curJmCard;var r=t._jmCardMap;for(var o in r){var a=r[o];if(a&&!a.opened&&a.canMi&&a.hitTestPoint(e.stageX,e.stageY))return t._curJmCard=a,a}return null},a.prototype.onTouchBegin=function(e){var t=this.getCurJmCard(e);t&&t.onTouchBegin(e)},a.prototype.onTouchMove=function(e){var t=this._curJmCard;t&&t.onTouchMove(e)},a.prototype.onTouchEnd=function(e){var t=this.getCurJmCard(e);t&&t.onTouchEnd(e),this._curJmCard=null},a.prototype._gameStateChange=function(e,t){void 0===t&&(t=!0);var r=this;r.curGameState=e;r.baccTableCtrl.subType,CONST.baccaratSubType.mi;switch(e){case CONST.gameState.betting:case CONST.gameState.shuffle:r.closeOver();break;case CONST.gameState.stopBet:if(t)r.isRollin||(r._beforeRollin(),r.rollin());else r.openAni.stop(),r.closeAni.stop(),r.isRollin=!1,r._beforeRollin(),r.baccTableCtrl.subType==CONST.baccaratSubType.mi&&(r.group.scaleX=1,r.group.scaleY=1,r.group.y=270,r.group.x=180,r.grp_mi.scaleX=1,r.grp_mi.scaleY=1,r.grp_mi.y=0,r.grp_mi.x=0,r.group.visible=!0,r.no_touch.visible=!1),r.group.visible=!0,r.isRollin=!0;r._updateUI(t);break;case CONST.gameState.payout:if(t)r.isRollin&&r.rollout();else r.openAni.stop(),r.closeAni.stop(),r.isRollin=!0,r.baccTableCtrl.subType==CONST.baccaratSubType.mi&&(r.group.scaleX=.5,r.group.scaleY=.5,r.grp_mi.scaleX=.5,r.grp_mi.scaleY=.5,r.grp_mi.y=-20,r.grp_mi.x=89.32,r.group.y=95,r.group.x=180,r.group.visible=!0,r.no_touch.visible=!1,r.btn_bAllOpen.visible=!1,r.btn_pAllOpen.visible=!1),r.isRollin=!1;r._updateUI(t)}},a.prototype._scanCard=function(){o.prototype._scanCard.call(this),this.switchUIByMiZhu()},a.prototype._miZhuChanged=function(){this.switchUIByMiZhu()},a.prototype._miZhuLeave=function(e){var r=!mo.OBJ.isEmpty(e.round.miZhuBanker);!mo.OBJ.isEmpty(e.round.miZhuPlayer)&&t.log("---\x3e闲咪主已离开，把没开的牌开开"),r&&t.log("---\x3e庄咪主已离开，把没开的牌开开"),this._gameStateChange(this.curGameState)},a.prototype._openCard=function(e){this.baccTableCtrl.roundCtrl,t.log("---\x3e竞咪开牌了",e),this._fillCards(!0)},a.prototype._micardTimeout=function(){this._sysOpenAll()},a.prototype._tap_btn_bAllOpen=function(){this._miZhuOpenAll(CONST.betType.baccarat.banker)},a.prototype._tap_btn_pAllOpen=function(){this._miZhuOpenAll(CONST.betType.baccarat.player)},a.prototype._miZhuOpenAll=function(e){var t,r=this;0!=r.baccTableCtrl.myMiZhuType()&&(CONST.betType.baccarat,e==CONST.betType.baccarat.banker?t=r.baccTableCtrl.checkCardScanedButNoOpened([3,4,5])||[]:e==CONST.betType.baccarat.player&&(t=r.baccTableCtrl.checkCardScanedButNoOpened([0,1,2])||[]),t.length&&r.baccTableCtrl.openCard(t,(function(){})))},a.prototype._sysOpenAll=function(){var e=this,r=e.baccTableCtrl.getScanButNoOpenedList();0!=e.baccTableCtrl.myMiZhuType()&&r.length?e.baccTableCtrl.openCard(r,(function(){t.log("---\x3e开所有已扫的牌",r)})):e._scanCard(),e.currentCard&&e.currentCard.hideHands()},a.prototype._turnCheck=function(e,t){for(var r=CONST.betType.baccarat,o=this.baccTableCtrl.getOpenedIndexList(),a=0;a<o.length;a++){var i=o[a];if(r.player==e&&3>i&&t==i)return!0;if(r.banker==e&&i>=3&&i%3==t)return!0}return!1},a.prototype._updateUI=function(e){o.prototype._updateUI.call(this,e),this.switchUIByMiZhu()},a.prototype._beforeRollin=function(){o.prototype._beforeRollin.call(this),this.switchUIByMiZhu()},a.prototype.switchUIByMiZhu=function(){var t=this,r=t.baccTableCtrl.roundCtrl,o=t.baccTableCtrl.myMiZhuType(),a=r.miZhuBanker4Dis,i=r.miZhuPlayer4Dis,n=CONST.betType.baccarat,s=mo.D.langCodeToTxt("bacc_mi_master_open_card"),l=mo.D.langCodeToTxt("bacc_mi_master_open_card"),c=mo.D.langCodeToTxt("bacc_mi_owner"),p=mo.D.langCodeToTxt("bacc_mi_owner_leave");t.baccTableCtrl.hasMiZhu(n.banker)?s=o==n.banker?mo.D.langCodeToTxt("bacc_mi_owner_open_card"):t.baccTableCtrl.hasOnlineMiZhu(n.banker)?c+mo.STR.format("%s",e.GTS.mgr.verifyEmoji(a.name)):c+mo.STR.format("%s",e.GTS.mgr.verifyEmoji(a.name))+"("+p+")":s=mo.D.langCodeToTxt("bacc_mi_master_open_card"),t.baccTableCtrl.hasMiZhu(n.player)?l=o==n.player?mo.D.langCodeToTxt("bacc_mi_owner_open_card"):t.baccTableCtrl.hasOnlineMiZhu(n.player)?c+mo.STR.format("%s",e.GTS.mgr.verifyEmoji(i.name)):c+mo.STR.format("%s",e.GTS.mgr.verifyEmoji(i.name))+"("+p+")":l=mo.D.langCodeToTxt("bacc_mi_master_open_card"),t.label_bMaster.text=s,t.label_pMaster.text=l,("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(t.label_bMaster.size=38,t.label_pMaster.size=38)},a.prototype._getCardIndex=function(e,t){var r=0;return CONST.betType.baccarat.player==e?r=t:CONST.betType.baccarat.banker==e&&(r=t+3),r},a.prototype.setCard=function(t,r,o){var a=this,i=a._getCardIndex(t,r);if(null!=o){if(a.group.visible){var n=a.baccTableCtrl,s=n.roundCtrl,l=n.myMiZhuType(),c=(s.miZhuBanker4Dis,s.miZhuPlayer4Dis,CONST.betType.baccarat),p=a.BandPcanMi,_=a.BandPIdx;n.hasMiZhu(c.banker)&&(l==c.banker?l==CONST.betType.baccarat.banker&&(p[0]=1,p[1]=n.hasOnlineMiZhu(c.player)?0:2):p[0]=0),n.hasMiZhu(c.player)&&(l==c.player?l==CONST.betType.baccarat.player&&(p[1]=1,p[0]=n.hasOnlineMiZhu(c.banker)?0:2):p[1]=0);var u=t==CONST.betType.baccarat.player?1:0,h=null,m="",d="",b=!0;-1!=_[u].indexOf(r)&&(0==u?(h=a.grp_mi.getChildByName("grp_b"),m="miCardB",d="b_",b=!1):(h=a.grp_mi.getChildByName("grp_p"),m="miCardP",d="p_")),b?a.rect_touch_p.visible=1==p[u]:a.rect_touch_b.visible=1==p[u];var g=a[d+r],y=a._jmCardMap[i];if(y)y.setCardValue(o),a._jmCardMap[i].visible=!0;else{var f=n.getOpenedIndexList(),C=mo.ARR.hasStrict(f,i);if((y=a._jmCardMap[i]=new e.JmCard).cardIndex=i,y.x=g.x,y.y=g.y,y.initSize(130.5,183.6),y.setCardValue(o),y.name=m+r,h.addChild(y),!C)y.y+=200,egret.Tween.removeTweens(y),egret.Tween.get(y).to({y:g.y},500);if(y.emitter.on(e.JmCard.ON_OPEN,a._onCardOpen,a),y.emitter.on(e.JmCard.ON_CMD,a._onCardCmd,a),C)y.open();else if(1==p[u])y.canMi=!0,y.canPlay=!1,y.showTip(mo.D.langCodeToTxt("bacc_mi_edge"),-g.rotation);else if(2==p[u]){if(y.canMi=!1,0==u&&n.hasMiZhu(c.banker)&&!a.baccTableCtrl.hasOnlineMiZhu(c.banker))return;if(1==u&&n.hasMiZhu(c.player)&&!a.baccTableCtrl.hasOnlineMiZhu(c.player))return;y.showTip(mo.D.langCodeToTxt("bacc_mi_open"),-g.rotation)}else y.canMi=!1;y.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(){2==p[u]&&a._openMCard(t==c.player?"P":"B",r)}),a)}y.rotation=g.rotation,a._allOpenBtnState(),a.BandPcanMi=[0,0]}}else a._jmCardMap[i]&&(a._jmCardMap[i].visible=!1)},a.prototype._onCardOpen=function(e){e.open(),this.baccTableCtrl.openCard([e.cardIndex],(function(){}))},a.prototype._onCardCmd=function(e,t){var r=this,o=r._preData,a=r._tempPoint,i=null;if(!o||o.isReset||t.isReset)i=t;else if(o){var n=o.dstPoint,s=t.dstPoint;a.x=n[0]-s[0],a.y=n[1]-s[1];var l=a.length,c=t.size;a.x=c[0],a.y=c[1],l>.04*a.length&&(i=t)}if(i){i.roundCode=r.baccTableCtrl.roundCode,r._preData=i;var p=e.collectPlayInfo(i.roundCode,i);p&&r.baccTableCtrl.miCard(p,null)}},a.prototype._onTick=function(){var e=this,t=e.baccTableCtrl.roundCode,r=e._jmCardMap;for(var o in r){var a=r[o].collectPlayInfo(t,null);a&&e.baccTableCtrl.miCard(a,null)}},a.prototype._allOpenBtnState=function(){var e=this;e.btn_pAllOpen.visible=!1,e.btn_bAllOpen.visible=!1,e.no_touch.visible=!0;var t=e.baccTableCtrl.roundCtrl.srcResults||[];if(null!=t[0]&&null!=t[1]&&null!=t[3]&&null!=t[4]){e.no_touch.visible=!1;var r=e.baccTableCtrl.getOpenedIndexList(),o=e.baccTableCtrl.myMiZhuType();0!=o&&(o==CONST.betType.baccarat.player?((-1==r.indexOf(0)||-1==r.indexOf(1))&&(e.btn_pAllOpen.visible=!0),null!=t[2]&&-1==r.indexOf(2)&&(e.btn_pAllOpen.visible=!0),e.baccTableCtrl.hasMiZhu(CONST.betType.baccarat.banker)||(null==t[3]||null==t[4]||-1!=r.indexOf(3)&&-1!=r.indexOf(4)||(e.btn_bAllOpen.visible=!0),null!=t[5]&&-1==r.indexOf(5)&&(e.btn_bAllOpen.visible=!0))):o==CONST.betType.baccarat.banker&&((-1==r.indexOf(3)||-1==r.indexOf(4))&&(e.btn_bAllOpen.visible=!0),null!=t[5]&&-1==r.indexOf(5)&&(e.btn_bAllOpen.visible=!0),e.baccTableCtrl.hasMiZhu(CONST.betType.baccarat.player)||(null==t[0]||null==t[1]||-1!=r.indexOf(0)&&-1!=r.indexOf(1)||(e.btn_pAllOpen.visible=!0),null!=t[2]&&-1==r.indexOf(2)&&(e.btn_pAllOpen.visible=!0))))}},a.prototype._openMCard=function(e,t){var r=0;"B"==e?r=3:"P"==e&&(r=0),r+=t;for(var o=this.baccTableCtrl.getOpenedIndexList(),a=0;a<o.length;a++)if(o[a]==r)return;this.baccTableCtrl.openCard([r],(function(){}))},a.prototype.tunCard=function(e,t){var r=this;if(r.group.visible){var o=r._getCardIndex(e,t),a=r._jmCardMap[o];a&&a.open(),r._setBPPoint()}},a.prototype.miCardShow=function(e){var t=this;if(t.group.visible){var r=e.miData,o=r.cardIndex,a=t._jmCardMap[o];if(a){var i=(2>=o?CONST.betType.baccarat.player:CONST.betType.baccarat.banker)==CONST.betType.baccarat.player?1:0,n=t.baccTableCtrl.betCtrl,s=0,l=0;if(n){var c=n.betDetail;c&&(s=c[CONST.betType.baccarat.player]||0,l=c[CONST.betType.baccarat.banker]||0)}if(0==i){if(s>l)return}else if(l>s)return;a.playByInfo(r)}}},a.prototype.rollin=function(){var e=this;e.baccTableCtrl.subType==CONST.baccaratSubType.mi&&(e.group.scaleX=1,e.group.scaleY=1,e.group.y=270,e.group.x=180,e.grp_mi.scaleX=1,e.grp_mi.scaleY=1,e.grp_mi.y=0,e.grp_mi.x=0,e.group.visible=!0,e.no_touch.visible=!1),e.group.visible=!0,e.openAni.play(0),e.isRollin=!0},a.prototype.rollout=function(){var e=this;e.baccTableCtrl.subType==CONST.baccaratSubType.mi&&(e.group.scaleX=1,e.group.scaleY=1,e.grp_mi.scaleX=1,e.grp_mi.scaleY=1,e.grp_mi.y=0,e.grp_mi.x=0,e.group.y=270,e.group.x=180,e.group.visible=!0,e.no_touch.visible=!1,e.btn_bAllOpen.visible=!1,e.btn_pAllOpen.visible=!1),e.closeAni.play(0),e.isRollin=!1},a.prototype.hideCards=function(){var e=this;e.label_pp.text="0",e.label_bp.text="0",e.label_pp.visible=!1,e.label_bp.visible=!1,e.grp_b.removeChildren(),e.grp_p.removeChildren(),mo.OBJ.empty(e._jmCardMap),e._curJmCard=null,e.no_touch.visible=!1,e.btn_bAllOpen.visible=!1,e.btn_pAllOpen.visible=!1,e.rect_touch_p.visible=!1,e.rect_touch_b.visible=!1},a.prototype.afterRollout=function(){},a.prototype.afterRollin=function(){},a.prototype.closeOver=function(){this.group.visible=!1,this.hideCards()},a}(t.BaccShowCard);t.BaccShowCardJM=o,__reflect(o.prototype,"G.BACC.BaccShowCardJM")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.isRollin=!1},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.group.y=540},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.dtTableCtrl=this.data.tabelCtrl},r.prototype._scanCard=function(){var e=this;e.isRollin||e.curGameState!=CONST.gameState.stopBet||e.rollin(),e._fillCards(!0)},r.prototype._openRound=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.betting)},r.prototype._betStop=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet)},r.prototype._payout=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.payout)},r.prototype._shuffles=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.shuffle)},r.prototype._fillCards=function(e){var t=this,r=t.dtTableCtrl.roundCtrl.srcResults||[],o=CONST.betType.dragonTiger;null!=r[0]&&(t.setCard(o.dragon,0,r[0]),t._turnCheck(o.dragon,0)&&t.tunCard(o.dragon,0,e)),null!=r[1]&&(t.setCard(o.tiger,1,r[1]),t._turnCheck(o.tiger,1)&&t.tunCard(o.tiger,1,e))},r.prototype._turnCheck=function(){return!0},r.prototype._setBPPoint=function(){var t=this,r=t.dtTableCtrl.roundCtrl.srcResults||[],o=t.dtTableCtrl.getOpenedIndexList()||[];t.label_dp.visible=o.length>0,t.label_tp.visible=o.length>0,t.label_dp.text=e.UTIL.getCardNum(r[0])+"",t.label_tp.text=e.UTIL.getCardNum(r[1])+""},r.prototype._changeNumShow=function(){this._setBPPoint()},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.justEnterGame=!0,r.justEnterGame&&r.afterRollout(),r.openAni.addEventListener("complete",this.afterRollin,r),r.onEmitter(r.dtTableCtrl,CONST.BBT_table.openRound,r._openRound),r.onEmitter(r.dtTableCtrl,CONST.BBT_table.scanCard,r._scanCard),r.onEmitter(r.dtTableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.dtTableCtrl,CONST.BBT_table.betStop,r._betStop),r.onEmitter(r.dtTableCtrl,CONST.BBT_table.shuffle,r._shuffles),r.onEmitter(r.dtTableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(r.card_d.emitter,"over",r._changeNumShow),r.onEmitter(r.card_t.emitter,"over",r._changeNumShow),r.onEmitter(mo.emitter,"onRoomShortcutExpand",r.onRoomShortcutExpand),r._gameStateChange(r.dtTableCtrl.gameState,!1),r.label_tiger&&r.label_dragon&&(r.label_tiger.text="${{g_tiger_simple_forpc35roomlistitem}}",r.label_dragon.text="${{g_dragon_simple_forpc35roomlistitem}}")},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype.onRoomShortcutExpand=function(e){var t=this,r=e?150:20,o=e?20:150;egret.Tween.removeTweens(t.group),t.group.left=o,egret.Tween.get(t.group).to({left:r},300).call((function(){egret.Tween.removeTweens(t.group)}))},r.prototype._onRefreshInfo=function(){var e=this;e.hideCards(),e._gameStateChange(e.dtTableCtrl.gameState,!1)},r.prototype._beforeRollin=function(){this.hideCards()},r.prototype._updateUI=function(e){this._fillCards(e)},r.prototype._gameStateChange=function(e,t){void 0===t&&(t=!0);var r=this;switch(r.curGameState=e,e){case CONST.gameState.betting:case CONST.gameState.shuffle:r.isRollin&&r.rollout();break;case CONST.gameState.stopBet:case CONST.gameState.payout:r.isRollin||(r._beforeRollin(),r.rollin()),r._updateUI(t)}},r.prototype.setCard=function(e,t,r){var o=this[e==CONST.betType.dragonTiger.dragon?"card_d":"card_t"];o&&(o.visible=!0,o.setData({id:r}))},r.prototype.tunCard=function(e,t,r){var o=this[e==CONST.betType.dragonTiger.dragon?"card_d":"card_t"];o&&(o.turnOver(r),this.dtTableCtrl.playAudio("cards_dealing"))},r.prototype.rollin=function(){var e=this;e.group.visible=!0,e.openAni.play(0),e.isRollin=!0},r.prototype.rollout=function(){this.afterRollout(),this.isRollin=!1},r.prototype.hideCards=function(){var e=this,t=e.card_d;t&&(t.visible=!1,t.reset()),(t=e.card_t)&&(t.visible=!1,t.reset()),e.label_dp.text="0",e.label_tp.text="0",e.label_dp.visible=!1,e.label_tp.visible=!1},r.prototype.afterRollout=function(){this.group.visible=!1,this.hideCards()},r.prototype.afterRollin=function(){this.group.visible=!0},r}(mo.EUI.Comp);t.DTShowCard=r,__reflect(r.prototype,"G.BACC.DTShowCard")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);mo.emitter.on("testtResult",this.testtResult,this)},r.prototype.testtResult=function(){this.showContent(!0,200,200,[51,45,null,51,46])},r.prototype.showContent=function(e,t,r,o){var a=this;e?o&&o.length>0&&(a.visible=!0,a.x=t,a.y=r,a.setBPPoint(o),a.setResult(o)):a.visible=!1},r.prototype.setResult=function(e){if(e||!(e.length<=0)){var t=e,r=CONST.betType.dragonTiger;null!=t[0]&&this.setCard(r.dragon,0,t[0]),null!=t[1]&&this.setCard(r.tiger,1,t[1])}},r.prototype.setCard=function(e,t,r){var o=this[e==CONST.betType.dragonTiger.dragon?"card_d":"card_t"];o&&(o.visible=!0,o.setData({id:r}),o.turnOver(!1))},r.prototype.setBPPoint=function(t){if(t||!(t.length<=0)){var r=t;this.label_dp.text=e.UTIL.getCardNum(r[0])+"",this.label_tp.text=e.UTIL.getCardNum(r[1])+""}},r}(mo.EUI.Comp);t.DTShowHistory=r,__reflect(r.prototype,"G.BACC.DTShowHistory")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);this._skinName="BaccRightSlider_tinyPokerSkin",this.BetType=CONST.betType.dragonTiger},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);this.baccTableCtrl=this.data.tabelCtrl},t.prototype._initOtherBetUI=function(){var e=this,t=e.betInfoCards={},r=e.BetType;t[r.dragon]=e.bicard_0,t[r.draw]=e.bicard_1,t[r.tiger]=e.bicard_2},t.prototype.setPercent=function(e){var t=this;if(3==e.length){for(var r=0;r<e.length;r++)0<e[r]&&1>e[r]&&(e[r]=1);var o=0==e[0]&&0==e[1]&&0==e[2]?[0,0,0]:t.calcPercent(e[0],e[1],e[2]),a=t.BetType;t.betInfoCards[a.dragon].setPercentAndBar(o[2]),t.betInfoCards[a.draw].setPercentAndBar(o[1]),t.betInfoCards[a.tiger].setPercentAndBar(o[0])}},t.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.dtcompScoreInfo.currentState="dt"},t.prototype.getCurrentState=function(){return"dt"},t.prototype._refreshRoomInfo=function(){e.prototype._refreshRoomInfo.call(this);var t=this,r=t.baccTableCtrl.countMap||{},o=t.BetType;t.setScore(r[o.tiger]||0,r[o.draw]||0,r[o.dragon]||0)},t}(e.BaccRightSlider_tinyPoker);e.DTRightSlider=t,__reflect(t.prototype,"G.BACC.DTRightSlider")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this._skinName="BaccLuzhuSkin"},r.prototype.getCurrentState=function(){return"dt"},r.prototype._setupZhu=function(){var t=this,r={gridSize:14,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};r.res=e.LZllRes,t.zhuPanLuPainter=new e.DTZhuPanLuPainter(t.scr_zhupanLu,r);var o={gridSize:14,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};o.res=e.LZllRes,t.daluPainter=new e.DTDaluPainter(t.scr_dalu,o);var a={gridSize:14,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};a.res=e.LZllRes,t.dayanLuPainter=new e.AnalysisLuPainter(t.scr_dayanLu,e.AnalysisLuType.DAYAN,a);var i={gridSize:14,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};i.res=e.LZllRes,t.xiaoLuPainter=new e.AnalysisLuPainter(t.scr_xiaolu,e.AnalysisLuType.XIAOLU,i);var n={gridSize:14,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};n.res=e.LZllRes,t.yueyouLuPainter=new e.AnalysisLuPainter(t.scr_yueyouLu,e.AnalysisLuType.YUEYOU,n)},r.prototype.refreshQueryLuZhu=function(){var e=this;e.showQueryLuZhu(e.playerAsk,CONST.betType.dragonTiger.dragon),e.showQueryLuZhu(e.bankerAsk,CONST.betType.dragonTiger.tiger)},r.prototype._setRoundInfo=function(){var e=this,t=e.data.tableCtrl,r=t.countMap||{},o=CONST.betType.dragonTiger;e.label_round.text=r[o.dragon]||0+r[o.tiger]||0+r[o.draw]||0,e.label_bRound.text=r[o.tiger]||0,e.label_pRound.text=r[o.dragon]||0,e.label_tRound.text=r[o.draw]||0,e.label_room.text=t.name},r.prototype._tap_btn_banker=function(){this.askLuZhu(CONST.betType.dragonTiger.tiger)},r.prototype._tap_btn_player=function(){this.askLuZhu(CONST.betType.dragonTiger.dragon)},r}(e.BaccLuzhu);e.DTLuzhu=t,__reflect(t.prototype,"G.BACC.DTLuzhu")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.BaccBetAreaHelper,o=e.COMM.BaseBetRecorder,a=function(a){function i(){return a.apply(this,arguments)||this}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);this.BetType=CONST.betType.dragonTiger,this.sortChipsArray=[]},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var e=this;e.grp_bacc&&(e.grp_bacc.visible=!1),e.grp_jm&&(e.grp_jm.visible=!1)},i.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:25,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};r.res=t.LZllRes,r.useForShowHistory=!0,r.mouseMoveInCallback=e.luzhuMouseOvered.bind(e),r.mouseMoveOutCallback=e.luzhuMouseOut.bind(e),e.zhuPanLuPainter=new t.DTZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:80,maxRow:6};o.res=t.LZllRes,e.daluPainter=new t.DTDaluPainter(e.scr_dalu,o);var a={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};a.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};i.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};n.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},i.prototype.sortChips=function(){for(var e=this,t=0;t<e.grp_betArea.numChildren;t++){var r=e.grp_betArea.getChildAt(t);if(r){var o=r.name;"grp_betDTTie"==o&&e.sortChipsArray.push(t),"grp_betD"==o&&e.sortChipsArray.push(t),"grp_betT"==o&&e.sortChipsArray.push(t),"grp_showChip"==o&&e.sortChipsArray.push(t)}}e.sortChipsArray.length>=4&&(e.grp_betArea.setChildIndex(e.grp_showChip,e.sortChipsArray[0]),e.grp_betArea.setChildIndex(e.grp_betDTTie,e.sortChipsArray[1]),e.grp_betArea.setChildIndex(e.grp_betD,e.sortChipsArray[2]),e.grp_betArea.setChildIndex(e.grp_betT,e.sortChipsArray[3]))},i.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var e=this;e.dtRightSlider.setData({tabelCtrl:e.tableCtrl}),e.dtShowCard.setData({tabelCtrl:e.tableCtrl})},i.prototype._initChipObj=function(){var e=this;e.chipObj={},e.chipObj[CONST.betType.dragonTiger.tiger]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.dragonTiger.dragon]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.dragonTiger.draw]=[[],[],[],[],[],[],[]],e.chipObj_P={},e.chipObj_P[CONST.betType.dragonTiger.tiger]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.dragonTiger.dragon]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.dragonTiger.draw]=[[],[],[],[],[],[],[]]},i.prototype._setCurMyDesk=function(){var e=this,t=e.tableCtrl;if(t)for(var r=t.virtualInfoList||[],o=0;7>o;o++){e["desk_"+o].visible=!1,e["mynum_"+o].visible=!1;var a=r[o];a&&a.isSelf&&e._onDesk(o),e["deskComp_"+o].setData({data:a,tableType:e.tableCtrl.type}),e.updateFlyChipOwner(o,a)}},i.prototype.hideLastChip=function(){var e=this,t=e.grp_betD,r=e.grp_betT,o=e.grp_betDTTie;e.deleteLastChip(t),e.deleteLastChip(r),e.deleteLastChip(o),e.grp_showChip.removeChildren(),e._initChipObj()},i.prototype._tap_btn_luzhu=function(){t.DTLuzhu.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_bankerAsk=function(){e.RCD.mgr.recordState(e.RCD.RcdState.DT_D_ROAD),this.askLuZhu(this.BetType.dragon),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},i.prototype._tap_btn_playerAsk=function(){e.RCD.mgr.recordState(e.RCD.RcdState.DT_T_ROAD),this.askLuZhu(this.BetType.tiger),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},i.prototype._tap_btn_back=function(){this._onKickFromTable()},i.prototype.refreshQueryLuZhu=function(){var e=this;e.showQueryLuZhu(e.playerAsk,CONST.betType.dragonTiger.tiger),e.showQueryLuZhu(e.bankerAsk,CONST.betType.dragonTiger.dragon)},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);var e=this;e.isHavePayoutLayer=!1,e.chat.visible=!0,e.chat.tableCtrl=e.tableCtrl,e.sortChips();var t="zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang||"zh_cn"==mo.PROJ.lang;e.label_bead_road.visible=!t,e.label_big_road.visible=!t,e.label_bigeye_road.visible=!t,e.label_small_road.visible=!t,e.label_cockroach_road.visible=!t,t&&(e.btn_playerAsk.label="",e.btn_bankerAsk.label=""),e.grp_roadmap_labels_for_chinese.visible=t},i.prototype.setBetArea=function(e){var t=this;e?(t._initFlyChipHelper(),t._initCustomerBetArea()):(t._initBetArea(),t.changeBrokerageRequiredImage())},i.prototype._initCustomerBetArea=function(){var r=this;r.betAreaHelpers=[],r.grp_betArea.visible=!1,r.customerBetArea.visible=!0,r.customerBetArea.initForBet(r.baccBetMgr,r.chipBar,r.tableCtrl,r._payoutShow.bind(r),r.doBetCallback.bind(r),r.unBetCallback.bind(r));var o=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateBetTypes(o),r.reSetFlyChipHelper(o),mo.emitter.on("customerSettingFinish",(function(){var t=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateBetTypes(t),r.customerBetArea.updateResultsShow(),r.reSetFlyChipHelper(t)}),r),mo.emitter.on(CONST.customerBetEvent.customerBetUiShow,(function(){r.customerBetSettingDlg=t.DTGameCustomerSetting.show({betMgr:r.baccBetMgr,tableCtrl:r.tableCtrl})})),mo.emitter.on("customerBetUndo",(function(){r._tap_btn_undo()}),r)},i.prototype._initBetArea=function(){var e=this;e.betAreaHelpers=[],e.grp_betArea.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(t){e.baccBetMgr.onBetAreaTap(t.localX,t.localY,e.chipBar.chipValue)}),e);var t,a=CONST.betType.dragonTiger,i=new mo.NUM.Polygon(mo.p(461,480),mo.p(446,516),mo.p(1029,516),mo.p(1019,480));(t=new r(e.grp_betD,a.dragon,e.shadow_D,e.betType_D,i,null,null,e.tableCtrl)).setBetMgr(e.baccBetMgr),e.betAreaHelpers.push(t);var n=e.grp_betD.getChildByName("grp_betNum");e.onEmitter(n.emitter,"over",e._payoutShow);i=new mo.NUM.Polygon(mo.p(473,442),mo.p(460,480),mo.p(1020,480),mo.p(1006,442));(t=new r(e.grp_betDTTie,a.draw,e.shadow_Tie,e.betType_Tie,i,null,null,e.tableCtrl)).setBetMgr(e.baccBetMgr),e.betAreaHelpers.push(t);n=e.grp_betDTTie.getChildByName("grp_betNum");e.onEmitter(n.emitter,"over",e._payoutShow);i=new mo.NUM.Polygon(mo.p(446,517),mo.p(576,556),mo.p(679,562),mo.p(801,561),mo.p(907,555),mo.p(989,540),mo.p(1030,516));(t=new r(e.grp_betT,a.tiger,e.shadow_T,e.betType_T,i,null,null,e.tableCtrl)).setBetMgr(e.baccBetMgr),e.betAreaHelpers.push(t);n=e.grp_betT.getChildByName("grp_betNum");e.onEmitter(n.emitter,"over",e._payoutShow);i=new mo.NUM.Polygon(mo.p(461,480),mo.p(446,516),mo.p(1029,516),mo.p(1019,480));e.baccBetMgr.registerBetArea(a.dragon,i),e.baccBetMgr.registerBetRecorder(a.dragon,new o(a.dragon,0));i=new mo.NUM.Polygon(mo.p(473,442),mo.p(460,480),mo.p(1020,480),mo.p(1006,442));e.baccBetMgr.registerBetArea(a.draw,i),e.baccBetMgr.registerBetRecorder(a.draw,new o(a.draw,0));i=new mo.NUM.Polygon(mo.p(446,517),mo.p(576,556),mo.p(679,562),mo.p(801,561),mo.p(907,555),mo.p(989,540),mo.p(1030,516));e.baccBetMgr.registerBetArea(a.tiger,i),e.baccBetMgr.registerBetRecorder(a.tiger,new o(a.tiger,0))},i.prototype._payoutChip=function(){var e=this;if(e.tableCtrl){var t=e.tableCtrl.virtualInfoList||[],r=e.tableCtrl.roundCtrl.results;e.payoutChipObj={},e.isPayoutChipOver=0,e.isPayoutChipOverBk=0;for(var o=0;7>o;o++){e.payoutChipObj[o]={};var a=t[o];if(a){var i=a.bet;for(var n in i)if(e.payoutChipObj[o][n]={},r&&-1!=r.indexOf(Number(n))){var s=i[n];e._getPayoutChipGrp(s,n,o)}if(r&&68==r[0]){if(i[10]){var l=i[10];e._getPayoutChipGrp(l/2,"10",o)}if(i[11]){var c=i[11];e._getPayoutChipGrp(c/2,"11",o)}}}}}},i.prototype.clearMyChip=function(){var e=this;if(e.BetType==CONST.betType.dragonTiger){if(e.grp_betD.numChildren>2)for(var t=2;t<e.grp_betD.numChildren;t++)e.grp_betD.removeChildAt(t);if(e.grp_betT.numChildren>2)for(t=2;t<e.grp_betT.numChildren;t++)e.grp_betT.removeChildAt(t);if(e.grp_betDTTie.numChildren>2)for(t=3;t<e.grp_betDTTie.numChildren;t++)e.grp_betDTTie.removeChildAt(t)}},i.prototype.luzhuMouseOvered=function(e,t,r,o){var a=this;if(a.dtShowHistory)if(-1!=e){var i=a.tableCtrl.luZhuList;if((i=i.filter((function(e){return e&&e.results})))[e]&&i[e].srcResults){var n=a.globalToLocal(t,r);n.x+=o/2+10;var s=a.dtShowHistory.height*a.dtShowHistory.scaleY;n.y+s>a.height&&(n.y=a.height-s);var l=i[e].srcResults;a.dtShowHistory.showContent(!0,n.x,n.y,l)}}else a.dtShowHistory.showContent(!1)},i.prototype.luzhuMouseOut=function(){this.dtShowHistory.showContent(!1)},i}(t.BaseCardLayer);t.DTGame=a,__reflect(a.prototype,"G.BACC.DTGame"),e.GC.gc.registerClass(a.__className,a)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this,o={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};o.res=t.LZllRes,e.zhuPanLuPainter=new t.DTZhuPanLuPainter(e.scr_zhupanLu,o);var a={gridSize:12,showGrid:!0,isScroll:!0,maxCol:75,maxRow:6};a.res=t.LZllRes,e.daluPainter=new t.DTDaluPainter(e.scr_dalu,a);var i={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};i.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,i);var n={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};n.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,n);var s={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};s.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,s)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var o=this,a=o.data.tableCtrl;o.label_roomName.text=a.name;var i=a.roundCtrl.currentDealerName();a.dealerNameTranslate&&a.dealerNameTranslate.hasOwnProperty(mo.PROJ.lang)&&""!=a.dealerNameTranslate[mo.PROJ.lang]&&(i=a.dealerNameTranslate[mo.PROJ.lang]),o.dealer.setData({dealerName:a.roundCtrl.currentDealerNameOther(i),dealerId:a.roundCtrl.dealerId,tableCode:a.code});var n=a.countMap||{},s=CONST.betType.dragonTiger;o.label_round.text=(n[s.dragon]||0)+(n[s.tiger]||0)+(n[s.draw]||0),o.label_dragon.text=n[s.dragon]||0,o.label_tiger.text=n[s.tiger]||0,o.label_tie.text=n[s.draw]||0;for(var l,c,p=a.rangeList4Dis,_=0,u=0,h=p.length;h>u;u++)c=p[u],0==u?(l=c[0],_=c[1]):(l>c[0]&&(l=c[0]),_<c[1]&&(_=c[1]));o.label_roomLimit.visible=!a.isMultiRange,o.label_roomName.y=a.isMultiRange?12:4,1e3>l&&1e3>_?o.label_roomLimit.text=mo.STR.format("%s-%s",e.UTIL.NUM.getSplitNumStr(l),e.UTIL.NUM.getSplitNumStr(_)):1e3>l&&_>=1e3?o.label_roomLimit.text=mo.STR.format("%s-%sK",e.UTIL.NUM.getSplitNumStr(l),e.UTIL.NUM.getSplitNumStr(_/1e3)):l>=1e3&&_>=1e3&&(o.label_roomLimit.text=mo.STR.format("%sK-%sK",e.UTIL.NUM.getSplitNumStr(l/1e3),e.UTIL.NUM.getSplitNumStr(_/1e3))),o._updateGameState();var m=function(e){var r=new t.LuzhuAnalyst(1);if(!e||0===e.length)return r;for(var o=0,a=e.length;a>o;o++)e[o].results&&r.receiveHistoryMsg({results:e[o].results,roundNo:"test"+o,cards:[]});return r}(a.luZhuList);o.zhuPanLuPainter.setZhuPanData(m.getZhuPanData()),o.daluPainter.setDaLuData(m.getDaLuData()),o.dayanLuPainter.setAnalysisData(m.getDaYanLuData()),o.xiaoLuPainter.setAnalysisData(m.getXiaoLuData()),o.yueyouLuPainter.setAnalysisData(m.getYueYouLuData()),o.queryLuZhu=function(e){var t=m.queryLuZhu(e);t&&(t.zhupan&&o.zhuPanLuPainter.showQueryZhu(t.zhupan),t.dalu&&o.daluPainter.showQueryZhu(t.dalu),t.dayan&&o.dayanLuPainter.showQueryZhu(t.dayan),t.xiaolu&&o.xiaoLuPainter.showQueryZhu(t.xiaolu),t.yueyou&&o.yueyouLuPainter.showQueryZhu(t.yueyou))}},o}(e.RoomListItem);t.DTRoomListItem=r,__reflect(r.prototype,"G.BACC.DTRoomListItem")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_room=t.DTRoomListItemNeon},o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.dragonTiger),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n)}return t},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomList);t.DTRoomList=r,__reflect(r.prototype,"G.BACC.DTRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.isFirstEnter=!1,e}return __extends(o,r),o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype.createBPTBar=function(){var t=this;t.cmp_MaskedImage_b||(t.cmp_MaskedImage_b=new e.BASE.MaskedImage,t.cmp_MaskedImage_b.initImage("bet_bar_r",0,0,8,80,80/3,!0),t.grp_bp_bar.addChild(t.cmp_MaskedImage_b.grp_image)),t.cmp_MaskedImage_p||(t.cmp_MaskedImage_p=new e.BASE.MaskedImage,t.cmp_MaskedImage_p.initImage("bet_bar_b",0,0,8,80,80/3,!1),t.grp_bp_bar.addChild(t.cmp_MaskedImage_p.grp_image))},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var o=this,a={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};a.res=t.LZllRes,o.zhuPanLuPainter=new t.DTZhuPanLuPainter(o.scr_zhupanLu,a);var i={gridSize:12,showGrid:!0,isScroll:!0,maxCol:80,maxRow:6};i.res=t.LZllRes,o.daluPainter=new t.DTDaluPainter(o.scr_dalu,i);var n={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};n.res=t.LZllRes,o.dayanLuPainter=new t.AnalysisLuPainter(o.scr_dayanLu,t.AnalysisLuType.DAYAN,n);var s={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};s.res=t.LZllRes,o.xiaoLuPainter=new t.AnalysisLuPainter(o.scr_xiaolu,t.AnalysisLuType.XIAOLU,s);var l={gridSize:9,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};l.res=t.LZllRes,o.yueyouLuPainter=new t.AnalysisLuPainter(o.scr_yueyouLu,t.AnalysisLuType.YUEYOU,l),o.scaleX=e.BASE.scaleXY_DG,o.scaleY=e.BASE.scaleXY_DG},o.prototype.setBPTBar=function(e,t,r){var o=this;o.createBPTBar();var a=e+t+r;a>0?(o.cmp_MaskedImage_b.changeImageHeight(e/a*80),o.cmp_MaskedImage_p.changeImageHeight(t/a*80)):o.setBPTBar(33,33,33)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var o=this;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(o.label_dragon.size=24,o.label_tiger.size=24,o.label_tie.size=24);var a=o.data.tableCtrl;o.label_roomName.text=a.name,o.dealer.setData({dealerName:a.roundCtrl.dealerName,dealerId:a.roundCtrl.dealerId,tableCode:a.code,dealerNameTranslate:a.dealerNameTranslate});var i=a.countMap||{},n=CONST.betType.dragonTiger;o.label_round.text=(i[n.dragon]||0)+(i[n.tiger]||0)+(i[n.draw]||0),o.label_dragon.text=i[n.dragon]||0,o.label_tiger.text=i[n.tiger]||0,o.label_tie.text=i[n.draw]||0,o.setBPTBar(i[n.dragon]||0,i[n.tiger]||0,i[n.draw]||0);for(var s,l,c=a.rangeList4Dis,p=0,_=0,u=c.length;u>_;_++)l=c[_],0==_?(s=l[0],p=l[1]):(s>l[0]&&(s=l[0]),p<l[1]&&(p=l[1]));o.label_roomLimit.visible=!a.isMultiRange;var h=e.GW.mgr.isChangeDisplayDecimalMark?",":".",m=p>=1e3?""+e.UTIL.NUM.getSplitNumStr(p/1e3):""+p;m=-1!=m.indexOf(h)?m.substring(0,m.indexOf(h)+4):m,m=p>=1e3?m+"K":m;var d=s>=1e3?""+e.UTIL.NUM.getSplitNumStr(s/1e3):""+s;d=-1!=d.indexOf(h)?d.substring(0,d.indexOf(h)+4):d,d=s>=1e3?d+"K":d,o.label_roomLimit.text=mo.STR.format("%s-%s",d,m),o._updateGameState();var b=function(e){var r=new t.LuzhuAnalyst(1);if(!e||0===e.length)return r;for(var o=0,a=e.length;a>o;o++)e[o].results&&r.receiveHistoryMsg({results:e[o].results,roundNo:"test"+o,cards:[]});return r}(a.luZhuList);o.zhuPanLuPainter.setZhuPanData(b.getZhuPanData()),o.daluPainter.setDaLuData(b.getDaLuData()),o.dayanLuPainter.setAnalysisData(b.getDaYanLuData()),o.xiaoLuPainter.setAnalysisData(b.getXiaoLuData()),o.yueyouLuPainter.setAnalysisData(b.getYueYouLuData()),o.queryLuZhu=function(e){var t=b.queryLuZhu(e);t&&(t.zhupan&&o.zhuPanLuPainter.showQueryZhu(t.zhupan),t.dalu&&o.daluPainter.showQueryZhu(t.dalu),t.dayan&&o.dayanLuPainter.showQueryZhu(t.dayan),t.xiaolu&&o.xiaoLuPainter.showQueryZhu(t.xiaolu),t.yueyou&&o.yueyouLuPainter.showQueryZhu(t.yueyou))},o.setMaintainMask()},o.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_dragonTiger"),t.data.tableCtrl&&!e.GTS.mgr.isTableMaintain(t.data.tableCtrl.code)&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},o}(e.RoomListItem);t.DTRoomListItemNeon=r,__reflect(r.prototype,"G.BACC.DTRoomListItemNeon"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BASE.MatrixTextType,o=function(o){function a(){return o.apply(this,arguments)||this}return __extends(a,o),a.prototype.registerCustomerBetRecorder=function(){var t=this;t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.dragon,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.dragon,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.tiger,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.tiger,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.dragonOdd,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.dragonOdd,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.dragonEven,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.dragonEven,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.tigerOdd,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.tigerOdd,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.tigerEven,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.tigerEven,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.dragonBlack,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.dragonBlack,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.dragonRed,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.dragonRed,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.tigerBlack,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.tigerBlack,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.tigerRed,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.tigerRed,0)),t.baccBetMgr.registerBetRecorder(CONST.betType.dragonTiger.draw,new e.COMM.BaseBetRecorder(CONST.betType.dragonTiger.draw,0))},a.prototype.updateBetAreaLabel=function(e,t){if(t){var r="";switch(e){case-1:r="";break;case CONST.betType.dragonTiger.dragon:r="${{dt_dragon}} 1:1";break;case CONST.betType.dragonTiger.tiger:r="${{dt_tiger}} 1:1";break;case CONST.betType.dragonTiger.draw:r="en_us"==mo.PROJ.lang?"${{g_tie}} 8:1":"${{g_tie}} 1:8";break;case CONST.betType.dragonTiger.dragonOdd:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Dragon_odd}} 0.75:1":"${{DT_customerBet_Dragon_odd}} 1:0.75";break;case CONST.betType.dragonTiger.dragonEven:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Dragon_even}} 1.05:1":"${{DT_customerBet_Dragon_even}} 1:1.05";break;case CONST.betType.dragonTiger.tigerOdd:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Tiger_odd}} 0.75:1":"${{DT_customerBet_Tiger_odd}} 1:0.75";break;case CONST.betType.dragonTiger.tigerEven:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Tiger_even}} 1.05:1":"${{DT_customerBet_Tiger_even}} 1:1.05";break;case CONST.betType.dragonTiger.dragonBlack:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Dragon_black}} 0.9:1":"${{DT_customerBet_Dragon_black}} 1:0.9";break;case CONST.betType.dragonTiger.dragonRed:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Dragon_red}} 0.9:1":"${{DT_customerBet_Dragon_red}} 1:0.9";break;case CONST.betType.dragonTiger.tigerBlack:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Tiger_black}} 0.9:1":"${{DT_customerBet_Tiger_black}} 1:0.9";break;case CONST.betType.dragonTiger.tigerRed:r="en_us"==mo.PROJ.lang?"${{DT_customerBet_Tiger_red}} 0.9:1":"${{DT_customerBet_Tiger_red}} 1:0.9"}var o=":";"zh_cn"==mo.PROJ.lang?o="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(o="賠"),r.length>0&&(r=r.substring(0,r.indexOf(":"))+o+r.substring(r.indexOf(":")+1)),t.setColorByType(e),t.myText.size=46,t.setText(r)}},a.prototype.changeBetDeskAndArea=function(r){var o=this;switch(r<e.GTS.mgr.getCustomerBetSettingMinSize(o.tableCtrl.type)&&r>e.GTS.mgr.getCustomerBetSettingMaxSize(o.tableCtrl.type)&&(r=e.GTS.mgr.getCustomerBetSettingMinSize(o.tableCtrl.type)),o.hideAllUpGroup(),r){case 3:o.betDesk.visible=!1,o.desk_only5.visible=!1,o.desk_only4.visible=!1,o.desk_only3.visible=!0,o.desk_up1.visible=!1,o.desk_up2.visible=!1,o.desk_up3.visible=!1,o.desk_up4.visible=!1;break;case 4:o.betDesk.visible=!1,o.desk_only5.visible=!1,o.desk_only3.visible=!1,o.desk_only4.visible=!0,o.desk_up1.visible=!1,o.desk_up2.visible=!1,o.desk_up3.visible=!1,o.desk_up4.visible=!1;break;case 5:o.betDesk.visible=!1,o.desk_only5.visible=!1,o.desk_only4.visible=!1,o.desk_only5.visible=!0,o.desk_up1.visible=!1,o.desk_up2.visible=!1,o.desk_up3.visible=!1,o.desk_up4.visible=!1;break;case 6:o.betDesk.visible=!0,o.desk_only5.visible=!1,o.desk_only4.visible=!1,o.desk_only3.visible=!1,o.desk_up1.visible=!0,o.desk_up2.visible=!1,o.desk_up3.visible=!1,o.desk_up4.visible=!1,o.setBetAreaVisible(t.BetAreaIndexLocation.up_1,!0);break;case 7:o.betDesk.visible=!0,o.desk_only5.visible=!1,o.desk_only4.visible=!1,o.desk_only3.visible=!1,o.desk_up1.visible=!1,o.desk_up2.visible=!0,o.desk_up3.visible=!1,o.desk_up4.visible=!1,o.setBetAreaVisible(t.BetAreaIndexLocation.leftUp_2,!0),o.setBetAreaVisible(t.BetAreaIndexLocation.rightUp_2,!0);break;case 8:o.betDesk.visible=!0,o.desk_only5.visible=!1,o.desk_only4.visible=!1,o.desk_only3.visible=!1,o.desk_up1.visible=!1,o.desk_up2.visible=!1,o.desk_up3.visible=!0,o.desk_up4.visible=!1,o.setBetAreaVisible(t.BetAreaIndexLocation.leftUp_3,!0),o.setBetAreaVisible(t.BetAreaIndexLocation.upMiddle_3,!0),o.setBetAreaVisible(t.BetAreaIndexLocation.rightUp_3,!0);break;case 9:o.betDesk.visible=!0,o.desk_only5.visible=!1,o.desk_only4.visible=!1,o.desk_only3.visible=!1,o.desk_up1.visible=!1,o.desk_up2.visible=!1,o.desk_up3.visible=!1,o.desk_up4.visible=!0,o.setBetAreaVisible(t.BetAreaIndexLocation.leftUp_4,!0),o.setBetAreaVisible(t.BetAreaIndexLocation.leftUpMiddle_4,!0),o.setBetAreaVisible(t.BetAreaIndexLocation.rightUpMiddle_4,!0),o.setBetAreaVisible(t.BetAreaIndexLocation.rightUp_4,!0)}o.changeBaseBetAreaContent_dt(r)},a.prototype.changeBaseBetAreaContent_dt=function(e){var o=this,a={};switch(o.grp_bet_area_0.visible=!1,o.grp_bet_area_1.visible=!1,o.grp_bet_area_2.visible=!1,o.grp_bet_area_3.visible=!1,o.grp_bet_area_4.visible=!1,e){case 3:o.updateBetAreaContent(0,!0,259,0,-1,-1,-1,-1,-1,-1,517,125,1,"ui_cb_dt_area_only3_down","ui_cb_dt_area_flash_only3_down","ui_cb_dt_area_disable_only3_down",r.CENTER),o.updateBetAreaContent(1,!0,25,2.2,-21,-1,-21,-1,-21,-1,258,76,1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left",r.LEFT),o.updateBetAreaContent(2,!0,750,2.2,282,-1,282,-1,282,-1,278,76,-1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left",r.RIGHT);break;case 4:o.updateBetAreaContent(0,!0,259,77,-1,-1,-1,-1,-1,-1,517,48,1,"ui_cb_dt_area_only4_down","ui_cb_dt_area_flash_only4_down","ui_cb_dt_area_disable_only4_down",r.CENTER),o.updateBetAreaContent(1,!0,25,2.2,-21,-1,-21,-1,-21,-1,258,76,1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left",r.LEFT),o.updateBetAreaContent(2,!0,260,0,0,0,0,0,0,0,516,80,1,"ui_cb_dt_area_only4_middle","ui_cb_dt_area_flash_only4_middle","ui_cb_dt_area_disable_only4_middle",r.CENTER),o.updateBetAreaContent(3,!0,750,2.2,282,-1,282,-1,282,-1,278,76,-1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left",r.RIGHT);break;case 5:o.updateBetAreaContent(0,!0,259,77,-1,-1,-1,-1,-1,-1,517,48,1,"ui_cb_dt_area_only4_down","ui_cb_dt_area_flash_only4_down","ui_cb_dt_area_disable_only4_down",r.CENTER),o.updateBetAreaContent(1,!0,259,40,0,-1,0,-1,0,-1,516,38,1,"ui_cb_area_only5_middle_down","ui_cb_area_flash_only5_middle_down","ui_cb_area_disable_only5_middle_down",r.CENTER),o.updateBetAreaContent(2,!0,273,1,490,0,490,0,490,0,490,38,-1,"ui_cb_area_only5_middle_up","ui_cb_area_flash_only5_middle_up","ui_cb_area_disable_only5_middle_up",r.CENTER),o.updateBetAreaContent(3,!0,25,2.2,-21,-1,-21,-1,-21,-1,258,76,1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left",r.LEFT),o.updateBetAreaContent(4,!0,750,2.2,282,-1,282,-1,282,-1,278,76,-1,"ui_cb_area_only5_left","ui_cb_area_flash_only5_left","ui_cb_area_disable_only5_left",r.RIGHT),a.grp_bet_area_1=t.BetAreaIndexLocation.rightDownMiddle,a.grp_bet_area_2=t.BetAreaIndexLocation.leftDownMiddle,a.grp_bet_area_3=t.BetAreaIndexLocation.leftDown,a.grp_bet_area_4=t.BetAreaIndexLocation.rightDown,o.betAreaArray[t.BetAreaIndexLocation.leftDown].label.changeTextType(r.CENTER),o.betAreaArray[t.BetAreaIndexLocation.rightDownMiddle].label.changeTextType(r.LEFT),o.betAreaArray[t.BetAreaIndexLocation.leftDown].label.verticalCenter=0,o.betAreaArray[t.BetAreaIndexLocation.rightDownMiddle].label.verticalCenter=0,o.betAreaArray[t.BetAreaIndexLocation.leftDown].label.horizontalCenter=0,o.betAreaArray[t.BetAreaIndexLocation.rightDownMiddle].label.horizontalCenter=0;break;default:o.grp_bet_area_0.visible=!0,o.grp_bet_area_1.visible=!0,o.grp_bet_area_2.visible=!0,o.grp_bet_area_3.visible=!0,o.grp_bet_area_4.visible=!0,o.updateBetAreaContent(0,!0,259,77,0,0,0,0,0,0,517,48,1,"ui_cb_dt_area_only4_down","ui_cb_dt_area_flash_only4_down","ui_cb_dt_area_disable_only4_down",r.CENTER),o.updateBetAreaContent(1,!0,-1.1,40,0,0,0,0,0,0,271,40,1,"ui_cb_area_left_down","ui_cb_area_flash_left_down","ui_cb_area_disable_left_down",r.LEFT),o.updateBetAreaContent(2,!0,262.5,40,0,0,0,0,0,0,254,37,1,"ui_cb_area_middle_down","ui_cb_area_flash_middle_down","ui_cb_area_disable_middle_down",r.CENTER),o.updateBetAreaContent(3,!0,520,40,254,0,254,0,254,0,254,37,-1,"ui_cb_area_middle_down","ui_cb_area_flash_middle_down","ui_cb_area_disable_middle_down",r.CENTER),o.updateBetAreaContent(4,!0,775,40,262,0,262,0,262,0,261,40,-1,"ui_cb_area_left_down","ui_cb_area_flash_left_down","ui_cb_area_disable_left_down",r.RIGHT),a.grp_bet_area_1=t.BetAreaIndexLocation.leftDown,a.grp_bet_area_2=t.BetAreaIndexLocation.leftDownMiddle,a.grp_bet_area_3=t.BetAreaIndexLocation.rightDownMiddle,a.grp_bet_area_4=t.BetAreaIndexLocation.rightDown}o.resetLabelWH(a.grp_bet_area_1,o.grp_bet_area_1.width,o.grp_bet_area_1.height),o.resetLabelWH(a.grp_bet_area_2,o.grp_bet_area_2.width,o.grp_bet_area_2.height),o.resetLabelWH(a.grp_bet_area_3,o.grp_bet_area_3.width,o.grp_bet_area_3.height),o.resetLabelWH(a.grp_bet_area_4,o.grp_bet_area_4.width,o.grp_bet_area_4.height)},a}(t.BaccGameCustomerBet);t.DTGameCustomerBet=o,__reflect(o.prototype,"G.BACC.DTGameCustomerBet")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.betTypeMax=11,e}return __extends(r,t),r.prototype.initUITypeTable=function(){var e=this;e.uiTypeTable=[],e.uiTypeTable.push(CONST.betType.dragonTiger.dragon),e.uiTypeTable.push(CONST.betType.dragonTiger.tiger),e.uiTypeTable.push(CONST.betType.dragonTiger.draw),e.uiTypeTable.push(CONST.betType.dragonTiger.dragonOdd),e.uiTypeTable.push(CONST.betType.dragonTiger.dragonEven),e.uiTypeTable.push(CONST.betType.dragonTiger.tigerOdd),e.uiTypeTable.push(CONST.betType.dragonTiger.tigerEven),e.uiTypeTable.push(CONST.betType.dragonTiger.dragonBlack),e.uiTypeTable.push(CONST.betType.dragonTiger.dragonRed),e.uiTypeTable.push(CONST.betType.dragonTiger.tigerBlack),e.uiTypeTable.push(CONST.betType.dragonTiger.tigerRed)},r.prototype.recordBetTypeSelectOrNot=function(t,r){var o;switch(t){case CONST.betType.dragonTiger.dragon:o=r?e.RCD.RcdState.SELECT_BETTYPE_DRAGON:e.RCD.RcdState.UNSELECT_BETTYPE_DRAGON;break;case CONST.betType.dragonTiger.tiger:o=r?e.RCD.RcdState.SELECT_BETTYPE_TIGER:e.RCD.RcdState.UNSELECT_BETTYPE_TIGER;break;case CONST.betType.dragonTiger.dragonOdd:o=r?e.RCD.RcdState.SELECT_BETTYPE_DRAGONODD:e.RCD.RcdState.UNSELECT_BETTYPE_DRAGONODD;break;case CONST.betType.dragonTiger.dragonEven:o=r?e.RCD.RcdState.SELECT_BETTYPE_DRAGONEVEN:e.RCD.RcdState.UNSELECT_BETTYPE_DRAGONEVEN;break;case CONST.betType.dragonTiger.tigerOdd:o=r?e.RCD.RcdState.SELECT_BETTYPE_TIGERODD:e.RCD.RcdState.UNSELECT_BETTYPE_TIGERODD;break;case CONST.betType.dragonTiger.tigerEven:o=r?e.RCD.RcdState.SELECT_BETTYPE_TIGEREVEN:e.RCD.RcdState.UNSELECT_BETTYPE_TIGEREVEN;break;case CONST.betType.dragonTiger.dragonBlack:o=r?e.RCD.RcdState.SELECT_BETTYPE_DRAGONBLACK:e.RCD.RcdState.UNSELECT_BETTYPE_DRAGONBLACK;break;case CONST.betType.dragonTiger.dragonRed:o=r?e.RCD.RcdState.SELECT_BETTYPE_TIGERRED:e.RCD.RcdState.UNSELECT_BETTYPE_TIGERRED;break;case CONST.betType.dragonTiger.tigerBlack:o=r?e.RCD.RcdState.SELECT_BETTYPE_TIGERBLACK:e.RCD.RcdState.UNSELECT_BETTYPE_TIGERBLACK;break;case CONST.betType.dragonTiger.tigerRed:o=r?e.RCD.RcdState.SELECT_BETTYPE_SMALL:e.RCD.RcdState.UNSELECT_BETTYPE_SMALL;break;default:return}e.RCD.mgr.recordState(o)},r}(t.BaccGameCustomerSetting);t.DTGameCustomerSetting=r,__reflect(r.prototype,"G.BACC.DTGameCustomerSetting")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.multiRangeList=[],e.selectedIndex=0,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_bacc=t.BaccMTOTableNeonEx},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this,o=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat,!0),a=0;if(o.length>0){for(;o[a].isMatch;)a+=1;t.chipBar.setIsMto(!0),t.chipBar.tableCtrl=o[a]}else t.chipBar.showChipBarWithoutTableCtrl();t.scroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onListMouseOver.bind(t,t.scroller),t),t.scroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onListMouseOver.bind(t,t.scroller),t),t.onEmitter(e.GTS.mgr,"brokerageRequiredChange",t.changeBrokerageRequiredImage),e.muteMusic(!1),e.playMusic("play"),t.btn_brokerageRequired.selected=e.GTS.mgr.getCommissionStateInRoom("BaccMulti","BaccMulti"),e.GTS.mgr.setBrokerageRequired(t.btn_brokerageRequired.selected),e.GTS.mgr.setCommissionStateByRoom("BaccMulti",t.btn_brokerageRequired.selected),t.changeBrokerageRequiredImage(),mo.PROJ.isPc&&e.GW.mgr.ifGameSingle()&&(t.scroller.height=560,t.scroller.horizontalCenter=0,t.grp_record.visible=!1,t.grp_record.includeInLayout=!1,t.grp_brokerageRequired.right=0),t.createBetLimitSelector(),e.GTS.netMgr.onNotify(CONST.bstBizType.treasureRewardKey,t.showTreasureKey,t)},o.prototype.childrenCreated=function(){r.prototype.childrenCreated.call(this);this.showController()},o.prototype.onListMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r)}},o.prototype.wheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.scroller.viewport.contentHeight<r.scroller.height||(t.data<0&&(r.scroller.viewport.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.scroller.viewport.scrollV-=t.data*CONST.wheelRatio),r.scroller.viewport.scrollV>=r.scroller.viewport.contentHeight-r.scroller.height&&(r.scroller.viewport.scrollV=r.scroller.viewport.contentHeight-r.scroller.height),r.scroller.viewport.scrollV<=0&&(r.scroller.viewport.scrollV=0)))},o.prototype._data_list_bacc=function(){for(var t=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat,!0),r=[],o=0,a=t.length;a>o;o++)t[o].isMatch||r.push([o,t[o],this.chipBar]);return r},o.prototype._tap_grp_record=function(){if(-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_grp_record");e.GTS.RS.loadResource(e.GTS.ResourcePosition.ASSET_INFO,(function(){e.COMM.AssetInfoDlg.show(),e.RCD.log_mgr.sendEvent_ClientButton("multi.history")}))},o.prototype._onKickFromTable=function(){mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.muteMusic(!1),e.playMusic("main")},o.prototype.onExit=function(){var t=this;r.prototype.onExit.call(this),t.unEmitter(),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,this.wheel,this),mo.emitter.emit("setShortcut",CONST.tableType.all,!0),e.GTS.netMgr.unNotify(CONST.bstBizType.treasureRewardKey,t.showTreasureKey,t)},o.prototype.showTreasureKey=function(){setTimeout((function(){mo.MSG.show("${{reward_key}}")}),4e3)},o.prototype.changeBrokerageRequiredImage=function(){var t=this,r=e.GTS.mgr.isBrokerageRequired();t.btn_brokerageRequired.selected=r,r?(t.label_brokerageRequired.textColor=15652753,t.label_sixPoint.visible=t.label_sixPoint.includeInLayout=!1):(t.label_brokerageRequired.textColor=15652753,t.label_sixPoint.visible=t.label_sixPoint.includeInLayout=!0)},o.prototype._tap_btn_brokerageRequired=function(){var t=this,r=t.btn_brokerageRequired.selected;r!=e.GTS.mgr.isBrokerageRequired()&&(e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_brokerageRequired"),t.label_sixPoint.visible=t.label_sixPoint.includeInLayout=!r,e.RCD.mgr.recordState(r?e.RCD.RcdState.SWITCH_COMMISSION:e.RCD.RcdState.SWITCH_NO_COMMISSION),e.GTS.mgr.setBrokerageRequired(r),e.GTS.mgr.setCommissionStateByRoom("BaccMulti",r),e.RCD.log_mgr.sendEvent_ClientButton("game.commission"))},o.prototype._tap_grp_bet_limit=function(){this.grp_bet_limit_list.visible=!this.grp_bet_limit_list.visible,e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_bet_limit")},o.prototype.createBetLimitSelector=function(){var t=this,r=[],o=[];e.GTS.mgr.getMultiRangeList((function(a){if(a.length>0){t.multiRangeList=a;for(var i=0;i<a.length;i++)o.push(t.parseRangeListDetail(a[i]));for(i=0;i<o.length;i++){var n=t.betLimitFormate(o[i][0][0],o[i][0][1]);r.push({index:i,name:n}),e.GTS.mgr.seletedBetLimitIndex==i&&(t.label_selected_bet_limit.text=n)}t.list_bet_limit.dataProvider=new eui.ArrayCollection(r),t.grp_bet_limit_list.y=-32*r.length}else t.grp_bet_limit_component.visible=!1,t.grp_bet_limit_component.includeInLayout=!1})),t.selectedIndex=e.GTS.mgr.seletedBetLimitIndex},o.prototype.parseRangeListDetail=function(e){var t=[];if(!e||0==e.length)return t;for(var r=[],o=[],a=0;a<e.length;a++){var i=e[a];i&&2==i.length&&(r.push(i[0]),o.push(i[1]))}if(0==r.length||0==o.length)return t;r=r.sort((function(e,t){return e-t})),o=o.sort((function(e,t){return t-e}));var n=[];return n.push(r[0]),n.push(o[0]),t.push(n),t},o.prototype._click_list_bet_limit=function(e){var t=e.item;this.selectedIndex=t.index,this.label_selected_bet_limit.text=t.name},o.prototype._tap_grp_change_bet_limit=function(){var t=this;t.selectedIndex!=e.GTS.mgr.seletedBetLimitIndex&&(e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_change_bet_limit"),e.GTS.mgr.seletedBetLimitIndex=t.selectedIndex,t.list_bacc.dataProvider=null,e.GTS.mgr.setRangeList4Multi(t.multiRangeList[t.selectedIndex],(function(){e.GTS.mgr.enterMultiBaccarat((function(){for(var r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat,!0),o=[],a=0,i=r.length;i>a;a++)o.push([a,r[a],t.chipBar]);t.list_bacc.dataProvider=new eui.ArrayCollection(o)}))})))},o.prototype.betLimitFormate=function(t,r){var o="";return 1e3>t&&1e3>r?o=mo.STR.format("$%s-$%s",e.UTIL.NUM.getSplitNumStr(t),e.UTIL.NUM.getSplitNumStr(r)):1e3>t&&r>=1e3?o=mo.STR.format("$%s-$%sK",e.UTIL.NUM.getSplitNumStr(t),e.UTIL.NUM.getSplitNumStr(r/1e3)):t>=1e3&&r>=1e3&&(o=mo.STR.format("$%sK-$%sK",e.UTIL.NUM.getSplitNumStr(t/1e3),e.UTIL.NUM.getSplitNumStr(r/1e3))),o},o.prototype.showController=function(e){var t=this;if(t.grp_controller){var r=egret.Ease.quartOut;t.grp_controller.right=-1100,t.grp_controller.alpha=0,t.grp_controller.touchChildren=!1,t.rmTweens(t.grp_controller),t.getTween(t.grp_controller,{loop:!1}).to({alpha:1,right:90},4e3,r).call((function(){e&&e(),t.grp_controller.touchChildren=!0}),2e3)}},o}(mo.EUI.Layer);t.MTOBaccList=r,__reflect(r.prototype,"G.BACC.MTOBaccList"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){var r=this;t.prototype.onEnter.call(this),r.grp_betArea.scaleX=r.grp_betArea.scaleY=.88,r.grp_customer_bet_area.visible=!0,r.grp_bacc.y=0;var o="zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang||"zh_cn"==mo.PROJ.lang;r.label_bead_road.visible=!o,r.label_big_road.visible=!o,r.label_bigeye_road.visible=!o,r.label_small_road.visible=!o,r.label_cockroach_road.visible=!o,o&&(r.btn_playerAsk.label="",r.btn_bankerAsk.label=""),r.grp_roadmap_labels_for_chinese.visible=o,r.chipBar.img_bg.visible=!1,r.chat.rect_disible_mask.visible=e.GW.mgr.disableChatRoom},r}(t.BaseCardLayer);t.BaccGamePC35=r,__reflect(r.prototype,"G.BACC.BaccGamePC35"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var e=this;mo.emitter.emit("enterBaccList"),mo.emitter.on("enterMatchFromeADForPC",(function(t){console.log("enterMatchFromeADForPC",t.tableCtrl),e.gotoGame(t.tableCtrl)}))},o.prototype.onExit=function(){r.prototype.onExit.call(this);this.unEmitter()},o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_room=t.BaccRoomListItemPC35},o.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n),i.subType==CONST.baccaratSubType.mi&&e.GTS.mgr.setCommissionStateByRoom(i.code,!0)}return t},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomListPC35);t.BaccRoomListPC35=r,__reflect(r.prototype,"G.BACC.BaccRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._updateGameState=function(){r.prototype._updateGameState.call(this);var t=this;t.grp_good_road&&(t.grp_good_road.visible=!1),t.data&&e.COMM.grtMgr.checkGoodRoadVisibilityAndSetRoadName(t.data.tableCtrl,t.grp_good_road,t.label_good_road_name,t.rect_road_bg_color)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);this.grp_good_road&&(this.grp_good_road.visible=!1)},o.prototype.createBPTBar=function(){var t=this;t.cmp_MaskedImage_b||(t.cmp_MaskedImage_b=new e.BASE.MaskedImage,t.cmp_MaskedImage_b.initImage("bet_bar_r",0,0,8,80,80/3,!1),t.grp_bp_bar.addChild(t.cmp_MaskedImage_b.grp_image)),t.cmp_MaskedImage_p||(t.cmp_MaskedImage_p=new e.BASE.MaskedImage,t.cmp_MaskedImage_p.initImage("bet_bar_b",0,0,8,80,80/3,!0),t.grp_bp_bar.addChild(t.cmp_MaskedImage_p.grp_image))},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this,o={gridSize:17,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};o.res=t.LZllRes,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,o);var a={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:75,maxRow:6};a.res=t.LZllRes,e.daluPainter=new t.DaluPainter(e.scr_dalu,a);var i={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};i.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,i);var n={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};n.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,n);var s={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};s.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,s)},o.prototype._handleState_betting=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi))return r.prototype._handleState_betting.call(this,e);if(null!=e.roundCtrl.miZhuTime){var o=e.getBetStopTime();if(o){var a=o.getTime()-mo.DATE.now()-1e3*e.betSec;0>a&&(a=0),setTimeout((function(){t.compTimerState.stateBetting(),t.compTimerState.refreshTime(e.betSec,o)}),a)}else t.compTimerState.stateWaiting()}else t.compTimerState.statePreBet();mo.PROJ.isPc&&t.compTimerState.forceUIVisibility()},o.prototype._handleState_stopBet=function(e){var t=this;if(!(e.subType==CONST.baccaratSubType.mi))return r.prototype._handleState_stopBet.call(this,e);var o=e.getMiState();if(o==CONST.miState.noMi)t.compTimerState.stateWaiting();else if(o==CONST.miState.miEnd)t.compTimerState.stateClearing();else{var a=e.getMiEndTime();if(a){t.compTimerState.statePeek();var i=e.getMiSec();t.compTimerState.refreshTime(i,a)}else t.compTimerState.stateClearing()}mo.PROJ.isPc&&t.compTimerState.forceUIVisibility()},o.prototype.setBPTBar=function(e,t,r){var o=this;o.createBPTBar();var a=e+t+r;a>0?(o.cmp_MaskedImage_b.changeImageHeight(e/a*80),o.cmp_MaskedImage_p.changeImageHeight(t/a*80)):o.setBPTBar(33,33,33)},o.prototype.dataChanged=function(){var r=this;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(r.label_banker.size=24,r.label_player.size=24,r.label_tie.size=24,("th_th"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang)&&(r.label_b.size=28,r.label_p.size=28,r.label_t.size=28));var o=r.data.tableCtrl;r.label_roomName.text=o.name,o.isMatch?(r.grp_joinMatch.visible=!0,r.grp_joinMatch.width=84,o.canEnrolled()?(r.img_joinMatch.source="RaceMoney",r.label_joinMatch.text=e.UTIL.NUM.getSplitNumStr(o.match.entryFee)):(r.img_joinMatch.source="NoRace",r.label_joinMatch.text="--")):(r.grp_joinMatch.visible=!1,r.grp_joinMatch.width=0);var a={dealerName:o.roundCtrl.dealerName,dealerId:o.roundCtrl.dealerId,tableCode:o.code,dealerNameTranslate:o.dealerNameTranslate,is3rdParty:o.is3rdParty};r.dealer.setData(a);var i=o.subType==CONST.baccaratSubType.mi;r.grp_miCard.visible=i,r.grp_miCard.width=i?22:0;var n=!e.GTS.mgr.getCommissionStateInRoomList(o.code);r.img_noLoad.visible=n,r.img_noLoad.includeInLayout=n,r.label_noLoad.includeInLayout=r.label_noLoad.visible=r.img_noLoad.visible,r.grp_bacc.visible=!1;var s=o.countMap||{},l=CONST.betType.baccarat;r.label_round.text=o.roundCtrl.index||0,r.label_banker.text=s[l.banker]||0,r.label_player.text=s[l.player]||0,r.label_tie.text=s[l.draw]||0,r.setBPTBar(s[l.banker]||0,s[l.player]||0,s[l.draw]||0);var c=o.rangeList4Dis,p=0,_=0;if(e.GW.mgr.channel&&e.GW.mgr.channel.isCustomBaccDTLimitDisplay)c[CONST.rangeType.baccarat.banker]&&(p=c[CONST.rangeType.baccarat.banker][0],_=c[CONST.rangeType.baccarat.banker][1]);else for(var u=void 0,h=0,m=c.length;m>h;h++)u=c[h],0==h?(p=u[0],_=u[1]):(p>u[0]&&(p=u[0]),_<u[1]&&(_=u[1]));r.label_roomLimit.visible=!o.isMultiRange;var d=e.GW.mgr.isChangeDisplayDecimalMark?",":".",b=e.UTIL.NUM.getRoomLimitDisplay(_,d),g=e.UTIL.NUM.getRoomLimitDisplay(p,d);r.label_roomLimit.text=mo.STR.format("%s-%s",g,b),r._updateGameState();var y=function(e){var r=new t.LuzhuAnalyst(1);if(!e||0===e.length)return r;for(var o=0,a=e.length;a>o;o++)e[o].results&&r.receiveHistoryMsg({results:e[o].results,roundNo:e[o].code,cards:[]});return r}(o.luZhuList);r.zhuPanLuPainter.setZhuPanData(y.getZhuPanData()),r.daluPainter.setDaLuData(y.getDaLuData()),r.dayanLuPainter.setAnalysisData(y.getDaYanLuData()),r.xiaoLuPainter.setAnalysisData(y.getXiaoLuData()),r.yueyouLuPainter.setAnalysisData(y.getYueYouLuData()),r.queryLuZhu=function(e){var t=y.queryLuZhu(e);t&&(t.zhupan&&r.zhuPanLuPainter.showQueryZhu(t.zhupan),t.dalu&&r.daluPainter.showQueryZhu(t.dalu),t.dayan&&r.dayanLuPainter.showQueryZhu(t.dayan),t.xiaolu&&r.xiaoLuPainter.showQueryZhu(t.xiaolu),t.yueyou&&r.yueyouLuPainter.showQueryZhu(t.yueyou))},r.setMaintainMask(),window.testPanel=this},o.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_baccarat"),t.data.tableCtrl&&!t.data.tableCtrl.isMaintain&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},o}(e.RoomListItem);t.BaccRoomListItemPC35=r,__reflect(r.prototype,"G.BACC.BaccRoomListItemPC35"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_room=t.DTRoomListItemPC35},o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.dragonTiger),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n)}return t},o.prototype.gotoGame=function(t){r.prototype.gotoGame.call(this,t);var o=this;t.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o}(e.COMM.RoomListPC35);t.DTRoomListPC35=r,__reflect(r.prototype,"G.BACC.DTRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.isFirstEnter=!1,e}return __extends(o,r),o.prototype.onEnter=function(){r.prototype.onEnter.call(this)},o.prototype.createBPTBar=function(){var t=this;t.cmp_MaskedImage_b||(t.cmp_MaskedImage_b=new e.BASE.MaskedImage,t.cmp_MaskedImage_b.initImage("bet_bar_r",0,0,8,80,80/3,!1),t.grp_bp_bar.addChild(t.cmp_MaskedImage_b.grp_image)),t.cmp_MaskedImage_p||(t.cmp_MaskedImage_p=new e.BASE.MaskedImage,t.cmp_MaskedImage_p.initImage("bet_bar_b",0,0,8,80,80/3,!0),t.grp_bp_bar.addChild(t.cmp_MaskedImage_p.grp_image))},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this,o={gridSize:17,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};o.res=t.LZllRes,e.zhuPanLuPainter=new t.DTZhuPanLuPainter(e.scr_zhupanLu,o);var a={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};a.res=t.LZllRes,e.daluPainter=new t.DTDaluPainter(e.scr_dalu,a);var i={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};i.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,i);var n={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};n.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,n);var s={gridSize:8.5,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};s.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,s)},o.prototype.setBPTBar=function(e,t,r){var o=this;o.createBPTBar();var a=e+t+r;a>0?(o.cmp_MaskedImage_b.changeImageHeight(e/a*80),o.cmp_MaskedImage_p.changeImageHeight(t/a*80)):o.setBPTBar(33,33,33)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var o=this;("th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"my_mm"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang)&&(o.label_dragon.size=24,o.label_tiger.size=24,o.label_tie.size=24,"ta_in"==mo.PROJ.lang&&(o.label_d.size=28,o.label_tig.size=28,o.label_t.size=28));var a=o.data.tableCtrl;o.label_roomName.text=a.name;var i={dealerName:a.roundCtrl.dealerName,dealerId:a.roundCtrl.dealerId,tableCode:a.code,dealerNameTranslate:a.dealerNameTranslate,is3rdParty:a.is3rdParty};o.dealer.setData(i);var n=a.countMap||{},s=CONST.betType.dragonTiger;o.label_round.text=a.roundCtrl.index||0,o.label_dragon.text=n[s.dragon]||0,o.label_tiger.text=n[s.tiger]||0,o.label_tie.text=n[s.draw]||0,o.setBPTBar(n[s.dragon]||0,n[s.tiger]||0,n[s.draw]||0);var l=a.rangeList4Dis,c=0,p=0;if(e.GW.mgr.channel&&e.GW.mgr.channel.isCustomBaccDTLimitDisplay)l[CONST.rangeType.dragonTiger.dragon]&&(c=l[CONST.rangeType.dragonTiger.dragon][0],p=l[CONST.rangeType.dragonTiger.dragon][1]);else for(var _=void 0,u=0,h=l.length;h>u;u++)_=l[u],0==u?(c=_[0],p=_[1]):(c>_[0]&&(c=_[0]),p<_[1]&&(p=_[1]));o.label_roomLimit.visible=!a.isMultiRange;var m=e.GW.mgr.isChangeDisplayDecimalMark?",":".",d=e.UTIL.NUM.getRoomLimitDisplay(p,m),b=e.UTIL.NUM.getRoomLimitDisplay(c,m);o.label_roomLimit.text=mo.STR.format("%s-%s",b,d),o._updateGameState();var g=function(e){var r=new t.LuzhuAnalyst(1);if(!e||0===e.length)return r;for(var o=0,a=e.length;a>o;o++)e[o].results&&r.receiveHistoryMsg({results:e[o].results,roundNo:"test"+o,cards:[]});return r}(a.luZhuList);o.zhuPanLuPainter.setZhuPanData(g.getZhuPanData()),o.daluPainter.setDaLuData(g.getDaLuData()),o.dayanLuPainter.setAnalysisData(g.getDaYanLuData()),o.xiaoLuPainter.setAnalysisData(g.getXiaoLuData()),o.yueyouLuPainter.setAnalysisData(g.getYueYouLuData()),o.queryLuZhu=function(e){var t=g.queryLuZhu(e);t&&(t.zhupan&&o.zhuPanLuPainter.showQueryZhu(t.zhupan),t.dalu&&o.daluPainter.showQueryZhu(t.dalu),t.dayan&&o.dayanLuPainter.showQueryZhu(t.dayan),t.xiaolu&&o.xiaoLuPainter.showQueryZhu(t.xiaolu),t.yueyou&&o.yueyouLuPainter.showQueryZhu(t.yueyou))},o.setMaintainMask()},o.prototype._tap_grp_base=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("roomList_dragonTiger"),t.data.tableCtrl&&!t.data.tableCtrl.isMaintain&&mo.emitter.emit("readyEnterGameRoom",t.data.tableCtrl)},o}(e.RoomListItem);t.DTRoomListItemPC35=r,__reflect(r.prototype,"G.BACC.DTRoomListItemPC35"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.multiRangeList=[],e.selectedIndex=0,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this),this._Item_list_bacc=t.BaccMTOTablePC35},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this,o=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat,!0),a=0;if(o.length>0){for(;o[a].isMatch;)a+=1;t.chipBar.setIsMto(!0),t.chipBar.tableCtrl=o[a]}else t.chipBar.showChipBarWithoutTableCtrl();t.scroller.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onListMouseOver.bind(t,t.scroller),t),t.scroller.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onListMouseOver.bind(t,t.scroller),t),t.onEmitter(e.GTS.mgr,"brokerageRequiredChange",t.changeBrokerageRequiredImage),e.muteMusic(!1),e.playMusic("play"),t.btn_brokerageRequired.selected=e.GTS.mgr.getCommissionStateInRoom("BaccMulti","BaccMulti"),e.GTS.mgr.setBrokerageRequired(t.btn_brokerageRequired.selected),e.GTS.mgr.setCommissionStateByRoom("BaccMulti",t.btn_brokerageRequired.selected),t.changeBrokerageRequiredImage(),t.createBetLimitSelector(),e.RCD.log_mgr.setRecord("client_location","MTOBaccRoomList"),e.GTS.netMgr.onNotify(CONST.bstBizType.treasureRewardKey,t.showTreasureKey,t)},o.prototype.childrenCreated=function(){r.prototype.childrenCreated.call(this);this.showController()},o.prototype.onListMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r)}},o.prototype.wheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.scroller.viewport.contentHeight<r.scroller.height||(t.data<0&&(r.scroller.viewport.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.scroller.viewport.scrollV-=t.data*CONST.wheelRatio),r.scroller.viewport.scrollV>=r.scroller.viewport.contentHeight-r.scroller.height&&(r.scroller.viewport.scrollV=r.scroller.viewport.contentHeight-r.scroller.height),r.scroller.viewport.scrollV<=0&&(r.scroller.viewport.scrollV=0)))},o.prototype._data_list_bacc=function(){for(var t=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat,!0),r=[],o=0,a=t.length;a>o;o++)t[o].isMatch||r.push([o,t[o],this.chipBar]);return r},o.prototype._tap_grp_record=function(){if(-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use);e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_grp_record");e.GTS.RS.loadResource(e.GTS.ResourcePosition.ASSET_INFO,(function(){e.COMM.AssetInfoDlg.show(),e.RCD.log_mgr.sendEvent_ClientButton("multi.history")}))},o.prototype._onKickFromTable=function(){mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.muteMusic(!1),e.playMusic("main")},o.prototype.onExit=function(){var t=this;r.prototype.onExit.call(this),t.unEmitter(),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,this.wheel,this),mo.emitter.emit("setShortcut",CONST.tableType.all,!0),e.GTS.netMgr.unNotify(CONST.bstBizType.treasureRewardKey,t.showTreasureKey,t)},o.prototype.showTreasureKey=function(){setTimeout((function(){mo.MSG.show("${{reward_key}}")}),4e3)},o.prototype.changeBrokerageRequiredImage=function(){var t=this,r=e.GTS.mgr.isBrokerageRequired();t.btn_brokerageRequired.selected=r,r?(t.label_brokerageRequired.textColor=15652753,t.label_sixPoint.visible=t.label_sixPoint.includeInLayout=!1):(t.label_brokerageRequired.textColor=15652753,t.label_sixPoint.visible=t.label_sixPoint.includeInLayout=!0)},o.prototype._tap_btn_brokerageRequired=function(){var t=this,r=t.btn_brokerageRequired.selected;r!=e.GTS.mgr.isBrokerageRequired()&&(e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_brokerageRequired"),t.label_sixPoint.visible=t.label_sixPoint.includeInLayout=!r,e.RCD.mgr.recordState(r?e.RCD.RcdState.SWITCH_COMMISSION:e.RCD.RcdState.SWITCH_NO_COMMISSION),e.GTS.mgr.setBrokerageRequired(r),e.GTS.mgr.setCommissionStateByRoom("BaccMulti",r),e.RCD.log_mgr.sendEvent_ClientButton("game.commission"))},o.prototype._tap_grp_bet_limit=function(){this.grp_bet_limit_list.visible=!this.grp_bet_limit_list.visible,e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_bet_limit")},o.prototype.createBetLimitSelector=function(){var t=this,r=[],o=[];e.GTS.mgr.getMultiRangeList((function(a){if(a.length>0){t.multiRangeList=a;for(var i=0;i<a.length;i++)o.push(t.parseRangeListDetail(a[i]));for(i=0;i<o.length;i++){var n=t.betLimitFormate(o[i][0][0],o[i][0][1]);r.push({index:i,name:n}),e.GTS.mgr.seletedBetLimitIndex==i&&(t.label_selected_bet_limit.text=n)}t.list_bet_limit.dataProvider=new eui.ArrayCollection(r),t.grp_bet_limit_list.y=-32*r.length}else t.grp_bet_limit_component.visible=!1,t.grp_bet_limit_component.includeInLayout=!1})),t.selectedIndex=e.GTS.mgr.seletedBetLimitIndex},o.prototype.parseRangeListDetail=function(e){var t=[];if(!e||0==e.length)return t;for(var r=[],o=[],a=0;a<e.length;a++){var i=e[a];i&&2==i.length&&(r.push(i[0]),o.push(i[1]))}if(0==r.length||0==o.length)return t;r=r.sort((function(e,t){return e-t})),o=o.sort((function(e,t){return t-e}));var n=[];return n.push(r[0]),n.push(o[0]),t.push(n),t},o.prototype._click_list_bet_limit=function(e){var t=e.item;this.selectedIndex=t.index,this.label_selected_bet_limit.text=t.name},o.prototype._tap_grp_change_bet_limit=function(){var t=this;t.selectedIndex!=e.GTS.mgr.seletedBetLimitIndex&&(e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_change_bet_limit"),e.GTS.mgr.seletedBetLimitIndex=t.selectedIndex,t.list_bacc.dataProvider=null,e.GTS.mgr.setRangeList4Multi(t.multiRangeList[t.selectedIndex],(function(){e.GTS.mgr.enterMultiBaccarat((function(){for(var r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.baccarat,!0),o=[],a=0,i=r.length;i>a;a++)o.push([a,r[a],t.chipBar]);t.list_bacc.dataProvider=new eui.ArrayCollection(o)}))})))},o.prototype.betLimitFormate=function(t,r){var o="";return 1e3>t&&1e3>r?o=mo.STR.format("$%s-$%s",e.UTIL.NUM.getSplitNumStr(t),e.UTIL.NUM.getSplitNumStr(r)):1e3>t&&r>=1e3?o=mo.STR.format("$%s-$%sK",e.UTIL.NUM.getSplitNumStr(t),e.UTIL.NUM.getSplitNumStr(r/1e3)):t>=1e3&&r>=1e3&&(o=mo.STR.format("$%sK-$%sK",e.UTIL.NUM.getSplitNumStr(t/1e3),e.UTIL.NUM.getSplitNumStr(r/1e3))),o},o.prototype.showController=function(e){var t=this;if(t.grp_controller){var r=egret.Ease.quartOut;t.grp_controller.right=-1100,t.grp_controller.alpha=0,t.grp_controller.touchChildren=!1,t.rmTweens(t.grp_controller),t.getTween(t.grp_controller,{loop:!1}).to({alpha:1,right:90},4e3,r).call((function(){e&&e(),t.grp_controller.touchChildren=!0}),2e3)}},o}(mo.EUI.Layer);t.MTOBaccListPC35=r,__reflect(r.prototype,"G.BACC.MTOBaccListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.BaccBetMgr,o=e.COMM.IBetMgrEvent,a=function(a){function i(){var e=a.apply(this,arguments)||this;return e.zhuPanBlink=!1,e.time=0,e.isClick=0,e.isFirstEnter=!1,e.animationIndex=1,e.animationMaxIndex=8,e}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);this._skinName="BaccMTOTablePC35Skin",this.betMgr=new r},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var t=this;t._setupLuzuPainter(),t.grp_msg.visible=!1,t.grp_shuffle.visible=!1,t.grp_nofee.visible=!1,t.payout.visible=!1,t.tableTimer=new e.TableTimer,t.label_pp.text="0",t.label_bp.text="0"},i.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var r=this;if(r.data&&(r.justEnterGame=!0,r.tableCtrl=r.data[1],r.chipBar=r.data[2],r.tableCtrl)){if(r.changeRequiredForGLI(),r.changeBrokerageRequiredImage(),r.setTableMaintain(),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_MOVE,r.onChipMove,r),r.chipBar.emitter.on(e.BASE.ChipBar2.ON_CHIP_DROP,r.onChipDrop,r),r.grp_container.addEventListener(egret.TouchEvent.TOUCH_TAP,r._onGrpContainerTap,r),r.tableCtrl!=r.oldTableCtrl){r.unEmitter(),r.betMgr.un(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.isFirst=!1,r.onEmitter(r.tableTimer,e.TableTimer.ON_TICK,r._onTick),r.onEmitter(r.tableTimer,e.TableTimer.ON_END,r._onEnd),r.onEmitter(r.tableCtrl,CONST.BBT_table.openRound,r._openRound),r.onEmitter(r.tableCtrl,CONST.BBT_table.scanCard,r._scanCard),r.onEmitter(r.tableCtrl,CONST.BBT_table.payout,r._payout),r.onEmitter(r.tableCtrl,CONST.BBT_table.betStop,r._betStop),r.onEmitter(r.tableCtrl,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(r.tableCtrl,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(r.tableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(r.tableCtrl,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,r.resetGamePage),r.onEmitter(e.GTS.mgr,"brokerageRequiredChange",r.changeBrokerageRequiredImage),r.onEmitter(r.tableCtrl,CONST.bstBizType.tableMaintain,r.setTableMaintain),r.onEmitter(mo.emitter,"deactivate",r._handleDeactivate);for(var i=0;3>i;i++){var n=r["card_b"+i],s=r["card_p"+i];n&&(n.setBlockTurnOvered(!0),r.onEmitter(n.emitter,"over",r._changeNumShow_banker)),s&&(s.setBlockTurnOvered(!0),r.onEmitter(s.emitter,"over",r._changeNumShow_player))}r.betMgr&&(r.onEmitter(r.betMgr,"clearAllHedgeBetEvent",r.clearAllHedgeInBetArea),r.onEmitter(r.betMgr,"checkHedgeAndDisableArea",r.disableMultiHedgeArea)),r.betMgr.reset(),r.betMgr.tableCtrl=r.tableCtrl,r._initBetArea(),r.resetTweens(),r.betMgr.on(o.ON_BET_AMOUNT_CHG,r._betNumChanged,r),r.oldTableCtrl=r.tableCtrl}r.analyst||(r.analyst=new t.LuzhuAnalyst(1)),r.betMgr.recoverBetInfo(),r._gameStateChange(r.tableCtrl.gameState);for(var l,c,p=r.tableCtrl.rangeList4Dis,_=0,u=(i=0,p.length);u>i;i++)c=p[i],0==i?(l=c[0],_=c[1]):(l>c[0]&&(l=c[0]),_<c[1]&&(_=c[1]));r.updateRound(),r.label_PD.text.includes("\n")&&(r.label_PD.size=20),r.label_BD.text.includes("\n")&&(r.label_BD.size=20)}},i.prototype.resetGamePage=function(){var e=this;e.setTableMaintain();for(var t=0;t<e.helpList.length;t++){e.helpList[t].reset()}e.resetTweens(),e._showCard(!1),e.betMgr.recoverBetInfo(),e.updateRound(),e._gameStateChange(e.tableCtrl.gameState)},i.prototype._handleDeactivate=function(){},i.prototype.disableMultiHedgeArea=function(e){for(var t=0;t<this.helpList.length;t++){var r=this.helpList[t];r&&r.betType&&e.indexOf(r.betType)>=0&&r.toggleDisableImage(!0)}},i.prototype.clearAllHedgeInBetArea=function(){for(var e=0;e<this.helpList.length;e++){var t=this.helpList[e];t&&t.toggleDisableImage(!1)}},i.prototype.setTableMaintain=function(){var t=this,r=t.tableCtrl;t.grp_maintain&&(t.grp_maintain.visible=!!e.GTS.mgr.isTableMaintain(r.code))},i.prototype.updateRound=function(){var e=this,t=e.tableCtrl.countMap||{},r=CONST.betType.baccarat,o=(t[r.banker]||0)+(t[r.player]||0)+(t[r.draw]||0);e.label_round.text=o+"",e.label_round_id.text=e.tableCtrl.roundCode||""},i.prototype.changeBrokerageRequiredImage=function(){var t=!e.GTS.mgr.isBrokerageRequired();this.grp_nofee.visible=t,this.betB_ratio.text=t?"1:1":"en_us"==mo.PROJ.lang?"0.95:1":"1:0.95"},i.prototype._changeNumShow_player=function(){this._setBPPoint(!0)},i.prototype._changeNumShow_banker=function(){this._setBPPoint(!1)},i.prototype._onRefreshInfo=function(){for(var e=this,t=0;t<e.helpList.length;t++){e.helpList[t].reset()}e.resetTweens(),e.betMgr.recoverBetInfo(),e._showCard(!1),e._gameStateChange(e.tableCtrl.gameState)},i.prototype.onMouseMove=function(e){var t=mo.EUI.uiScene.globalToLocal(e.stageX,e.stageY);this.onChipMove(t.x,t.y)},i.prototype._gameStateChange=function(e){var t=this;switch(t.curGameState=e,t.grp_shuffle.visible=!1,e){case CONST.gameState.betting:var r=t.tableCtrl.getBetStopTime();if(r){var o=r.getTime()-mo.DATE.now()-1e3*t.tableCtrl.betSec;0>o&&(o=0),setTimeout((function(){t.stopBet(!1),t.setBtnAgain(),t._showCard(!1),t.compTimerState.stateBetting(),t.compTimerState.refreshTime(t.tableCtrl.betSec,r)}),o)}else t._onEnd();t.updateRound(),t.clearAllHedgeInBetArea(),t.betMgr.checkConfirmedBetsAndLockHedge();break;case CONST.gameState.shuffle:t.grp_shuffle.visible=!0,t.betMgr.clear(),t._showCard(!1),t.updateRound();break;case CONST.gameState.stopBet:t._showCard(!0),t.stopBet(!0),t.stop(),t.openCloseBtns(),t.betFinalConfirm();break;case CONST.gameState.payout:t._showCard(!0),t.stopBet(!0),t.betAreaSettlement(),t.updateRound()}t._updateUI(),t._updateGameState(e)},i.prototype.setBtnAgain=function(){var e=this;e.btn_again.enabled=e.betMgr.hasPreRoundBetHistory(),e.btn_again.visible=e.btn_again.enabled,e.btn_again.enabled&&e.checkIsBet()&&(e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!0)},i.prototype.checkIsBet=function(){var e=this;e.tableCtrl.subType==CONST.baccaratSubType.mi&&(e.btn_again.visible=!0);var t=e.betMgr.betRecoders;for(var r in t)if(t[r].confirmedBetHistory.length>0||t[r].curBetHistory.length>0)return!0;return!1},i.prototype.checkPreRoundBetInCustomerBetSetting=function(){return!e.GTS.mgr.checkIfUseCustomer(this.tableCtrl)||this.betMgr.checkPreRoundBetsInCustomerBets()},i.prototype._applyOvertime=function(){this._gameStateChange(this.tableCtrl.gameState)},i.prototype.resetTweens=function(){var e=this;e.grp_msg&&(egret.Tween.removeTweens(e.grp_msg),e.grp_msg.visible=!1),e.hideCards()},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);this.grp_showCard.visible=!1},i.prototype.onExit=function(){var e=this;e.stop(),a.prototype.onExit.call(this),e.betMgr.reset(),e.betMgr.unAll(),e.betMgr.doDtor(),mo.PROJ.isPc&&(mouse.setMouseMoveEnabled(!1),e.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,e.onMouseMove,e))},i.prototype._refreshRoomInfo=function(){var t=this,r=t.tableCtrl.roundCtrl;t.label_roomName.text=t.tableCtrl.name;var o=t.tableCtrl.countMap||{};if(r){var a=o[CONST.betType.baccarat.player]||0,i=o[CONST.betType.baccarat.banker]||0,n=o[CONST.betType.baccarat.draw]||0;this.label_PlayerScore.text=a,this.label_BankerScore.text=i,this.label_TieScore.text=n;var s=e.UTIL.NUM.calcPercent(n,a,i),l=s[0],c=s[1],p=s[2],_=this.groupProgress.height-6;this.rectBanker.height=_*p/100,this.rectPlayer.height=_*c/100,this.rectTie.height=_*l/100,t.setBPTBar(i,a,n)}},i.prototype.setBPTBar=function(e,t,r){var o=this;o.createBPTBar();var a=e+t+r;a>0?(o.cmp_MaskedImage_b.changeImageHeight(e/a*57),o.cmp_MaskedImage_p.changeImageHeight(t/a*57)):o.setBPTBar(33,33,33)},i.prototype.createBPTBar=function(){var t=this;t.cmp_MaskedImage_b||(t.cmp_MaskedImage_b=new e.BASE.MaskedImage,t.cmp_MaskedImage_b.initImage("bet_bar_r",0,0,8,57,19,!1),t.grp_bp_bar.addChild(t.cmp_MaskedImage_b.grp_image)),t.cmp_MaskedImage_p||(t.cmp_MaskedImage_p=new e.BASE.MaskedImage,t.cmp_MaskedImage_p.initImage("bet_bar_b",0,0,8,57,19,!0),t.grp_bp_bar.addChild(t.cmp_MaskedImage_p.grp_image))},i.prototype._onTick=function(e,t,r){var o=this;o.justEnterGame=!1,o.isFirst,o.isFirst=!1},i.prototype._onEnd=function(){var e=this;e.stop(),e.justEnterGame=!1,e._gameStateChange(CONST.gameState.stopBet)},i.prototype.getColor4Label=function(e){return e>18||e>10?CONST.StateColor.green:CONST.StateColor.red},i.prototype.refreshTime=function(e,t){this.isFirst=!0,this.tableTimer.start(1e3*e,t)},i.prototype.stop=function(){this.tableTimer.stop()},i.prototype._updateUI=function(){var e=this;e._refreshLuzhu(),e._refreshRoomInfo(),e._refreshOpBtns()},i.prototype.onChipDrop=function(e,t){var r=this;if(!(r.curGameState!=CONST.gameState.betting)){var o=r.grp_container.globalToLocal(e,t);r.betMgr.chipDropCheck(o.x,o.y,r.chipBar.chipValue)}},i.prototype.onChipMove=function(e,t){var r=this.grp_container.globalToLocal(e,t);this.betMgr.chipMoveCheck(r.x,r.y)},i.prototype._scanCard=function(){this.justEnterGame=!1,this._showCard(!0,!0)},i.prototype._showCard=function(e,t){void 0===t&&(t=!1);var r=this;r.grp_showCard.visible=e,e?r._fillCards(t):r.hideCards()},i.prototype.hideCards=function(){for(var e=this,t=0;3>t;t++){var r=e["card_p"+t];r&&(r.visible=!1,r.reset()),(r=e["card_b"+t])&&(r.visible=!1,r.reset())}e.label_pp.text="0",e.label_bp.text="0"},i.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.zhuPanBlink=!0,e.payout.visible=!1,e.betMgr.clear(),e._gameStateChange(CONST.gameState.betting)},i.prototype.msgShow=function(e){var r=this;e==t.BaccMTOTable.msgState.openRound?(r.label_msg.text=mo.D.langCodeToTxt("bacc_place_your_bet"),r.label_msg.style="txt_default_white"):e==t.BaccMTOTable.msgState.successBet&&(r.label_msg.text=mo.D.langCodeToTxt("bacc_bet_success"),r.label_msg.style="txt_color_4"),r.grp_msg.visible=!0,egret.Tween.removeTweens(r.grp_msg);var o=egret.Tween.get(r.grp_msg);r.grp_msg.alpha=1,o.wait(2e3).to({alpha:0},2e3).call((function(){r.grp_msg.visible=!1,egret.Tween.removeTweens(r.grp_msg)}))},i.prototype._betStop=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet)},i.prototype._payout=function(){var r,o=this;o.justEnterGame=!1,t.log("显示派彩界面");try{r=e.UTIL.calPayout(o.tableCtrl.roundCtrl,o.tableCtrl.betCtrl).payoutDetail}catch(e){console.log(e),!1}!mo.OBJ.isEmpty(r)&&(o.payout.setData({tableCtrl:o.tableCtrl}),e.playAudio("coins_drop")),o._gameStateChange(CONST.gameState.payout)},i.prototype._shuffle=function(){this._gameStateChange(CONST.gameState.shuffle)},i.prototype._fillCards=function(e){for(var t=this,r=t.tableCtrl.roundCtrl.srcResults||[],o=[],a=0;6>a;a++){var i=3>a?CONST.betType.baccarat.player:CONST.betType.baccarat.banker;if(t.setCard(i,a%3,r[a],e),a<r.length&&r[a]){var n=(i==CONST.betType.baccarat.player?"card_p":"card_b")+a%3;o.push(n)}}o.map((function(e){return t[e].getTurnOvered()})),t._setBPPoint(!0),t._setBPPoint(!1)},i.prototype.setCard=function(e,t,r,o){var a=this[(e==CONST.betType.baccarat.player?"card_p":"card_b")+t];a&&(a.visible=null!=r,a.setData({id:r}),null!=r&&a.turnOver(o))},i.prototype._setBPPoint=function(t){var r=this,o=r.tableCtrl.roundCtrl.srcResults||[],a=r.tableCtrl.getOpenedIndexList()||[];t?r.label_pp.text=""+e.UTIL.calBaccarat(a.indexOf(0)>=0?o[0]:null,a.indexOf(1)>=0?o[1]:null,a.indexOf(2)>=0?o[2]:null):r.label_bp.text=""+e.UTIL.calBaccarat(a.indexOf(3)>=0?o[3]:null,a.indexOf(4)>=0?o[4]:null,a.indexOf(5)>=0?o[5]:null)},i.prototype.betFinalConfirm=function(){this.betMgr.betFinalConfirm(),this._betNumChanged()},i.prototype._tap_btn_zoom=function(){t.BaccLuzhu.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_undo=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_undo"),0==t.isClick&&(t.betMgr.undo(),t._betNumChanged(),t.clearAllHedgeInBetArea(),t.betMgr.checkConfirmedBetsAndLockHedge())},i.prototype._tap_btn_confirm=function(){var r=this;if(0==r.isClick){e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_confirm"),r.isClick=1,r.betMgr.startBet();var o=(r.betMgr.unBetInvalidTypes(),r.betMgr.packUnConfirmedBet());if(mo.OBJ.isEmpty(o))r._betNumChanged(),r.isClick=0,r.betMgr.finishBet(),r.clearAllHedgeInBetArea(),r.betMgr.checkConfirmedBetsAndLockHedge();else{var a=[o,!0];r.tableCtrl.bet(a,(function(){e.playAudio("p_bet_success"),r.msgShow(t.BaccMTOTable.msgState.successBet),r.betMgr.confirmBet(),r._betNumChanged(),r.isClick=0,r.betMgr.finishBet(),r.clearAllHedgeInBetArea(),r.betMgr.checkConfirmedBetsAndLockHedge();var o=r.tableCtrl.code,a=r.tableCtrl.roundCode,i=e.GTS.mgr.isBrokerageRequired();e.GTS.mgr.setCommissionStateByRound(o,a,i),e.GTS.mgr.setCommissionStateByRoom(o,i)}),(function(){r.betMgr.undo(),r._betNumChanged(),r.isClick=0,r.betMgr.finishBet(),r.clearAllHedgeInBetArea(),r.betMgr.checkConfirmedBetsAndLockHedge()}))}}},i.prototype._tap_btnRoomLimit=function(){e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btnRoomLimit"),e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("multi.betlimit")},i.prototype._tap_btn_bankerAsk=function(){this.askLuZhu(CONST.betType.baccarat.banker),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},i.prototype._tap_btn_playerAsk=function(){this.askLuZhu(CONST.betType.baccarat.player),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},i.prototype._tap_btn_again=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_again"),0==t.isClick&&(t.betMgr.redoBet(),t._betNumChanged(),t.betMgr.checkAllBetsAndLockHedge())},i.prototype._tap_btn_double=function(){var t=this;e.RCD.log_mgr.sendEvent_Lobby_wait("mto_btn_double"),0==t.time&&0==t.isClick&&(t.time=1,t.betMgr.doubleBet(),t._betNumChanged(),setTimeout((function(){t.time=0}),200),e.RCD.log_mgr.sendEvent_ClientButton("game.double"))},i.prototype.askLuZhu=function(e){var t=this,r=t.analyst.queryLuZhu(e);r&&(r.zhupan&&t.zhuPanLuPainter.showQueryZhu(r.zhupan),r.dalu&&t.daluPainter.showQueryZhu(r.dalu),r.dayan&&t.dayanLuPainter.showQueryZhu(r.dayan),r.xiaolu&&t.xiaoLuPainter.showQueryZhu(r.xiaolu),r.yueyou&&t.yueyouLuPainter.showQueryZhu(r.yueyou))},i.prototype._refreshLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList,r=e.analyst;if(r.clearData(),!t||0===t.length)return e.zhuPanLuPainter.setZhuPanData([]),e.daluPainter.setDaLuData([]),e.dayanLuPainter.setAnalysisData([]),e.xiaoLuPainter.setAnalysisData([]),e.yueyouLuPainter.setAnalysisData([]),e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),void e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker);for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});e.zhuPanLuPainter.setZhuPanData(r.getZhuPanData(),e.zhuPanBlink),e.daluPainter.setDaLuData(r.getDaLuData(),e.zhuPanBlink),e.dayanLuPainter.setAnalysisData(r.getDaYanLuData(),e.zhuPanBlink),e.xiaoLuPainter.setAnalysisData(r.getXiaoLuData(),e.zhuPanBlink),e.yueyouLuPainter.setAnalysisData(r.getYueYouLuData(),e.zhuPanBlink),e.zhuPanBlink=!1,e.showQueryLuZhu(e.playerAsk,CONST.betType.baccarat.player),e.showQueryLuZhu(e.bankerAsk,CONST.betType.baccarat.banker)},i.prototype.showQueryLuZhu=function(e,t){var r=this.analyst.queryLuZhu(t);if(r){var o=[];r.dayan&&(o[0]=r.dayan),r.xiaolu&&(o[1]=r.xiaolu),r.yueyou&&(o[2]=r.yueyou),e.setData({luZhuList:o})}else e.setData({luZhuList:[null,null,null]})},i.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:12,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};r.res=t.LZMTORes,e.zhuPanLuPainter=new t.ZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:6,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};o.res=t.LZMTORes,e.daluPainter=new t.DaluPainter(e.scr_dalu,o);var a={gridSize:6,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};a.res=t.LZMTORes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:6,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};i.res=t.LZMTORes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:6,maxCol:65,maxRow:6,showGrid:!0,isScroll:!1};n.res=t.LZMTORes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},i.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},i.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.showConfirmRemindAnimation(!1),e.btn_undo.enabled=!1,e.btn_double.enabled=!1},i.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState;t.betMgr.betRecoders,t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.showConfirmRemindAnimation(e),t.btn_undo.enabled=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&(t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1),t.checkPreRoundBetInCustomerBetSetting()||(t.btn_again.enabled=!1,t.btn_again.visible=!1))):r==CONST.gameState.betting&&(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0),t.checkPreRoundBetInCustomerBetSetting()||(t.btn_again.enabled=!1,t.btn_again.visible=!1)),t.tableCtrl.subType==CONST.baccaratSubType.mi&&(t.btn_again.visible=!0)},i.prototype._betNumChanged=function(){this._refreshOpBtns()},i.prototype._refreshOpBtns=function(){var e=this;e.curGameState!=CONST.gameState.betting?e.openCloseBtns():e.openOpBtns(e.betMgr.hasUnConfirmedBet())},i.prototype.stopBet=function(e){this.betMgr.stopBet(e)},i.prototype._onGrpContainerTap=function(e){var t=this;if(0==t.time){t.time=1;var r=t.betMgr,o=t.grp_container.globalToLocal(e.stageX,e.stageY);r.onBetAreaTap(o.x,o.y,t.chipBar.chipValue,!0),t.clearAllHedgeInBetArea(),t.betMgr.checkAllBetsAndLockHedge(),setTimeout((function(){t.time=0}),200)}},i.prototype._initBetArea=function(){var r,o=this,a=(CONST.betType.baccarat,2);o.helpList=[],(r=new t.MTOBetAreaHelper(o.grp_betPD,CONST.betType.baccarat.playerPair)).setBetMgr(o.betMgr);var i=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betPD.x+a,o.grp_betArea.y+o.grp_betPD.y+a),mo.p(o.grp_betArea.x+o.grp_betPD.x+a,o.grp_betArea.y+o.grp_betPD.y+o.grp_betPD.height-2*a),mo.p(o.grp_betArea.x+o.grp_betPD.x+o.grp_betPD.width-2*a,o.grp_betArea.y+o.grp_betPD.y+o.grp_betPD.height-2*a),mo.p(o.grp_betArea.x+o.grp_betPD.x+o.grp_betPD.width-2*a,o.grp_betArea.y+o.grp_betPD.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.playerPair,i),o.betMgr.registerBetRecorder(CONST.betType.baccarat.playerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.playerPair,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betP,CONST.betType.baccarat.player)).setBetMgr(o.betMgr);var n=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betP.x+a,o.grp_betArea.y+o.grp_betP.y+a),mo.p(o.grp_betArea.x+o.grp_betP.x+a,o.grp_betArea.y+o.grp_betP.y+o.grp_betP.height-2*a),mo.p(o.grp_betArea.x+o.grp_betP.x+o.grp_betP.width-2*a,o.grp_betArea.y+o.grp_betP.y+o.grp_betP.height-2*a),mo.p(o.grp_betArea.x+o.grp_betP.x+o.grp_betP.width-2*a,o.grp_betArea.y+o.grp_betP.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.player,n),o.betMgr.registerBetRecorder(CONST.betType.baccarat.player,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.player,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betTie,CONST.betType.baccarat.draw)).setBetMgr(o.betMgr);var s=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betTie.x+a,o.grp_betArea.y+o.grp_betTie.y+a),mo.p(o.grp_betArea.x+o.grp_betTie.x+a,o.grp_betArea.y+o.grp_betTie.y+o.grp_betTie.height-2*a),mo.p(o.grp_betArea.x+o.grp_betTie.x+o.grp_betTie.width-2*a,o.grp_betArea.y+o.grp_betTie.y+o.grp_betTie.height-2*a),mo.p(o.grp_betArea.x+o.grp_betTie.x+o.grp_betTie.width-2*a,o.grp_betArea.y+o.grp_betTie.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.draw,s),o.betMgr.registerBetRecorder(CONST.betType.baccarat.draw,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.draw,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betB,CONST.betType.baccarat.banker)).setBetMgr(o.betMgr);var l=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betB.x+a,o.grp_betArea.y+o.grp_betB.y+a),mo.p(o.grp_betArea.x+o.grp_betB.x+a,o.grp_betArea.y+o.grp_betB.y+o.grp_betB.height-2*a),mo.p(o.grp_betArea.x+o.grp_betB.x+o.grp_betB.width-2*a,o.grp_betArea.y+o.grp_betB.y+o.grp_betB.height-2*a),mo.p(o.grp_betArea.x+o.grp_betB.x+o.grp_betB.width-2*a,o.grp_betArea.y+o.grp_betB.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.banker,l),o.betMgr.registerBetRecorder(CONST.betType.baccarat.banker,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.banker,0)),o.helpList.push(r),(r=new t.MTOBetAreaHelper(o.grp_betBD,CONST.betType.baccarat.bankerPair)).setBetMgr(o.betMgr);var c=new mo.NUM.Polygon(mo.p(o.grp_betArea.x+o.grp_betBD.x+a,o.grp_betArea.y+o.grp_betBD.y+a),mo.p(o.grp_betArea.x+o.grp_betBD.x+a,o.grp_betArea.y+o.grp_betBD.y+o.grp_betBD.height),mo.p(o.grp_betArea.x+o.grp_betBD.x+o.grp_betBD.width-2*a,o.grp_betArea.y+o.grp_betBD.y+o.grp_betBD.height),mo.p(o.grp_betArea.x+o.grp_betBD.x+o.grp_betBD.width-2*a,o.grp_betArea.y+o.grp_betBD.y+a));o.betMgr.registerBetArea(CONST.betType.baccarat.bankerPair,c),o.betMgr.registerBetRecorder(CONST.betType.baccarat.bankerPair,new e.COMM.BaseBetRecorder(CONST.betType.baccarat.bankerPair,0)),o.helpList.push(r)},i.prototype._handleState_betting=function(){var e=this,t=e.tableCtrl.getBetStopTime();if(t){var r=t.getTime()-mo.DATE.now()-1e3*e.tableCtrl.betSec;0>r&&(r=0),mo.TM.setTimeout((function(){e.compTimerState.stateBetting(),e.compTimerState.refreshTime(e.tableCtrl.betSec,t)}),r)}else e.compTimerState.stateClearing()},i.prototype._handleState_shuffle=function(){this.compTimerState.stateShuffle()},i.prototype._handleState_payout=function(){this.compTimerState.stateClearing()},i.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},i.prototype._updateGameState=function(e){var t=this;if(t.data)switch(e){case CONST.gameState.betting:t._handleState_betting();break;case CONST.gameState.shuffle:t._handleState_shuffle();break;case CONST.gameState.payout:t._handleState_payout();break;case CONST.gameState.stopBet:t._handleState_stopBet()}},i.prototype.changeRequiredForGLI=function(){var e=this,t=":";"zh_cn"==mo.PROJ.lang?t="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t="賠"),"en_us"==mo.PROJ.lang?(e.betTie_ratio.text="8:1",e.betBD_ratio.text="11:1",e.betPD_ratio.text="11:1","1:0.95"==e.betB_ratio.text&&(e.betB_ratio.text="0.95:1")):("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&-1!=e.betP_ratio.text.indexOf(":")&&(e.betP_ratio.text=e.betP_ratio.text.substring(0,e.betP_ratio.text.indexOf(":"))+t+e.betP_ratio.text.substring(e.betP_ratio.text.indexOf(":")+1),e.betTie_ratio.text=e.betTie_ratio.text.substring(0,e.betTie_ratio.text.indexOf(":"))+t+e.betTie_ratio.text.substring(e.betTie_ratio.text.indexOf(":")+1),e.betB_ratio.text=e.betB_ratio.text.substring(0,e.betB_ratio.text.indexOf(":"))+t+e.betB_ratio.text.substring(e.betB_ratio.text.indexOf(":")+1),e.betPD_ratio.text=e.betPD_ratio.text.substring(0,e.betPD_ratio.text.indexOf(":"))+t+e.betPD_ratio.text.substring(e.betPD_ratio.text.indexOf(":")+1),e.betBD_ratio.text=e.betBD_ratio.text.substring(0,e.betBD_ratio.text.indexOf(":"))+t+e.betBD_ratio.text.substring(e.betBD_ratio.text.indexOf(":")+1))},i.prototype.showConfirmRemindAnimation=function(e){var t=this;if(e){if(t.animationTimerId)return;t.confirm_animation.source="",t.confirm_animation.visible=!0,t.animationTimerId=setInterval((function(){t.animationIndex++,t.animationIndex>t.animationMaxIndex&&(t.animationIndex=1);t.confirm_animation.source="dg_confirm_btn_eff_"+t.animationIndex}),100)}else t.animationTimerId&&(clearInterval(t.animationTimerId),t.animationTimerId=null),t.confirm_animation.source=""},i}(mo.EUI.ItemRenderer);a.msgState={openRound:0,successBet:1},t.BaccMTOTablePC35=a,__reflect(a.prototype,"G.BACC.BaccMTOTablePC35")}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BACC.BaccBetAreaHelper,o=e.COMM.BaseBetRecorder,a=function(a){function i(){return a.apply(this,arguments)||this}return __extends(i,a),i.prototype._initProp=function(){a.prototype._initProp.call(this);this.BetType=CONST.betType.dragonTiger,this.sortChipsArray=[]},i.prototype._childrenCreated=function(){a.prototype._childrenCreated.call(this);var e=this;e.grp_bacc&&(e.grp_bacc.visible=!1),e.grp_jm&&(e.grp_jm.visible=!1)},i.prototype._setupLuzuPainter=function(){var e=this,r={gridSize:25,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};r.res=t.LZllRes,r.useForShowHistory=!0,r.mouseMoveInCallback=e.luzhuMouseOvered.bind(e),r.mouseMoveOutCallback=e.luzhuMouseOut.bind(e),e.zhuPanLuPainter=new t.DTZhuPanLuPainter(e.scr_zhupanLu,r);var o={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:80,maxRow:6};o.res=t.LZllRes,e.daluPainter=new t.DTDaluPainter(e.scr_dalu,o);var a={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};a.res=t.LZllRes,e.dayanLuPainter=new t.AnalysisLuPainter(e.scr_dayanLu,t.AnalysisLuType.DAYAN,a);var i={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};i.res=t.LZllRes,e.xiaoLuPainter=new t.AnalysisLuPainter(e.scr_xiaolu,t.AnalysisLuType.XIAOLU,i);var n={gridSize:12.5,showGrid:!0,isScroll:!0,maxCol:70,maxRow:6};n.res=t.LZllRes,e.yueyouLuPainter=new t.AnalysisLuPainter(e.scr_yueyouLu,t.AnalysisLuType.YUEYOU,n)},i.prototype.luzhuMouseOvered=function(e,t,r,o){var a=this;if(a.dtShowHistory)if(-1!=e){var i=a.tableCtrl.luZhuList;if((i=i.filter((function(e){return e&&e.results})))[e]&&i[e].srcResults){var n=a.globalToLocal(t,r);n.x+=o/2+10;var s=a.dtShowHistory.height*a.dtShowHistory.scaleY;n.y+s>a.height&&(n.y=a.height-s);var l=i[e].srcResults;a.dtShowHistory.showContent(!0,n.x,n.y,l)}}else a.dtShowHistory.showContent(!1)},i.prototype.luzhuMouseOut=function(){this.dtShowHistory.showContent(!1)},i.prototype.sortChips=function(){for(var e=this,t=0;t<e.grp_betArea.numChildren;t++){var r=e.grp_betArea.getChildAt(t);if(r){var o=r.name;"grp_betDTTie"==o&&e.sortChipsArray.push(t),"grp_betD"==o&&e.sortChipsArray.push(t),"grp_betT"==o&&e.sortChipsArray.push(t),"grp_showChip"==o&&e.sortChipsArray.push(t)}}e.sortChipsArray.length>=4&&(e.grp_betArea.setChildIndex(e.grp_showChip,e.sortChipsArray[0]),e.grp_betArea.setChildIndex(e.grp_betDTTie,e.sortChipsArray[1]),e.grp_betArea.setChildIndex(e.grp_betD,e.sortChipsArray[2]),e.grp_betArea.setChildIndex(e.grp_betT,e.sortChipsArray[3]))},i.prototype.dataChanged=function(){a.prototype.dataChanged.call(this);var e=this;e.dtRightSlider.setData({tabelCtrl:e.tableCtrl}),e.dtShowCard.setData({tabelCtrl:e.tableCtrl})},i.prototype._initChipObj=function(){var e=this;e.chipObj={},e.chipObj[CONST.betType.dragonTiger.tiger]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.dragonTiger.dragon]=[[],[],[],[],[],[],[]],e.chipObj[CONST.betType.dragonTiger.draw]=[[],[],[],[],[],[],[]],e.chipObj_P={},e.chipObj_P[CONST.betType.dragonTiger.tiger]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.dragonTiger.dragon]=[[],[],[],[],[],[],[]],e.chipObj_P[CONST.betType.dragonTiger.draw]=[[],[],[],[],[],[],[]]},i.prototype._setCurMyDesk=function(){var e=this,t=e.tableCtrl;if(t)for(var r=t.virtualInfoList||[],o=0;7>o;o++){e["desk_"+o].visible=!1,e["mynum_"+o].visible=!1;var a=r[o];a&&a.isSelf&&e._onDesk(o),e["deskComp_"+o].setData({data:a,tableType:e.tableCtrl.type}),e.updateFlyChipOwner(o,a)}},i.prototype.hideLastChip=function(){var e=this,t=e.grp_betD,r=e.grp_betT,o=e.grp_betDTTie;e.deleteLastChip(t),e.deleteLastChip(r),e.deleteLastChip(o),e.grp_showChip.removeChildren(),e._initChipObj()},i.prototype._tap_btn_luzhu=function(){t.DTLuzhu.show({tableCtrl:this.tableCtrl})},i.prototype._tap_btn_bankerAsk=function(){e.RCD.mgr.recordState(e.RCD.RcdState.DT_D_ROAD),this.askLuZhu(this.BetType.dragon),e.RCD.log_mgr.sendEvent_ClientButton("bacc.banker.road")},i.prototype._tap_btn_playerAsk=function(){e.RCD.mgr.recordState(e.RCD.RcdState.DT_T_ROAD),this.askLuZhu(this.BetType.tiger),e.RCD.log_mgr.sendEvent_ClientButton("bacc.player.road")},i.prototype._tap_btn_back=function(){this._onKickFromTable()},i.prototype.refreshQueryLuZhu=function(){var e=this;e.showQueryLuZhu(e.playerAsk,CONST.betType.dragonTiger.tiger),e.showQueryLuZhu(e.bankerAsk,CONST.betType.dragonTiger.dragon)},i.prototype.onEnter=function(){a.prototype.onEnter.call(this);var t=this;t.isHavePayoutLayer=!1,t.chat.visible=!0,t.chat.tableCtrl=t.tableCtrl,t.sortChips();var r="zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang||"zh_cn"==mo.PROJ.lang;t.label_bead_road.visible=!r,t.label_big_road.visible=!r,t.label_bigeye_road.visible=!r,t.label_small_road.visible=!r,t.label_cockroach_road.visible=!r,r&&(t.btn_playerAsk.label="",t.btn_bankerAsk.label=""),t.grp_roadmap_labels_for_chinese.visible=r,t.chipBar.img_bg.visible=!1,t.chat.rect_disible_mask.visible=e.GW.mgr.disableChatRoom},i.prototype.setBetArea=function(e){var t=this;e?(t._initFlyChipHelper(),t._initCustomerBetArea()):(t._initBetArea(),t.changeBrokerageRequiredImage())},i.prototype._initCustomerBetArea=function(){var r=this;r.betAreaHelpers=[],r.grp_betArea.visible=!1;var o=e.BACC.DTGameCustomerBet;r.customerBetArea=new o,r.grp_customer_bet_area.addChild(r.customerBetArea),r.customerBetArea.visible=!0,r.customerBetArea.initForBet(r.baccBetMgr,r.chipBar,r.tableCtrl,r._payoutShow.bind(r),r.doBetCallback.bind(r),r.unBetCallback.bind(r));var a=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateBetTypes(a),r.reSetFlyChipHelper(a),mo.emitter.on("customerSettingFinish",(function(){var t=e.GTS.mgr.getCustomerBetSetting(r.tableCtrl.type);r.customerBetArea.updateBetTypes(t),r.customerBetArea.updateResultsShow(),r.reSetFlyChipHelper(t),r.customerBetArea&&r.customerBetArea.clearAllHedgeBet()}),r),mo.emitter.on(CONST.customerBetEvent.customerBetUiShow,(function(){r.customerBetSettingDlg=t.DTGameCustomerSetting.show({betMgr:r.baccBetMgr,tableCtrl:r.tableCtrl})})),mo.emitter.on("customerBetUndo",(function(){r._tap_btn_undo()}),r)},i.prototype._initBetArea=function(){var e=this;e.betAreaHelpers=[],e.grp_betArea.addEventListener(egret.TouchEvent.TOUCH_TAP,(function(t){e.baccBetMgr.onBetAreaTap(t.localX,t.localY,e.chipBar.chipValue)}),e);var t,a=CONST.betType.dragonTiger,i=new mo.NUM.Polygon(mo.p(461,480),mo.p(446,516),mo.p(1029,516),mo.p(1019,480));(t=new r(e.grp_betD,a.dragon,e.shadow_D,e.betType_D,i,null,null,e.tableCtrl)).setBetMgr(e.baccBetMgr),e.betAreaHelpers.push(t);var n=e.grp_betD.getChildByName("grp_betNum");e.onEmitter(n.emitter,"over",e._payoutShow);i=new mo.NUM.Polygon(mo.p(473,442),mo.p(460,480),mo.p(1020,480),mo.p(1006,442));(t=new r(e.grp_betDTTie,a.draw,e.shadow_Tie,e.betType_Tie,i,null,null,e.tableCtrl)).setBetMgr(e.baccBetMgr),e.betAreaHelpers.push(t);n=e.grp_betDTTie.getChildByName("grp_betNum");e.onEmitter(n.emitter,"over",e._payoutShow);i=new mo.NUM.Polygon(mo.p(446,517),mo.p(576,556),mo.p(679,562),mo.p(801,561),mo.p(907,555),mo.p(989,540),mo.p(1030,516));(t=new r(e.grp_betT,a.tiger,e.shadow_T,e.betType_T,i,null,null,e.tableCtrl)).setBetMgr(e.baccBetMgr),e.betAreaHelpers.push(t);n=e.grp_betT.getChildByName("grp_betNum");e.onEmitter(n.emitter,"over",e._payoutShow);i=new mo.NUM.Polygon(mo.p(461,480),mo.p(446,516),mo.p(1029,516),mo.p(1019,480));e.baccBetMgr.registerBetArea(a.dragon,i),e.baccBetMgr.registerBetRecorder(a.dragon,new o(a.dragon,0));i=new mo.NUM.Polygon(mo.p(473,442),mo.p(460,480),mo.p(1020,480),mo.p(1006,442));e.baccBetMgr.registerBetArea(a.draw,i),e.baccBetMgr.registerBetRecorder(a.draw,new o(a.draw,0));i=new mo.NUM.Polygon(mo.p(446,517),mo.p(576,556),mo.p(679,562),mo.p(801,561),mo.p(907,555),mo.p(989,540),mo.p(1030,516));e.baccBetMgr.registerBetArea(a.tiger,i),e.baccBetMgr.registerBetRecorder(a.tiger,new o(a.tiger,0))},i.prototype._payoutChip=function(){var e=this;if(e.tableCtrl){var t=e.tableCtrl.virtualInfoList||[],r=e.tableCtrl.roundCtrl.results;e.payoutChipObj={},e.isPayoutChipOver=0,e.isPayoutChipOverBk=0;for(var o=0;7>o;o++){e.payoutChipObj[o]={};var a=t[o];if(a){var i=a.bet;for(var n in i)if(e.payoutChipObj[o][n]={},r&&-1!=r.indexOf(Number(n))){var s=i[n];e._getPayoutChipGrp(s,n,o)}if(r&&68==r[0]){if(i[10]){var l=i[10];e._getPayoutChipGrp(l/2,"10",o)}if(i[11]){var c=i[11];e._getPayoutChipGrp(c/2,"11",o)}}}}}},i.prototype.clearMyChip=function(){var e=this;if(e.BetType==CONST.betType.dragonTiger){if(e.grp_betD.numChildren>2)for(var t=2;t<e.grp_betD.numChildren;t++)e.grp_betD.removeChildAt(t);if(e.grp_betT.numChildren>2)for(t=2;t<e.grp_betT.numChildren;t++)e.grp_betT.removeChildAt(t);if(e.grp_betDTTie.numChildren>2)for(t=3;t<e.grp_betDTTie.numChildren;t++)e.grp_betDTTie.removeChildAt(t)}},i}(t.BaseCardLayer);t.DTGamePC35=a,__reflect(a.prototype,"G.BACC.DTGamePC35"),e.GC.gc.registerClass(a.__className,a)}(e.BACC||(e.BACC={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e._isSwitching=!1,e._isOpen=!0,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);this.BetType=CONST.betType.niuNiu},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.justEnterGame=!0;var o=r.tableCtrl=r.data.param.tableCtrl;0==r.data.niuNiuDoubleEnable&&(r.no_double_mask.visible=!0),r.onEmitter(o,CONST.BBT_table.openRound,r._openRound),r.onEmitter(o,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(o,CONST.BBT_table.bet,r._bet),r.onEmitter(o,CONST.BBT_table.betStop,r._betStop),r.onEmitter(o,CONST.BBT_table.payout,r._payout),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,r.resetGamePage),r.onEmitter(o,e.GTS.TableCtrl.ON_AFTER_BET,r._onAfterBet),r.onEmitter(mo.emitter,"deactivate",r._handleDeactivate);var a=o.gameState;r._betLimitReset(),r._gameStateChange(a),r._showBetMoney(),r._setLimitShow(),e.GW.mgr.ifGameSingle()&&(r.label_roomLimit.horizontalCenter=523,r.icon_roomLimit.x=1253)},r.prototype.resetGamePage=function(){var e=this;e._showBetMoney(),e._betLimitReset(),e._setLimitShow();var t=e.tableCtrl.gameState;e._gameStateChange(t)},r.prototype._handleDeactivate=function(){},r.prototype.onExit=function(){t.prototype.onExit.call(this),this.unEmitter()},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.compTimerState.audioEnabled=!0,e.chk_room_info.addEventListener(eui.UIEvent.CHANGE,e._chk_change,e),e.chk_bet_info.addEventListener(eui.UIEvent.CHANGE,e._chk_change,e),e.chk_room_info.selected=!0,e._initOtherBetUI(),e._chk_change()},r.prototype._setLimitShow=function(){for(var e,t=this.tableCtrl.rangeList4Dis,r=0,o=0,a=0,i=t.length;i>a;a++)e=t[a],0==a?(r=e[0],o=e[1]):(r>e[0]&&(r=e[0]),o<e[1]&&(o=e[1]));this.label_roomLimit.text=mo.D.langCodeToTxt("g_bet_limit")},r.prototype._initOtherBetUI=function(){var e=this,t=e.betInfoCards={},r=e.BetType;t[r.betPlayer1]=e.bicard_0,t[r.betPlayer2]=e.bicard_1,t[r.betPlayer3]=e.bicard_2},r.prototype._betInfoReset=function(){var e=this.betInfoCards,t=this.BetType;for(var r in t){var o=e[t[r]];o&&(o.bet=0,o.player=0)}},r.prototype._chk_change=function(){var t=this;t.chk_room_info.selected?(t.roomInfoGroup.visible=!0,t.roomInfoGroup.includeInLayout=!0,t.label_room.textColor="0xc6a153"):(t.roomInfoGroup.visible=!1,t.roomInfoGroup.includeInLayout=!1,t.label_room.textColor="0xc6a153"),t.chk_bet_info.selected?(t.betInfoGroup.visible=!0,t.betInfoGroup.includeInLayout=!0,t.label_bet.textColor="0xc6a153",e.RCD.log_mgr.sendEvent_ClientButton("game.bet.summary")):(t.betInfoGroup.visible=!1,t.betInfoGroup.includeInLayout=!1,t.label_bet.textColor="0xc6a153")},r.prototype._onRefreshInfo=function(){var e=this;e.justEnterGame=!1,e._gameStateChange(e.tableCtrl.gameState)},r.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e._betInfoReset(),e._betLimitReset(),e._onRefreshInfo();var t=parseInt((6*Math.random()+1).toString());e.tableCtrl.playAudio("p_start_bet_"+t)},r.prototype._bet=function(){this._refeshBetInfo(),this._refreshRoomInfo()},r.prototype._betStop=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.stopBet),mo.emitter.emit(e.BASE.ON_COUNTDOWN_END)},r.prototype._shuffle=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.shuffle)},r.prototype._payout=function(){this.justEnterGame=!1,this._gameStateChange(CONST.gameState.payout)},r.prototype._onAfterBet=function(){this._refreshRoomInfo(),this._refeshBetInfo()},r.prototype._showBetMoney=function(){var t=this;if(!t.tableCtrl.isBetting){var r=t.tableCtrl.betCtrl.betDetail4Dis,o=0;if(r)for(var a in r)o+=r[a];t.label_myBetNum.text=mo.D.langCodeToTxt("g_total_bet")+":"+e.UTIL.NUM.getSplitNumStr(o)}},r.prototype._refreshRoomInfo=function(){var e=this,t=e.tableCtrl;t.dealerNameTranslate=t.dealerNameTranslate||{};var r=t.roundCtrl.currentDealerName();t.dealerNameTranslate&&t.dealerNameTranslate.hasOwnProperty(mo.PROJ.lang)&&""!=t.dealerNameTranslate[mo.PROJ.lang]&&(r=t.dealerNameTranslate[mo.PROJ.lang]),e.tableInfo.setRoomInfo(t.name,t.roundCtrl.currentDealerNameOther(r),t.gameState==CONST.gameState.shuffle?"":t.roundCtrl.code||""),e._setBetLimit(),e._showBetMoney()},r.prototype._refeshBetInfo=function(){var t=this,r=t.tableCtrl,o=r.roundCtrl,a=r.gameState==CONST.gameState.shuffle,i=t.betInfoCards,n=t.BetType,s=i[n.betPlayer1],l=a?0:o.getBetMoneyCNY(n.betPlayer1)+o.getBetMoneyCNY(n.betPlayer1Double);l=e.COMM.FX.calcMoneyByCurrencyForChipShow("CNY",l);var c=a?0:o.getBetCount(n.betPlayer1)+o.getBetCount(n.betPlayer1Double);(null==s.bet||s.bet<l)&&(s.bet=l),(null==s.player||s.player<c)&&(s.player=c);var p=i[n.betPlayer2],_=a?0:o.getBetMoneyCNY(n.betPlayer2)+o.getBetMoneyCNY(n.betPlayer2Double);_=e.COMM.FX.calcMoneyByCurrencyForChipShow("CNY",_);var u=a?0:o.getBetCount(n.betPlayer2)+o.getBetCount(n.betPlayer2Double);(null==p.bet||p.bet<_)&&(p.bet=_),(null==p.player||p.player<u)&&(p.player=u);var h=i[n.betPlayer3],m=a?0:o.getBetMoneyCNY(n.betPlayer3)+o.getBetMoneyCNY(n.betPlayer3Double);m=e.COMM.FX.calcMoneyByCurrencyForChipShow("CNY",m);var d=a?0:o.getBetCount(n.betPlayer3)+o.getBetCount(n.betPlayer3Double);(null==h.bet||h.bet<m)&&(h.bet=m),(null==h.player||h.player<d)&&(h.player=d),t._showBetMoney()},r.prototype._setBetLimit=function(){this.compBetLimitInfo.setBetLimit(this.tableCtrl.roundCtrl.betMoneyCNY)},r.prototype._betLimitReset=function(){this.compBetLimitInfo.resetBetLimit(this.tableCtrl.tableLimit||0)},r.prototype._gameStateChange=function(e){var t=this;t.curGameState=e;var r=t.tableCtrl,o=r.roundCtrl;switch(t.compTimerState.visible=!0,t.compTimerState.overtimeStatus=o.overtimeStatus,e){case CONST.gameState.betting:t._handleState_betting(r);break;case CONST.gameState.shuffle:t.compTimerState.stateShuffle();break;case CONST.gameState.payout:t.compTimerState.stateClearing();break;case CONST.gameState.stopBet:t._handleState_stopBet(r)}t._refreshRoomInfo(),t._refeshBetInfo()},r.prototype._handleState_betting=function(e){var t=this,r=e.getBetStopTime();if(r){var o=r.getTime()-mo.DATE.now()-1e3*e.betSec;0>o&&(o=0),setTimeout((function(){t.compTimerState.stateBetting(),t.compTimerState.refreshTime(e.betSec,r)}),o)}else t.compTimerState.stateClearing()},r.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},r.prototype._tap_btn_rollout=function(){},r.prototype._tap_btnRoomLimit=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_ROOM_LIMIT),e.COMM.LimitInfo.show({tableCtrl:this.tableCtrl}),e.RCD.log_mgr.sendEvent_ClientButton("game.betlimit")},r.prototype._tap_icon_roomLimit=function(){this._tap_btnRoomLimit()},r}(mo.EUI.Layer);t.NNRightSlider=r,__reflect(r.prototype,"G.NN.NNRightSlider")}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.showGameGuideView=function(){},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype._initProp=function(){t.prototype._initProp.call(this);this._Item_list_room=e.NN.NNRoomListItemNeon,mo.emitter.on("InfoScene_onExit",this.showGameGuideView,this)},r.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.niuNiu),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n)}return t},r.prototype._click_list_room=function(e){var t=e.item.tableCtrl;this.gotoGame(t)},r.prototype.gotoGame=function(r){t.prototype.gotoGame.call(this,r);var o=this;r.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:r,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)},r}(e.COMM.RoomList);t.NNRoomList=r,__reflect(r.prototype,"G.NN.NNRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.Payout,o=e.COMM.IBetMgrEvent,a=function(t){function a(){var e=t.apply(this,arguments)||this;return e.isConfirm=!1,e.recordBetMoneyCNY=[],e}return __extends(a,t),a.prototype._initProp=function(){t.prototype._initProp.call(this);this.betType=CONST.betType.niuNiu},a.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.betMgr=new e.NN.NNBetMgr},a.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.data.param&&(e.betMgr.tableCtrl=e.tableCtrl)},a.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.justEnterGame=!0,r.isHavePayoutLayer=!1,r.onEmitter(r.betMgr,o.ON_BET_AMOUNT_CHG,r._betNumChanged),r.onEmitter(r.tableCtrl,CONST.BBT_table.bet,r._otherPlayerBetChange),r.chipBar.tableCtrl=r.tableCtrl,r.chipBar.btn_chipSetting.visible=!1,e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,r.showBonus,r),r._initFlyChipHelper(),r.initBetArea(),r.reSetFlyChipHelper();var a=r.tableCtrl.gameState;r._gameStateChange(a),r.betAreaLayer.showDoubleBetReminder(),r._refreshOpBtns(),r.BetSettingLayer=new e.COMM.BetSetting,r.BetSettingLayer.tableCtrl=r.tableCtrl,r.BetSettingLayer.grp_bet_setting.right=190,r.BetSettingLayer.grp_bet_setting.bottom=170,r.grp_bet_setting.addChild(r.BetSettingLayer),r.chat.tableCtrl=r.tableCtrl,e.GW.mgr.ifGameSingle()&&(r.img_bg.scaleX=1.15,r.img_bg.horizontalCenter=-50,r.btn_group.right=85,r.grp_betArea.horizontalCenter=100)},a.prototype.initBetArea=function(){var e=this;e.betAreaHelpers=[],e.betAreaLayer.initForBet(e.betMgr,e.chipBar,e.tableCtrl,e._payoutShow.bind(e))},a.prototype._onSettlement=function(){},a.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.isHavePayoutLayer=!1,e.betAreaReset(),t.prototype._openRound.call(this)},a.prototype._betStop=function(){this.justEnterGame=!1,t.prototype._betStop.call(this)},a.prototype._payout=function(){this.justEnterGame=!1,t.prototype._payout.call(this),this.betAreaLayer.initialDoubleBetReminder()},a.prototype._scanCard=function(){this.justEnterGame=!1;var t=this.tableCtrl.roundCtrl.srcResults;e.log("_scanCard",t)},a.prototype._shuffle=function(){t.prototype._shuffle.call(this);this.justEnterGame=!1,this.betAreaReset()},a.prototype._gameStateChange=function(t){var r=this,o=r.tableCtrl;if(r.isConfirm)r.isConfirm=!1;else{if(r.curGameState=t,r.justEnterGame)switch(t){case CONST.gameState.shuffle:break;default:r._recoverBetInfo()}switch(t){case CONST.gameState.betting:r.stopBet(!1),r.btn_again.enabled=r.betMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_double.enabled=!1,r.btn_again.enabled=!0);break;case CONST.gameState.shuffle:r.stopBet(!0),r.flyChipHelper&&r.flyChipHelper.removeAllChipFromParent();break;case CONST.gameState.stopBet:r.stopBet(!0),r.openCloseBtns(),r.betFinalConfirm(),r.justEnterGame?setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500):o.playAudio("time_out_notice");break;case CONST.gameState.payout:var a=e.UTIL.calPayout(r.tableCtrl.roundCtrl,r.tableCtrl.betCtrl).payoutDetail;mo.OBJ.isEmpty(a);r.justEnterGame,r.justEnterGame&&setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500),r.stopBet(!0),r.betAreaSettlement(),r.flyChipPayout()}}},a.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},a.prototype.stopBet=function(e){this.betMgr.stopBet(e),this.betAreaLayer.canHover=!e},a.prototype._onAfterBet=function(){this.betFinalConfirm()},a.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},a.prototype._tap_btn_again=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),this.betMgr.redoBet(),this._betNumChanged()},a.prototype._tap_btn_double=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),this.betMgr.doubleBet(),this._betNumChanged(),e.RCD.log_mgr.sendEvent_ClientButton("game.double")},a.prototype._tap_btn_undo=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),this.betMgr.undo(),this._betNumChanged()},a.prototype._tap_btn_confirm=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),t.betMgr.startBet();var r=t.betMgr.packUnConfirmedBet();mo.OBJ.isEmpty(r)?(t._betNumChanged(),t.betMgr.finishBet()):(t.isConfirm=!0,t.tableCtrl.bet(r,(function(){t.tableCtrl.playAudio("p_bet_success"),e.log("下注成功"),t.betMgr.confirmBet(),t.isConfirm||t._gameStateChange(t.tableCtrl.gameState),t.isConfirm=!1,mo.MSG.show(e.id_c_msgCode.bacc_bet_success),t._betNumChanged(),t.betMgr.finishBet()}),(function(){t.isConfirm||t._gameStateChange(t.tableCtrl.gameState),t.isConfirm=!1,t.betMgr.undo(),t.betMgr.betFinalConfirm(),t._betNumChanged(),t.betMgr.finishBet()})))},a.prototype.betAreaReset=function(){this.betMgr.clear(),this.betAreaLayer.clearAllChips()},a.prototype._betNumChanged=function(){this._refreshOpBtns(),this.betAreaLayer.showDoubleBetReminder()},a.prototype._tap_btn_back=function(){this._onKickFromTable()},a.prototype._onKickFromTable=function(){t.prototype._onKickFromTable.call(this)},a.prototype._refreshOpBtns=function(){var e=this;e.tableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():(e.betMgr.hasUnConfirmedBet(),e.openOpBtns(e.betMgr.hasUnConfirmedBet()))},a.prototype.betFinalConfirm=function(){var e=this;e.tableCtrl.isBetting||(e.betMgr.betFinalConfirm(),e._betNumChanged())},a.prototype._recoverBetInfo=function(){this.betMgr.recoverBetInfo()},a.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.btn_undo.enabled=!1,e.btn_double.enabled=!1},a.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState;t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.btn_undo.enabled=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):r==CONST.gameState.betting&&(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0))},a.prototype.checkIsBet=function(){var e=this.betMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},a.prototype.onExit=function(){var r=this;t.prototype.onExit.call(this),r.unEmitter(),r.betMgr.reset(),e.GW.mgr.setCurrentThemeWithTableCtrl(null),e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,r.showBonus,r),e.COMM.BONUS.leaveBonusDlg()},a.prototype._initFlyChipHelper=function(){var t=this;t.flyChipHelper=new e.FlyChipHelper,t.flyChipHelper.x=1220,t.flyChipHelper.y=530,t.addChild(t.flyChipHelper),t.setChildIndex(t.flyChipHelper,3);var r=t.flyChipHelper.parent.localToGlobal(t.flyChipHelper.x-16,t.flyChipHelper.y+12),o=mo.p(r.x,r.y);t.flyChipHelper.registerPlayer(99,o)},a.prototype.reSetFlyChipHelper=function(){var e=this;if(e.flyChipHelper&&e.betAreaLayer){e.flyChipHelper.clearAllChipLocation();for(var t=e.betAreaLayer.getAllBetTypeAndGroup(),r=0;r<t.length;r++){var o=t[r].betType;if(-1!=o){var a=t[r].group;a&&e.flyChipHelper.registerChipLocation(o,a)}}e.initDeskFlyChip()}},a.prototype._otherPlayerBetChange=function(t){var r=this;if(r.tableCtrl&&r.tableCtrl.roundCtrl&&r.tableCtrl.gameState==CONST.gameState.betting&&t.user&&t.user.id&&t.user.id!=e.GTS.userCtrl.id){if(!t.otherBet||!t.otherBet.betDetail)return;if(r.recordBetMoneyCNY[t.user.id]||(r.recordBetMoneyCNY[t.user.id]=[]),r.flyChipHelper){for(var o in t.otherBet.betDetail){var a=t.otherBet.betDetail[o],i=r.recordBetMoneyCNY[t.user.id][o];if(null==i)a=r.flyChipHelper.currencyTranslate(t.otherBet.currency,a),r.flyChipHelper.doFlyChip(99,-1,o,a);else if(a>i){var n=a-i;n=r.flyChipHelper.currencyTranslate(t.otherBet.currency,n),r.flyChipHelper.doFlyChip(99,-1,o,n)}}r.recordBetMoneyCNY[t.user.id]=t.otherBet.betDetail}}},a.prototype.initDeskFlyChip=function(){var t=this;if(t.tableCtrl.gameState!=CONST.gameState.payout&&t.tableCtrl)for(var r=t.tableCtrl.virtualInfoList||[],o=0;7>o;o++){var a=r[o];a&&a.userId&&a.userId!=e.GTS.userCtrl.id&&t.playFlyChip(a)}},a.prototype.playFlyChip=function(e){var t=this;if(t.flyChipHelper)for(var r in e.bet){var o=e.bet[r];o=t.flyChipHelper.currencyTranslate(e.currency,o),t.flyChipHelper.doFlyChip(99,e.userId,r,o)}},a.prototype.flyChipPayout=function(){var t=this;if(t.flyChipHelper&&t.tableCtrl&&t.tableCtrl.roundCtrl){var r=t.tableCtrl.roundCtrl.srcResults||[],o=e.UTIL.calResults(CONST.tableType.niuNiu,r);t.flyChipHelper.payoutResult(o),t.recordBetMoneyCNY=[]}},a.prototype._payoutShow=function(){var t=this;if(t.tableCtrl){var o=t.tableCtrl.gameState;if(!t.isHavePayoutLayer&&o!=CONST.gameState.betting){var a=t.tableCtrl.roundCtrl;if(a.results&&0!=a.results.length){var i=e.UTIL.calPayout(t.tableCtrl.roundCtrl,t.tableCtrl.betCtrl),n=i.payoutDetail,s=i.payout,l=i.refund,c=!mo.OBJ.isEmpty(n),p=s>0,_=s>l;if(!t.justEnterGame&&c&&p&&_)t.isHavePayoutLayer=!0,r.show({tableCtrl:t.tableCtrl}).onClose((function(){})),t.tableCtrl.playAudio("coins_drop");else e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3)}}}},a.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},a}(e.BASE.BaseTableLayer);t.NNTable=a,__reflect(a.prototype,"G.NN.NNTable")}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;egret.isNative&&(mo.emitter.on("browser.beforeOpen",t._onBrowserBeforeOpen_native,t),mo.emitter.on("browser.close",t._onBrowserClose_native,t)),e.GW.mgr.ifGameSingle(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0},o.prototype.onExit=function(){r.prototype.onExit.call(this);var e=this;egret.isNative&&(mo.emitter.un("browser.beforeOpen",e._onBrowserBeforeOpen_native,e),mo.emitter.un("browser.close",e._onBrowserClose_native,e))},o.prototype._onBrowserBeforeOpen_native=function(){this.visible=!1},o.prototype._onBrowserClose_native=function(){this.visible=!0},o.prototype.show=function(){r.prototype.show.call(this);var o=this,a=(o.moduleParam.tableCtrl,{param:o.data.param,tray:o});return t.NNTable.show(a),e.NN.NNRightSlider.show(a),e.NN.NNBottomPanel.show(a),e.NN.NNShowCard.show(a),this},o.prototype.dtor=function(){r.prototype.dtor.call(this)},o}(mo.EUI.Layer);t.NNGameScene=r,__reflect(r.prototype,"G.NN.NNGameScene");var o=new mo.ModuleCfgItem;o.targetClass=r,o.onPreAsync((function(e,t){t()})),mo.moduleMgr.registerModule(o),e.GC.gc.registerClass(r.__className,r)}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r;!function(e){e[e.P1_DOUBLE=0]="P1_DOUBLE",e[e.P1_EQUAL=1]="P1_EQUAL",e[e.P2_DOUBLE=2]="P2_DOUBLE",e[e.P2_EQUAL=3]="P2_EQUAL",e[e.P3_DOUBLE=4]="P3_DOUBLE",e[e.P3_EQUAL=5]="P3_EQUAL",e[e.maxNum=6]="maxNum"}(r=t.NNBetAreaIndex||(t.NNBetAreaIndex={}));var o=function(o){function a(){var e,t=o.apply(this,arguments)||this;return t.reminderObj={p1:CONST.betType.niuNiu.betPlayer1Double,p2:CONST.betType.niuNiu.betPlayer2Double,p3:CONST.betType.niuNiu.betPlayer3Double},t.betTypeArray=((e={})[r.P1_DOUBLE]=CONST.betType.niuNiu.betPlayer1Double,e[r.P1_EQUAL]=CONST.betType.niuNiu.betPlayer1,e[r.P2_DOUBLE]=CONST.betType.niuNiu.betPlayer2Double,e[r.P2_EQUAL]=CONST.betType.niuNiu.betPlayer2,e[r.P3_DOUBLE]=CONST.betType.niuNiu.betPlayer3Double,e[r.P3_EQUAL]=CONST.betType.niuNiu.betPlayer3,e),t}return __extends(a,o),a.prototype._initProp=function(){o.prototype._initProp.call(this)},a.prototype.onEnter=function(){o.prototype.onEnter.call(this);this.changeRequiredForGLI()},a.prototype.changeRequiredForGLI=function(){var e=this,t=":";"zh_cn"==mo.PROJ.lang?t="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t="賠"),"en_us"==mo.PROJ.lang?(e.oddLabel_0.text="0.95:1",e.oddLabel_1.text="0.95:1",e.oddLabel_2.text="0.95:1",e.oddLabel_3.text="0.95:1",e.oddLabel_4.text="0.95:1",e.oddLabel_5.text="0.95:1"):("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(e.oddLabel_0.text="1"+t+"0.95",e.oddLabel_1.text="1"+t+"0.95",e.oddLabel_2.text="1"+t+"0.95",e.oddLabel_3.text="1"+t+"0.95",e.oddLabel_4.text="1"+t+"0.95",e.oddLabel_5.text="1"+t+"0.95")},a.prototype.onExit=function(){o.prototype.onExit.call(this);this.unregisterTouchEvent()},a.prototype.initForBet=function(e,t,r,o){var a=this;a.betMgr=e,a.chipBar=t,a.tableCtrl=r,a.callbackWhenTouchArea=null,a.payoutCB=o,a.createBetArea(),a.registerCustomerBetRecorder()},a.prototype.createBetArea=function(){var e=this;e.betAreaArray=[];for(var o=0;o<r.maxNum;o++){var a={};a.betType=e.betTypeArray[o],a.index=o,a.betAreaHelper=null,e.betAreaArray.push(a);var i=e.grp_area.getChildByName("grp_bet_area_"+o);if(i){var n=i.getChildByName("img_bet_"+o);n&&(n.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetAreaTouched.bind(e,o),e),n.addEventListener(mouse.MouseEvent.MOUSE_OVER,e.onBetAreaHover.bind(e,o),e),n.addEventListener(mouse.MouseEvent.MOUSE_OUT,e.onBetAreaLeave.bind(e,o),e)),a.betAreaHelper=new t.NNBetAreaHelper(i,o,e.betTypeArray[o],e.tableCtrl,e.betMgr),a.betAreaHelper.setBetMgr(e.betMgr);var s=i.getChildByName("betNum_"+o);s&&e.onEmitter(s.emitter,"over",e.payoutShow)}}},a.prototype.registerCustomerBetRecorder=function(){var t=this;t.betMgr.registerBetRecorder(CONST.betType.niuNiu.betPlayer1,new e.COMM.BaseBetRecorder(CONST.betType.niuNiu.betPlayer1,0)),t.betMgr.registerBetRecorder(CONST.betType.niuNiu.betPlayer1Double,new e.COMM.BaseBetRecorder(CONST.betType.niuNiu.betPlayer1Double,0)),t.betMgr.registerBetRecorder(CONST.betType.niuNiu.betPlayer2,new e.COMM.BaseBetRecorder(CONST.betType.niuNiu.betPlayer2,0)),t.betMgr.registerBetRecorder(CONST.betType.niuNiu.betPlayer2Double,new e.COMM.BaseBetRecorder(CONST.betType.niuNiu.betPlayer2Double,0)),t.betMgr.registerBetRecorder(CONST.betType.niuNiu.betPlayer3,new e.COMM.BaseBetRecorder(CONST.betType.niuNiu.betPlayer3,0)),t.betMgr.registerBetRecorder(CONST.betType.niuNiu.betPlayer3Double,new e.COMM.BaseBetRecorder(CONST.betType.niuNiu.betPlayer3Double,0))},a.prototype.unregisterTouchEvent=function(){for(var e=this,t=0;t<r.maxNum;t++){var o=e.grp_area.getChildByName("grp_bet_area_"+t);if(o){var a=o.getChildByName("img_bet_"+t);a&&(a.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetAreaTouched.bind(e,t),e),a.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.onBetAreaHover.bind(e,t),e),a.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.onBetAreaLeave.bind(e,t),e))}}},a.prototype.onBetAreaTouched=function(t){var r=this,o=r.betTypeArray[t];if(!r.betMgr.isStopBet){if(r.tableCtrl.isMatch&&!r.tableCtrl.hasEnrolled())return mo.MSG.show(r.tableCtrl.canEnrolled()?e.id_c_msgCode.g_watch_match:e.id_c_msgCode.g_watch_match_no_join);var a=(r.checkTableLimitOutOfRange(o),r.betMgr.getBetNum(o)),i=r.tableCtrl.rangeList4Dis[o-301];if(i&&2==i.length){var n=i[0],s=i[1],l=0,c=0;if(n>s?(l=n,c=s):(l=s,c=n),(a+=r.chipBar.chipValue)>l||c>a)return void mo.MSG.show("${{baccarat_customerBet_BetLimit}}")}r.betMgr.trybetAreaNiuNiu(o,r.chipBar.chipValue)}},a.prototype.onBetAreaHover=function(e){if(this.canHover){var t=this.grp_area.getChildByName("grp_bet_area_"+e);if(t)t.getChildByName("img_bet_"+e).alpha=1}},a.prototype.onBetAreaLeave=function(e){var t=this.grp_area.getChildByName("grp_bet_area_"+e);t&&(t.getChildByName("img_bet_"+e).alpha=0)},a.prototype.payoutShow=function(){this.payoutCB&&this.payoutCB()},a.prototype.showDoubleBetReminder=function(){var t=this;for(var r in t.reminderObj){var o="grp_"+r+"_reminder",a="label_withholding_"+r;if(!t[o]||!t[a])return;var i=t.reminderObj[r],n=t[a],s=t.betMgr.getDoubleBetNum(i),l=e.UTIL.NUM.getSplitNumStr(parseFloat((s*e.GTS.mgr.nnWithholding).toFixed(2)));s>0?(n.text=l,t[o].visible=!0):t[o].visible=!1}},a.prototype.initialDoubleBetReminder=function(){var e=this;for(var t in e.reminderObj){var r="grp_"+t+"_reminder",o="label_withholding_"+t;if(!e[r]||!e[o])return;e[r].visible=!1,e[o].text=""}},a.prototype.checkTableLimitOutOfRange=function(t){var r=this,o=r.tableCtrl.roundCtrl;o||console.log("err -> can't not get round.");var a=r.tableCtrl.tableLimit;a||console.log("err -> can't get table limit."),a=e.COMM.FX.calcMoneyByCurrency("CNY",a);var i=o.betMoneyCNY&&o.betMoneyCNY[t]||0;return!(a-(i=e.COMM.FX.calcMoneyByCurrency("CNY",i))-r.betMgr.getUnConfirmedBet(t)>=r.chipBar.chipValue)},a.prototype.getAllBetTypeAndGroup=function(){var e=this,t=[];if(!e.grp_area||!e.grp_chip_for_other||!e.betTypeArray)return t;for(var r=0;r<e.betAreaArray.length;r++){var o=e.grp_area.getChildByName("grp_bet_area_"+r);if(o){var a=e.grp_chip_for_other.getChildByName("grp_chip_for_other_"+r);if(a){var i=e.betTypeArray[r];i&&t.push({group:o,betType:i,group_other:a})}}}return t},a.prototype.clearAllChips=function(){var e=this;if(e.betAreaArray)for(var t=0;t<e.betAreaArray.length;t++){var r=e.betAreaArray[t];if(r){var o=r.betAreaHelper;o&&o.removeAllChips()}}},a}(mo.EUI.Comp);t.NNBetArea=o,__reflect(o.prototype,"G.NN.NNBetArea")}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.changeRequiredForGLI=function(){var e=this,t=":";"zh_cn"==mo.PROJ.lang?t="赔":("zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(t="賠"),"en_us"==mo.PROJ.lang?(e.oddLabel_1.text="0.95:1",e.oddLabel_3.text="0.95:1",e.oddLabel_5.text="0.95:1"):("zh_cn"==mo.PROJ.lang||"zh_tw"==mo.PROJ.lang||"zh_hk"==mo.PROJ.lang)&&(e.oddLabel_1.text="1"+t+"0.95",e.oddLabel_3.text="1"+t+"0.95",e.oddLabel_5.text="1"+t+"0.95")},t}(e.NNBetArea);e.NNBetAreaNoDouble=t,__reflect(t.prototype,"G.NN.NNBetAreaNoDouble")}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=mo.D.Queue,o=function(t){function o(e,r,o,a,i){var n=t.call(this,e,o)||this;n.isInSettlement=!1,n.iniChipY=260,n.loseChipY=-110;var s=n;s.img_shadow=e.getChildByName("img_bet_"+r),s.img_confirm=e.getChildByName("img_bet_flash_"+r),s.grp_betNum=e.getChildByName("betNum_"+r),s.tableCtrl=a,s.betMgr=i,s.chipList=[];s.iniChipX=256-e.x;return s.loseChipX=496-e.x,s.reset(),s.globalPosition.x=.85*s.betArea.x+295-85,s.globalPosition.y=.85*s.betArea.y+493-50,n}return __extends(o,t),o.prototype.reset=function(){t.prototype.reset.call(this);var e=this;e.img_confirm&&(e.img_confirm.visible=!1),e.img_shadow&&(e.img_shadow.alpha=0),e.grp_betNum&&(e.grp_betNum.reset(),e.grp_betNum.visible=!1),e.removeAllChips()},o.prototype.removeAllChips=function(){for(var e=this,t=0;t<e.chipList.length;t++){var r=e.chipList[t];mo.EUI.helper.rm(r)}e.chipList.length=0},o.prototype.haveBet=function(){var e=this;e.grp_betNum.setData({num:e.betRecoder.totalBet4Dis}),e.grp_betNum.visible=!0,e.grp_betNum.betUnConfirm()},o.prototype.haveNoBet=function(){var e=this;e.grp_betNum&&(e.grp_betNum.reset(),e.grp_betNum.visible=!1)},o.prototype.hangover=function(){},o.prototype.betFinalConfirm=function(){var e=this;t.prototype.betFinalConfirm.call(this);var r=e.betRecoder.beted;e.img_confirm&&(e.img_confirm.visible=!1),r&&e.grp_betNum.betConfirm()},o.prototype.betConfirm=function(){var e=this;t.prototype.betConfirm.call(this);var r=e.betRecoder.beted;e.img_confirm&&(e.img_confirm.visible=!1),r&&e.grp_betNum&&e.grp_betNum.betConfirm()},o.prototype.onBetAreaSettlement=function(t){var r=this;if(t){var o=t.indexOf(r.betType)>=0,a=e.UTIL.calPayout(r.tableCtrl.roundCtrl,r.tableCtrl.betCtrl);a.refundDetail&&!mo.OBJ.isEmpty(a.refundDetail)&&a.refundDetail[r.betType]&&(o=!0),r.inTheSettlement(o)}},o.prototype.inTheSettlement=function(e){var t=this;if(!t.isInSettlement){var r=t.betRecoder.confirmedBetHistory;if(t.haveNoBet(),t.setResultsShow(e),e)for(var o=0,a=0,i=0;i<r.length;i++)for(var n=r[i],s=0;s<n.length;s++){var l=n[s].chip;if(l)t.isInSettlement=!0,o+=1,t.rmTweens(l),t.getTween(l,{loop:!1}).wait(100+50*o).to({x:t.iniChipX,y:t.iniChipY},500).call((function(){o==(a+=1)&&(t.isInSettlement=!1,t.grp_betNum&&t.grp_betNum.emitter.emit("over",t),t.deleteChip())}))}else t.lostGame();t.grp_betNum.emitter.emit("over",t)}},o.prototype.lostGame=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0,o=0,a=0;a<t.length;a++)for(var i=t[a],n=0;n<i.length;n++){var s=i[n].chip;if(s)e.isInSettlement=!0,r+=1,e.rmTweens(s),e.getTween(s,{loop:!1}).wait(100+50*r).to({x:e.loseChipX,y:e.loseChipY},500).call((function(){r==(o+=1)&&(e.isInSettlement=!1,e.deleteChip())}))}},o.prototype.deleteChip=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length;a++){var i=o[a].chip;i&&(-1!=e.betArea.getChildIndex(i)&&(mo.EUI.helper.rm(i),e.betedChipQ.enqueue(i)),e.rmTweens(i))}},o.prototype.setResultsShow=function(e){var t=this;(t.img_confirm.visible=e,t.img_confirm.visible)&&(t.rmTweens(t.img_confirm),t.getTween(t.img_confirm,{loop:!0}).to({alpha:0},500).to({alpha:0},500).to({alpha:0},500).to({alpha:1},500).to({alpha:0},500).to({alpha:1},500).to({alpha:0},500).to({alpha:1},500).call((function(){t.rmTweens(t.img_confirm)})))},o.prototype.bet=function(e){var t=this,r=t._flyChips(e);t.betRecoder.bet(e).chip=r,t._betNumChanged(),mo.emitter.emit("showDynamicConfirm",t.globalPosition,{width:.85*t.betArea.width,height:.85*t.betArea.height})},o.prototype.initConfirmedV=function(t){var r=this;r.reset();var o=e.UTIL.NUM.breakUpChipV(t);if(o.length){for(var a=0;a<o.length;a++){var i=o[a],n=r.betRecoder.bet(i);r.betRecoder.confirm();var s=r._flyChips(i,a+1);n.chip=s}r.betConfirm()}r._betNumChanged()},o.prototype.unBet=function(){var e=this.betRecoder.curBetHistory;if(e.length)for(var r=0;r<e.length;r++){var o=e[r].chip;o&&mo.EUI.helper.rm(o)}t.prototype.unBet.call(this)},o.prototype._flyChips=function(e){var t=this,r=t.betRecoder.confirmedBetHistory,o=0;if(r.length>0)for(var a in r)o+=r[a].length;var i=t.betRecoder.curBetHistory.length+o;if(!(i>=6)){var n=t._productChip(e),s=t.iniChipX,l=t.iniChipY,c=33-5*i;return n.x=s,n.y=l,t.betArea.addChild(n),t.chipList.push(n),t.grp_betNum.x=8,t.grp_betNum.y=-25,t.rmTweens(n),t.getTween(n).wait(100).to({x:23,y:c},500).call((function(){t.rmTweens(n)})),n}},o.prototype._productChip=function(t){var o=this;o.betedChipQ||(o.betedChipQ=new r);var a=o.betedChipQ.dequeue();return a||(a=new eui.Image),a.source=e.BASE.resHelper.getBetChipRes(t),a.touchEnabled=!1,a},o.prototype.onBetAreaClear=function(){t.prototype.onBetAreaClear.call(this);this.img_confirm.visible=!1},o}(e.COMM.BaseBetAreaHelper);t.NNBetAreaHelper=o,__reflect(o.prototype,"G.NN.NNBetAreaHelper")}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;egret.isNative&&(mo.emitter.on("browser.beforeOpen",t._onBrowserBeforeOpen_native,t),mo.emitter.on("browser.close",t._onBrowserClose_native,t)),e.GW.mgr.ifGameSingle(),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!0,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!0},o.prototype.onExit=function(){r.prototype.onExit.call(this);var e=this;egret.isNative&&(mo.emitter.un("browser.beforeOpen",e._onBrowserBeforeOpen_native,e),mo.emitter.un("browser.close",e._onBrowserClose_native,e))},o.prototype._onBrowserBeforeOpen_native=function(){this.visible=!1},o.prototype._onBrowserClose_native=function(){this.visible=!0},o.prototype.show=function(){r.prototype.show.call(this);var o=this,a=(o.moduleParam.tableCtrl,!0);e.GW.mgr&&e.GW.mgr.channel&&"boolean"==typeof e.GW.mgr.channel.niuNiuDoubleEnable&&(a=e.GW.mgr.channel.niuNiuDoubleEnable);var i={param:o.data.param,tray:o,niuNiuDoubleEnable:a};return t.NNTablePC35.show(i),e.NN.NNRightSlider.show(i),e.NN.NNBottomPanelPC35.show(i),e.NN.NNShowCard.show(i),this},o.prototype.dtor=function(){r.prototype.dtor.call(this)},o}(mo.EUI.Layer);t.NNGameScenePC35=r,__reflect(r.prototype,"G.NN.NNGameScenePC35");var o=new mo.ModuleCfgItem;o.targetClass=t.NNGameScene,o.onPreAsync((function(e,t){t()})),mo.moduleMgr.registerModule(o),e.GC.gc.registerClass(r.__className,r)}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.Payout,o=e.COMM.IBetMgrEvent,a=function(t){function a(){var e=t.apply(this,arguments)||this;return e.animationIndex=1,e.animationMaxIndex=8,e.isConfirm=!1,e.recordBetMoneyCNY=[],e.noBetRoundCount=0,e}return __extends(a,t),a.prototype._initProp=function(){t.prototype._initProp.call(this);this.betType=CONST.betType.niuNiu},a.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.betMgr=new e.NN.NNBetMgr},a.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;r.data.param&&(r.betMgr.tableCtrl=r.tableCtrl,r.chat.tableCtrl=r.tableCtrl);var o=0==r.data.niuNiuDoubleEnable?e.NN.NNBetAreaNoDouble:e.NN.NNBetArea;r.betAreaLayer=new o,o==e.NN.NNBetAreaNoDouble&&(r.betAreaLayer.y=-35),r.grp_betArea.addChild(r.betAreaLayer)},a.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.justEnterGame=!0,r.isHavePayoutLayer=!1,r.onEmitter(r.betMgr,o.ON_BET_AMOUNT_CHG,r._betNumChanged),r.onEmitter(r.tableCtrl,CONST.BBT_table.bet,r._otherPlayerBetChange),r.chipBar.tableCtrl=r.tableCtrl,r.chipBar.btn_chipSetting.visible=!1,e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,r.showBonus,r),r._initFlyChipHelper(),r.initBetArea(),r.reSetFlyChipHelper();var a=r.tableCtrl.gameState;r._gameStateChange(a),r.betAreaLayer.showDoubleBetReminder(),r._refreshOpBtns(),r.BetSettingLayer=new e.COMM.BetSetting,r.BetSettingLayer.tableCtrl=r.tableCtrl,r.grp_bet_setting.addChild(r.BetSettingLayer),r.chat.rect_disible_mask.visible=e.GW.mgr.disableChatRoom;var i=new eui.TileLayout;i.orientation="columns",i.horizontalGap=3,i.columnWidth=50,i.paddingTop=10,i.paddingLeft=5,i.verticalGap=1,i.rowHeight=48,i.requestedColumnCount=3,i.requestedRowCount=2,r.chipBar.grp_chips.layout=i,r.chipBar.scr_chips.width=165,r.chipBar.scr_chips.x=25,r.chipBar.btn_pre.x=7,r.chipBar.btn_next.x=205,r.chipBar.x=620,mo.emitter.on("showDynamicConfirm",r.showDynamicConfirmGroup,r),mo.emitter.on("hideDynamicConfirm",r.hideDynamicConfirmGroup,r),r.showAnimation()},a.prototype.resetGamePage=function(){var e=this;e.isHavePayoutLayer=!1,e._refreshOpBtns(),e.hideDynamicConfirmGroup(),e._recoverBetInfo(),e.betAreaLayer.showDoubleBetReminder();var t=e.tableCtrl.gameState;e._gameStateChange(t)},a.prototype.showDynamicConfirmGroup=function(e,t){var r=this;if(r.grp_btn_undo_confirm){var o;.7*r.grp_btn_undo_confirm.width,o=.7*r.grp_btn_undo_confirm.height,r.grp_btn_undo_confirm.visible=!0;var a,i;a=e.x+90+2+40+5,i=e.y+t.height+45-3-15-o/2,r.grp_btn_undo_confirm.x=a,r.grp_btn_undo_confirm.y=i}},a.prototype.hideDynamicConfirmGroup=function(){this.grp_btn_undo_confirm&&(this.grp_btn_undo_confirm.visible=!1)},a.prototype.initBetArea=function(){var e=this;e.betAreaHelpers=[],e.betAreaLayer.initForBet(e.betMgr,e.chipBar,e.tableCtrl,e._payoutShow.bind(e))},a.prototype._onSettlement=function(){},a.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.betAreaReset(),e.isHavePayoutLayer=!1,e.noBetRoundCount++,e.setNoBetHint(e.noBetRoundCount),t.prototype._openRound.call(this)},a.prototype._betStop=function(){var e=this;e.justEnterGame=!1,e.tableCtrl.playAudio("time_out_notice"),e._gameStateChange(e.tableCtrl.gameState)},a.prototype._payout=function(){var t=this;if(t._onPayout_audio(),t.justEnterGame=!1,t.betAreaLayer.initialDoubleBetReminder(),t.tableCtrl){var o=t.tableCtrl.gameState;if(!t.isHavePayoutLayer&&o!=CONST.gameState.betting){var a=t.tableCtrl.roundCtrl;if(a.results&&0!=a.results.length){var i=e.UTIL.calPayout(t.tableCtrl.roundCtrl,t.tableCtrl.betCtrl),n=i.payoutDetail,s=i.payout,l=i.refund;if(!mo.OBJ.isEmpty(n)&&s>0&&s>l)t.isHavePayoutLayer=!0,r.show({tableCtrl:t.tableCtrl}).onClose((function(){})),t.tableCtrl.playAudio("coins_drop");else e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3);t._gameStateChange(t.tableCtrl.gameState)}}}},a.prototype._scanCard=function(){this.justEnterGame=!1;var t=this.tableCtrl.roundCtrl.srcResults;e.log("_scanCard",t)},a.prototype._shuffle=function(){t.prototype._shuffle.call(this);this.justEnterGame=!1,this.betAreaReset()},a.prototype._gameStateChange=function(t){var r=this;if(r.tableCtrl,r.isConfirm)r.isConfirm=!1;else{if(r.curGameState=t,r.justEnterGame)switch(t){case CONST.gameState.shuffle:break;default:r._recoverBetInfo()}switch(t){case CONST.gameState.betting:var o=mo.DATE.now(),a=r.tableCtrl.notifyMs-(o-r.tableCtrl.roundCtrl.startTime.getTime());a>0?(r.stopBet(!0),setTimeout((function(){r.stopBet(!1),r.btn_again.enabled=r.betMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_again.enabled=!1,r.btn_again.visible=!1,r.btn_double.enabled=!0)}),a)):(r.stopBet(!1),r.btn_again.enabled=r.betMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_again.enabled=!1,r.btn_again.visible=!1,r.btn_double.enabled=!0));break;case CONST.gameState.shuffle:r.stopBet(!0),r.flyChipHelper&&r.flyChipHelper.removeAllChipFromParent();break;case CONST.gameState.stopBet:r.stopBet(!0),r.openCloseBtns(),r.betFinalConfirm(),r.justEnterGame&&setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500);break;case CONST.gameState.payout:r.justEnterGame&&setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500),r.stopBet(!0),r.betAreaSettlement(),r.flyChipPayout()}}},a.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},a.prototype.stopBet=function(e){this.betMgr.stopBet(e),this.betAreaLayer.canHover=!e},a.prototype._onAfterBet=function(){this.betFinalConfirm()},a.prototype._tap_btn_bet_setting=function(){this.BetSettingLayer.showBetSetting()},a.prototype._tap_btn_again=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),this.betMgr.redoBet(),this._betNumChanged()},a.prototype._tap_btn_double=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),this.betMgr.doubleBet(),this._betNumChanged(),e.RCD.log_mgr.sendEvent_ClientButton("game.double")},a.prototype._tap_btn_undo=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),this.betMgr.undo(),this._betNumChanged()},a.prototype._tap_btn_confirm=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),t.betMgr.startBet();var r=t.betMgr.packUnConfirmedBet();mo.OBJ.isEmpty(r)?(t._betNumChanged(),t.betMgr.finishBet()):(t.isConfirm=!0,t.tableCtrl.bet(r,(function(){t.tableCtrl.playAudio("p_bet_success"),e.log("下注成功"),t.betMgr.confirmBet(),t.isConfirm||t._gameStateChange(t.tableCtrl.gameState),t.isConfirm=!1,mo.MSG.show(e.id_c_msgCode.bacc_bet_success),t._betNumChanged(),t.betMgr.finishBet(),t.noBetRoundCount=0}),(function(){t.isConfirm||t._gameStateChange(t.tableCtrl.gameState),t.isConfirm=!1,t.betMgr.undo(),t.betMgr.betFinalConfirm(),t._betNumChanged(),t.betMgr.finishBet()})))},a.prototype.setNoBetHint=function(){},a.prototype.betAreaReset=function(){this.betMgr.clear(),this.betAreaLayer.clearAllChips()},a.prototype._betNumChanged=function(){this._refreshOpBtns(),this.betAreaLayer.showDoubleBetReminder()},a.prototype._tap_btn_back=function(){this._onKickFromTable()},a.prototype._onKickFromTable=function(){t.prototype._onKickFromTable.call(this)},a.prototype._refreshOpBtns=function(){var e=this;e.tableCtrl.gameState!=CONST.gameState.betting?e.openCloseBtns():(e.betMgr.hasUnConfirmedBet(),e.openOpBtns(e.betMgr.hasUnConfirmedBet()))},a.prototype.betFinalConfirm=function(){var e=this;e.tableCtrl.isBetting||(e.betMgr.betFinalConfirm(),e._betNumChanged())},a.prototype._recoverBetInfo=function(){this.betMgr.recoverBetInfo()},a.prototype.openCloseBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!1,e.hideDynamicConfirmGroup()},a.prototype.openOpBtns=function(e){var t=this,r=t.tableCtrl.gameState;t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):(r==CONST.gameState.betting&&(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0)),t.hideDynamicConfirmGroup())},a.prototype.checkIsBet=function(){var e=this.betMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},a.prototype.onExit=function(){var r=this;t.prototype.onExit.call(this),r.unEmitter(),r.betMgr.reset(),e.GW.mgr.setCurrentThemeWithTableCtrl(null),e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,r.showBonus,r),e.COMM.BONUS.leaveBonusDlg(),mo.emitter.unAll("showDynamicConfirm"),mo.emitter.unAll("hideDynamicConfirm")},a.prototype._initFlyChipHelper=function(){var t=this;t.flyChipHelper=new e.FlyChipHelper,t.flyChipHelper.x=1220,t.flyChipHelper.y=530,t.addChild(t.flyChipHelper),t.setChildIndex(t.flyChipHelper,3);var r=t.flyChipHelper.parent.localToGlobal(t.flyChipHelper.x+17,t.flyChipHelper.y+12),o=mo.p(r.x,r.y);t.flyChipHelper.registerPlayer(99,o)},a.prototype.reSetFlyChipHelper=function(){var e=this;if(e.flyChipHelper&&e.betAreaLayer){e.flyChipHelper.clearAllChipLocation();for(var t=e.betAreaLayer.getAllBetTypeAndGroup(),r=0;r<t.length;r++){var o=t[r].betType;if(-1!=o){var a=t[r].group_other;a&&e.flyChipHelper.registerChipLocation(o,a)}}e.initDeskFlyChip()}},a.prototype._otherPlayerBetChange=function(t){var r=this;if(r.tableCtrl&&r.tableCtrl.roundCtrl&&r.tableCtrl.gameState==CONST.gameState.betting&&t.user&&t.user.id&&t.user.id!=e.GTS.userCtrl.id){if(!t.otherBet||!t.otherBet.betDetail)return;if(r.recordBetMoneyCNY[t.user.id]||(r.recordBetMoneyCNY[t.user.id]=[]),r.flyChipHelper){for(var o in t.otherBet.betDetail){var a=t.otherBet.betDetail[o],i=r.recordBetMoneyCNY[t.user.id][o];if(null==i)a=r.flyChipHelper.currencyTranslate(t.otherBet.currency,a),r.flyChipHelper.doFlyChip(99,-1,o,a);else if(a>i){var n=a-i;n=r.flyChipHelper.currencyTranslate(t.otherBet.currency,n),r.flyChipHelper.doFlyChip(99,-1,o,n)}}r.recordBetMoneyCNY[t.user.id]=t.otherBet.betDetail}}},a.prototype.initDeskFlyChip=function(){var t=this;if(t.tableCtrl.gameState!=CONST.gameState.payout&&t.tableCtrl)for(var r=t.tableCtrl.virtualInfoList||[],o=0;7>o;o++){var a=r[o];a&&a.userId&&a.userId!=e.GTS.userCtrl.id&&t.playFlyChip(a)}},a.prototype.playFlyChip=function(e){var t=this;if(t.flyChipHelper)for(var r in e.bet){var o=e.bet[r];o=t.flyChipHelper.currencyTranslate(e.currency,o),t.flyChipHelper.doFlyChip(99,e.userId,r,o)}},a.prototype.flyChipPayout=function(){var t=this;if(t.flyChipHelper&&t.tableCtrl&&t.tableCtrl.roundCtrl){var r=t.tableCtrl.roundCtrl.srcResults||[],o=e.UTIL.calResults(CONST.tableType.niuNiu,r);t.flyChipHelper.payoutResult(o),t.recordBetMoneyCNY=[]}},a.prototype._payoutShow=function(){},a.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},a.prototype.showAnimation=function(){var e=this;if(e.confirm_animation){e.animationTimerId&&(clearInterval(e.animationTimerId),e.animationTimerId=null),e.confirm_animation.visible=!0;e.animationTimerId=setInterval((function(){e.animationIndex++,e.animationIndex>e.animationMaxIndex&&(e.animationIndex=1);e.confirm_animation.source="dg_confirm_btn_eff_"+e.animationIndex}),100)}},a}(e.BASE.BaseTableLayer);t.NNTablePC35=a,__reflect(a.prototype,"G.NN.NNTablePC35")}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.showGameGuideView=function(){},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype._initProp=function(){t.prototype._initProp.call(this);this._Item_list_room=e.NN.NNRoomListItemPC35,mo.emitter.on("InfoScene_onExit",this.showGameGuideView,this)},r.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.niuNiu),o=0,a=r.length;a>o;o++){var i=r[o],n={};n.tableCtrl=i,t.push(n)}return t},r.prototype.gotoGame=function(r){t.prototype.gotoGame.call(this,r);var o=this;r.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:r,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)},r}(e.COMM.RoomListPC35);t.NNRoomListPC35=r,__reflect(r.prototype,"G.NN.NNRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.NN||(e.NN={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype.show=function(){r.prototype.show.call(this);var o=this,a=e.GA.mgr.getTempTableCode();a?o._changeTable(a):o.curLayer=t.BchtAnchorDisplayBg.show(),mo.emitter.on("AnchorDisplayChangeTable",o._changeTable,o),mo.emitter.on("AnchorDisplayLeaveTable",o._leaveTable,o)},o.prototype.onExit=function(){r.prototype.onEnter.call(this);var e=this;mo.emitter.un("AnchorDisplayChangeTable",e._changeTable,e),mo.emitter.un("AnchorDisplayLeaveTable",e._leaveTable,e)},o.prototype._changeTable=function(r){var o=this;e.GA.mgr.getTableCtrlFromServer(r,(function(e){var r={};r.tableCtrl=e,o.curLayer=t.BchtAnchorDisplay.show({param:r})}))},o.prototype._leaveTable=function(){this.curLayer=t.BchtAnchorDisplayBg.show()},o}(mo.EUI.UIScene);t.BchtMainScene=r,__reflect(r.prototype,"G.BCHT.BchtMainScene");var o=new mo.ModuleCfgItem;o.targetClass=r,mo.moduleMgr.registerModule(o)}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.GTS.AnchorSelectedType,o=function(t){function o(){return t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;null!=mo.PROJ.tableCode&&(r.readyGotoGame(mo.PROJ.tableCode),mo.PROJ.tableCode=null),r._setRoomList(),r.tab_bar.selectedIndex=r.selectedIndex=0,mo.emitter.on(e.BCHT.BchtRoomListItem.GO_IN_TO_BCHT_ROOM,r.gotoGame,r)},o.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;r.unEmitter(),mo.emitter.un(e.BCHT.BchtRoomListItem.GO_IN_TO_BCHT_ROOM,r.gotoGame,r)},o.prototype._initProp=function(){t.prototype._initProp.call(this);this._skinName="BchtRoomListSkin",this._Item_list_room=e.BCHT.BchtRoomListItem},o.prototype._tap_tab_bar=function(){var e=this;if(e.selectedIndex!=e.tab_bar.selectedIndex){e.selectedIndex=e.tab_bar.selectedIndex;var t=e.getTypeBySelectedIndex(e.selectedIndex);e.pcRoomListScroller.stopAnimation(),e._refreshRoomListByType(t)}},o.prototype.getTypeBySelectedIndex=function(e){var t=r.ALL;switch(e){case r.ALL:t=r.ALL;break;case r.ONLINE:t=r.ONLINE;break;case r.FAVORITE:t=r.FAVORITE}return t},o.prototype._setRoomList=function(e){var t=this;t._tableCtrlArr=t._getListFromGts(e),t.refreshList("list_room"),t.tab_bar.touchChildren=!0},o.prototype._refreshRoomListByType=function(t){var r=this;e.GTS.bcht.setSelectedType(t),r.tab_bar.touchChildren=!1,e.GTS.bcht.enterAnchorTableList((function(){r._setRoomList(t)}))},o.prototype._getListFromGts=function(t){for(var r=[],o=e.GTS.mgr.getAnchorTableCtrlList(t),a=0;a<o.length;a++){var i=o[a],n={};n.tableCtrl=i,r.push(n)}return r},o.prototype._data_list_room=function(){return this._tableCtrlArr},o.prototype._click_list_room=function(){},o.prototype.gotoGame=function(t){t.isMultiRange&&t.multiRangeList?(e.GW.mgr.setCurrentThemeWithTableCtrl(t),e.COMM.LimitSelectDlg.show({tableCtrl:t,selectCallBack:function(){e.COMM.layerMgr.enterGameRoom(t,CONST.tableType.anchor,!1,null,null)}})):e.COMM.layerMgr.enterGameRoom(t,CONST.tableType.anchor,!1,null,null)},o}(e.COMM.RoomList);t.BchtRoomList=o,__reflect(o.prototype,"G.BCHT.BchtRoomList"),e.GC.gc.registerClass(o.__className,o)}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.Barrage,o=function(t){function o(){var e,r=t.apply(this,arguments)||this;return r._isAnchorBet=!1,r.betTypeArr=[CONST.betType.baccarat.player,CONST.betType.baccarat.banker,CONST.betType.baccarat.draw,CONST.betType.baccarat.playerPair,CONST.betType.baccarat.bankerPair],r.anchorBetPosition=((e={})[CONST.betType.baccarat.player]={to:[850,500],from:[850,350]},e[CONST.betType.baccarat.banker]={to:[900,475],from:[900,300]},e),r}return __extends(o,t),o.prototype.onEnter=function(){var o=this;t.prototype.onEnter.call(this);var a=o.tableCtrl;o.adjustOriginComponent(),o.setDealerVideo(),o.bchtChat.tableCtrl=a,o.setBarrage("barrage_layer",r.BarrageType.Normal),o.setBarrage("barrage_layer_system",r.BarrageType.System),mo.emitter.on(e.GTS.BchtMgr.Anchor_Change_Table,o._onChangeBaccRoom,o),mo.emitter.on(e.GTS.BchtMgr.Update_Anchor_Chat_System,o._onChatSystem,o),mo.emitter.on(e.GTS.BchtMgr.Update_Anchor_Chat_Normal,o._onChatNormal,o),mo.emitter.on(e.GTS.BchtMgr.Anchor_Open_Bet,o.setBetAreaLock,o),o.setBetAreaLock(),o.anchorBet()},o.prototype._onChangeBaccRoom=function(t){t&&e.COMM.layerMgr.fastEnterGameRoom(t,CONST.tableType.anchor,!1,null)},o.prototype._onChatNormal=function(e){var t=(e.userId,e.userName,e.content),o=(e.timestamp,{chat:t});mo.emitter.emit(r.Barrage_For_Normal,o)},o.prototype._onChatSystem=function(e){var t;e.userId,e.userName,e.cPayout&&e.cPayout.payout&&(t={chat:"恭喜您在上局獲得了"+e.cPayout.payout+"!!!!"},mo.emitter.emit(r.Barrage_For_System,t))},o.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;mo.emitter.un(e.GTS.BchtMgr.Anchor_Change_Table,r._onChangeBaccRoom,r),mo.emitter.un(e.GTS.BchtMgr.Update_Anchor_Chat_System,r._onChatSystem,r),mo.emitter.un(e.GTS.BchtMgr.Update_Anchor_Chat_Normal,r._onChatNormal,r),mo.emitter.un(e.GTS.BchtMgr.Anchor_Open_Bet,r.setBetAreaLock,r),r.videoMgr4Dealer&&r.videoMgr4Dealer.clear()},o.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.bchtGameInfo&&e.bchtGameInfo.setData({tableCtrl:e.tableCtrl}),e.bchtDealerVideo&&e.bchtDealerVideo.setData({tableCtrl:e.tableCtrl})},o.prototype.setBetArea=function(){var e=this;e.betAreaHelpers=[],e.grp_betArea.visible=!1,e.customerBetArea.visible=!0,e.customerBetArea.initForBet(e.baccBetMgr,e.chipBar,e.tableCtrl,e._payoutShow.bind(e)),e.customerBetArea.updateBetTypes(e.betTypeArr)},o.prototype.setBetAreaLock=function(){var e=this,t=e.tableCtrl.anchor,r="";if(t.isValidTable){if(r=t.isOpenBet?"":"Preparing For Bet.",e.customerBetArea.lockBetArea(!t.isOpenBet,r),e.tableCtrl.gameState==CONST.gameState.payout)return;t.isOpenBet?e._refreshOpBtns():(e.baccBetMgr.undo(),e.openCloseBtns())}else r="No Table.",e.customerBetArea.lockBetArea(!0,r)},o.prototype.setBtnAgain=function(){var e=this;e.tableCtrl.anchor.isOpenBet&&(e.btn_again.enabled=e.baccBetMgr.hasPreRoundBetHistory(),e.btn_again.visible=e.btn_again.enabled,e.btn_again.enabled&&e.checkIsBet()&&(e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_double.enabled=!0))},o.prototype._refreshOpBtns=function(){var e=this;(e.tableCtrl.anchor.isOpenBet,e.tableCtrl.gameState!=CONST.gameState.betting)?e.openCloseBtns():(e.baccBetMgr.hasUnConfirmedBet(),e.openOpBtns(e.baccBetMgr.hasUnConfirmedBet()))},o.prototype.betAreaSettlement=function(){t.prototype.betAreaSettlement.call(this);this.clearAnchorBet()},o.prototype.adjustOriginComponent=function(){this.grp_deskMsg.visible=!1},o.prototype.setDealerVideo=function(){var t=this,r=t.tableCtrl,o=r.anchor;if(t.grp_dealer_video.visible=!1,o.isValidTable&&o.curTable){var a=r.getDealerVideoInBcht(o.curTable),i=e.videoCutType.dealer;t.videoMgr4Dealer=new e.VideoMgr,t.onEmitter(t.videoMgr4Dealer,e.VideoMgr.ON_VIDEO_CHANGE_HOST,t._onChangeVideoHost.bind(t,t.videoMgr4Dealer,t.bchtDealerVideo.grp_video,i)),mo.TM.setTimeout4Tick((function(){t.tableCtrl&&(t.videoMgr4Dealer.playWithType(a,t.bchtDealerVideo.grp_video,!1,i),t.grp_dealer_video.visible=!0)}),500)}},o.prototype.anchorBet=function(){var e=this;if(e.tableCtrl.gameState!=CONST.gameState.payout&&e.tableCtrl.gameState!=CONST.gameState.shuffle){var t=e.tableCtrl.anchor.id,r=e.tableCtrl.roundCtrl.getAnchorBetType(t);if(r&&!e._isAnchorBet){var o=e.anchorBetPosition[r].from,a=e.anchorBetPosition[r].to;e.bchtAnchorBetChip.bet(o,a,r),e._isAnchorBet=!0}}},o.prototype.checkAndAnchorBetAnimation=function(){},o.prototype.clearAnchorBet=function(){this.bchtAnchorBetChip.clear(),this._isAnchorBet=!1},o.prototype.setBarrage=function(t,r){var o=this;if(o[t]){var a=new e.Barrage.BarrageLayer;a.initBarrage(r),o[t].addChild(a),o[t].visible=!0}},o.prototype.testBarrage=function(){for(var e=[{chat:"美女你叫什么名字今天天气不错"},{chat:"貨賣得出去，人進得來，高雄發大財"},{chat:"難道阿扁錯了嗎？"},{chat:"人不犯我，我不犯人﹔人若犯我，我必犯人"},{chat:"不想擴大才挖深，挖深後儲水可以養魚"},{chat:"狼若回頭，不是報恩，就是報仇"},{chat:"下定決心，不怕犧牲，排除萬難，去爭取勝利"},{chat:"鼓足干勁，力爭上游，多快好省地建設社會主義"},{chat:"偉大的導師，偉大的領袖，偉大的統帥，偉大的舵手毛主席萬歲"},{chat:"整黨建黨、吐故納新"},{chat:"尊重知識、尊重人才"},{chat:"全世界人民團結起來，打敗美帝國主義及其一切走狗"},{chat:"團結起來，爭取更大的勝利"},{chat:"科學技術是第一生產力"},{chat:"反對修正主義，大興調查研究之風"}],t=function(t){console.log(e[t]),setTimeout((function(){mo.emitter.emit("testChat",e[t])}),500)},r=0;r<e.length;r++)t(r)},o}(e.BACC.BaseCardLayer);t.BchtGame=o,__reflect(o.prototype,"G.BCHT.BchtGame"),e.GC.gc.registerClass(o.__className,o)}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.compTimerState.audioEnabled=!0},r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);this.tableCtrl=this.data.tableCtrl},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=r.tableCtrl;r.onEmitter(o,CONST.BBT_table.openRound,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.shuffle,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.bet,r._bet),r.onEmitter(o,CONST.BBT_table.betStop,r._betStop),r.onEmitter(o,CONST.BBT_table.payout,r._onRefreshInfo),r.onEmitter(o,CONST.BBT_table.applyOvertime,r._applyOvertime),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(o,e.GTS.TableCtrl.ON_AFTER_BET,r._onAfterBet),r.compTimerState.tableCtrl=o,r.compTimerState.emitter.on(e.BASE.TimerState.ON_COUNTDOWN_END,r._onTimerCountdownEnd,r),r.compTimerState.hasAddtionTime=!1,r._gameStateChange(o.gameState),r.refreshAll()},r.prototype._gameStateChange=function(e){var t=this;t.curGameState=e;var r=t.tableCtrl,o=r.roundCtrl;if(o){switch(t.compTimerState.visible=!0,t.compTimerState.overtimeStatus=o.overtimeStatus,e){case CONST.gameState.betting:t._handleState_betting(r);break;case CONST.gameState.shuffle:t.compTimerState.stateShuffle();break;case CONST.gameState.payout:t.compTimerState.stateClearing();break;case CONST.gameState.stopBet:t._handleState_stopBet(r)}t.refreshAll()}},r.prototype._applyOvertime=function(){var e=this;e.tableCtrl.gameState==CONST.gameState.betting&&e._gameStateChange(e.curGameState)},r.prototype._onTimerCountdownEnd=function(){this.compTimerState.stateClearing()},r.prototype._bet=function(){this._refeshBetInfo()},r.prototype._onAfterBet=function(){this.refreshAll()},r.prototype._betStop=function(){mo.emitter.emit(e.BASE.ON_COUNTDOWN_END),this._gameStateChange(this.tableCtrl.gameState)},r.prototype._handleState_betting=function(e){var t=this,r=e.getBetStopTime(),o=parseInt((6*Math.random()+1).toString());if(e.roundCtrl,e.playAudio("p_start_bet_"+o),r){var a=(r.getTime()-mo.DATE.now())/1e3;t.compTimerState.stateBetting(),t.compTimerState.refreshTime(a,r)}else t.compTimerState.stateClearing()},r.prototype._handleState_stopBet=function(){this.compTimerState.stateClearing()},r.prototype._onRefreshInfo=function(){var e=this.tableCtrl;this._gameStateChange(e.gameState)},r.prototype.refreshAll=function(){this._refreshRoomInfo(),this._refeshBetInfo()},r.prototype._refreshRoomInfo=function(){this.bchtRoomInfo.setRoomInfo(this.tableCtrl)},r.prototype._refeshBetInfo=function(){this.bchtBetDetail.setBetInfo(this.tableCtrl)},r}(mo.EUI.Comp);t.BchtGameInfo=r,__reflect(r.prototype,"G.BCHT.BchtGameInfo")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.Barrage,o=function(o){function a(){var e=o.apply(this,arguments)||this;return e._isBarrageOpen=!0,e}return __extends(a,o),a.prototype._initProp=function(){o.prototype._initProp.call(this);this._Item_list_text=e.BASE.ChatTextRenderer},a.prototype.onEnter=function(){o.prototype.onEnter.call(this);var e=this;e.btn_face.visible=!1,e.btn_face.enabled=!1,e._isBarrageOpen=!0,e.btn_barrage.selected=e._isBarrageOpen,e.label_text_Input.enabled=!e.isUseCannedMsg,e.canned_msg_trigger.visible=e.isUseCannedMsg,e.canned_msg_closer.visible=!1,e.scroller_text.visible=!1},a.prototype.setEventListener=function(){var e=this;e.label_text_Input.text="",e.label_num.visible=!1,e.label_text_Input.addEventListener(egret.Event.CHANGE,(function(){e.label_num.text=e.label_text_Input.text.length+"/50",e.label_num.visible=!e.isUseCannedMsg,e.label_num.style=e.label_text_Input.text.length>50?"txt_color_8":"txt_color_1"}),e),e.label_text_Input.textDisplay.addEventListener(egret.FocusEvent.FOCUS_IN,(function(){e.label_num.text=e.label_text_Input.text.length+"/50",e.label_num.visible=!e.isUseCannedMsg,e.label_num.style=e.label_text_Input.text.length>50?"txt_color_8":"txt_color_1"}),e),e.label_text_Input.textDisplay.addEventListener(egret.FocusEvent.FOCUS_OUT,(function(){e.label_num.visible=!1}),e)},a.prototype._setAnchorData=function(e){var t=this;t._anchorId=e.id,t._isSubscribe=e.isFavorite,t.setSubscribeImg(t._isSubscribe)},Object.defineProperty(a.prototype,"tableCtrl",{set:function(t){var r=this;r._tableCtrl=t;var o=r._tableCtrl.anchor;return o?(r._setAnchorData(o),r.onEmitter(r._tableCtrl,CONST.BBT_table.openRound,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.shuffle,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.scanCard,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.payout,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.betStop,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.bet,r.chatTextChange),r.onEmitter(r._tableCtrl,CONST.BBT_table.disTalkUser,r.onBanUser.bind(r)),r.label_noChat.text=mo.D.langCodeToTxt("user_no_chat_1"),r.chatTextChange(),void e.GTS.mgr.chatRecorder.setCurTableCode(r._tableCtrl.code)):void console.log("err -> can't not find anchor")},enumerable:!0,configurable:!0}),a.prototype._tap_btn_subscribe=function(){var t=this;return t._isSubscribe||e.GTS.bcht.canSubscribe(t._anchorId)?(t._isSubscribe=!t._isSubscribe,void e.GTS.bcht.addAnchorFavorite(t._anchorId,t._isSubscribe,(function(){t.setSubscribeImg(t._isSubscribe),t._tableCtrl.anchor.isFavorite=t._isSubscribe,t._isSubscribe||e.GTS.bcht.recordAnchorSubscribe(t._anchorId)}))):mo.MSG.show("${{Rocket_Girls_client_remind}}")},a.prototype.setSubscribeImg=function(e){this.subscribe_img.source=e?"subscribe_gold":"subscribe_white"},a.prototype._tap_btn_barrage=function(){var e=this;e._isBarrageOpen=!e._isBarrageOpen,e.btn_barrage.selected=e._isBarrageOpen,mo.emitter.emit(r.Barrage_Close,e._isBarrageOpen)},a.prototype._tap_btn_go=function(){var r=this,o=r._tableCtrl,a=mo.D.langCodeToTxt("chat_out_of_limit");if(e.GTS.userCtrl&&o){if(""==r.label_text_Input.text)return mo.MSG.show(e.id_c_msgCode.user_no_null);if(e.GTS.mgr.isForbiddenChat())return mo.MSG.show("${{chat_ban_warn}}");if(-1==e.GTS.userCtrl.type)return mo.MSG.show(e.id_c_msgCode.chat_tip_visitor);if(!r.isUseCannedMsg&&r.label_text_Input.text.length>50)return r.label_text_Input.text="",mo.MSG.show(a);var i=e.GTS.mgr.verifyEmoji(r.label_text_Input.text),n=r.isUseCannedMsg?{isTextTemplate:!0}:null;r._tableCtrl.chat(i,n,(function(){t.log("发送成功"),e.GTS.mgr.chatRecorder.record(i)})),r.label_text_Input.text="",r.label_num.visible=!1}},a.prototype.chatTextChange=function(){var e=this;e.label_text_Input.visible=!0,e.label_noChat.visible=!1,e.btn_go.enabled=!0},a.prototype._tap_canned_msg_trigger=function(){this.canned_msg_closer.visible=!0,this.scroller_text.visible=!0},a.prototype._tap_canned_msg_closer=function(){this.canned_msg_closer.visible=!1,this.scroller_text.visible=!1},a.prototype._data_list_text=function(){return[mo.D.langCodeToTxt("long_banker"),mo.D.langCodeToTxt("chat_waving"),mo.D.langCodeToTxt("chat_give_kiss"),mo.D.langCodeToTxt("chat_ask_name"),mo.D.langCodeToTxt("chat_popular_cuties"),mo.D.langCodeToTxt("chat_little_girl"),mo.D.langCodeToTxt("chat_easy_win")]},a.prototype._click_list_text=function(e){var t=e.item;this.label_text_Input.text=t,this._tap_canned_msg_closer()},a.prototype.onBanUser=function(){},a.prototype._tap_btn_face=function(){},a.prototype._click_list_face=function(){},a.prototype.onChat=function(){},a}(e.BASE.Chat);t.BchtChat=o,__reflect(o.prototype,"G.BCHT.BchtChat")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(t){function r(e,r,o,a,i,n){void 0===n&&(n=!1);var s=t.call(this)||this;return s.x=e,s.y=r,s.groupWidth=o,s.groupHeight=a,s.MsgNumAll=i,s.isTouch=s.touchEnabled=n,s.initView(),s}return __extends(r,t),r.prototype.initView=function(){var e=this.MsgGrp=new eui.Group;e.x=this.x,e.x=this.y,e.width=this.groupWidth,e.height=this.groupHeight,e.touchEnabled=this.isTouch,this.addChild(e)},r.prototype.msgShow=function(t,r){var o=this.MsgGrp,a=new e.BchtMsgShow;for(a.setData({index:t,name:r}),a.y=120*o.numChildren,o.addChild(a),egret.Tween.get(a).wait(5e3).call((function(){mo.EUI.helper.rm(a);for(var e=0;e<o.numChildren;e++){var t=o.getChildAt(e);t&&(t.y=120*e)}}));o.numChildren>3;)o.numChildren,o.getChildAt(0)&&(egret.Tween.removeTweens(o.getChildAt(0)),o.removeChild(o.getChildAt(0)));for(var i=0;i<o.numChildren;i++){var n=o.getChildAt(i);n&&(n.y=120*i)}},r}(mo.EUI.Comp);e.BchtMsgComp=t,__reflect(t.prototype,"G.BCHT.BchtMsgComp")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype._initProp=function(){e.prototype._initProp.call(this);this.MsgArr=["Login Successful","Say Hello To","Bet Banker Success","Bet Player Success","Payout Successful","Error:","apply add time"]},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,r=t.data.index,o=t.data.name,a="";0==r?a=t.MsgArr[0]:1==r?a=t.MsgArr[1]+" "+o:2==r?a=o+" "+t.MsgArr[2]:3==r?a=o+" "+t.MsgArr[3]:4==r?a=t.MsgArr[4]:5==r?a=t.MsgArr[5]+" "+o:6==r&&(a=o+" "+t.MsgArr[6]),t.label_msg.text=a},t}(mo.EUI.Comp);e.BchtMsgShow=t,__reflect(t.prototype,"G.BCHT.BchtMsgShow")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(t){function r(){var e=t.apply(this,arguments)||this;return e.maxNum=50,e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);var r=this;r._Item_list_chat=e.BchtChatRenderer,r.chatList=[],r.tempChatList=[]},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},Object.defineProperty(r.prototype,"tableCtrl",{set:function(e){var t=this;t._tableCtrl=e,t.onEmitter(t._tableCtrl,CONST.BBT_table.chat,t.onChat)},enumerable:!0,configurable:!0}),r.prototype.onChat=function(e){var t=this;t.tempChatList.push(e),t.scroller_chat.validateNow(),t.scroller_chat.viewport.scrollV=t.scroller_chat.viewport.contentHeight<=t.scroller_chat.height?0:t.scroller_chat.viewport.contentHeight-t.scroller_chat.height,t.showChatContent()},r.prototype.showChatContent=function(){var t=this;if(t.tempChatList&&0!=t.tempChatList.length){var r,o,a=t.tempChatList.shift();t.chatList.length>=t.maxNum&&(t.list_chat.removeChildAt(0),t.chatList.pop()),r=a,o=new e.BchtChatRenderer;var i=!1;t.chatName==r.chat.userName&&(i=!0),t.chatName=r.chat.userName,o.chat({chat:r.chat,isSameUser:i}),t.list_chat.addChild(o),t.chatList.push(a),t.emitter.emit("msgShow",r.chat);var n=setTimeout((function(){t.scroller_chat.height<t.scroller_chat.viewport.contentHeight&&(t.scroller_chat.viewport.scrollV=t.scroller_chat.viewport.contentHeight-t.scroller_chat.height,clearTimeout(n))}),500)}},r}(mo.EUI.Comp);e.BchtDispChat=t,__reflect(t.prototype,"G.BCHT.BchtDispChat")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;if(r.data&&r.data.chat){var o=r.data.chat;r.isSameUser=r.data.isSameUser,r.grp_other.visible=!1,r.grp_system.visible=!1;var a=o.content.indexOf("#emj_")>-1;if(o.userId==CONST.chatUserId.userEnter);else if(o.userId==CONST.chatUserId.fee)r.grp_system.visible=!0,r.label_systemText.text=o.content+"Tips"+o.arg.fee,r.label_systemText.height=r.label_systemText.textHeight,r.label_systemText.width>=r.width-10&&(r.label_systemText.width=r.width-10);else{if(r.grp_other.visible=!0,r.group_textOther.visible=!1,r.group_faceOther.visible=!1,a){r.group_faceOther.visible=!0,r.group_textOther.height=0;var i=o.content,n=parseInt(i.split("_")[1]);isNaN(n)?(r.label_myFaceOther.text="",r.img_myFaceOther.source=""):(r.label_myFaceOther.text=o.userName+":",r.img_myFaceOther.source=e.BASE.resHelper.getFaceImgById(n)),r.isSameUser&&(r.label_myFaceOther.width=0)}else r.group_textOther.visible=!0,r.label_myOther.text=o.userName+":",r.label_myTextOther.text=o.content,r.isSameUser&&(r.label_myOther.width=0,r.label_myOther.height=0);r.label_myTextOther.height=r.label_myTextOther.textHeight}r.setIncludeInLayout()}},r.prototype.setIncludeInLayout=function(){var e=this;e.grp_other.includeInLayout=e.grp_other.visible,e.grp_system.includeInLayout=e.grp_system.visible},r.prototype.chat=function(e){this.data=e,this.dataChanged()},Object.defineProperty(r.prototype,"height",{get:function(){return this.bgHeight+16},enumerable:!0,configurable:!0}),r}(mo.EUI.ItemRenderer);t.BchtChatRenderer=r,__reflect(r.prototype,"G.BCHT.BchtChatRenderer")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var r=t.apply(this,arguments)||this;return r.sysMsgSpeed=.07,r._selectedIndex=-1,r.isMailOpen=e.GTS.mgr.isMailOpen(),r.needChangeFirstEnter=-1,r}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this),this._selectedIndex=-1,this.selectLimitIndex=-1,this.gameBarIndex=[],this.animationIndex=-1,this.animationMaxNum=24},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.grp_notice.mask=new egret.Rectangle(0,0,e.grp_notice.width,e.grp_notice.height)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;e.GW.mgr.showWarningForIE(),r.sysMsgList=[],r.gameBar.addEventListener(egret.Event.CHANGE,r._tap_gameBar,r),r.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_MONEY_CHANGED,r.dataChanged),r.onEmitter(e.GTS.userCtrl,"nick",r.dataChanged),r.onEmitter(e.GTS.mgr,"onlineCount",r._onOnlineCountChanged),r.onEmitter(e.GTS.mgr,e.GTS.GtsMgr.ON_SYS_MSG,r.updateSysMsg),r.onEmitter(e.stageUtil,e.StageUtil.ON_WIN_CLOSED,(function(){e.GTS.userCtrl.syncMoney(),r.updateWallet()})),mo.emitter.on("refresh_unread_mail",r.setUnreadMailNum,r),e.GTS.netMgr.onNotify(CONST.bstBizType.mailAll,r.updateUnreadMailNum,r),e.GTS.netMgr.onNotify(CONST.bstBizType.mailSingle,r.updateUnreadMailNum,r),e.GTS.netMgr.onNotify(CONST.bstBizType.worldMsgRm,r._worldMsgRm,r),r.img_wifi.visible=!1,r.btn_recharge.visible=r.isRechargeBtnShow(),r.dataChanged();var o=e.BASE.resHelper.getMainTitle(e.GW.mgr.channel);e.getRemoteImg(o,(function(e,t){if(o==t){r.imageTitle.source=e||"mainTitle";var a=r.imageTitle.width/r.grp_logo.width,i=r.imageTitle.height/r.grp_logo.height;a>i?(r.imageTitle.scaleX=1/a,r.imageTitle.scaleY=1/a,r.imageTitle.y=r.grp_logo.height-r.imageTitle.height/a>>1,r.imageTitle.x=0):(r.imageTitle.scaleX=1/i,r.imageTitle.scaleY=1/i,r.imageTitle.x=r.grp_logo.width-r.imageTitle.width/i>>1,r.imageTitle.y=0)}}));var a=e.BASE.resHelper.getH5QrCode(e.GW.mgr.channel);e.getRemoteImg(a,(function(e,t){a==t&&(r.img_code.source=e||"")}))},r.prototype._data_gameBar=function(){var t=this,r=[],o=-1;(e.GW.mgr.ifGameOpen(CONST.gameAPI.BACCARAT)||e.GW.mgr.ifGameOpen(CONST.gameAPI.MTO_BACCARAT))&&(r.push({icon:"ico_s_bcrM",gameName:"${{g_multi_table}}"}),t.gameBarIndex.push(CONST.tableType.all),r.push({icon:"ico_s_bcr",gameName:"${{g_baccarat}}"}),t.gameBarIndex.push(CONST.tableType.baccarat),o+=2),e.GW.mgr.ifGameOpen(CONST.gameAPI.DRAGON_TIGER)&&(r.push({icon:"ico_s_dt",gameName:"${{g_dragon_tiger}}"}),t.gameBarIndex.push(CONST.tableType.dragonTiger),o+=1),e.GW.mgr.ifGameOpen(CONST.gameAPI.ROULETTE)&&(r.push({icon:"ico_s_rlt",gameName:"${{g_roulette}}"}),t.gameBarIndex.push(CONST.tableType.roulette),o+=1),e.GW.mgr.ifGameOpen(CONST.gameAPI.SIC_BO)&&(r.push({icon:"ico_s_sib",gameName:"${{g_sic_bo}}"}),t.gameBarIndex.push(CONST.tableType.sicBo),o+=1),e.GW.mgr.channelType==CONST.channelType.normal&&(e.GW.mgr.ifGameOpen(CONST.gameAPI.PRAGMATIC_PLAY_SLOT)||e.GW.mgr.ifGameOpen(CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT))&&(r.push({icon:"ico_s_slot",gameName:"${{g_slot}}"}),t.gameBarIndex.push(CONST.tableType.slot),o+=1,e.GW.mgr.ifGameOpen(CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT)||e.GTS.userCtrl.type==CONST.userType.tourist?(t.img_trial.visible=!0,t.img_trial.y=11+33*o):t.img_trial.visible=!1),e.GW.mgr.ifGameOpen(CONST.gameAPI.BLOCK_CHAIN_BACCARAT)&&(r.push({icon:"ico_s_bb",gameName:"${{g_BB_Name}}"}),t.gameBarIndex.push(CONST.tableType.BB),o+=1),e.GW.mgr.ifGameOpen(CONST.gameAPI.NIU_NIU)&&(r.push({icon:"icon_s_nn",gameName:"${{g_nn_name}}"}),t.gameBarIndex.push(CONST.tableType.niuNiu)),t.moveNewGames(r);for(var a=0;a<t.gameBarIndex.length;a++){var i=t.grp_slot.getChildByName("divider"+a);i&&(i.visible=!0)}return r},r.prototype.changeGameBarIndex=function(e){return e>=this.gameBarIndex.length?e:this.gameBarIndex[e]},r.prototype.getGameBarIndexByGameType=function(e){for(var t=0;t<this.gameBarIndex.length;t++)if(this.gameBarIndex[t]==e)return t},r.prototype.getGameBarIndexByGameTypeV2=function(e){for(var t=0;t<this.gameBarIndex.length;t++)if(this.gameBarIndex[t]==e)return t;return-1},r.prototype.show_tableCtrl=function(){console.log("BaseTopBar TabelCtrl->",this.tableCtrl)},r.prototype._setInterval=function(e,t){return egret.setInterval(e,this,t)},r.prototype._clearInterval=function(e){egret.clearInterval(e)},r.prototype._onOnlineCountChanged=function(){this.label_count.text=e.UTIL.NUM.getSplitNumStr(e.GTS.mgr.onlineCount)},r.prototype.isInvitationShow=function(){var t=e.GW.mgr.isRentOpen(),r=-1==e.GTS.userCtrl.type,o=e.GW.mgr.ifGameSingle(),a=e.GW.mgr.isSingleWallet,i=e.GTS.mgr.isUplineUser(),n=e.GTS.mgr.havePlanType();return!(r||o||a)&&(!(!i||!n)||!!t)},r.prototype.isRechargeBtnShow=function(){var t=-1==e.GTS.userCtrl.type,r=e.GW.mgr.hasBtn_recharge,o=e.GW.mgr.channelType==CONST.channelType.normal;return!t&&r&&o},r.prototype.showNewIcon=function(){var t=[];if(e.GTS.userCtrl.onceOptionAry)for(var r=0;r<e.GTS.userCtrl.onceOptionAry.length;r++)e.GTS.userCtrl.onceOptionAry[r].type+""=="oldGames"&&(e.GTS.userCtrl.onceOptionAry[r].code+""=="BB"&&t.push(7),e.GTS.userCtrl.onceOptionAry[r].code+""=="NN"&&t.push(8));if(e.GTS.userCtrl.enteredGameList)-1==e.GTS.userCtrl.enteredGameList.indexOf(CONST.tableType.BB)&&t.indexOf(CONST.tableType.BB),-1==e.GTS.userCtrl.enteredGameList.indexOf(CONST.tableType.niuNiu)&&t.indexOf(CONST.tableType.niuNiu);else{if(e.GW.mgr.ifGameOpen(CONST.gameAPI.BLOCK_CHAIN_BACCARAT)&&-1==t.indexOf(CONST.tableType.BB)){e.GTS.mgr.request("gts.user.logOnceOpt",{type:"oldGames",code:"BB"},(function(){}),null)}if(e.GW.mgr.ifGameOpen(CONST.gameAPI.NIU_NIU)&&-1==t.indexOf(CONST.tableType.niuNiu)){e.GTS.mgr.request("gts.user.logOnceOpt",{type:"oldGames",code:"NN"},(function(){}),null)}}},r.prototype.moveNewGames=function(t){var r=this,o=[];if(e.GTS.userCtrl.onceOptionAry)for(var a=0;a<e.GTS.userCtrl.onceOptionAry.length;a++)e.GTS.userCtrl.onceOptionAry[a].type+""=="seenGames"&&(e.GTS.userCtrl.onceOptionAry[a].code+""=="BB"&&o.push(7),e.GTS.userCtrl.onceOptionAry[a].code+""=="NN"&&o.push(8));if(e.GTS.userCtrl.enteredGameList){if(e.GW.mgr.ifGameOpen(CONST.gameAPI.BLOCK_CHAIN_BACCARAT)&&-1==o.indexOf(CONST.tableType.BB)){var i=t[l=r.gameBarIndex.indexOf(CONST.tableType.BB)],n=r.gameBarIndex[l];t.splice(l,1),r.gameBarIndex.splice(l,1),t.unshift(i),r.gameBarIndex.unshift(n);var s={type:"seenGames",code:"BB"};e.GTS.mgr.request("gts.user.logOnceOpt",s,(function(){}),null),r.needChangeFirstEnter=7}if(e.GW.mgr.ifGameOpen(CONST.gameAPI.NIU_NIU)&&-1==o.indexOf(CONST.tableType.niuNiu)){var l,c=t[l=r.gameBarIndex.indexOf(CONST.tableType.niuNiu)],p=r.gameBarIndex[l];t.splice(l,1),r.gameBarIndex.splice(l,1),t.unshift(c),r.gameBarIndex.unshift(p);var _={type:"seenGames",code:"NN"};e.GTS.mgr.request("gts.user.logOnceOpt",_,(function(){}),null),r.needChangeFirstEnter=8}}else{if(e.GW.mgr.ifGameOpen(CONST.gameAPI.BLOCK_CHAIN_BACCARAT)&&-1==o.indexOf(CONST.tableType.BB)){s={type:"seenGames",code:"BB"};e.GTS.mgr.request("gts.user.logOnceOpt",s,(function(){}),null)}if(e.GW.mgr.ifGameOpen(CONST.gameAPI.NIU_NIU)&&-1==o.indexOf(CONST.tableType.niuNiu)){_={type:"seenGames",code:"NN"};e.GTS.mgr.request("gts.user.logOnceOpt",_,(function(){}),null)}}},r.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;egret.Tween.removeTweens(r.label_notice),r.unEmitter(),r.sysMsgList.length=0,r.label_money.removeEventListener(egret.Event.RENDER,r.autoScaleBitmapWidth,r),r.slotOnlyBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,r.tapSlotOnlyBar,r),e.GTS.netMgr.unNotify(CONST.bstBizType.mailAll,r.updateUnreadMailNum,r),e.GTS.netMgr.unNotify(CONST.bstBizType.mailSingle,r.updateUnreadMailNum,r)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;r.data,r.grp_userid.visible=!e.GTS.userCtrl.isTourist,r.label_userId.text=e.GTS.userCtrl.name,r.label_username.text="主播",r.updateWallet(),r._onOnlineCountChanged()},r.prototype.updateWallet=function(){var t=this,r=t.changeGameBarIndex(t._selectedIndex);if(e.GTS.mgr.isInMatch()||e.GW.mgr.isSingleWallet?(t.grp_money_in_slot.visible=!1,t.grp_money_in_slot.height=0):t.grp_money_in_slot.visible=!0,e.GTS.userCtrl.checkWallet(),e.GTS.mgr.isInMatch()||e.GW.mgr.isSingleWallet)t.grp_money_in_slot.visible=!1,t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.mgr.money4Dis.toFixed(2)));else{if(e.GW.mgr.ifGameOpen(CONST.gameAPI.TRIAL_PLAY_PRAGMATIC_PLAY_SLOT)&&r==CONST.tableType.trialslot)t.grp_money1.visible=!0,t.grp_money2.visible=!1,t.grp_money3.visible=!1,t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.userCtrl.walletGeneral.toFixed(2))),t.label_money1.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.userCtrl.walletGeneral.toFixed(2)));else{t.label_money1.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.userCtrl.walletGeneral.toFixed(2))),t.label_money2.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.userCtrl.walletLive.toFixed(2))),t.label_money3.text=e.UTIL.NUM.getSplitNumStr(parseFloat(e.GTS.userCtrl.walletElec.toFixed(2)));var o=e.GW.mgr.checkWalletWhereToShow(CONST.gameWallet.GENERAL,r),a=e.GW.mgr.checkWalletWhereToShow(CONST.gameWallet.LIVE,r),i=e.GW.mgr.checkWalletWhereToShow(CONST.gameWallet.ELECTRONICS,r);t.grp_money1.visible=o,t.grp_money2.visible=a,t.grp_money3.visible=i,t.grp_money1.height=o?21:0,t.grp_money2.height=a?21:0,t.grp_money3.height=i?21:0;var n=(o?e.GTS.userCtrl.walletGeneral:0)+(a?e.GTS.userCtrl.walletLive:0)+(i?e.GTS.userCtrl.walletElec:0);t.label_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(n.toFixed(2)))}0==t.grp_money2.visible&&0==t.grp_money3.visible&&(t.grp_money3.visible=!1,t.grp_money_in_slot.visible=!1),t.check_grp_money_in_slot_height(),t.scale_money_labels_width()}t.label_money.addEventListener(egret.Event.RENDER,t.autoScaleBitmapWidth,t),t.theNewForBB&&(t.theNewForBB.visible=-1==e.GTS.userCtrl.enteredGameList.indexOf(CONST.tableType.BB),t.theNewForBB.y=130+t.grp_money.height+33*t.getGameBarIndexByGameType(7)-3),t.theNewForNN&&(t.theNewForNN.visible=-1==e.GTS.userCtrl.enteredGameList.indexOf(CONST.tableType.niuNiu),t.theNewForNN.y=130+t.grp_money.height+33*t.getGameBarIndexByGameType(8)-3)},r.prototype.scale_money_labels_width=function(){var e=this,t=180,r=.5;e.label_money1.scaleX=e.label_money1.width>t?r*(t/e.label_money1.width):r,e.label_money2.scaleX=e.label_money2.width>t?r*(t/e.label_money2.width):r,e.label_money3.scaleX=e.label_money3.width>t?r*(t/e.label_money3.width):r},r.prototype.check_grp_money_in_slot_height=function(){var e=this,t=0;e.grp_money1.visible||t++,e.grp_money2.visible||t++,e.grp_money3.visible||t++;var r=75-25*t;e.grp_money_in_slot.height=r},r.prototype.autoScaleBitmapWidth=function(){var e=this;if(e.label_money.textWidth){e.label_money.scaleX=e.label_money.width>110?110/e.label_money.width:1,e.label_money.removeEventListener(egret.Event.RENDER,e.autoScaleBitmapWidth,e)}},r.prototype._changeGameBar=function(){var e=this;e.gameBar.selectedIndex=1,e._selectedIndex=e.gameBar.selectedIndex},r.prototype._tap_gameBar=function(){e.playAudio("btnclick"),this.doTapGameBar()},r.prototype.doTapGameBar=function(){var t=this;t.curGameBarIndex=t._selectedIndex,0==t.changeGameBarIndex(t._selectedIndex)?0==t.changeGameBarIndex(t.gameBar.selectedIndex)?(e.RCD.mgr.recordState(e.RCD.RcdState.MENU_MULTI),e.GTS.mgr.getMultiRangeList((function(r){r.length>0&&(t.limitSelectDlg||(t.limitSelectDlg=e.COMM.LimitSelectDlg.show({multiRangeList:r,callback:t.selectLimit,target:t})))}))):e.GTS.mgr.exitMultiBaccarat((function(){t.enterRoomList(t.gameBar.selectedIndex)})):0==t.changeGameBarIndex(t.gameBar.selectedIndex)?(e.RCD.mgr.recordState(e.RCD.RcdState.MENU_MULTI),e.GTS.mgr.getMultiRangeList((function(r){r.length>0?t.limitSelectDlg||(t.limitSelectDlg=e.COMM.LimitSelectDlg.show({multiRangeList:r,callback:t.selectLimit,target:t})):(t.tableCtrl&&t.tableCtrl.exitTable((function(){t.tableCtrl=null})),mo.emitter.emit(CONST.enterTabelListEvent.mto))}))):t.tableCtrl?t.tableCtrl.exitTable((function(){t.tableCtrl=null,t.enterRoomList(t.gameBar.selectedIndex)})):t.enterRoomList(t.gameBar.selectedIndex),t._selectedIndex=t.gameBar.selectedIndex,t.updateWallet(),t.checkBtnGameInfo()},r.prototype.checkBtnGameInfo=function(e){void 0===e&&(e=!1);this.changeGameBarIndex(this.gameBar.selectedIndex)},r.prototype.enterRoomList=function(t){var r=this;switch(r.changeGameBarIndex(t)){case CONST.tableType.all:e.GTS.mgr.getMultiRangeList((function(t){t.length>0?r.limitSelectDlg||(r.limitSelectDlg=e.COMM.LimitSelectDlg.show({multiRangeList:t,callback:r.selectLimit,target:r})):mo.emitter.emit(CONST.enterTabelListEvent.mto)}));break;case CONST.tableType.baccarat:mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_BACC);break;case CONST.tableType.dragonTiger:mo.emitter.emit(CONST.enterTabelListEvent.dt),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_DT);break;case CONST.tableType.roulette:mo.emitter.emit(CONST.enterTabelListEvent.rlt),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_RLT);break;case CONST.tableType.sicBo:mo.emitter.emit(CONST.enterTabelListEvent.sicbo),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_DICE);break;case CONST.tableType.slot:e.COMM.layerMgr.pushLayer(e.COMM.SlotRoomList),mo.emitter.emit("slotDataPC",e.GTS.mgr.getPPAll()),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_PP);break;case CONST.tableType.BB:mo.emitter.emit(CONST.enterTabelListEvent.bb);break;case CONST.tableType.niuNiu:console.log("點擊牛牛按鈕！",CONST.enterTabelListEvent.niuniu),mo.emitter.emit(CONST.enterTabelListEvent.niuniu),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_NIUNIU)}e.muteMusic(!1),e.playMusic("main")},r.prototype.selectLimit=function(t,r){var o=this;o.limitSelectDlg=null,t?0==o.changeGameBarIndex(o._selectedIndex)?o.selectLimitIndex!=r&&e.GTS.mgr.exitMultiBaccarat((function(){mo.emitter.emit(CONST.enterTabelListEvent.mto),o._selectedIndex=o.gameBar.selectedIndex,o.selectLimitIndex=r})):(o.tableCtrl?o.tableCtrl.exitTable((function(){o.tableCtrl=null,mo.emitter.emit(CONST.enterTabelListEvent.mto)})):mo.emitter.emit(CONST.enterTabelListEvent.mto),o.selectLimitIndex=r,o._selectedIndex=o.gameBar.selectedIndex):(o._selectedIndex=o.curGameBarIndex,o.gameBar.selectedIndex=o._selectedIndex)},r.prototype._tap_grp_add_friend=function(){e.playAudio("btnclick");var t=e.GTS.mgr.isUplineUser()&&e.GTS.mgr.havePlanType(),r=e.GW.mgr.channelType;if(t)if(r==CONST.channelType.normal)switch(e.GTS.mgr.planType()){case CONST.rentPlan.planType.round:e.COMM.FriendInvitation.show();break;case CONST.rentPlan.planType.point:e.COMM.FriendInvitationByPoint.show()}else r==CONST.channelType.point?e.COMM.FriendInvitationByPointAgent.show():r==CONST.channelType.round&&e.COMM.FriendInvitationAgent.show();else switch(e.GW.mgr.rentPlan){case e.GW.RentPlanInChannel.ROUND:e.COMM.FriendInvitation.show();break;case e.GW.RentPlanInChannel.POINT:e.COMM.FriendInvitationByPoint.show();break;case e.GW.RentPlanInChannel.ALL:e.COMM.PlanTypeSelection.show()}},r.prototype._tap_btn_recharge=function(){return e.playAudio("btnclick"),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):void e.GW.mgr.openPage_recharge()},r.prototype._tap_btn_playerInfo=function(){return e.playAudio("btnclick")},r.prototype._tap_btn_asset=function(){e.playAudio("btnclick")},r.prototype._tap_btn_intro=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.AGREEMENT),e.COMM.UserAgreement.show()},r.prototype._tap_btn_gameInfo=function(){e.playAudio("btnclick");var t=this.changeGameBarIndex(this.gameBar.selectedIndex);e.RCD.mgr.recordState(e.RCD.RcdState.GAME_RULES),e.COMM.RuleLoader.show({type:t})},r.prototype._tap_btn_mail=function(){return e.playAudio("btnclick"),-1==e.GTS.userCtrl.type?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):void e.COMM.MailBox.show()},r.prototype._tap_btn_alert=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.WORLD_MSG),e.COMM.MsgRecord.show()},r.prototype._tap_btn_sysSetting=function(){e.playAudio("btnclick"),e.RCD.mgr.recordState(e.RCD.RcdState.OPEN_SETTING),e.COMM.SoundSettingDlg35.show()},r.prototype.updateSysMsg=function(t){t.type==CONST.sysMsgType.bonus&&t.args&&(t.content=e.COMM.BONUS.getBonusMessage(t),t.is_multi_lang=!1),this.sysMsgList.push(t),this.showSysMsg()},r.prototype._worldMsgRm=function(e){var t=this;t.sysMsgList=t.sysMsgList.filter((function(t){return t.id!=e})),t.cachePlayingSysMsgId==e&&(egret.Tween.removeTweens(t.label_notice),t.isPlay=!1,t.label_notice.x=1e4,t.showSysMsg())},r.prototype.showSysMsg=function(){var t=this;if(0!=t.sysMsgList.length&&!t.isPlay){var r=t.sysMsgList.shift();if(r&&r.content){var o=e.GTS.mgr.verifyEmoji(r.content);t.isPlay=!0,t.cachePlayingSysMsgId=r.id,egret.Tween.removeTweens(t.label_notice),t.label_notice.text=o.replace(/\n/gi,""),t.label_notice.x=t.grp_notice.width;var a=-t.label_notice.width-10,i=(t.label_notice.width+t.grp_notice.width+2)/t.sysMsgSpeed;egret.Tween.get(t.label_notice).to({x:a},i).call((function(){egret.Tween.removeTweens(t.label_notice),t.isPlay=!1,t.showSysMsg()}),t)}}},r.prototype.gotoGame=function(t){if(t){var r=this;e.GTS.mgr.getTableCtrlFromServer(t,(function(t){var o="";switch(t.type){case CONST.tableType.baccarat:o=CONST.gameAPI.BACCARAT;break;case CONST.tableType.dragonTiger:o=CONST.gameAPI.DRAGON_TIGER;break;case CONST.tableType.roulette:o=CONST.gameAPI.ROULETTE;break;case CONST.tableType.sicBo:o=CONST.gameAPI.SIC_BO}if(e.GW.mgr.ifGameOpen(o))switch(t.type){case CONST.tableType.baccarat:case CONST.tableType.dragonTiger:case CONST.tableType.sicBo:case CONST.tableType.roulette:case CONST.tableType.slot:r.gameBar.selectedIndex=r.getGameBarIndexByGameType(t.type),r.doTapGameBar();default:return}else r.gameBar.selectedIndex=1,r._selectedIndex=r.gameBar.selectedIndex,r.enterRoomList(r.gameBar.selectedIndex),console.log("此遊戲房未開啟")}),(function(){r.gameBar.selectedIndex=1,r._selectedIndex=r.gameBar.selectedIndex,r.enterRoomList(r.gameBar.selectedIndex)}))}},r.prototype._tap_slotOnlyBar=function(){e.playAudio("btnclick")},r.prototype.tapSlotOnlyBar=function(e){var t=e.itemIndex;mo.emitter.emit("onlySlotPC",t)},r.prototype.preloadBeginAnimation=function(){var e=this,t=e.image_FullScreen.x;e.image_FullScreen.x=-2e3,e.image_FullScreen.visible=!0,e.animationTimer=mo.TM.setInterval4Tick((function(){if(e.animationIndex++,e.animationIndex>24)return e.image_FullScreen.x=t,void e.stopGameBeginAnimation2(null);var r="lock_00"+e.animationIndex;e.animationIndex>=10&&(r="lock_0"+e.animationIndex),e.image_FullScreen.source=r}),40)},r.prototype.showGameBeginAnimation1=function(e){var t=this;t.image_FullScreen.visible=!0,t.image_rect.visible=!0,t.image_rect.alpha=.9,t.animationTimer=mo.TM.setInterval4Tick((function(){if(t.animationIndex++,t.animationIndex>t.animationMaxNum)t.stopGameBeginAnimation1(e);else{var r="lock_00"+t.animationIndex;t.animationIndex>=10&&(r="lock_0"+t.animationIndex),t.image_FullScreen.source=r}}),40)},r.prototype.stopGameBeginAnimation1=function(e){var t=this;t.animationTimer&&(mo.TM.clearInterval(t.animationTimer),t.animationTimer=null),mo.TM.setTimeout4Tick((function(){t.animationIndex=0,egret.Tween.get(t.image_FullScreen).to({alpha:0},500).call((function(){t.image_FullScreen.visible=!1,t.image_FullScreen.alpha=1,egret.Tween.removeTweens(t.image_FullScreen)}),t),egret.Tween.get(t.image_rect).to({alpha:0},500).call((function(){egret.Tween.removeTweens(t.image_rect),t.stopGameBeginAnimation2(e)}),t)}),200)},r.prototype.stopGameBeginAnimation2=function(e){var t=this;t.animationTimer&&(mo.TM.clearInterval(t.animationTimer),t.animationTimer=null),t.animationIndex=-1,t.image_rect.visible=!1,t.image_rect.alpha=.9,t.image_FullScreen.visible=!1,t.image_FullScreen.alpha=1,t.image_FullScreen.source="lock_000",e&&e()},r.prototype.setUnreadMailNum=function(){var t=this;return t.isMailOpen&&-1!=e.GTS.userCtrl.type?e.GW.mgr.channel.disableMailSystem?(t.btn_mail.visible=!e.GW.mgr.channel.disableMailSystem,void(t.grp_unread.visible=!e.GW.mgr.channel.disableMailSystem)):void e.GTS.mgr.getMailList(1,e.COMM.MailState.UNREAD,(function(e){return e.mailList&&0!=e.mailList.length?(t.label_unreadNum.text=e.mailList.length>9?"9+":e.mailList.length+"",void(t.grp_unread.visible=!0)):void(t.grp_unread.visible=!1)})):void 0},r.prototype.updateUnreadMailNum=function(t){var r=this;if(r.isMailOpen&&-1!=e.GTS.userCtrl.type&&!e.GW.mgr.channel.disableMailSystem){var o=(t.event,CONST.mailEvent.bonus,0);setTimeout((function(){return r.grp_unread.visible?void("9+"!=r.label_unreadNum.text&&(r.label_unreadNum.text=8==parseFloat(r.label_unreadNum.text)?"9+":parseFloat(r.label_unreadNum.text)+1+"")):(r.label_unreadNum.text="1",void(r.grp_unread.visible=!0))}),o)}},r}(mo.EUI.MenuLayer);t.BchtBaseTopBar=r,__reflect(r.prototype,"G.BCHT.BchtBaseTopBar")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){return r.apply(this,arguments)||this}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var t=this;t.BetType=CONST.betType.baccarat,t.hasConfirmed=!1,t.keepWinsNum=0,t.keepLosesNum=0,t.keepBetDragon=0,t.keepBetTiger=0,t.sortChipsArray=[],t.tableTimer=new e.TableTimer},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);this._setupLuzuPainter()},o.prototype._setupLuzuPainter=function(){var t=this,r={gridSize:35,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};r.res=e.BACC.LZllRes,t.zhuPanLuPainter=new e.BACC.ZhuPanLuPainter(t.scr_zhupanLu,r);var o={gridSize:35,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};o.res=e.BACC.LZllRes,t.daluPainter=new e.BACC.DaluPainter(t.scr_dalu,o);var a={gridSize:22,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};a.res=e.BACC.LZllRes,t.dayanLuPainter=new e.BACC.AnalysisLuPainter(t.scr_dayanLu,e.BACC.AnalysisLuType.DAYAN,a);var i={gridSize:22,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};i.res=e.BACC.LZllRes,t.xiaoLuPainter=new e.BACC.AnalysisLuPainter(t.scr_xiaolu,e.BACC.AnalysisLuType.XIAOLU,i);var n={gridSize:22,showGrid:!0,isScroll:!0,maxCol:65,maxRow:6};n.res=e.BACC.LZllRes,t.yueyouLuPainter=new e.BACC.AnalysisLuPainter(t.scr_yueyouLu,e.BACC.AnalysisLuType.YUEYOU,n)},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var e=this;e.tableCtrl=e.data.param.tableCtrl,e.baccShowCard&&e.baccShowCard.setData({tabelCtrl:e.tableCtrl})},o.prototype._roadCardClicked=function(){},o.prototype._onChangeVideoHost=function(t,r,o){var a=this;if(a.tableCtrl){mo.MSG.show(mo.D.langCodeToTxt("on_change_video_host")),t&&t.clear(),t=new e.VideoMgr,egret.isNative||(t.needToGetNetworkStatus=!0),a.onEmitter(t,e.VideoMgr.ON_VIDEO_CHANGE_HOST,a._onChangeVideoHost.bind(a,t,r,o)),a.img_bg&&(a.img_bg.visible=!0);for(var i=e.GW.mgr.getAvailableVideoHost(),n=0,s=0;s<i.length;s++)if(i[s].host===mo.PROJ.videoHost){n=s;break}mo.PROJ.videoHost=-1==n?i[0].host:n<i.length-1?i[n+1].host:i[0].host,t.play(a.tableCtrl.getVideoToPlay(),r)}},o.prototype.onEnter=function(){var t=this;r.prototype.onEnter.call(this),t.grtScroller=new e.COMM.GrtScroller,t.grtScroller.setData({tableCode:t.tableCtrl.tableCode,itemType:e.GoodRoadItemType.noRoad}),t.areaGoodRoad.addChild(t.grtScroller),t.grtScroller.refreshRoadCardSwitch(),mo.emitter.on(CONST.goodRoadTip.ROAD_CARD_CLICKED,t._roadCardClicked,t),t.videoMgr=new e.VideoMgr,t.onEmitter(t.videoMgr,e.VideoMgr.ON_VIDEO_CHANGE_HOST,t._onChangeVideoHost.bind(t,t.videoMgr,t.grp_video,e.videoCutType.origin)),t.justEnterGame=!0,t.chat.visible=!0,t.chat.tableCtrl=t.tableCtrl,t.analyst=new e.BACC.LuzhuAnalyst(t.tableCtrl.code),t.oldCode=t.tableCtrl.code,t.onEmitter(t.tableCtrl,CONST.BBT_table.openRound,t._openRound),t.onEmitter(t.tableCtrl,CONST.BBT_table.bet,t._bet),t.onEmitter(t.tableCtrl,CONST.BBT_table.shuffle,t._shuffle),t.onEmitter(t.tableCtrl,CONST.BBT_table.payout,t._payout),t.onEmitter(t.tableCtrl,CONST.BBT_table.scanCard,t._scanCard),t.onEmitter(t.tableCtrl,CONST.BBT_table.betStop,t._betStop),t.onEmitter(t.tableCtrl,CONST.BBT_table.anchorSubscribe,t._anchorSubscribe),t.onEmitter(t.tableCtrl,CONST.BBT_table.anchorGetControl,t._receiveTableEvent2),t.onEmitter(t.tableCtrl,CONST.BBT_table.anchorReleaseControl,t._receiveTableEvent2),t.onEmitter(t.tableCtrl,CONST.BBT_table.applyOvertime,t._applyOverTime),mo.emitter.on("AnchorDisplayChat",t.onChat,t),t.onEmitter(t.chat.emitter,"msgShow",(function(e){-1==e.userId&&t.msgShow(1,e.content)})),t._refreshRoundInfo(),t._refreshBetInfo(),t._gameStateChange(t.tableCtrl.gameState),t.label_timer.text="00:00",t.label_control1.text=e.GA.mgr.getMainControllerName(),t.label_control2.text=e.GA.mgr.getSubControllerName(),t._refreshLuzhu(),e.GA.mgr.getTableListForDisplay(),t.bchtAnchorDisplayVipSection.setTableCtrl(t.tableCtrl)},o.prototype._anchorSubscribe=function(e){mo.MSG.show(e.user.nick+" add you as favorite!")},o.prototype._bet=function(){console.log("下注！！！！！！！！！"),this._refreshBetInfo()},o.prototype._refeshBetInfo=function(){var t=e.GA.mgr.getCurTableCtrl();if(t){var r=t.roundCtrl,o=e.GA.mgr.getMyControllerId(),a=r.getBetMoneyAnchor(o,CONST.betType.baccarat.player),i=r.getBetMoneyAnchor(o,CONST.betType.baccarat.banker),n=r.getBetCountAnchor(o,CONST.betType.baccarat.player),s=r.getBetCountAnchor(o,CONST.betType.baccarat.banker);this.label_roomPlayerNumber.text=n+s+"",this.bchtRateChart.setChart([a,i],[n,s],310,26)}},o.prototype._refreshBetInfo=function(){var t=e.GA.mgr.getCurTableCtrl();if(t){var r=t.roundCtrl,o=(e.GA.mgr.getMyControllerId(),r.getBetMoneyAll4Dis(CONST.betType.baccarat.player)),a=r.getBetMoneyAll4Dis(CONST.betType.baccarat.banker),i=r.getBetCountAll(CONST.betType.baccarat.player),n=r.getBetCountAll(CONST.betType.baccarat.banker);this.label_roomPlayerNumber.text=i+n+"",this.bchtRateChart.setChart([o,a],[i,n],310,26)}},o.prototype._resetChart=function(){this.label_roomPlayerNumber.text="0",this.bchtRateChart.setChart([0,0],[0,0],310,26)},o.prototype.onChat=function(e){console.log("onChat",e);var t={chat:{content:e.content,userName:e.userName},event:"chat"};this.chat.onChat(t)},o.prototype._receiveTableEvent2=function(e){e.anchorList&&(this.label_control1.text=e.anchorList.main?e.anchorList.main.name:"--",this.label_control2.text=e.anchorList.sub?e.anchorList.sub.name:"--")},o.prototype._refreshRoundInfo=function(){var t=this;if(!t.isHaveTimeOut){t.label_deskNum.text=t.tableCtrl.code||"",t.label_dealer.text=t.tableCtrl.dealerName||"",t.label_serialNum.text=t.tableCtrl.roundCtrl.code||"";var r=e.GA.mgr.getControlStatus();t.label_control1.text=r.controller.main,t.label_control2.text=r.controller.sub,t.label_round.text=t.tableCtrl.roundCtrl.index?mo.STR.fill(t.tableCtrl.roundCtrl.index,"000"):"000"}},o.prototype._refreshLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList||[],r=e.analyst;0===t.length&&e.analyst.clearData();for(var o=0,a=t.length;a>o;o++)t[o].results&&r.receiveHistoryMsg({results:t[o].results,roundNo:t[o].code,cards:[]});e.zhuPanLuPainter.setZhuPanData(r.getZhuPanData(),!e.justEnterGame),e.daluPainter.setDaLuData(r.getDaLuData(),!e.justEnterGame),e.dayanLuPainter.setAnalysisData(r.getDaYanLuData(),!e.justEnterGame),e.xiaoLuPainter.setAnalysisData(r.getXiaoLuData(),!e.justEnterGame),e.yueyouLuPainter.setAnalysisData(r.getYueYouLuData(),!e.justEnterGame)},o.prototype.msgShow=function(e,r){var o=this;if(o.getChildByName("msgComp")){o.getChildByName("msgComp").msgShow(e,r)}else{var a=new t.BchtMsgComp(0,0,o.grp_video.width,o.grp_video.height,!1);a.name="msgComp",a.x=o.grp_video.x,a.scaleX=.5,a.scaleX=.5,o.addChild(a),a.msgShow(e,r)}},o.prototype.stopBet=function(e){e&&(this.label_timer.text="00:00",this._clearTimer())},o.prototype._applyOverTime=function(){var e=this,t=e.tableCtrl,r=t.getBetStopTime();r||(r=mo.DATE.date()),e._startTimer(1e3*t.roundCtrl.betSec,r)},o.prototype._startTimer=function(e,t){var r=this;e&&t&&(r._clearTimer(),r.endTime=t,r.endTime.getTime()-mo.DATE.now()>0&&mo.tick(r._updateTimer,r))},o.prototype._updateTimer=function(){var e=this,t=e.endTime.getTime()-mo.DATE.now();if(0>=t)return e.label_timer.text="00:00",void e._clearTimer();var r=Math.ceil(t/1e3),o=mo.DATE.toHMS(1e3*r);e.label_timer.text=mo.STR.fill(o[1],"00")+":"+mo.STR.fill(o[2],"00")},o.prototype._clearTimer=function(){mo.clearTick(this._updateTimer,this)},o.prototype._gameStateChange=function(e){var t=this,r="";switch(t.curGameState=e,e){case CONST.gameState.betting:r="Betting";var o=t.tableCtrl.getBetStopTime();o?t._startTimer(1e3*t.tableCtrl.roundCtrl.betSec,o):t._clearTimer(),t.stopBet(!1);break;case CONST.gameState.shuffle:r="Shuffle",t.stopBet(!0);break;case CONST.gameState.stopBet:r="Stop Bet",t.stopBet(!0);break;case CONST.gameState.payout:r="Payout",t.stopBet(!0)}t.label_roundState.text=r,t._refreshRoundInfo()},o.prototype._openRound=function(){var e=this;e.oldCode=e.tableCtrl.code,e.justEnterGame=!1,e._refreshLuzhu(),e._gameStateChange(e.tableCtrl.gameState),e._resetChart()},o.prototype._shuffle=function(){var e=this;e.justEnterGame=!1,e._refreshLuzhu(),e._gameStateChange(e.tableCtrl.gameState),e._resetChart()},o.prototype._payout=function(){var e=this;e.justEnterGame=!1,e._refreshLuzhu(),e._gameStateChange(e.tableCtrl.gameState)},o.prototype._scanCard=function(){var e=this;e.justEnterGame=!1,e._gameStateChange(e.tableCtrl.gameState)},o.prototype._betStop=function(){var e=this;e.justEnterGame=!1,e._gameStateChange(e.tableCtrl.gameState)},o.prototype.onExit=function(){var e=this;r.prototype.onExit.call(this),e.unEmitter(),mo.emitter.un(CONST.goodRoadTip.ROAD_CARD_CLICKED,e._roadCardClicked,e),mo.emitter.un("AnchorDisplayChat",e.onChat,e)},o}(mo.EUI.Layer);t.BchtAnchorDisplay=r,__reflect(r.prototype,"G.BCHT.BchtAnchorDisplay")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t}(mo.EUI.Layer);e.BchtAnchorDisplayBg=t,__reflect(t.prototype,"G.BCHT.BchtAnchorDisplayBg")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.BASE.PlayerEventRenderer,o=function(t){function o(){var e=t.apply(this,arguments)||this;return e.msgList=[],e.curNickList=[],e.curBonusMsgNum=0,e.isOpenVipFeature=!0,e.maxMsgNum=50,e.maxPayoutMsgNum=7,e.maxBonusMsgNum=7,e.timeSpace=1500,e.maxMsgCanSeen=10,e.msg_lucky_bonus="Bonus ",e.msg_limit_bonus="Bonus ",e.msg_payout="Payout ",e.msg_bet="Bet ",e.color_payout=16776960,e.color_bet=16777215,e.color_bonus=65280,e}return __extends(o,t),o.prototype._initProp=function(){t.prototype._initProp.call(this);this._Item_list_msg=r,this.msgList=[]},o.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.grp_open.visible=r.isOpenVipFeature,r.grp_not_open.visible=!r.isOpenVipFeature,r.curMsgUINum=0,r.scroller_msg.scrollPolicyH=r.scroller_msg.scrollPolicyV="false",r.anchorId=e.GA.mgr.getMyControllerId(),r.isOpenVipFeature&&e.GA.mgr.NetMgr.onNotify(CONST.bstBizType.tableEvent,r._onTableEvent,r)},o.prototype.setTableCtrl=function(e){this._tableCtrl=e},o.prototype.onExit=function(){t.prototype.onEnter.call(this);var r=this;r.isOpenVipFeature&&e.GA.mgr.NetMgr.unNotify(CONST.bstBizType.tableEvent,r._onTableEvent,r)},o.prototype._onTableEvent=function(e){var t=this;if(!mo.OBJ.isEmpty(e)&&(e=mo.DS.deCode(e,"G.ISyncData")).event)switch(e.event){case CONST.ANCHOR_table.notifyBonus:t._handleBonus(e);break;case CONST.BBT_table.bet:t._handleBet(e);break;case CONST.ANCHOR_table.notifyPayout:t._handlePayout(e)}},o.prototype._handleBonus=function(t){console.log("Got bonus msg ->",t);var r=this;if(!r.isOutOfBonusLimit()){var o=t.bonusData.luckyBonusUser||[],a=t.bonusData.limitBonusUser||[],i=o.concat(a);i=i.filter((function(e){return e.anchorId==r.anchorId}));for(var n=(i=r.sortByValue(i,"bonus")).length>r.maxBonusMsgNum?r.maxBonusMsgNum:i.length,s=0;n>s;s++){var l=i[s].nick;if(!r.hasThisGuyGotBonus(l)&&!r.isOutOfBonusLimit()){r.curNickList.push(l),r.curBonusMsgNum++;var c=(i[s].userId,i[s].type,i[s].isBig,i[s].freeSpin,i[s].bonus),p=i[s].currency;console.log("currency ->",p),c=e.COMM.FX.calcMoneyToCNY(p,c);var _=r.msg_lucky_bonus+e.UTIL.NUM.getSplitNumStr(c);r._putMsgInQueue({nick:l,event:_,color:r.color_bonus})}}}},o.prototype._handlePayout=function(t){console.log("Got payout msg ->",t);var r=this,o=t.anchorPayoutData.payoutList;o=o.filter((function(e){return e.anchorId==r.anchorId}));for(var a=(o=r.sortByValue(o,"payout")).length>r.maxPayoutMsgNum?r.maxPayoutMsgNum:o.length,i=0;a>i;i++){var n=(o[i].userId,o[i].nick),s=o[i].payout,l=o[i].currency;console.log("currency ->",l),s=e.COMM.FX.calcMoneyToCNY(l,s);var c=r.msg_payout+e.UTIL.NUM.getSplitNumStr(s);r._putMsgInQueue({nick:n,event:c,color:r.color_payout})}},o.prototype._handleBet=function(t){console.log("Got bet msg ->",t);var r=this;if(t.anchor&&t.anchor.id==r.anchorId&&t.bet.bet){var o=t.bet.subBetList[t.bet.subBetList.length-1];if(o.anchorCode){var a=0;for(var i in o.betDetail)a+=o.betDetail[i];var n=t.bet.currency;console.log("currency ->",n),a=e.COMM.FX.calcMoneyToCNY(n,a);var s=(t.user.id,t.user.nick),l=r.msg_bet+e.UTIL.NUM.getSplitNumStr(a);r._putMsgInQueue({nick:s,event:l,color:r.color_bet}),r.initialBonusNum(),r.initialNickList()}}},o.prototype._putMsgInQueue=function(e){var t=this;t.msgList.push(e),t.timer||(t.timer=mo.TM.setInterval4Tick((function(){t._handleMsgQueue()}),t.timeSpace))},o.prototype._handleMsgQueue=function(){var e=this,t=e.msgList.shift();if(!t)return mo.TM.clearInterval(e.timer),void(e.timer=null);var o=new r;o.setRenderer(t.nick,t.event,t.color),e.list_msg.addChild(o),e.curMsgUINum++,e.curMsgUINum>e.maxMsgCanSeen&&(e.curMsgUINum--,e.list_msg.removeChildAt(0)),e.scroller_msg.validateNow(),e.scroller_msg.viewport.scrollV=e.scroller_msg.viewport.contentHeight<=e.scroller_msg.height?0:e.scroller_msg.viewport.contentHeight-e.scroller_msg.height},o.prototype._handleMsg=function(e){for(var t=this;t.msgList.length>t.maxMsgNum;)t.msgList.shift();t.msgList.push(e),t.list_msg.removeChildren();for(var o=0;o<t.msgList.length;o++){var a=new r;a.setRenderer(t.msgList[o].nick,t.msgList[o].event),t.list_msg.addChild(a)}t.scroller_msg.validateNow(),t.scroller_msg.viewport.scrollV=t.scroller_msg.viewport.contentHeight<=t.scroller_msg.height?0:t.scroller_msg.viewport.contentHeight-t.scroller_msg.height},o.prototype.initialNickList=function(){this.curNickList=[]},o.prototype.initialBonusNum=function(){this.curBonusMsgNum=0},o.prototype.hasThisGuyGotBonus=function(e){return-1!=this.curNickList.indexOf(e)},o.prototype.isOutOfBonusLimit=function(){return this.curBonusMsgNum>this.maxBonusMsgNum},o.prototype.sortByValue=function(e,t){var r=e.slice();return r.sort((function(e,r){return e[t]<r[t]?1:-1})),r},o}(mo.EUI.Comp);t.BchtAnchorDisplayVipSection=o,__reflect(o.prototype,"G.BCHT.BchtAnchorDisplayVipSection")}(e.BCHT||(e.BCHT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=this;egret.isNative&&(mo.emitter.on("browser.beforeOpen",e._onBrowserBeforeOpen_native,e),mo.emitter.on("browser.close",e._onBrowserClose_native,e))},r.prototype.onExit=function(){t.prototype.onExit.call(this);var e=this;egret.isNative&&(mo.emitter.un("browser.beforeOpen",e._onBrowserBeforeOpen_native,e),mo.emitter.un("browser.close",e._onBrowserClose_native,e))},r.prototype._onBrowserBeforeOpen_native=function(){this.visible=!1},r.prototype._onBrowserClose_native=function(){this.visible=!0},r.prototype.show=function(){t.prototype.show.call(this);var r=this,o=(r.moduleParam.tableCtrl,{param:r.data.param,tray:r});return e.ARLT.ARltTable.show(o),e.ARLT.ARltRightSlider.show(o),e.ARLT.ARltBottomPanel.show(o),this},r.prototype.dtor=function(){t.prototype.dtor.call(this)},r}(mo.EUI.Layer);t.ARltGameScene=r,__reflect(r.prototype,"G.ARLT.ARltGameScene");var o=new mo.ModuleCfgItem;o.targetClass=r,o.onPreAsync((function(e,t){t()})),mo.moduleMgr.registerModule(o),e.GC.gc.registerClass(r.__className,e.ARLT.ARltGameScene)}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=e.COMM.ARltPayout,o=e.COMM.IBetMgrEvent,a=function(t){function a(){var e=t.apply(this,arguments)||this;return e.animationIndex=1,e.animationMaxIndex=8,e.isOpenAutoBet=!1,e.isConfirm=!1,e.seenGames=[],e.noBetRoundCount=0,e}return __extends(a,t),a.prototype._initProp=function(){t.prototype._initProp.call(this)},a.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.betMgr=new e.ARLT.ARltBetMgr},a.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;r.data.param&&(r.betMgr.tableCtrl=r.tableCtrl);var o=e.GTS.userCtrl.onceOptionAry;if(o)for(var a=0;a<o.length;a++)r.seenGames.push(o[a].type)},a.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,a=r.tableCtrl.roundCtrl.srcResults||[];r.justEnterGame=!0,r.canShowPayoutLayer=!0,r.onEmitter(r.betMgr,o.ON_BET_AMOUNT_CHG,r._betNumChanged),r.onEmitter(r.tableCtrl,CONST.BBT_table.scanCard,r._onScanCard),mo.emitter.on(e.ARLT.ARltBetArea.ARlt_On_Bet_Area_Tap,(function(){r.autoBetSwitchState(!1),r.btn_confirm.currentState="normal"}),r),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!0,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!0,r.onEmitter(e.VideoMgr,"networkStatus",(function(t){null!=t&&(e.COMM.layerMgr.baseTopBar.img_wifi.source="ico_wifi_"+t)})),e.GTS.netMgr.onNotify(CONST.bstBizType.bonusNotifyTable,r.showBonus,r),r.onEmitter(mo.emitter,"onRoomShortcutExpand",r.onRoomShortcutExpand),r.chipBar4.tableCtrl=r.tableCtrl,r.initBetArea(),r.autoBetSwitchState(!1),r.aRltBetArea.changeOddsTxt(a),r.grp_result.visible=!1,r.setWheelResult(a[a.length-1]),r.setWinEffect(a);var i=r.tableCtrl.gameState;r._gameStateChange(i),r._refreshBtns(),e.GameGuide.GameGuideView.show({type:e.GameGuide.GameGuideType.ARLT_TABLE,haveSeenTipTitles:e.GTS.userCtrl.getLogOnceOpt(e.GameGuide.GameGuideType.ARLT_TABLE),treeRoot:r}),e.COMM.layerMgr.baseTopBar.img_wifi.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_vid_quality.visible=!0,e.COMM.layerMgr.baseTopBar.btn_change_video.visible=!0,e.COMM.layerMgr.baseTopBar.label_video_index.visible=!0},a.prototype.resetGamePage=function(){var e=this,t=e.tableCtrl.roundCtrl.srcResults||[];e.canShowPayoutLayer=!1,e._refreshBtns(),e._recoverBetInfo(),e.aRltBetArea.changeOddsTxt(t),e.grp_result.visible=!1,e.setWheelResult(t[t.length-1]),e.setWinEffect(t);var r=e.tableCtrl.gameState;e._gameStateChange(r)},a.prototype.onRoomShortcutExpand=function(){},a.prototype.initBetArea=function(){var e=this;e.aRltBetArea.init(e.betMgr,e.chipBar4,e.tableCtrl,e._payoutShow.bind(e))},a.prototype.initZoomScreen=function(){},a.prototype._onSettlement=function(){},a.prototype._openRound=function(){var e=this;e.justEnterGame=!1,e.canShowPayoutLayer=!0,e.betAreaReset(),e.setWheelResult(),e.isOpenAutoBet&&e.autoBet(),e.noBetRoundCount++,e.setNoBetHint(e.noBetRoundCount),t.prototype._openRound.call(this)},a.prototype._betStop=function(){var e=this;e.justEnterGame=!1,e.tableCtrl.playAudio("time_out_notice"),e._gameStateChange(e.tableCtrl.gameState)},a.prototype._onScanCard=function(){(this.tableCtrl.roundCtrl.srcResults||[]).length},a.prototype._payout=function(){var t=this;if(t.justEnterGame=!1,t._onPayout_audio(),t.tableCtrl){var o=t.tableCtrl.gameState;if(t.canShowPayoutLayer&&o!=CONST.gameState.betting){var a=t.tableCtrl.roundCtrl;if(a.results&&0!=a.results.length){var i=e.UTIL.calPayout(t.tableCtrl.roundCtrl,t.tableCtrl.betCtrl),n=i.payoutDetail,s=i.payout,l=i.refund;if(!mo.OBJ.isEmpty(n)&&s>0&&s>l)t.canShowPayoutLayer=!1,r.show({tableCtrl:t.tableCtrl,isHideThemePartRect:!0}).onClose((function(){})),t.tableCtrl.playAudio("coins_drop"),t.aRltBetArea.showMask();else e.COMM.BONUS.showBonus(),setTimeout((function(){e.COMM.BONUS.showBonus()}),2e3);t._gameStateChange(t.tableCtrl.gameState)}}}},a.prototype._shuffle=function(){this.justEnterGame=!1,t.prototype._shuffle.call(this),this.betAreaReset()},a.prototype._gameStateChange=function(t){var r=this,o=r.tableCtrl;if(r.isConfirm)r.isConfirm=!1;else{if(r.curGameState=t,r.justEnterGame&&t!=CONST.gameState.shuffle&&r._recoverBetInfo(),-1==r.seenGames.indexOf("arlt_table")){var a=e.GTS.userCtrl.onceOptionAry;if(a)for(var i=0;i<a.length;i++)r.seenGames.push(a[i].type)}switch(t){case CONST.gameState.betting:var n=mo.DATE.now(),s=r.tableCtrl.notifyMs-(n-r.tableCtrl.roundCtrl.startTime.getTime());s>0?(r.stopBet(!0),setTimeout((function(){r.stopBet(!1),-1!=r.seenGames.indexOf("arlt_table")&&(r.setChipNBtnBarVisibility(!0),r.aRltBetArea.expand(!0),r.aRltBetArea.setWinLightVisibility(!1),r.btn_confirm.currentState="disabled")}),s)):(r.stopBet(!1),-1!=r.seenGames.indexOf("arlt_table")&&(r.setChipNBtnBarVisibility(!0),r.aRltBetArea.expand(!0),r.aRltBetArea.setWinLightVisibility(!1),r.btn_confirm.currentState="disabled")),r.btn_again.enabled=r.betMgr.hasPreRoundBetHistory(),r.btn_again.visible=r.btn_again.enabled,r.btn_again.enabled&&r.checkIsBet()&&(r.btn_double.enabled=!1,r.btn_again.enabled=!0);break;case CONST.gameState.shuffle:r.stopBet(!0),-1!=r.seenGames.indexOf("arlt_table")&&(r.setChipNBtnBarVisibility(!1),r.aRltBetArea.expand(!1),r.aRltBetArea.setWinLightVisibility(!0));break;case CONST.gameState.stopBet:r.stopBet(!0),-1!=r.seenGames.indexOf("arlt_table")&&(r.setChipNBtnBarVisibility(!1),r.aRltBetArea.expand(!1),r.aRltBetArea.setWinLightVisibility(!0));var l=o.roundCtrl.srcResults||[];l.length&&(-1!=l.indexOf(CONST.cashWheel.srcResult.number_8X)||-1!=l.indexOf(CONST.cashWheel.srcResult.number_2X))&&r.aRltBetArea.playDoubleOddsAnim(),r.closeAllBtns(),r.betFinalConfirm(),r.justEnterGame&&setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500);break;case CONST.gameState.payout:r.stopBet(!0),-1!=r.seenGames.indexOf("arlt_table")&&(r.setChipNBtnBarVisibility(!1),r.aRltBetArea.expand(!1),r.aRltBetArea.setWinLightVisibility(!0)),r.justEnterGame&&setTimeout((function(){mo.MSG.show(e.id_c_msgCode.bacc_warning_payouting)}),500),r.betAreaSettlement(),r.aRltBetArea.stopDoubleOddsAnim()}}},a.prototype.betAreaSettlement=function(){this.betMgr.betAreaSettlement()},a.prototype.stopBet=function(e){this.betMgr.stopBet(e),this.aRltBetArea.setCanHover(!e)},a.prototype._onAfterBet=function(){this.betFinalConfirm()},a.prototype._tap_btn_again=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_AGAIN),t.autoBetSwitchState(!1),t.btn_confirm.currentState="normal",t.betMgr.redoBet(),t._betNumChanged()},a.prototype._tap_btn_double=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_DOUBLE),t.autoBetSwitchState(!1),t.btn_confirm.currentState="normal",t.betMgr.doubleBet(),t._betNumChanged(),e.RCD.log_mgr.sendEvent_ClientButton("game.double")},a.prototype._tap_btn_undo=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.G_CANCEL),t.autoBetSwitchState(!1),t.betMgr.undo(),t._betNumChanged(),t.btn_confirm.currentState="disabled"},a.prototype._tap_btn_confirm=function(){e.RCD.mgr.recordState(e.RCD.RcdState.G_CONFIRM),this.btn_confirm.currentState="disabled",this.confirmBet()},a.prototype.confirmBet=function(){var t=this;t.betMgr.startBet();var r=t.betMgr.packUnConfirmedBet();mo.OBJ.isEmpty(r)?(t._betNumChanged(),t.betMgr.finishBet()):(t.isConfirm=!0,t.tableCtrl.bet(r,(function(){t.tableCtrl.playAudio("p_bet_success"),e.log("下注成功"),t.betMgr.confirmBet(),t.isConfirm||t._gameStateChange(t.tableCtrl.gameState),t.isConfirm=!1,mo.MSG.show(e.id_c_msgCode.bacc_bet_success),t._betNumChanged(),t.betMgr.finishBet(),t.noBetRoundCount=0}),(function(){t.isConfirm||t._gameStateChange(t.tableCtrl.gameState),t.isConfirm=!1,t.betMgr.undo(),t.betMgr.betFinalConfirm(),t._betNumChanged(),t.betMgr.finishBet()})))},a.prototype.betAreaReset=function(){this.betMgr.clear(),this.aRltBetArea.resetOddsTxt()},a.prototype._betNumChanged=function(){this._refreshBtns()},a.prototype.checkIsBet=function(){var e=this.betMgr.betRecoders;for(var t in e)if(e[t].confirmedBetHistory.length>0||e[t].curBetHistory.length>0)return!0;return!1},a.prototype.betFinalConfirm=function(){var e=this;e.tableCtrl.isBetting||(e.betMgr.betFinalConfirm(),e._betNumChanged())},a.prototype._recoverBetInfo=function(){this.betMgr.recoverBetInfo()},a.prototype.closeAllBtns=function(){var e=this;e.btn_again.enabled=!1,e.btn_again.visible=!1,e.btn_confirm.enabled=!1,e.showConfirmRemindAnimation(!1),e.btn_undo.enabled=!1,e.btn_double.enabled=!1},a.prototype.setBtns=function(e){var t=this,r=t.tableCtrl.gameState;t.btn_again.enabled=e,t.btn_again.visible=e,t.btn_confirm.enabled=e,t.showConfirmRemindAnimation(e),t.btn_undo.enabled=e,t.btn_double.enabled=e,e?(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.btn_again.enabled&&t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1)):r==CONST.gameState.betting&&(t.btn_again.enabled=t.betMgr.hasPreRoundBetHistory(),t.btn_again.visible=t.btn_again.enabled,t.checkIsBet()&&(t.btn_again.enabled=!1,t.btn_again.visible=!1,t.btn_double.enabled=!0))},a.prototype._refreshBtns=function(){var e=this;if(e.tableCtrl.gameState!=CONST.gameState.betting)e.closeAllBtns();else{var t=e.betMgr.hasUnConfirmedBet();e.setBtns(t)}-1==e.seenGames.indexOf("arlt_table")&&(e.btn_confirm.currentState="normal")},a.prototype._onKickFromTable=function(){t.prototype._onKickFromTable.call(this)},a.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;r.unEmitter(),mo.emitter.un(e.ARLT.ARltBetArea.ARlt_On_Bet_Area_Tap,(function(){r.autoBetSwitchState(!1)}),r),e.GTS.netMgr.unNotify(CONST.bstBizType.bonusNotifyTable,r.showBonus,r),e.COMM.BONUS.leaveBonusDlg(),r.betMgr.reset(),e.GW.mgr.setCurrentThemeWithTableCtrl(null),r.aRltBetArea.stopDoubleOddsAnim()},a.prototype._payoutShow=function(){},a.prototype.showBonus=function(t){if(t&&t.bonusList&&t.bonusList.length){var r=e.GTS.userCtrl.id,o=this.tableCtrl.code;t.userId==r&&t.tableCode==o&&e.COMM.BONUS.setWaitingForShow(t)}},a.prototype.initAutoBet=function(){var e=this;e.grp_auto_bet_off.visible=!0,e.grp_auto_bet_on.visible=!1,e.setAutoBetRestNum(0),e.setAutoBetHoverEffects()},a.prototype.autoBetSwitchState=function(e){var t=this;(t.grp_auto_bet_off.visible=!e,t.grp_auto_bet_on.visible=e,t.isOpenAutoBet=e,e)?egret.Tween.get(t.img_auto_bet_wheel,{loop:!0}).to({rotation:0}).to({rotation:360},1800).call((function(){})):(egret.Tween.removeTweens(t.img_auto_bet_wheel),t.img_auto_bet_wheel.rotation=0)},a.prototype.setAutoBetHoverEffects=function(){var t=this;e.COMM.MOUSE.addImageHoverEvent(t,t.btn_auto_bet_wheel,t.img_auto_bet_wheel,"btn_wheel_3","btn_wheel_h_3"),e.COMM.MOUSE.addImageHoverEvent(t,t.btn_auto_bet_play,t.img_auto_bet_play,"btn_auto_3","btn_auto_h_3")},a.prototype.removeAutoBetHoverEffects=function(){e.COMM.MOUSE.removeImageHoverEvent(this.btn_auto_bet_wheel),e.COMM.MOUSE.removeImageHoverEvent(this.btn_auto_bet_play)},a.prototype._tap_btn_auto_bet_play=function(){this.showAutoBetSettingDlg()},a.prototype._tap_btn_auto_bet_wheel=function(){this.autoBetSwitchState(!1),this.showAutoBetSettingDlg()},a.prototype.showAutoBetSettingDlg=function(){var t=this;e.ARLT.ARltAutoBetSetting.show({tableCtrl:t.tableCtrl,betRecorder:t.aRltBetArea.getBetRecorder_Confirm(),cbFunc:function(e,r,o){e>0&&(t.autoBetSwitchState(!0),t.autoBetRestNum=e,t.setAutoBetRestNum(t.autoBetRestNum),t.autoBetRecorder=o,t.autoBetBalance=r)}})},a.prototype.setAutoBetRestNum=function(e){this.label_auto_bet_rest_num.text=e},a.prototype.autoBet=function(){var e=this;if(e.autoBetRestNum&&e.isMoreThanBalance()){setTimeout((function(){if(!e.betMgr.isStopBet){for(var t in e.autoBetRecorder){var r=e.autoBetRecorder[t];!(r>0)||e.betMgr.trybetAreaNiuNiu(t,r)}e._tap_btn_confirm()}}),1500)}else e.autoBetSwitchState(!1);e.autoBetRestNum--,e.setAutoBetRestNum(e.autoBetRestNum)},a.prototype.isMoreThanBalance=function(){var t=this,r=0;for(var o in t.autoBetRecorder)r+=t.autoBetRecorder[o];var a=0;e.GW.mgr.isSingleWallet?a+=parseFloat(e.GTS.mgr.money4Dis.toFixed(2))||0:(e.GTS.userCtrl.walletGeneral&&(a+=parseFloat(e.GTS.userCtrl.walletGeneral.toFixed(2))||0),e.GTS.userCtrl.walletLive&&(a+=parseFloat(e.GTS.userCtrl.walletLive.toFixed(2))||0));var i=a-r;return i<t.autoBetBalance&&mo.MSG.show("${{Money_Wheel_AutoBetSetting_1}}"),t.autoBetBalance<=i},a.prototype._onScanCard_audio=function(){var e=this,t=e.tableCtrl.roundCtrl.srcResults||[];t.length&&(mo.emitter.emit("cash_wheel_onScanCard"),e.setWheelResult(t[t.length-1]),e.setWinEffect(t),e.aRltBetArea.changeOddsTxt(t),(t[t.length-1]==CONST.cashWheel.srcResult.number_8X||t[t.length-1]==CONST.cashWheel.srcResult.number_2X)&&e.aRltBetArea.playDoubleOddsAnim())},a.prototype.setWheelResult=function(e){var t,r=this,o={1:"cw_result_1",2:"cw_result_2",5:"cw_result_5",10:"cw_result_10",20:"cw_result_20",40:"cw_result_40",200:"cw_result_2x",800:"cw_result_8x"};(e||(r.grp_result.visible=!1),r.rmTweens(r.grp_result),r.grp_result.visible)?(t=r.getTween(r.grp_result,{loop:!1}))&&t.to({alpha:0},1e3,egret.Ease.sineOut).call((function(){r.img_result.source=o[e]||""})).to({alpha:1},1e3,egret.Ease.sineOut).call((function(){})):(r.grp_result.alpha=0,r.img_result.source=o[e]||"",r.grp_result.visible=!0,(t=r.getTween(r.grp_result,{loop:!1}))&&t.to({alpha:1},1e3,egret.Ease.sineIn).call((function(){})))},a.prototype.setWinEffect=function(e){if(e.length){var t,r={1:[CONST.betType.cashWheel.number_1],2:[CONST.betType.cashWheel.number_2],5:[CONST.betType.cashWheel.number_5],10:[CONST.betType.cashWheel.number_10],20:[CONST.betType.cashWheel.number_20],40:[CONST.betType.cashWheel.number_40]},o=this.aRltBetArea.getHelpers(),a=function(e){return o.filter((function(t){return t.betType==e}))[0]},i=-1!=e.indexOf(200)||-1!=e.indexOf(800),n=e.filter((function(e){return 200!=e&&800!=e}));if(n.length){t=n[0]%2!=0;var s=r[n[0]];a(s)&&a(s).setResultsShow(!0)}a(CONST.betType.cashWheel.multiple)&&a(CONST.betType.cashWheel.multiple).setResultsShow(i),a(CONST.betType.cashWheel.odd)&&a(CONST.betType.cashWheel.odd).setResultsShow(t&&!i),a(CONST.betType.cashWheel.even)&&a(CONST.betType.cashWheel.even).setResultsShow(!t&&!i)}},a.prototype.setChipNBtnBarVisibility=function(e){var t=this,r=700;if(t.rmTweens(t.btn_group),t.rmTweens(t.chipBar4),e)t.btn_group.verticalCenter=t.chipBar4.verticalCenter=350,t.btn_group.alpha=t.chipBar4.alpha=0,t.getTween(t.btn_group,{loop:!1}).to({alpha:1,verticalCenter:236.5},r,egret.Ease.sineIn).call((function(){})),t.getTween(t.chipBar4,{loop:!1}).to({alpha:1,verticalCenter:158},r,egret.Ease.sineIn).call((function(){}));else{if(!t.chipBar4.alpha||!t.btn_group.alpha)return;t.btn_group.verticalCenter=236.5,t.chipBar4.verticalCenter=158,t.btn_group.alpha=t.chipBar4.alpha=1,-1==t.seenGames.indexOf("arlt_table")?(t.btn_confirm.currentState="normal",t.btn_group.verticalCenter=350):t.getTween(t.btn_group,{loop:!1}).to({alpha:0,verticalCenter:350},r,egret.Ease.sineOut).call((function(){})),t.getTween(t.chipBar4,{loop:!1}).to({alpha:0,verticalCenter:350},r,egret.Ease.sineOut).call((function(){}))}},a.prototype.setNoBetHint=function(){},a.prototype.showConfirmRemindAnimation=function(e){var t=this;if(e){if(t.animationTimerId)return;t.confirm_animation.source="",t.confirm_animation.visible=!0,t.animationTimerId=setInterval((function(){t.animationIndex++,t.animationIndex>t.animationMaxIndex&&(t.animationIndex=1);t.confirm_animation.source="dg_confirm_btn_eff_"+t.animationIndex}),100)}else t.animationTimerId&&(clearInterval(t.animationTimerId),t.animationTimerId=null),t.confirm_animation.source=""},a}(e.BASE.BaseTableLayer);t.ARltTable=a,__reflect(a.prototype,"G.ARLT.ARltTable"),e.GC.gc.registerClass(a.__className,a)}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var r=t.apply(this,arguments)||this;return r.disableChatRoom=e.GW.mgr.disableChatRoom,r.tempSrcResult=[],r}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=r.moduleParam,a=r.tableCtrl=mo.PROJ.isPc?r.data.param.tableCtrl:o.tableCtrl,i=r.tableCtrl.roundCtrl;r.onEmitter(a,CONST.BBT_table.openRound,r._openRound),r.onEmitter(a,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(a,CONST.BBT_table.payout,r._payout),r.onEmitter(a,CONST.BBT_table.scanCard,r._scanCard),r.tempSrcResult=i.srcResults||[],r._initLuzhu(),r._updateLuzhu(),r.chat.tableCtrl=a,r.chat.visible=!0,r.chat.rect_disible_mask.visible=e.GW.mgr.disableChatRoom},r.prototype.onExit=function(){t.prototype.onExit.call(this),this.unEmitter()},r.prototype._openRound=function(){this.tempSrcResult=[]},r.prototype._shuffle=function(){this._resetLuzhu()},r.prototype._scanCard=function(){},r.prototype._payout=function(){this._updateLuzhu()},r.prototype._updateLuzhu=function(){var e=this,t=e.tableCtrl.luZhuList.slice()||[];e.tableCtrl.gameState!=CONST.gameState.payout&&t.length&&t.pop(),e.luzhu.updateLuzhu(t)},r.prototype._updateLuzhu_scanCard=function(){var e=this,t=e.tableCtrl.roundCtrl.srcResults||[],r=t[t.length-1];e.tempSrcResult.length==t.length?e.luzhu.fixOne(r):e.luzhu.updateOne(r),e.tempSrcResult=t},r.prototype._resetLuzhu=function(){this.luzhu.resetLuzhu()},r.prototype._initLuzhu=function(){this.luzhu.init(12,6,17,1,1,!0)},r}(mo.EUI.Layer);t.ARltBottomPanel=r,__reflect(r.prototype,"G.ARLT.ARltBottomPanel")}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype._initProp=function(){t.prototype._initProp.call(this);this._Item_list_room=e.ARLT.ARltRoomListItem},r.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.cashWheel),o=0;o<r.length;o++){var a=r[o],i={};i.tableCtrl=a,t.push(i)}return t},r.prototype._click_list_room=function(e){var t=e.item.tableCtrl;this.gotoGame(t)},r.prototype.gotoGame=function(r){t.prototype.gotoGame.call(this,r);var o=this;r.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:r,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)},r}(e.COMM.RoomList);t.ARltRoomList=r,__reflect(r.prototype,"G.ARLT.ARltRoomList"),e.GC.gc.registerClass(r.__className,r)}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this);this.timerState.audioEnabled=!0,this.timerState.useBigLabel()},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this,o=r._tableCtrl=r.data.param.tableCtrl;r.onEmitter(o,CONST.BBT_table.openRound,r._openRound),r.onEmitter(o,CONST.BBT_table.shuffle,r._shuffle),r.onEmitter(o,CONST.BBT_table.bet,r._bet),r.onEmitter(o,CONST.BBT_table.betStop,r._betStop),r.onEmitter(o,CONST.BBT_table.payout,r._payout),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO,r._onRefreshInfo),r.onEmitter(o,e.GTS.TableCtrl.ON_REFRESH_INFO_DELAY,r.resetGamePage),r.onEmitter(o,e.GTS.TableCtrl.ON_AFTER_BET,r._onAfterBet),r.onEmitter(mo.emitter,"deactivate",r._handleDeactivate),r.aRltRightInfo.init(o);var a=o.gameState;r._gameStateChange(a)},r.prototype.resetGamePage=function(){var e=this._tableCtrl.gameState;this._gameStateChange(e)},r.prototype._handleDeactivate=function(){},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype._onRefreshInfo=function(){this._gameStateChange(this._tableCtrl.gameState)},r.prototype._openRound=function(){var e=this;e._onRefreshInfo(),e.aRltRightInfo.resetBetInfo();var t=parseInt((6*Math.random()+1).toString());e._tableCtrl.playAudio("p_start_bet_"+t)},r.prototype._bet=function(){this.aRltRightInfo.setAll()},r.prototype._betStop=function(){this._gameStateChange(CONST.gameState.stopBet),mo.emitter.emit(e.BASE.ON_COUNTDOWN_END)},r.prototype._shuffle=function(){this._gameStateChange(CONST.gameState.shuffle)},r.prototype._payout=function(){this._gameStateChange(CONST.gameState.payout)},r.prototype._onAfterBet=function(){this.aRltRightInfo.setAll()},r.prototype._gameStateChange=function(e){var t=this;t._curGameState=e;var r=t._tableCtrl,o=r.roundCtrl;switch(t.timerState.visible=!0,t.timerState.overtimeStatus=o.overtimeStatus,e){case CONST.gameState.betting:t._handleState_betting(r);break;case CONST.gameState.shuffle:t.timerState.stateShuffle();break;case CONST.gameState.payout:t.timerState.stateClearing();break;case CONST.gameState.stopBet:t._handleState_stopBet(r)}t.aRltRightInfo.setAll()},r.prototype._handleState_betting=function(e){var t=this,r=e.getBetStopTime();if(r){var o=r.getTime()-mo.DATE.now()-1e3*e.betSec;0>o&&(o=0),setTimeout((function(){t.timerState.stateBetting(),t.timerState.refreshTime(e.betSec,r)}),o)}else t.timerState.stateClearing()},r.prototype._handleState_stopBet=function(){this.timerState.stateClearing()},r}(mo.EUI.Layer);t.ARltRightSlider=r,__reflect(r.prototype,"G.ARLT.ARltRightSlider")}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.imgTimesArray=[],e.imglLinesArray=[],e.labelArray=[],e.imgMouseOverArray=[],e.mouseOverTouchPanelArray=[],e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this)},r.prototype._childrenCreated=function(){t.prototype._childrenCreated.call(this)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this)},r.prototype.onEnter=function(){var t=this;e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_OPEN_SETTING_DLG),t._tableCtrl=t.data.tableCtrl,t._betRecorder=t.data.betRecorder,t._cbFunc=t.data.cbFunc,t.initTimesSelector(),t.textinput_balance.addEventListener(egret.FocusEvent.FOCUS_IN,t._onFocusIn,t),t.textinput_balance.addEventListener(egret.FocusEvent.FOCUS_OUT,t._onFocusOut,t),t.chipBar4.setUseOldChipsPlan(!0),t.chipBar4.tableCtrl=t._tableCtrl,t.aRltBetArea.initForSetting(t.chipBar4,t._tableCtrl,t._betRecorder),t.aRltBetArea.setCanHover(!0),t._helpers=t.aRltBetArea.getHelpers(),t.setBettingAtFirst(t.data.betRecorder),t.setTimesSelector(0),t.betBalance=0,t._onBetChanged(),mo.emitter.on(e.ARLT.ARltBetAreaHelper.changeMoney,t._onBetChanged,t),("ms_my"==mo.PROJ.lang||"in_id"==mo.PROJ.lang||"es_es"==mo.PROJ.lang)&&(t.label_auto.size=12)},r.prototype.onExit=function(){t.prototype.onExit.call(this);mo.emitter.un(e.ARLT.ARltBetAreaHelper.changeMoney,this._onBetChanged,this)},r.prototype.initTimesSelector=function(){var e=this;e.imgTimesArray.push(e.img_0),e.imgTimesArray.push(e.img_1),e.imgTimesArray.push(e.img_2),e.imgTimesArray.push(e.img_3),e.imgTimesArray.push(e.img_4),e.imgTimesArray.push(e.img_5),e.imglLinesArray.push(e.line_0),e.imglLinesArray.push(e.line_1),e.imglLinesArray.push(e.line_2),e.imglLinesArray.push(e.line_3),e.imglLinesArray.push(e.line_4),e.labelArray.push(e.label_0),e.labelArray.push(e.label_1),e.labelArray.push(e.label_2),e.labelArray.push(e.label_3),e.labelArray.push(e.label_4),e.labelArray.push(e.label_5),e.imgMouseOverArray.push(e.mouse_over_0),e.imgMouseOverArray.push(e.mouse_over_1),e.imgMouseOverArray.push(e.mouse_over_2),e.imgMouseOverArray.push(e.mouse_over_3),e.imgMouseOverArray.push(e.mouse_over_4),e.imgMouseOverArray.push(e.mouse_over_5),e.mouseOverTouchPanelArray.push(e.touch_0),e.mouseOverTouchPanelArray.push(e.touch_1),e.mouseOverTouchPanelArray.push(e.touch_2),e.mouseOverTouchPanelArray.push(e.touch_3),e.mouseOverTouchPanelArray.push(e.touch_4),e.mouseOverTouchPanelArray.push(e.touch_5);for(var t=0;t<e.mouseOverTouchPanelArray.length;t++)e.mouseOverTouchPanelArray[t].addEventListener(mouse.MouseEvent.MOUSE_OVER,e.onTimerMouseOver.bind(e,t),e),e.mouseOverTouchPanelArray[t].addEventListener(mouse.MouseEvent.MOUSE_OUT,e.onTimerMouseOver.bind(e,t),e)},r.prototype.initEventListener=function(e){var t=this;e.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onAutoBetButtonEvent.bind(t,e),t),e.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onAutoBetButtonEvent.bind(t,e),t)},r.prototype._onFocusIn=function(){this.betBalance=parseFloat(this.textinput_balance.text)},r.prototype._onFocusOut=function(){},r.prototype.checkIsLegal=function(){var e,t=this;e=0==parseFloat(t.textinput_balance.text)&&1==t.textinput_balance.text.length||t.textinput_balance.text.match(/^[1-9][0-9]*$/);var r=t.textinput_balance.text.length<10,o=0==t.textinput_balance.text.length;return e&&r&&!o},r.prototype.checkIsLessThanCurWallet=function(){var t=0;e.GW.mgr.isSingleWallet?t+=parseFloat(e.GTS.mgr.money4Dis.toFixed(2))||0:(e.GTS.userCtrl.walletGeneral&&(t+=parseFloat(e.GTS.userCtrl.walletGeneral.toFixed(2))||0),e.GTS.userCtrl.walletLive&&(t+=parseFloat(e.GTS.userCtrl.walletLive.toFixed(2))||0));var r=parseFloat(this.textinput_balance.text);return r>=t&&mo.MSG.show("${{Money_Wheel_AutoBetSetting_2}}"),t>r},r.prototype.setTimesSelector=function(e){for(var t=this,r=0;r<t.imgTimesArray.length;r++)t.imgTimesArray[r].visible=e+1>r;for(r=0;r<t.imglLinesArray.length;r++)t.imglLinesArray[r].visible=e>r;for(r=0;r<t.labelArray.length;r++)t.labelArray[r].textColor=e+1>r?33535:16777215;t.betTimes=20*e,t.setMoney()},r.prototype.onTimerMouseOver=function(e,t){switch(t.type){case mouse.MouseEvent.MOUSE_OVER:this.imgMouseOverArray[e].visible=!0;break;case mouse.MouseEvent.MOUSE_OUT:this.imgMouseOverArray[e].visible=!1}},r.prototype.onAutoBetButtonEvent=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:e==r.img_x2&&(e.source="dg_btn_doubleBet_h"),e==r.img_ok&&(e.source="dg_btn_confirm_h"),e==r.img_cancel&&(e.source="dg_btn_cancel_h");break;case mouse.MouseEvent.MOUSE_OUT:e==r.img_x2&&(e.source="dg_btn_doubleBet"),e==r.img_ok&&(e.source="dg_btn_confirm_green"),e==r.img_cancel&&(e.source="dg_btn_cancel")}},r.prototype._tap_touch_0=function(){this.setTimesSelector(0)},r.prototype._tap_touch_1=function(){this.setTimesSelector(1),e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_ROUND_20)},r.prototype._tap_touch_2=function(){this.setTimesSelector(2),e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_ROUND_40)},r.prototype._tap_touch_3=function(){this.setTimesSelector(3),e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_ROUND_60)},r.prototype._tap_touch_4=function(){this.setTimesSelector(4),e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_ROUND_80)},r.prototype._tap_touch_5=function(){this.setTimesSelector(5),e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_ROUND_100)},r.prototype._tap_btn_close=function(){e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_CLOSE_SETTING_DLG),this.close()},r.prototype._tap_btn_confirm=function(){var t=this;if(e.RCD.mgr.recordState(e.RCD.RcdState.CW_AUTO_BET_CONFIRM),!t.checkIsLegal())return mo.MSG.show("${{int_max9}}");if(t.checkIsLessThanCurWallet()){if(t._totalMoney<=0)return mo.MSG.show("${{Money_Wheel_AutoBetSetting_3}}");mo.MSG.show("${{Money_Wheel_AutoBetSetting_4}}"),t.textinput_balance.text=parseFloat(t.textinput_balance.text).toString(),t.betBalance=parseFloat(t.textinput_balance.text),t._cbFunc(t.betTimes,t.betBalance,t.aRltBetArea.getBetRecorder()),t.close()}},r.prototype._tap_btn_undo=function(){for(var e=0;e<this._helpers.length;e++){this._helpers[e].unBet()}},r.prototype._tap_btn_double=function(){for(var t=this,r=0;r<t._helpers.length;r++){var o=t._helpers[r],a=o.betType;if(o.betRecoder._totalBet>0){if(t.aRltBetArea.isBetOutOfLimit(a,o.betRecoder._totalBet)){mo.MSG.show(e.id_c_msgCode.g_out_of_limit);continue}o.bet(o.betRecoder._totalBet)}}},r.prototype._onBetChanged=function(){var e=this;e._totalMoneyPerRound=0;for(var t=0;t<e._helpers.length;t++){var r=e._helpers[t];r.betRecoder._totalBet>0&&(e._totalMoneyPerRound+=r.betRecoder._totalBet)}e.setMoney(),e.setButtons()},r.prototype.setButtons=function(){for(var e=this,t=0,r=0;r<e._helpers.length;r++){var o=e._helpers[r];o.betRecoder._totalBet>0&&(t+=o.betRecoder._totalBet)}e.btn_undo.enabled=t>0,e.btn_confirm.enabled=t>0,e.btn_double.enabled=t>0},r.prototype.setMoney=function(){var t=this;t._totalMoneyPerRound=0;for(var r=0;r<t._helpers.length;r++){var o=t._helpers[r];o.betRecoder._totalBet>0&&(t._totalMoneyPerRound+=o.betRecoder._totalBet)}t.label_bet_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat(t._totalMoneyPerRound.toFixed(2))),t.label_round_times.text=t.betTimes,t.label_total_money.text=e.UTIL.NUM.getSplitNumStr(parseFloat((t.betTimes*t._totalMoneyPerRound).toFixed(2))),t._totalMoney=parseFloat((t.betTimes*t._totalMoneyPerRound).toFixed(2))},r.prototype.setBettingAtFirst=function(e){for(var t=0;t<this._helpers.length;t++){var r=this._helpers[t],o=e[r.betType];o>0&&r.bet(o)}},r}(mo.EUI.Dlg);t.ARltAutoBetSetting=r,__reflect(r.prototype,"G.ARLT.ARltAutoBetSetting")}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){var e=t.apply(this,arguments)||this;return e.BetAreaObj={betArea_1:{img_bg_h:"cw_bet_area_1_hover",img_type:"cw_bet_area_1_txt",img_type_h:"cw_bet_area_1_txt_hover",bet_num:"betNum_1",bet_type:CONST.betType.cashWheel.number_1,odds:1,grp_chip:"area_for_chips_1",interval:null,cb:null},betArea_2:{img_bg_h:"cw_bet_area_2_hover",img_type:"cw_bet_area_2_txt",img_type_h:"cw_bet_area_2_txt_hover",bet_num:"betNum_2",bet_type:CONST.betType.cashWheel.number_2,odds:2,grp_chip:"area_for_chips_2",interval:null,cb:null},betArea_5:{img_bg_h:"cw_bet_area_5_hover",img_type:"cw_bet_area_5_txt",img_type_h:"cw_bet_area_5_txt_hover",bet_num:"betNum_5",bet_type:CONST.betType.cashWheel.number_5,odds:5,grp_chip:"area_for_chips_5",interval:null,cb:null},betArea_10:{img_bg_h:"cw_bet_area_10_hover",img_type:"cw_bet_area_10_txt",img_type_h:"cw_bet_area_10_txt_hover",bet_num:"betNum_10",bet_type:CONST.betType.cashWheel.number_10,odds:10,grp_chip:"area_for_chips_10",interval:null,cb:null},betArea_20:{img_bg_h:"cw_bet_area_20_hover",img_type:"cw_bet_area_20_txt",img_type_h:"cw_bet_area_20_txt_hover",bet_num:"betNum_20",bet_type:CONST.betType.cashWheel.number_20,odds:20,grp_chip:"area_for_chips_20",interval:null,cb:null},betArea_40:{img_bg_h:"cw_bet_area_40_hover",img_type:"cw_bet_area_40_txt",img_type_h:"cw_bet_area_40_txt_hover",bet_num:"betNum_40",bet_type:CONST.betType.cashWheel.number_40,odds:40,grp_chip:"area_for_chips_40",interval:null,cb:null},betArea_x:{img_bg_h:"cw_bet_area_x_hover",img_type:"cw_bet_area_x_txt",img_type_h:"cw_bet_area_x_txt_hover",bet_num:"betNum_x",bet_type:CONST.betType.cashWheel.multiple,odds:25,grp_chip:"area_for_chips_x"},betArea_o:{img_bg_h:"cw_bet_area_o_hover",img_type:"cw_bet_area_o_txt",img_type_h:"cw_bet_area_o_txt_hover",bet_num:"betNum_o",bet_type:CONST.betType.cashWheel.odd,odds:1.25,grp_chip:"area_for_chips_o"},betArea_e:{img_bg_h:"cw_bet_area_e_hover",img_type:"cw_bet_area_e_txt",img_type_h:"cw_bet_area_e_txt_hover",bet_num:"betNum_e",bet_type:CONST.betType.cashWheel.even,odds:.75,grp_chip:"area_for_chips_e"}},e.img_bg="cw_bet_area",e.msPerCard=250,e.msPerFlip=1e3,e._cbArr=[],e}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this),this.doubleOddsAnim=null,this.doubleOddsAnim_2=null},r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unregisterTouchEvent(),this.stopOddsChangeAnim()},r.prototype.init=function(e,t,r,o){var a=this;a._isForBetting=!0,a._betMgr=e,a._chipBar=t,a._tableCtrl=r,a._payoutCB=o,a.setBetArea(),a.registerBetRecorder(),a.grp_bet_area.height=98},r.prototype.initForSetting=function(e,t){var r=this;r._isForBetting=!1,r._chipBar=e,r._tableCtrl=t,r.setBetArea(),r.grp_bet_area.height=175},r.prototype.registerBetRecorder=function(){var t=this;for(var r in t.BetAreaObj){var o=t.BetAreaObj[r].bet_type;t._betMgr.registerBetRecorder(o,new e.COMM.BaseBetRecorder(o,0))}},r.prototype.setBetArea=function(){var t=this;for(var r in t._betAreaArr=[],t.BetAreaObj){var o={};o.betType=t.BetAreaObj[r].bet_type,o.betAreaHelper=null,t._betAreaArr.push(o);var a=t[r];if(a){a.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onBetAreaTouched.bind(t,r),t),a.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onBetAreaHover.bind(t,r),t),a.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onBetAreaHover.bind(t,r),t);var i=t.BetAreaObj[r].bet_num,n=t[i];if(n){n&&t.onEmitter(n.emitter,"over",t.payoutShow);var s=t.BetAreaObj[r].bet_type,l=t[t.BetAreaObj[r].grp_chip],c=t[r].getChildByName("win"),p={img_bg:t.img_bg,img_bg_h:t.BetAreaObj[r].img_bg_h,img_type:t.BetAreaObj[r].img_type,img_type_h:t.BetAreaObj[r].img_type_h};o.betAreaHelper=new e.ARLT.ARltBetAreaHelper(a,s,n,l,c,p,t._tableCtrl,t._isForBetting),t._isForBetting&&o.betAreaHelper.setBetMgr(t._betMgr)}else console.log("Can't find bet num object : ",i)}else console.log("Can't find bet area grp : ",r)}},r.prototype.onBetAreaHover=function(e,t){var r=this[e].getChildByName("hover");if(r)if(this._canHover)switch(t.type){case mouse.MouseEvent.MOUSE_OVER:r.visible=!0;break;case mouse.MouseEvent.MOUSE_OUT:r.visible=!1}else r.visible=!1;else console.log("Can't find hover object")},r.prototype.setCanHover=function(e){this._canHover=e},r.prototype.onBetAreaTouched=function(t){var r=this,o=r.BetAreaObj[t].bet_type,a=r._chipBar.chipValue;if(r._isForBetting){if(r._betMgr.isStopBet)return;if(r._tableCtrl.isMatch&&!r._tableCtrl.hasEnrolled())return mo.MSG.show(r._tableCtrl.canEnrolled()?e.id_c_msgCode.g_watch_match:e.id_c_msgCode.g_watch_match_no_join);if(r.isBetOutOfLimit(o,a))return mo.MSG.show(e.id_c_msgCode.g_out_of_limit);if(!r._betMgr.trybetAreaNiuNiu(o,a))return;mo.emitter.emit(e.ARLT.ARltBetArea.ARlt_On_Bet_Area_Tap)}else{if(r.isBetOutOfLimit(o,a))return mo.MSG.show(e.id_c_msgCode.g_out_of_limit);r._betAreaArr.filter((function(e){return e.betType==o}))[0].betAreaHelper.bet(a)}r.changeImageSource(t,!0)},r.prototype.isBetOutOfLimit=function(e,t){for(var r=this,o=((u={})[CONST.betType.cashWheel.number_1]=0,u[CONST.betType.cashWheel.number_2]=1,u[CONST.betType.cashWheel.number_5]=2,u[CONST.betType.cashWheel.number_10]=3,u[CONST.betType.cashWheel.number_20]=4,u[CONST.betType.cashWheel.number_40]=5,u[CONST.betType.cashWheel.multiple]=6,u[CONST.betType.cashWheel.odd]=7,u[CONST.betType.cashWheel.even]=8,u),a=(r._tableCtrl.rangeList4Dis,r.getHelpers()),i=0;i<a.length;i++){var n=a[i],s=n.betRecoder.betType,l=n.betRecoder.unconfirmedBet;if(s==e){var c=o[s],p=r._tableCtrl.rangeList4Dis[c],_=p[0];return l+t>p[1]||_>l+t}}var u},r.prototype.expand=function(e){var t=e?175:98,r=e?egret.Ease.sineIn:egret.Ease.sineOut;egret.Tween.removeTweens(this.grp_bet_area),egret.Tween.get(this.grp_bet_area,{loop:!1}).to({height:t},700,r).call((function(){}))},r.prototype.payoutShow=function(){this._payoutCB&&this._payoutCB()},r.prototype.unregisterTouchEvent=function(){var e=this;for(var t in e.BetAreaObj){var r=e[t];r?(r.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onBetAreaTouched.bind(e,t),e),r.removeEventListener(mouse.MouseEvent.MOUSE_OVER,e.onBetAreaHover.bind(e,t),e),r.removeEventListener(mouse.MouseEvent.MOUSE_OUT,e.onBetAreaHover.bind(e,t),e)):console.log("Can't find bet area grp : ",t)}},r.prototype.changeImageSource=function(e,t){var r=this;if(r[e]){var o=r[e].getChildByName("bg"),a=r[e].getChildByName("type");return o&&a?(o.source=t?r.BetAreaObj[e].img_bg_h:r.img_bg,void(a.source=t?r.BetAreaObj[e].img_type_h:r.BetAreaObj[e].img_type)):void console.log("Can't find image object")}console.log("Can't find bet area grp : ",e)},r.prototype.playCardFlip=function(e,t){void 0===t&&(t=!1);var r=this,o=[];for(var a in r.BetAreaObj){var i=r.BetAreaObj[a].bet_type;-1!=e.indexOf(i)&&o.push(a)}if(o.map((function(e){return r[e]})),t){!function(e){e.sort((function(){return Math.random()-.5}))}(o)}for(var n=function(e){var t=o[e];r.getTween(t).wait(r.msPerCard*e).to({scaleX:0},r.msPerFlip/2).to({scaleX:1},r.msPerFlip/2).call((function(){r.rmTweens(t)}))},s=0;s<o.length;s++)n(s)},r.prototype.changeOddsTxt=function(e){for(var t=this,r=1,o=0;o<e.length;o++)800==e[o]&&(r*=8),200==e[o]&&(r*=2);var a=[CONST.betType.cashWheel.odd,CONST.betType.cashWheel.even,CONST.betType.cashWheel.multiple];for(var i in t.BetAreaObj){var n=t.BetAreaObj[i].bet_type,s=t.BetAreaObj[i].odds;if(a.indexOf(n)<0){var l=s*(r-1)+s;e.length||t._oddsChange_normal(i,l),t._oddsChange_anim(i,l)}}},r.prototype._oddsChange_normal=function(e,t){var r=this[e].getChildByName("odds");r&&(r.text="X "+t)},r.prototype._oddsChange_anim=function(e,t){var r=this,o=r[e].getChildByName("odds"),a=Number(o.text.slice(2));if(r._isOver=!0,!(a>=t)){var i,n=1500/(t-a);i=150>t-a?1:Math.ceil((t-a)/150),r._isOver=!1,null!=r.BetAreaObj[e].interval?(clearInterval(r.BetAreaObj[e].interval),r.BetAreaObj[e].interval=null):(o.scaleX=o.scaleY=.7,r.BetAreaObj[e].cb=function(){o.text="X "+t,o.scaleX=o.scaleY=.5},r.BetAreaObj[e].interval=setInterval((function(){r._isOver?(o.text="X "+t,o.scaleX=o.scaleY=.5,clearInterval(r.BetAreaObj[e].interval),r.BetAreaObj[e].interval=null):a>=t?(o.text="X "+t,o.scaleX=o.scaleY=.5,clearInterval(r.BetAreaObj[e].interval),r.BetAreaObj[e].interval=null,r._isOver=!0,r.finishOddsChangeAnim()):(a+=i,o.text="X "+a)}),n))}},r.prototype.finishOddsChangeAnim=function(){var e=this;for(var t in e.BetAreaObj)e.BetAreaObj[t].interval&&(clearInterval(e.BetAreaObj[t].interval),e.BetAreaObj[t].interval=null),e.BetAreaObj[t].cb&&e.BetAreaObj[t].cb()},r.prototype.stopOddsChangeAnim=function(){var e=this;for(var t in e.BetAreaObj)e.BetAreaObj[t].interval&&(clearInterval(e.BetAreaObj[t].interval),e.BetAreaObj[t].interval=null)},r.prototype.resetOddsTxt=function(){this.changeOddsTxt([])},r.prototype.getBetRecorderByBetType=function(){},r.prototype.getBetRecorder=function(){for(var e=this,t={},r=0;r<e._betAreaArr.length;r++)t[e._betAreaArr[r].betType]=e._betAreaArr[r].betAreaHelper.betRecoder._totalBet;return t},r.prototype.getBetRecorder_Confirm=function(){for(var e=this,t={},r=0;r<e._betAreaArr.length;r++)t[e._betAreaArr[r].betType]=e._betAreaArr[r].betAreaHelper.betRecoder._confirmedBet;return t},r.prototype.getHelpers=function(){return this._betAreaArr.map((function(e){return e.betAreaHelper}))},r.prototype.playDoubleOddsAnim=function(){var t=this,r=t.img_odds_double,o=t.img_odds_double_2;if(!t.doubleOddsAnim){t.doubleOddsAnim=e.COMM.ANIMATION.playLoop(r,e.COMM.AnimName.DoubleOdds),t._timeOut=setTimeout((function(){t.doubleOddsAnim_2=e.COMM.ANIMATION.playLoop(o,e.COMM.AnimName.DoubleOdds)}),400)}},r.prototype.stopDoubleOddsAnim=function(){var t=this;t.img_odds_double.source="",t.img_odds_double_2.source="",(null!=t.doubleOddsAnim||null!=t.doubleOddsAnim_2)&&(e.COMM.ANIMATION.stopInterval(t.doubleOddsAnim),t.doubleOddsAnim=null,e.COMM.ANIMATION.stopInterval(t.doubleOddsAnim_2),t.doubleOddsAnim_2=null,e.COMM.ANIMATION.stopInterval(t._timeOut),t._timeOut=null)},r.prototype.showMask=function(){var e=this;e.rmTweens(e.rect_mask),e.rect_mask.alpha=0,e.rect_mask.visible=!0,e.getTween(e.rect_mask,{loop:!1}).to({alpha:1},400,egret.Ease.backOut).call((function(){})).to({alpha:0},300).call((function(){e.rect_mask.visible=!1}))},r.prototype.setWinLightVisibility=function(e){for(var t=this.getHelpers(),r=0;r<t.length;r++){t[r].setLightVisibility(e)}},r}(mo.EUI.Comp);r.ARlt_On_Bet_Area_Tap="arlt_on_bet_area_tap",t.ARltBetArea=r,__reflect(r.prototype,"G.ARLT.ARltBetArea")}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=mo.D.Queue,o=function(t){function o(e,r,o,a,i,n,s,l){var c=t.call(this,e,r)||this;c.iniChipY=-10,c.loseChipY=-110,c.isInSettlement=!1;var p=c;p.img_bg=p.betArea.getChildByName("bg"),p.img_type=p.betArea.getChildByName("type"),p.img_bg&&p.img_type||console.log("Can't find image object"),p.betNumObj=o,p.chipArea=a,p.imgSourceObj=n,p.betWinImg=i,p.tableCtrl=s,p.tableCtrl&&mo.emitter.on("cash_wheel_onScanCard",p._onScanCard,p),p.chipList=[];p.iniChipX=420-a.x;return p.loseChipX=496-a.x,p._isForBetting=l,p.reset(),c}return __extends(o,t),o.prototype._onScanCard=function(){var e=this;if(e.tableCtrl&&e.tableCtrl.roundCtrl&&e._isForBetting){var t=e.tableCtrl.roundCtrl.srcResults||[];(e.betType==CONST.betType.cashWheel.odd||e.betType==CONST.betType.cashWheel.even)&&(-1!=t.indexOf(800)||-1!=t.indexOf(200))&&(e.haveNoBet(),e.lostGame())}},o.prototype.onBetAreaRecover=function(){var e=this;if(e.tableCtrl&&e.tableCtrl.roundCtrl){var t=e.tableCtrl.roundCtrl.srcResults||[];(e.betType!=CONST.betType.cashWheel.odd&&e.betType!=CONST.betType.cashWheel.even||-1==t.indexOf(800)&&-1==t.indexOf(200))&&e.initConfirmedV(e.mgr.getBetNum(e.betType))}},o.prototype.reset=function(){t.prototype.reset.call(this);var e=this;e.betNumObj&&(e.betNumObj.reset(),e.betNumObj.visible=!1),e.removeAllChips(),e.changeImageSource(!1),e.tableCtrl.gameState!=CONST.gameState.stopBet&&e.setResultsShow(!1)},o.prototype.removeAllChips=function(){for(var e=this,t=0;t<e.chipList.length;t++){var r=e.chipList[t];mo.EUI.helper.rm(r)}e.chipList.length=0},o.prototype.haveBet=function(){var e=this;e.betNumObj.setData({num:e.betRecoder.totalBet4Dis}),e.betNumObj.visible=!0,e.betNumObj.betUnConfirm(),e.changeImageSource(!0)},o.prototype.haveNoBet=function(){var e=this;e.betNumObj&&(e.betNumObj.reset(),e.betNumObj.visible=!1),e.changeImageSource(!1)},o.prototype.hangover=function(){},o.prototype.betFinalConfirm=function(){t.prototype.betFinalConfirm.call(this),this.betRecoder.beted&&this.betNumObj.betConfirm()},o.prototype.betConfirm=function(){var e=this;t.prototype.betConfirm.call(this),e.betRecoder.beted&&e.betNumObj&&e.betNumObj.betConfirm()},o.prototype.inTheSettlement=function(e){var t=this;if(!t.isInSettlement){var r=t.betRecoder.confirmedBetHistory;if(t.haveNoBet(),t.setResultsShow(e),e)for(var o=0,a=0,i=0;i<r.length;i++)for(var n=r[i],s=0;s<n.length;s++){var l=n[s].chip;if(l)t.isInSettlement=!0,o+=1,t.rmTweens(l),t.getTween(l,{loop:!1}).wait(100+50*o).to({x:t.iniChipX,y:t.iniChipY},500).call((function(){o==(a+=1)&&(t.isInSettlement=!1,t.betNumObj&&t.betNumObj.emitter.emit("over",t),t.removeAllChips())}))}else t.lostGame();t.betNumObj.emitter.emit("over",t)}},o.prototype.lostGame=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0,o=0,a=0;a<t.length;a++)for(var i=t[a],n=0;n<i.length;n++){var s=i[n].chip;if(s)e.isInSettlement=!0,r+=1,e.rmTweens(s),e.getTween(s,{loop:!1}).wait(100+50*r).to({x:e.loseChipX,y:e.loseChipY},500).call((function(){r==(o+=1)&&(e.isInSettlement=!1,e.removeAllChips())}))}},o.prototype.deleteChip=function(){for(var e=this,t=e.betRecoder.confirmedBetHistory,r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length;a++){var i=o[a].chip;i&&(-1!=e.chipArea.getChildIndex(i)&&(mo.EUI.helper.rm(i),e.betedChipQ.enqueue(i)),e.rmTweens(i))}},o.prototype.bet=function(t){var r=this,o=r._flyChips(t);r.betRecoder.bet(t).chip=o,r._betNumChanged(),mo.emitter.emit(e.ARLT.ARltBetAreaHelper.changeMoney)},o.prototype.initConfirmedV=function(t){var r=this;r.reset();var o=e.UTIL.NUM.breakUpChipV(t);if(o.length){for(var a=0;a<o.length;a++){var i=o[a],n=r.betRecoder.bet(i);r.betRecoder.confirm();var s=r._flyChips(i,a+1);n.chip=s}r.betConfirm()}r._betNumChanged()},o.prototype.unBet=function(){var r=this.betRecoder.curBetHistory;if(r.length)for(var o=0;o<r.length;o++){var a=r[o].chip;a&&mo.EUI.helper.rm(a)}t.prototype.unBet.call(this),mo.emitter.emit(e.ARLT.ARltBetAreaHelper.changeMoney)},o.prototype._flyChips=function(e){var t=this,r=t.betRecoder.confirmedBetHistory,o=0;if(r.length>0)for(var a in r)o+=r[a].length;var i=t.betRecoder.curBetHistory.length+o;if(!(i>=6)){var n=t._productChip(e),s=t.iniChipX,l=t.iniChipY,c=-1==["ico_chip_16","ico_chip_17","ico_chip_18","ico_chip_19","ico_chip_20","ico_chip_21","ico_chip_22","ico_chip_23","ico_chip_24","ico_chip_25","ico_chip_26","ico_chip_27","ico_chip_28","ico_chip_29","ico_chip_30","ico_chip_31","ico_chip_custom"].indexOf(n.source.toString())?23:10,p=33-5*i;return n.x=s,n.y=l,t.chipArea.addChild(n),t.chipList.push(n),t.rmTweens(n),t.getTween(n).wait(100).to({x:c,y:p},200).call((function(){t.rmTweens(n)})),n}},o.prototype._productChip=function(t){var o=this;o.betedChipQ||(o.betedChipQ=new r);var a=o.betedChipQ.dequeue();return a||(a=new eui.Image),a.source=e.BASE.resHelper.getBetChipRes(t),a.touchEnabled=!1,a},o.prototype.onBetAreaClear=function(){t.prototype.onBetAreaClear.call(this)},o.prototype.changeImageSource=function(e){var t=this;t.img_bg.source=e?t.imgSourceObj.img_bg_h:t.imgSourceObj.img_bg,t.img_type.source=e?t.imgSourceObj.img_type_h:t.imgSourceObj.img_type},o.prototype.setResultsShow=function(t){var r=this;r.betWinImg&&(t?(r.betWinAnim&&(r.betWinImg.source="",e.COMM.ANIMATION.stopInterval(r.betWinAnim),r.betWinAnim=null),r.betWinAnim=e.COMM.ANIMATION.playLoop(r.betWinImg,e.COMM.AnimName.WinBet,50)):r.noLight())},o.prototype.noLight=function(){var t=this;t.tableCtrl.gameState!=CONST.gameState.stopBet&&(t.betWinImg.source="",null!=t.betWinAnim&&(e.COMM.ANIMATION.stopInterval(t.betWinAnim),t.betWinAnim=null))},o.prototype.setLightVisibility=function(e){this.betWinImg.visible=e},o.prototype.onExit=function(){mo.emitter.un("cash_wheel_onScanCard",this._onScanCard,this)},o}(e.COMM.BaseBetAreaHelper);o.changeMoney="arlt_helper_change_money",t.ARltBetAreaHelper=o,__reflect(o.prototype,"G.ARLT.ARltBetAreaHelper")}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this)},r.prototype.onExit=function(){t.prototype.onExit.call(this);this.unEmitter()},r.prototype._initProp=function(){t.prototype._initProp.call(this);this._Item_list_room=e.ARLT.ARltRoomListItemPC35},r.prototype._data_list_room=function(){for(var t=[],r=e.GTS.mgr.getTableCtrlListByType(CONST.tableType.cashWheel),o=0;o<r.length;o++){var a=r[o],i={};i.tableCtrl=a,t.push(i)}return t},r.prototype.gotoGame=function(r){t.prototype.gotoGame.call(this,r);var o=this;r.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:r,selectCallBack:function(){o.list_room.selectedIndex=-1,e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)}}):e.COMM.layerMgr.enterGameRoom(r,r.type,!1,null,null)},r}(e.COMM.RoomListPC35);t.ARltRoomListPC35=r,__reflect(r.prototype,"G.ARLT.ARltRoomListPC35"),e.GC.gc.registerClass(r.__className,r)}(e.ARLT||(e.ARLT={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=CONST.layer.layerClassToPush,o=CONST.layer.baseTopBarClass,a=function(t){function a(){return t.apply(this,arguments)||this}return __extends(a,t),a.prototype.onEnter=function(){t.prototype.onEnter.call(this),mo.lazyLoader.clearLoading(),e.playMusic("main");var a=this;mo.emitter.on("activate_delay",a._closeAllDlg,a),mo.emitter.on("closedlg",(function(){a._closeAllDlg()})),e.stageUtil.recordHome(a),e.COMM.layerMgr.checkAndPopAllLayerList((function(){var t=function(){e.GTS.mgr.requestTreasureInfo((function(){e.COMM.layerMgr.baseTopBar&&(mo.EUI.helper.rm(e.COMM.layerMgr.baseTopBar),e.COMM.layerMgr.baseTopBar=null);var t=e.GC.gc.getClass(o[e.COMM.layerMgr.getVirtualVersion()]);e.COMM.layerMgr.baseTopBar=t.show();var i=e.GW.mgr.defaultGameTypeFromURL;if(e.GW.mgr.ifGameSingleOnlyOpen(CONST.tableType.all)||e.GW.mgr.ifGameSingleOnlyOpen(CONST.tableType.BJ_Electronic))e.COMM.layerMgr.enterSingleGameLayer();else if(i==CONST.tableType.all)e.COMM.layerMgr.fastEnterGameRoomList(CONST.tableType.all);else{var n=e.COMM.layerMgr.getCurrentTableType();if(n==CONST.tableType.all)e.COMM.layerMgr.fastEnterGameRoomList(CONST.tableType.all);else if(n==CONST.tableType.BJ_Electronic)e.COMM.layerMgr.fastEnterGameRoomList(CONST.tableType.BJ_Electronic);else{var s=r[e.COMM.layerMgr.getVirtualVersion()][0],l=e.GC.gc.getClass(s);e.COMM.layerMgr.pushLayer(l)}}mo.emitter.on("adjustMsgPosition",a.doAdjustMsgPosition)}))};e.GTS.mgr.tablesNumber()>0?t():e.GTS.mgr.syncTableList((function(){t()}))}))},a.prototype.doAdjustMsgPosition=function(){var t=mo.EUI.infoScene.getTray("msg"),r=e.COMM.layerMgr.baseTopBar?e.COMM.layerMgr.baseTopBar.tableCtrl:null;if(r){if(e.COMM.layerMgr.checkIfCurrInGameRoom()){var o=1280+((r.subType,CONST.baccaratSubType.mi,r.type==CONST.tableType.baccarat||r.type==CONST.tableType.dragonTiger)?0:150);t.width=o}}else console.error("PC30:doAdjustMsgPosition failed.")},a.prototype.onExit=function(){t.prototype.onExit.call(this);mo.emitter.un("activate_delay",this._closeAllDlg,this),mo.emitter.unAll("closedlg"),mo.emitter.unAll("adjustMsgPosition")},a.prototype._closeAllDlg=function(t){void 0===t&&(t=!1);if(!e.GTS.mgr.isNetErr)try{this.tray_dlg.removeChildren(),e.COMM.layerMgr.baseTopBar.activated=!0}catch(e){console.error("close Dlg with error:",e)}},a}(mo.EUI.UIScene);t.HomeScene=a,__reflect(a.prototype,"G.HOME.HomeScene");var i=new mo.ModuleCfgItem;i.targetClass=a,mo.moduleMgr.registerModule(i)}(e.HOME||(e.HOME={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.call(this)||this}return __extends(r,t),r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var e=new egret.Shape;e.graphics.beginFill(0,0),e.graphics.lineStyle(1,13352087),e.graphics.drawRect(0,0,525,210),e.x=10,e.y=30,e.graphics.endFill(),this.addChild(e)},r.prototype.onExit=function(){t.prototype.onExit.call(this);e.COMM.BB.unregisterBBRoomListDataReceiver(this.data.matchId)},r.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var r=this;r.data&&r.data.matchId&&(r.label_roomIdContent.text=mo.STR.format("${{g_round_no_bb}} : %s",r.data.matchId),e.COMM.BB.registerBBRoomListDataReceiver(r.data.matchId,r.dataReceiver.bind(this)),r.initluzhu(),r.refreshLuzhu(),r.refreshDetailInfo())},r.prototype.initluzhu=function(){var t=this,r={gridSize:35,showGrid:!0,isScroll:!1,maxCol:15,maxRow:6,grid_x:10,grid_y:30,lineColor:13352087,alpha:.3,fillColor:0};r.drawType=e.COMM.BB.testDrawType,r.res=e.BACC.LZllRes;var o=new e.COMM.BBBigRoadLuzhu(t.data.matchId);o.initWithGroup(t.baseGroup,r),t.zhuPanLuPainter=o},r.prototype.refreshLuzhu=function(){var t=e.COMM.BB.retrieveAllLuzhuData(this.data.matchId);if(t&&4==t.length){var r=t[0];this.zhuPanLuPainter.setData(r)}},r.prototype.refreshDetailInfo=function(){var t=this,r=e.COMM.BB.getDetailInfo(t.data.matchId);r&&(t.label_p.text=r.p.toString(),t.label_B.text=r.b.toString(),t.label_T.text=r.t.toString(),t.label_open.text=r.rl.toString(),r.rl>0?(t.label_people.visible=!0,t.label_people.text=mo.D.langCodeToTxt(r.r>=e.COMM.MAX_PEOPLE_IN_ROOM?"g_gameroom_full":"g_gameroom_opened"),t.coverGroup.visible=!1):(t.label_people.visible=!1,t.coverGroup.visible=!0))},r.prototype.dataReceiver=function(t){switch(t){case e.COMM.BBEvents.UPDATE_LUZHU:this.refreshLuzhu();break;case e.COMM.BBEvents.UPDATE_DETAIL_INFO:this.refreshDetailInfo()}},r.prototype._tap_btn_touch=function(){var t={};t.type=CONST.tableType.BB,t.isQuick=!1,t.matchId=this.data.matchId,e.COMM.layerMgr.enterGameRoom(t,CONST.tableType.BB)},r}(mo.EUI.ItemRenderer);t.BBGameItem=r,__reflect(r.prototype,"G.HOME.BBGameItem")}(e.HOME||(e.HOME={}))}(G||(G={}));__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(r){function o(){var e=r.apply(this,arguments)||this;return e.moveTime=1e3,e.waitTime=12e3,e}return __extends(o,r),o.prototype._initProp=function(){r.prototype._initProp.call(this);var e=this;e._Item_list_game=t.BBGameItem,e.isRequestMoreRoom=!1,mo.emitter.on("InfoScene_onExit",e.showNewGuide,e)},o.prototype.onEnter=function(){r.prototype.onEnter.call(this);var t=this;t.scrollerForBB.viewport=this.list_game,t.refreshGameroom(),mo.emitter.on(e.COMM.mo_BBNotify_reEnterRoom,t.reEnterGameroom.bind(this)),t.scrollerForBB.addEventListener(mouse.MouseEvent.MOUSE_OVER,t.onListMouseOver.bind(t,t.scrollerForBB),t),t.scrollerForBB.addEventListener(mouse.MouseEvent.MOUSE_OUT,t.onListMouseOver.bind(t,t.scrollerForBB),t),e.COMM.BB.registerBBLayerDataReceiver(t.dataReceiver.bind(this)),t.grp_matchsNew.y=625,e.GW.mgr.ifGameSingle()&&(t.grp_btns.y=230,t.groupForAll.y=280,t.groupForAll.height=489,t.grp_ads.y=90),mo.PROJ.isPc&&e.GW.mgr.ifGameSingle()&&(t.groupForAll.height=500,t.groupForAll.horizontalCenter=0,t.grp_ads.horizontalCenter=0,t.grp_match.horizontalCenter=0)},o.prototype.showNewGuide=function(){e.GameGuide.GameGuideView.show({type:e.GameGuide.GameGuideType.BLOCK_CHAIN_BACCARAT_LAYER,haveSeenTipTitles:e.GTS.userCtrl.getLogOnceOpt(e.GameGuide.GameGuideType.BLOCK_CHAIN_BACCARAT_LAYER),treeRoot:this}),e.GameGuide.GameGuideView.isNeedCheckShowGameGuide=!1},o.prototype.onListMouseOver=function(e,t){var r=this;switch(t.type){case mouse.MouseEvent.MOUSE_OVER:egret.MainContext.instance.stage.addEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r);break;case mouse.MouseEvent.MOUSE_OUT:egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,r.wheel,r)}},o.prototype.wheel=function(t){var r=this;e.COMM.layerMgr.baseTopBar.activated&&(r.scrollerForBB.viewport.contentHeight<r.scrollerForBB.height||(t.data<0&&(r.scrollerForBB.viewport.scrollV+=-t.data*CONST.wheelRatio),t.data>0&&(r.scrollerForBB.viewport.scrollV-=t.data*CONST.wheelRatio),r.scrollerForBB.viewport.scrollV>=r.scrollerForBB.viewport.contentHeight-r.scrollerForBB.height&&(r.scrollerForBB.viewport.scrollV=r.scrollerForBB.viewport.contentHeight-r.scrollerForBB.height),r.scrollerForBB.viewport.scrollV<=0&&(r.scrollerForBB.viewport.scrollV=0)))},o.prototype._childrenCreated=function(){r.prototype._childrenCreated.call(this);var e=this;e.scrollerForBB.addEventListener(egret.Event.CHANGE,e.onChange,this),e.grp_ads.mask=new egret.Rectangle(0,0,e.grp_ads.width,e.grp_ads.height)},o.prototype.onExit=function(){r.prototype.onExit.call(this);var t=this;mo.emitter.unAll(e.COMM.mo_BBNotify_reEnterRoom),egret.MainContext.instance.stage.removeEventListener(mouse.MouseEvent.MOUSE_WHEEL,this.wheel,this),t.scrollerForBB.removeEventListener(egret.Event.CHANGE,t.onChange,t),e.COMM.BB.ifInGameRoom()?(e.COMM.BB.unregisterAllRoomList(),e.COMM.BB.unregisterBBLayerDataReceiver()):(e.COMM.BB.exitLobby((function(){})),e.COMM.BB.resetAll()),this.currAds&&egret.Tween.removeTweens(this.currAds),this.nextAds&&egret.Tween.removeTweens(this.nextAds)},o.prototype.initAds=function(){var e=this;if(e.curr=e.ads.shift(),e.currAds.source=e.curr.source,e.initIndex(),e.ads.length>=1){e.next=e.ads.shift(),e.nextAds.source=e.next.source;var t=setTimeout((function(){e.moveAds(),clearTimeout(t)}),e.waitTime)}},o.prototype.moveAds=function(){var t=this,r=t.grp_index.getChildByName("rect_"+t.currPage);r.fillColor=9474192,t.currPage++,t.currPage>t.totalPage&&(t.currPage=1),(r=t.grp_index.getChildByName("rect_"+t.currPage)).fillColor=16711680,egret.Tween.removeTweens(t.currAds),egret.Tween.removeTweens(t.nextAds),egret.Tween.get(t.currAds).to({x:-t.grp_ads.width},t.moveTime).wait(t.waitTime),egret.Tween.get(t.nextAds).to({x:e.GW.mgr.ifGameSingle()?-.5:10},t.moveTime).wait(t.waitTime).call((function(){t.currAds.x=t.grp_ads.width,t.tempAds=t.currAds,t.currAds=t.nextAds,t.nextAds=t.tempAds,t.ads.push(t.curr),t.curr=t.next,t.next=t.ads.shift(),t.nextAds.source=t.next.source,t.moveAds()}))},o.prototype.initIndex=function(){var e=this;e.currPage=1;for(var t=0;t<e.totalPage;t++){var r=new eui.Rect(12,12,9474192);0==t&&(r.fillColor=16711680),r.name="rect_"+(t+1),r.ellipseWidth=12,r.ellipseHeight=12,e.grp_index.addChild(r)}},o.prototype.dataChanged=function(){r.prototype.dataChanged.call(this);var t=this;if(e.GTS.mgr.entryTable){var o=e.GTS.mgr.entryTable;if(o.match){var a=e.BASE.resHelper.getMatchEntryImg(o.match.id);e.getRemoteImg(a,(function(r,o){a==o&&(t.img_matchBg.source=r||"match_entry_pc",t.grp_ads.visible=!1,t.grp_matchsNew.visible=!1,e.GW.mgr.ifGameSingle()?(t.img_matchBg.source=r||"match_entry_pc",t.grp_ads.visible=!0,t.grp_ads.y=80,t.btn_hot.y=210,t.btn_new.y=210,t.groupForAll.y=250,t.grp_matchsNew.visible=!1,t.grp_match.visible=!1):(t.img_matchBg.source=r||"match_entry_pc",t.grp_ads.visible=!1,t.grp_matchsNew.visible=!1,t.grp_match.visible=!0),t.img_event0.source="ntc_event")}))}}else t.grp_ads.visible=!0,t.grp_matchsNew.visible=!1,t.grp_match.visible=!1,t.currAds=t.img_event0,t.currAds.x=10,t.nextAds=t.img_event1,t.nextAds.x=t.grp_ads.width,t.ads=[],e.GTS.mgr.getAdList((function(r){var o,a=r,i=0;if(a.length>0){t.totalPage=a.length;for(var n=void 0,s=function(r){n=a[r].imgUrl,e.getRemoteImg(n,(function(e){(o={}).source=e||"ntc_event",o.ads=a[r],t.ads.push(o),++i==a.length&&t.initAds()}))},l=0,c=a.length;c>l;l++)s(l)}else t.totalPage=1,(o={}).source="ntc_event",o.ads=null,t.ads.push(o),t.initAds()}))},o.prototype.onChange=function(){var t=this;if(t.list_game.scrollV+t.list_game.height>=t.list_game.contentHeight){if(t.isRequestMoreRoom)return;if(t.isRequestMoreRoom=!0,e.COMM.BB.ifAllGameIndexRequest())return;e.COMM.BB.requestGameRooms((function(){t.isRequestMoreRoom=!1}))}},o.prototype.dataReceiver=function(){},o.prototype.reEnterGameroom=function(){this.refreshGameroom(),e.COMM.BB.registerBBLayerDataReceiver(this.dataReceiver.bind(this))},o.prototype.refreshGameroom=function(){var t=this;if(!(t.list_game.dataProvider.length>0)){var r=e.COMM.BB.getAllRoomData(),o=new eui.ArrayCollection(r);t.list_game.dataProvider=o,t.scrollerForBB.stopAnimation()}},o.prototype._tap_btn_new=function(){var t={};t.type=CONST.tableType.BB,t.isQuick=!0,t.quickMode=e.COMM.QUICK_MODE_NEW,e.COMM.layerMgr.enterGameRoom(t,CONST.tableType.BB)},o.prototype._tap_btn_hot=function(){var t={};t.type=CONST.tableType.BB,t.isQuick=!0,t.quickMode=e.COMM.QUICK_MODE_HOT,e.COMM.layerMgr.enterGameRoom(t,CONST.tableType.BB)},o.prototype._tap_img_matchBg=function(){this.getTableCtrl()},o.prototype.getTableCtrl=function(){var t=this,r=e.GTS.mgr.entryTable;r&&(e.playAudio("btnclick"),e.GTS.mgr.getTableCtrlFromServer(r.code,(function(r){t.tableCtrl=r,r.isMultiRange?e.COMM.LimitSelectDlg.show({tableCtrl:r,selectCallBack:t.gotoFast,target:t}):t.gotoFast()})))},o.prototype.gotoFast=function(){var t=this.tableCtrl;e.COMM.layerMgr.enterGameRoom(t,t.type,!1,null,null)},o.prototype._tap_btn_rank=function(){e.playAudio("btnclick");var t=e.GTS.mgr.entryTable,r=t.match.id,o=t.match.startTime;e.GTS.mgr.getMatchRankList(r,(function(t){e.COMM.MatchRankDlg.show({rankList:t,startTime:o})}))},o.prototype._tap_grp_ads=function(e){e.target==this.currAds?this.curr&&this.curr.ads&&this.curr.ads.url&&window.open(this.curr.ads.url,"_blank"):e.target==this.nextAds&&this.next&&this.next.ads&&this.next.ads.url&&window.open(this.next.ads.url,"_blank")},o.prototype._tap_btn_watch=function(){e.GTS.mgr.getTableCtrlFromServer(e.GTS.mgr.entryTable.code,(function(t){mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_BACC),console.log(t.hasEnrolled()),setTimeout((function(){mo.emitter.emit("watchMatch",t)}),200)}))},o.prototype._tap_btn_enterGame=function(){e.GTS.mgr.getTableCtrlFromServer(e.GTS.mgr.entryTable.code,(function(t){mo.emitter.emit(CONST.enterTabelListEvent.bacc),e.RCD.mgr.recordState(e.RCD.RcdState.MENU_BACC),console.log(t.hasEnrolled()),setTimeout((function(){mo.emitter.emit("joinMatch",t)}),200)}))},o}(mo.EUI.Layer);t.BBLayer=r,__reflect(r.prototype,"G.HOME.BBLayer"),e.GC.gc.registerClass(r.__className,r)}(e.HOME||(e.HOME={}))}(G||(G={}));var G;__reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(t){var r=function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype._initProp=function(){t.prototype._initProp.call(this);var r=this;r.matchId="",r.ifPressBtnBack=!1,r.ifAnimationPlaying_p=!1,r.ifAnimationPlaying_pp=!1,r.ifAnimationPlaying_t=!1,r.ifAnimationPlaying_b=!1,r.ifAnimationPlaying_bp=!1,r.ifNormalAnimationPlaying=!1,r.ifMatchEnd=!1,r.ifShowedResult=!1,e.GameGuide.GameGuideView.show({type:e.GameGuide.GameGuideType.BLOCK_CHAIN_BACCARAT_ROOM,haveSeenTipTitles:e.GTS.userCtrl.getLogOnceOpt(e.GameGuide.GameGuideType.BLOCK_CHAIN_BACCARAT_ROOM),treeRoot:r})},r.prototype.onEnter=function(){t.prototype.onEnter.call(this);var r=this;r.matchId=e.COMM.BB.registerBBGameRoomDataReceiver(r.dataReceiver.bind(this)),r.label_roomIdContent.text=mo.STR.format("${{g_round_no_bb}} : %s",r.matchId),r.initluzhus(),r.refreshLuzhu(),r.refreshDetailInfo(),r.initChipBar(),r.updateQuickBetModeBtn(),r.updateQuickBetValueLabels(),r.label_natureContent.addEventListener(egret.Event.RENDER,r.natureContentScale,r),r.label_ppairContent.addEventListener(egret.Event.RENDER,r.ppairContentScale,r),r.label_bpairContent.addEventListener(egret.Event.RENDER,r.bpairContentScale,r),r.mainLuZhuScrollerBar.init(r.mainLuzhu,"h")},r.prototype.onExit=function(){t.prototype.onExit.call(this);var r=this;r.betBoard&&(r.betBoard.stopClockCountDown(),r.betBoard.reset()),r.ifPressBtnBack||("BBGameLayer"!=e.COMM.layerMgr.currLayerName?e.COMM.BB.exitGameRoom(parseInt(r.matchId),(function(){e.COMM.BB.exitLobby((function(){e.COMM.BB.resetAll()}))})):e.COMM.BB.exitGameRoom(parseInt(r.matchId),(function(){}))),r.label_natureContent.removeEventListener(egret.Event.RENDER,r.natureContentScale,r),r.label_ppairContent.removeEventListener(egret.Event.RENDER,r.ppairContentScale,r),r.label_bpairContent.removeEventListener(egret.Event.RENDER,r.bpairContentScale,r),mo.emitter.emit(e.GameGuide.GameGuideView.CLOSE_GAME_GUIDE_EVENT,{})},r.prototype.initluzhus=function(){var e=this;e.mainLuzhuPainter=e.newMainLuzhuWithParam(e.mainLuzhu,82,30,6,16777215,0),e.bigRoadLuzhuPainter=e.newBigRoadLuzhuWithParam(e.bigRoad,42,30,6,16777215,0),e.bigEyeRoadLuzhuPainter=e.newBigEyeLuzhuWithParam(e.bigeyeRoad,33,30,6,16777215,0),e.smallRoadLuzhuPainter=e.newSmallRoadLuzhuWithParam(e.smallRoad,33,30,6,16777215,0),e.cockRachRoadLuzhuPainter=e.newCockrachRoadLuzhuWithParam(e.cockrachRoad,33,30,6,16777215,0)},r.prototype.initChipBar=function(){var t=this;if(t.chipBar.chipNum()<=0){var r=[];r.push(1),r.push(5),r.push(10),r.push(20),r.push(50),r.push(100),r.push(200),r.push(500),r.push(1e3),r.push(2e3),r.push(5e3),r.push(1e4),r.push(2e4),r.push(5e4),r.push(1e5),r.push(2e5),r.push(5e5),t.chipBar.setChipData(r,!1),t.chipBar.setChipSelectCB(t.chipSelected.bind(this)),t.chipBar.x=320,t.chipBar.y=0;var o=1;-1!=e.COMM.BB.getQuickBetChipValue()&&(o=e.COMM.BB.getQuickBetChipValue()),t.chipBar.setShownChip(o)}},r.prototype.chipSelected=function(t){e.COMM.BB.setQuickBetChipValue(t)},r.prototype.newMainLuzhuWithParam=function(t,r,o,a,i,n){var s=this.initOpt(r,o,a,i,n);return new e.COMM.BBGameMainLuzhu(parseInt(this.matchId),t,s)},r.prototype.newBigRoadLuzhuWithParam=function(t,r,o,a,i,n){var s=this.initOpt(r,o,a,i,n),l=new e.COMM.BBBigRoadLuzhu(parseInt(this.matchId));return l.initWithScroll(t,s),l},r.prototype.newBigEyeLuzhuWithParam=function(t,r,o,a,i,n){var s=this.initOpt(r,o,a,i,n);return new e.COMM.BBBigEyeLuzhu(parseInt(this.matchId),t,s)},r.prototype.newSmallRoadLuzhuWithParam=function(t,r,o,a,i,n){var s=this.initOpt(r,o,a,i,n);return new e.COMM.BBSmallRoadLuzhu(parseInt(this.matchId),t,s)},r.prototype.newCockrachRoadLuzhuWithParam=function(t,r,o,a,i,n){var s=this.initOpt(r,o,a,i,n);return new e.COMM.BBCockrachRoadLuzhu(parseInt(this.matchId),t,s)},r.prototype.refreshLuzhu=function(){var t=this,r=e.COMM.BB.retrieveRoundsListData(t.matchId);r&&t.mainLuzhuPainter.setData(r);var o=e.COMM.BB.retrieveAllLuzhuData(t.matchId);if(4==o.length){var a=o[0],i=o[1],n=o[2],s=o[3];t.bigRoadLuzhuPainter.setData(a),t.bigEyeRoadLuzhuPainter.setData(i),t.smallRoadLuzhuPainter.setData(n),t.cockRachRoadLuzhuPainter.setData(s)}},r.prototype.natureContentScale=function(){var e=this;e.label_natureContent.text=e.label_natureContent.text,e.label_natureContent.removeEventListener(egret.Event.RENDER,e.natureContentScale,e)},r.prototype.ppairContentScale=function(){var e=this;e.label_ppairContent.text=e.label_ppairContent.text,e.label_ppairContent.removeEventListener(egret.Event.RENDER,e.ppairContentScale,e)},r.prototype.bpairContentScale=function(){var e=this;e.label_bpairContent.text=e.label_bpairContent.text,e.label_bpairContent.removeEventListener(egret.Event.RENDER,e.bpairContentScale,e)},r.prototype.refreshDetailInfo=function(){var t=this,r=e.COMM.BB.getDetailInfo(t.matchId);r&&(t.label_p.text=r.p.toString(),t.label_B.text=r.b.toString(),t.label_T.text=r.t.toString(),t.label_natureContent.text=mo.STR.format("${{g_natural}} : %s",r.n.toString()),t.label_ppairContent.text=mo.STR.format("${{g_player_pair_sim}} : %s",r.pp.toString()),t.label_bpairContent.text=mo.STR.format("${{g_banker_pair_sim}} : %s",r.bp.toString()),0==r.rl?(t.image_detail.visible=!0,t.ifMatchEnd=!0):t.image_detail.visible=!1)},r.prototype.initOpt=function(t,r,o,a,i){var n={};return n.gridSize=t,n.showGrid=!0,n.isScroll=!0,n.maxCol=r,n.maxRow=o,n.grid_x=0,n.grid_y=4,n.lineColor=a,n.fillColor=i,n.drawType=e.COMM.BB.testDrawType,n.res=e.BACC.LZllRes,n},r.prototype.dataReceiver=function(t,r){var o=this;switch(t){case e.COMM.BBEvents.READY_TO_PLAY_ROUND:e.GTS.userCtrl.type==CONST.userType.tourist?mo.MSG.show(e.id_c_msgCode.warning_tourist_account_no_use):(o.startBet(r),o.showQuickBtns(!1));break;case e.COMM.BBEvents.CLOSE_BETBOARD_WITHOUT_BET:o.closeBetBoard();break;case e.COMM.BBEvents.PRESS_CONFIRM_BTN:o.betBoard.stopClockCountDown();break;case e.COMM.BBEvents.BET_RESULT_SHOW:o.closeBetBoard(),o.betResult.prepareShowResult(r),e.COMM.layerMgr.baseTopBar.showGameBeginAnimation1((function(){o.betResult.showResult(r,!0,!0),o.betResult.visible=!0}));break;case e.COMM.BBEvents.CLOSE_BETRESULT:o.betResult.visible=!1,o.showBackBtn(!0),o.ifMatchEnd&&!o.ifShowedResult&&o.showMatchEnd();break;case e.COMM.BBEvents.RESULT_HISTORY_SHOW:o.betResult.showResult(r,!1,!0),o.betResult.visible=!0,o.showBackBtn(!1);break;case e.COMM.BBEvents.KICK_BY_SERVER:if(o._tap_btn_back(),r){var a=mo.D.langCodeToTxt("g_kickFromBB");mo.MSG.show(a)}break;case e.COMM.BBEvents.UPDATE_LUZHU:o.refreshLuzhu(),r&&(o.mainLuzhuPainter.playBoomAnimation(r),o.bigRoadLuzhuPainter.setLuzhuFocus(r,!0));break;case e.COMM.BBEvents.UPDATE_DETAIL_INFO:o.refreshDetailInfo();break;case e.COMM.BBEvents.MATCH_FINISH:o.ifMatchEnd=!0;break;case e.COMM.BBEvents.FOCUS_BIGROAD_LUZHU:o.mainLuzhuPainter&&o.bigRoadLuzhuPainter&&o.bigRoadLuzhuPainter.setLuzhuFocus(r);break;case e.COMM.BBEvents.UPDATE_TOTAL_BET_LABEL:null!=r&&o.updateTotalBetLabel(r)}},r.prototype.showMatchEnd=function(){this._tap_image_detail(),this.ifShowedResult=!0},r.prototype.startBet=function(e){var t=this;t.betBoard.visible=!0,t.betBoard.show(parseInt(t.matchId),e,!0),t.moveBBBetboard(!0),t.showBackBtn(!1)},r.prototype.closeBetBoard=function(){var t=this;t.betBoard.reset(),t.betBoard.visible=!1,t.moveBBBetboard(!1),t.showBackBtn(!0),t.showQuickBtns(!0),e.COMM.BB.ifQuickBetMode()||t.updateTotalBetLabel(0)},r.prototype.showBackBtn=function(){},r.prototype.showQuickBtns=function(e){this.btn_quickMode.visible=e,this.label_quickMode.visible=e},r.prototype.updateQuickBetModeBtn=function(t){var r=this;e.COMM.BB.ifQuickBetMode()?(r.btn_quickMode.selected=!0,r.moveQuickBet(!0,t),r.updateQuickBetValueLabels()):(r.btn_quickMode.selected=!1,r.moveQuickBet(!1,t),r.chipBar.resetToLastChip(),r.updateTotalBetLabel(0))},r.prototype.updateQuickBetValueLabels=function(){var t=this,r=e.COMM.BB.retrieveQuickBetInfo();if(r){for(var o=0,a=0;a<r.length;a++){var i=r[a];if(i){o+=i.betValue;var n=e.UTIL.NUM.getSplitNumStr(parseFloat(i.betValue));switch(i.betType){case e.COMM.BBWin.playerpair_win:t.label_quickbet_pp.text=n;break;case e.COMM.BBWin.player_win:t.label_quickbet_p.text=n;break;case e.COMM.BBWin.tie_win:t.label_quickbet_t.text=n;break;case e.COMM.BBWin.banker_win:t.label_quickbet_b.text=n;break;case e.COMM.BBWin.bankerpair_win:t.label_quickbet_bp.text=n}}}t.updateTotalBetLabel(o)}},r.prototype.addQuickBetInfo=function(t){var r=this;r.chipBar.resetToLastChip(),e.COMM.BB.addQuickBetInfo(t,r.chipBar.choiceValue),r.updateQuickBetValueLabels()},r.prototype.focusOnBetBtn=function(e,t){if(e){var r=e.scaleX,o=egret.Tween.get(e);egret.Tween.removeTweens(o),o.to({scaleX:1.5*r,scaleY:1.5*r},200,egret.Ease.quartOut).to({scaleX:r,scaleY:r},200).call((function(){t()}))}},r.prototype.moveBBBetboard=function(e){var t=this;if(t.betBoard){if(e){t.betBoard.visible=!0,t.betBoard.x=-500;var r=egret.Tween.get(t.betBoard);egret.Tween.removeTweens(r),r.to({x:0},800,egret.Ease.quartOut).call((function(){}))}else t.betBoard.visible=!1,t.betBoard.x=-500}},r.prototype.moveQuickBet=function(e,t){var r=this;if(r.groupForQuickBet){var o=1180;if(e)if(t){r.groupForQuickBet.visible=!0,r.groupForQuickBet.x=o;var a=egret.Tween.get(r.groupForQuickBet);egret.Tween.removeTweens(a),a.to({x:665},800,egret.Ease.quartOut).call((function(){r.btn_quickMode.enabled=!0}))}else r.groupForQuickBet.x=665,r.groupForQuickBet.visible=!0,r.btn_quickMode.enabled=!0;else if(r.groupForQuickBet.x=665,t){a=egret.Tween.get(r.groupForQuickBet);egret.Tween.removeTweens(a),a.to({x:o},200,egret.Ease.quartOut).call((function(){r.btn_quickMode.enabled=!0,r.groupForQuickBet.visible=!1}))}else r.groupForQuickBet.x=o,r.groupForQuickBet.visible=!1,r.btn_quickMode.enabled=!0}},r.prototype.updateTotalBetLabel=function(t){this.label_total_bet.text=mo.STR.format("${{user_total_bet}}:%s",e.UTIL.NUM.getSplitNumStr(parseFloat(t)))},r.prototype._tap_image_detail=function(){var t=this;e.COMM.BB.retrieveRoomDetailInfo(t.matchId,(function(e){if(t.groupForDetail&&(t.groupForDetail.visible=!0,e&&(t.label_idContent.text=t.matchId,e.rpc&&t.label_rpcContent&&(t.label_rpcContent.text=e.rpc),e.address&&t.label_addressContent&&(t.label_addressContent.text=e.address),e.result))){var r="${{g_BB_Content}}:\n"+t.appendResultString(e.result);if(t.label_roundContent.size=36,t.label_roundContent.text=r,"my_mm"==mo.PROJ.lang||"th_th"==mo.PROJ.lang||"km_kh"==mo.PROJ.lang||"hi_in"==mo.PROJ.lang||"ta_in"==mo.PROJ.lang){var o=new mo.EUI.Label;o.size=36,o.width=1791,o.scaleX=.5,o.scaleY=.5,o.text=r,t.label_roundContent.height=o.height}}t.showBackBtn(!1)}))},r.prototype.appendResultString=function(e){if(!e||0==e.length)return"";for(var t="",r=0;r<e.length;r++){t+=e[r],r!=e.length-1&&(t+=",")}return t},r.prototype._tap_baseRect=function(){var e=this;e.groupForDetail&&(e.groupForDetail.visible=!1),e.showBackBtn(!0)},r.prototype._tap_btn_back=function(){e.COMM.layerMgr.backToPrevLayer()},r.prototype._tap_btn_quickMode=function(){var t=this;t.btn_quickMode.enabled=!1,e.COMM.BB.setQuickBetMode(t.btn_quickMode.selected),t.updateQuickBetModeBtn(!0)},r.prototype._tap_image_quickbet_pp=function(){var t=this;t.ifAnimationPlaying_pp||(t.ifAnimationPlaying_pp=!0,t.focusOnBetBtn(t.image_quickbet_pp,(function(){t.ifAnimationPlaying_pp=!1}))),t.addQuickBetInfo(e.COMM.BBWin.playerpair_win)},r.prototype._tap_image_quickbet_p=function(){var t=this;t.ifAnimationPlaying_p||(t.ifAnimationPlaying_p=!0,t.focusOnBetBtn(t.image_quickbet_p,(function(){t.ifAnimationPlaying_p=!1}))),t.addQuickBetInfo(e.COMM.BBWin.player_win)},r.prototype._tap_image_quickbet_t=function(){var t=this;t.ifAnimationPlaying_t||(t.ifAnimationPlaying_t=!0,t.focusOnBetBtn(t.image_quickbet_t,(function(){t.ifAnimationPlaying_t=!1}))),t.addQuickBetInfo(e.COMM.BBWin.tie_win)},r.prototype._tap_image_quickbet_b=function(){var t=this;t.ifAnimationPlaying_b||(t.ifAnimationPlaying_b=!0,t.focusOnBetBtn(t.image_quickbet_b,(function(){t.ifAnimationPlaying_b=!1}))),t.addQuickBetInfo(e.COMM.BBWin.banker_win)},r.prototype._tap_image_quickbet_bp=function(){var t=this;t.ifAnimationPlaying_bp||(t.ifAnimationPlaying_bp=!0,t.focusOnBetBtn(t.image_quickbet_bp,(function(){t.ifAnimationPlaying_bp=!1}))),t.addQuickBetInfo(e.COMM.BBWin.bankerpair_win)},r.prototype._tap_btn_reset_qb=function(){this.chipBar.resetToLastChip(),e.COMM.BB.resetQuickBetInfo(),this.updateQuickBetValueLabels()},r.prototype._tap_btn_back_Lobby=function(){this._tap_btn_back()},r.prototype._tap_btn_closepanel=function(){this._tap_baseRect()},r.prototype._tap_btn_quick_new=function(){var t=this;t.ifPressBtnBack=!0,e.COMM.BB.unregisterBBGameRoomDataReceiver(t.matchId),t.betBoard&&t.betBoard.reset();var r={};r.type=CONST.tableType.BB,r.isQuick=!0,r.quickMode=e.COMM.QUICK_MODE_NEW,e.COMM.layerMgr.fastEnterGameRoom(r,CONST.tableType.BB,e.GW.mgr.ifGameSingle(),(function(){}))},r}(mo.EUI.Layer);t.BBGameLayer=r,__reflect(r.prototype,"G.HOME.BBGameLayer"),e.GC.gc.registerClass(r.__className,r)}(e.HOME||(e.HOME={}))}(G||(G={})),function(e){e.HOME||(e.HOME={}),mo.emitter.on(CONST.enterTabelListEvent.bb,(function(t){e.COMM.layerMgr.leaveApi(!0,(function(){})),e.COMM.BB.initBBMgr((function(){"BBLayer"==e.COMM.layerMgr.currLayerName?mo.emitter.emit(e.COMM.mo_BBNotify_reEnterRoom):e.COMM.layerMgr.pushLayer(e.HOME.BBLayer),t&&t()}),!1)}))}(G||(G={}));
